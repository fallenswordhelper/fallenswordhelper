import{ap as s,y as e,z as a,ak as i,al as l,J as t,dW as c,aG as n,E as v,aF as r,C as d,Q as o,R as u,K as m,F as g,N as $,bP as f,bQ as b,D as h,G as k,bO as y,O as C,ad as H,s as _,H as p,T as G,bb as w,bc as L,e7 as S,b$ as F,e8 as O,bK as P,aA as R,t as j}from"./calfSystem-Cs6CSxoU.js"
import{r as x}from"./reliclist-BOzIgkiA.js"
var A=d("<a> </a>"),D=d('<div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"><a> </a></div> <div class="svelte-s68cg2"><!></div> <div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"><!></div>',1),K=d('<div class="content grid svelte-s68cg2"><div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <!></div>'),N=d('<div class="content svelte-s68cg2"> </div>'),Q=d(" <br/>",1),T=d('<div class="content svelte-s68cg2"></div>')
function z(s,d){e(d,!0)
let R=a(d,"visible",15,!0),j=i(l([])),z=i(l([])),E=-1,I=""
function J(s){_("Relic List",s)}function M(s){t(z,s.concat(m(z)),!0)}const U=(s,e)=>s?.attributes?.find((s=>e=>e.id===s)(e)),W=(s,e)=>U(s,e)?.value??"",X=s=>U(s,6),q=(s,e)=>E*(s.time-e.time),B=(s,e)=>U(s,e)?.value??0,V=s=>(e,a)=>E*(B(e,s)-B(a,s)),Y=(s,e)=>E*F(s.guild?.name??"",e.guild?.name??""),Z=(s,e)=>E*F(s.name,e.name),ss=s=>s.location.realm.min_level,es=(s,e)=>E*(ss(s)-ss(e))
function as(s,e){E=I===s?-1*E:1,t(j,m(j).slice().sort(e),!0),I=s}function is(s,e){J(s),as(s,e)}async function ls(s=0,e=100){M([`offset ${s}`])
const a=await x(null,s,e)
if(a?.s)return a.r.remaining_relics?a.r.relics.concat(await ls(s+a.r.relics.length,Math.min(100,a.r.remaining_relics))):a.r.relics}async function ts(){M(["Loading..."])
const s=await ls()
H(s)&&(t(j,s.filter(X),!0),as("sort by level",es))}let cs=i(l(Promise.resolve()))
t(cs,ts(),!0)
{const e=s=>{var e=b("Relic List")
$(s,e)}
c(s,{close:function(){J("close"),R(!1)},get visible(){return R()},title:e,children:(s,e)=>{var a=n(),i=v(a)
r(i,()=>m(cs),s=>{var e=T()
k(e,21,()=>m(z),y,(s,e)=>{var a=Q(),i=v(a)
o(()=>u(i,`${m(e)??""} `)),$(s,a)}),$(s,e)},s=>{var e=K(),a=g(e),i=g(a)
f(i,{onclick:()=>{is("sort by level",es)},children:(s,e)=>{var a=b("Level")
$(s,a)},$$slots:{default:!0}})
var l=h(a,2),t=g(l)
f(t,{onclick:()=>{is("sort by name",Z)},children:(s,e)=>{var a=b("Name")
$(s,a)},$$slots:{default:!0}})
var c=h(l,2),n=g(c)
f(n,{onclick:()=>{is("sort by guild",Y)},children:(s,e)=>{var a=b("Guild")
$(s,a)},$$slots:{default:!0}})
var r=h(c,2),d=g(r)
f(d,{onclick:()=>{is("sort by stam gain",V(6))},children:(s,e)=>{var a=b("Stam Gain")
$(s,a)},$$slots:{default:!0}})
var y=h(r,2),C=g(y)
f(C,{onclick:()=>{is("sort by attack",V(0))},children:(s,e)=>{var a=b("Atk")
$(s,a)},$$slots:{default:!0}})
var H=h(y,2),_=g(H)
f(_,{onclick:()=>{is("sort by damage",V(4))},children:(s,e)=>{var a=b("Dmg")
$(s,a)},$$slots:{default:!0}})
var F=h(H,2),R=g(F)
f(R,{onclick:()=>{is("sort by stamina",V(5))},children:(s,e)=>{var a=b("Stam")
$(s,a)},$$slots:{default:!0}})
var x=h(F,2),N=g(x)
f(N,{onclick:()=>{is("sort by gold gain",V(7))},children:(s,e)=>{var a=b("Gold Gain")
$(s,a)},$$slots:{default:!0}})
var Q=h(x,2),T=g(Q)
f(T,{onclick:()=>{is("sort by xp gain",V(8))},children:(s,e)=>{var a=b("XP Gain")
$(s,a)},$$slots:{default:!0}})
var z=h(Q,2),E=g(z)
f(E,{onclick:()=>{is("sort by time",q)},children:(s,e)=>{var a=b("Time")
$(s,a)},$$slots:{default:!0}})
var I=h(z,2)
k(I,17,()=>m(j),s=>s.id,(s,e)=>{var a=D(),i=v(a),l=g(i),t=h(i,2),c=g(t)
c.__click=()=>J("view relic on UFSG")
var n=g(c),r=h(t,2),d=g(r),f=s=>{var a=A()
a.__click=()=>J("view guild")
var i=g(a)
o(()=>{G(a,"href",`${S??""}${m(e).guild.id??""}`),u(i,m(e).guild.name)}),$(s,a)}
p(d,s=>{m(e).guild&&s(f)})
var k=h(r,2),y=g(k),C=h(k,2),H=g(C),_=h(C,2),F=g(_),R=h(_,2),j=g(R),x=h(R,2),K=g(x),N=h(x,2),Q=g(N),T=h(N,2),z=g(T),E=s=>{var a=b()
o(s=>u(a,s),[()=>function(s){const[e,a,i,l]=O(s)
return`${e}d ${P(a)}h ${P(i)}m ${P(l)}s`}(m(e).time)]),$(s,a)}
p(z,s=>{m(e).time&&s(E)}),o((s,a,i,t,v,r)=>{u(l,m(e).location.realm.min_level),G(c,"href",`${w??""}relics${L}view&relic_id=${m(e).id??""}`),u(n,m(e).name),u(y,s),u(H,a),u(F,i),u(j,t),u(K,v),u(Q,r)},[()=>W(m(e),6),()=>W(m(e),0),()=>W(m(e),4),()=>W(m(e),5),()=>W(m(e),7),()=>W(m(e),8)]),$(s,a)}),$(s,e)},(s,e)=>{var a=N(),i=g(a)
o(()=>u(i,m(e).message)),$(s,a)}),$(s,a)},$$slots:{title:!0,default:!0}})}C()}s(["click"])
const E=l({visible:!0})
let I=0
function J(){R("betaOptIn")&&(I?E.visible=!0:I=j(z,{props:E,target:document.body}))}export{J as default}
//# sourceMappingURL=mountReliclist.svelte--EmcHBJt.js.map
