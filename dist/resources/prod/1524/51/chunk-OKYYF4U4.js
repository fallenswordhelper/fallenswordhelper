import{a as bt}from"./chunk-CS6RK3S5.js";import{a as xt}from"./chunk-L42JV3AT.js";import{a as lt}from"./chunk-3VYQ5OVV.js";import{D as ht,E as gt,a as _,b as pt,c as dt,d as C,e as l,f as u,h as E,i as f,k as kt,l as A,n as Q,p as R,u as V}from"./chunk-ZHHJEY5V.js";import{a as Lt}from"./chunk-F3D3J6RM.js";import{a as h}from"./chunk-VFCOMEFT.js";import{a as ct}from"./chunk-QCFPXMNH.js";import{a as at}from"./chunk-WHAZT5VY.js";import{a as U}from"./chunk-D6BL5IS3.js";import{b as et}from"./chunk-MHANGBVH.js";import{a as rt}from"./chunk-AN443625.js";import{a as Z}from"./chunk-6HK7Y3PF.js";import{a as I}from"./chunk-CT4SVZHO.js";import{a as it}from"./chunk-2PFHY365.js";import{a as ft}from"./chunk-YABTPUUA.js";import{a as ut}from"./chunk-QVQPQPMX.js";import{a as mt}from"./chunk-G3O526VI.js";import{a as d}from"./chunk-N2KVYLIG.js";import{a as st}from"./chunk-GLHEJYH7.js";import{a as ot}from"./chunk-TDNJGM62.js";import{a as nt}from"./chunk-TP7JP7VV.js";import{b as X}from"./chunk-HAINOYE5.js";import{a as w}from"./chunk-AN5TC666.js";import{V as W,a as z,n as J,r as K}from"./chunk-YNXRNCRL.js";import{a as tt}from"./chunk-DEDCEYVR.js";var wt,Ct;function y(){if(!Ct){let t=w.subcmd==="dropitems"?"removeIndex[]":"storeIndex[]";wt=document.forms[0].elements[t],Ct=!0}return wt}function S(){let t=y();return t?ot(t instanceof RadioNodeList?t:[t]):[]}function v(){return S().filter(t=>!I("fshHide",h(t)))}var $;function g(){return $||($=xt()),$}function O(t){return ut({subcmd:"dodropitems",removeIndex:t})}function P(t){return O(t)}function yt(t){return h(t.target).cells[0].children[0].value}async function Nt(t){let{items:o}=await g();d("storeitems","Check All of Type"),v().filter(e=>o[e.value]&&o[e.value].item_id===o[yt(t)].item_id).forEach(e=>{e.checked=!e.disabled&&!e.checked})}function Bt(t){let o=h(t);o.cells[0].children[0].disabled=!0,st(".actionButton",o).forEach(e=>{e.disabled=!0,e.textContent="",e.removeAttribute("data-tooltip"),e.classList.add("inProgress")}),t.blur(),t.classList.add("fshSpinner","fshSpinner12")}function Ht(t,o){t.target.classList.remove("fshSpinner","fshSpinner12"),t.target.classList.add("fshGreen"),t.target.textContent=o}async function St(t,o,e){Bt(t.target);let n=await o([yt(t)]);n&&n.s?Ht(t,e):ft(n)}var Ut=[["Check All",Nt],["Quick Send",t=>{d("storeitems","Quick Send"),St(t,bt,"Sent")}],["Quick Drop",t=>{d("storeitems","Quick Drop"),St(t,P,"Dropped")}]];function j(t){if(t.target.tagName==="A"&&["AH","UFSG"].includes(t.target.textContent)&&d("storeitems",t.target.textContent),t.target.tagName!=="BUTTON"||I("custombutton",t.target))return;let o=Ut.find(([e])=>e===nt(t.target));o&&o[1](t)}function Rt(t){let o,e,n,m,i;return{c(){o=f("["),e=E("button"),e.textContent="Select All Guild Locked",n=f("]"),Q(e,"class","svelte-h3aclh")},m(s,c){l(s,o,c),l(s,e,c),l(s,n,c),m||(i=A(e,"click",t[5]),m=!0)},p:_,d(s){s&&u(o),s&&u(e),s&&u(n),m=!1,i()}}}function Vt(t){let o,e,n=t[2](t[0])+"",m,i,s,c,b=t[2](t[1])+"",L,p,N,B,H,Y,k=w.subcmd2==="storeitems"&&Rt(t);return{c(){o=f("["),e=E("button"),m=f(n),i=f(" AH and UFSG Links"),s=f(`]\xA0
[`),c=E("button"),L=f(b),p=f(" Quick Drop links"),N=f(`]\xA0
`),k&&k.c(),B=kt(),Q(e,"class","svelte-h3aclh"),Q(c,"class","svelte-h3aclh")},m(r,a){l(r,o,a),l(r,e,a),C(e,m),C(e,i),l(r,s,a),l(r,c,a),C(c,L),C(c,p),l(r,N,a),k&&k.m(r,a),l(r,B,a),H||(Y=[A(e,"click",t[3]),A(c,"click",t[4])],H=!0)},p(r,[a]){a&1&&n!==(n=r[2](r[0])+"")&&R(m,n),a&2&&b!==(b=r[2](r[1])+"")&&R(L,b),w.subcmd2==="storeitems"&&k.p(r,a)},i:_,o:_,d(r){r&&u(o),r&&u(e),r&&u(s),r&&u(c),r&&u(N),k&&k.d(r),r&&u(B),H=!1,pt(Y)}}}function $t(t,o,e){let n=V(),m=p=>p?"Hide":"Show",{showExtraLinks:i=!1}=o,{showQuickDropLinks:s=!1}=o;function c(){d("storeitems","toggleShowExtraLinks"),e(0,i=!i),U("showExtraLinks",i),n("showExtraLinks",i)}function b(){d("storeitems","toggleShowQuickDropLinks"),e(1,s=!s),U("showQuickDropLinks",s),n("showQuickDropLinks",s)}function L(){d("storeitems","selectLocked"),n("selectLocked")}return t.$$set=p=>{"showExtraLinks"in p&&e(0,i=p.showExtraLinks),"showQuickDropLinks"in p&&e(1,s=p.showQuickDropLinks)},[i,s,m,c,b,L]}var vt=class extends gt{constructor(o){super();ht(this,o,$t,Vt,dt,{showExtraLinks:0,showQuickDropLinks:1})}},Dt=vt;var F;function Ot(t,o){if(o.item_id!==13699)return o.item_name;let e=t.find(n=>n.value===String(o.inv_id));return e?rt(e.parentNode.parentNode.children[2]):o.item_name}async function Pt(t){let o=await g();return!o||!o.items?{}:Lt(it(o.items).map(([e,n])=>[e,{...n,item_name:Ot(t,n)}]))}async function jt(t){return F||(F=await Pt(t)),F}async function G(){let t=S();if(!t.length)return[];let o=await jt(t);return t.map(e=>[h(e).cells[2],o[e.value]]).filter(([,e])=>e)}var D=0,Tt=1,M=2,It=3,T=4,_t=["showExtraLinks","enableItemColoring","checkAllOfType","showQuickSendLinks","showQuickDropLinks"];function Ft(t,o){return t[o]=(t[o]||0)+1,t}function Gt(t){return{...t.map(([,o])=>o.item_id).reduce(Ft,{}),13699:1}}var Mt=t=>` data-tooltip="INSTANTLY ${t} THE ITEM. NO REFUNDS OR DO-OVERS! Use at own risk."`,Et=(t,o,e)=>`[<button class="fshStoreItemsButton ${t}"${o}>${e}</button>]`,At=(t,o,e)=>` ${Et(`${t} actionButton tooltip-multiline`,Mt(o),`Quick ${e}`)}`,Qt=(t,o,e)=>`[<a href="${t}"${o}>${e}</a>]`;function qt(t){return t.bound?'<span class="aHSpacer"></span>':Qt(`${K}${encodeURIComponent(t.item_name)}`,"","AH")}var Yt=t=>Qt(`${W}items${J}view&item_id=${t.item_id}`,' target="_blank"',"UFSG"),zt=(t,o,e)=>t[M]&&o[e.item_id]>1,Jt=(t,o)=>t[It]&&(!o.bound||o.guild_tag!==-1),Kt=(t,o)=>t[T]&&o.guild_tag===-1;function Wt(t,o){return o[0]()?t+o[1]():t}function Xt(t,o,e){return[[()=>t[D],()=>`${qt(e)} ${Yt(e)}`],[()=>!0,()=>`&nbsp;${e.item_name}`],[()=>zt(t,o,e),()=>` ${Et("fshBlack","","Check All")}`],[()=>Jt(t,e),()=>At("fshBlue","SENDS","Send")],[()=>Kt(t,e),()=>At("fshRed","DROP","Drop")]]}function Zt(t,o,[e,n]){let m=e;t[Tt]&&(m.className=z[n.rarity].clas);let i=Xt(t,o,n).reduce(Wt,"");m.innerHTML!==i&&(m.innerHTML=i)}async function x(t){let o=await G(),e=t[M]?Gt(o):[];Z(3,ct,[[5,3,o,0,tt(Zt,t,e)]])}function te(t){let o=document.forms[0];return new Dt({props:{showExtraLinks:t[D],showQuickDropLinks:t[T]},target:o.parentNode.children[5].children[0]})}async function ee(){let t=v();if(!t.length)return;let o=await g();!o||!o.items||t.map(e=>[e,o.items[e.value]]).filter(([,e])=>e).forEach(([e,n])=>{e.checked=!e.disabled&&n.guild_tag!==-1})}function q(t){let o=te(t);o.$on("showExtraLinks",e=>{t[D]=e.detail,x(t)}),o.$on("showQuickDropLinks",e=>{t[T]=e.detail,x(t)}),o.$on("selectLocked",()=>{ee()})}async function oe(){if(at()||!y())return;let o=_t.map(e=>X(e));lt(),q(o),o.some(e=>e)&&x(o),mt(et,j)}export{y as a,P as b,S as c,v as d,g as e,oe as f};
//# sourceMappingURL=chunk-OKYYF4U4.js.map
