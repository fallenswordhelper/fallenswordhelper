import{a as h,b as M}from"./chunk-5Q55R5KV.js";import{a as E}from"./chunk-I6LPG6MF.js";import{a as D,b as J}from"./chunk-TPTVELUB.js";import{a as g}from"./chunk-T5AVYL5Z.js";import{a as d}from"./chunk-NHXMBUTR.js";import{a as w}from"./chunk-PQ3EMI2B.js";import{a as q}from"./chunk-ULKY3I7L.js";import{a as P}from"./chunk-6MUFX5NS.js";import{a as R}from"./chunk-UWKUUDVQ.js";import{a as $}from"./chunk-WDK5KJW5.js";import{a as H}from"./chunk-VYP6BYDA.js";import{a}from"./chunk-D6BL5IS3.js";import"./chunk-NIO7Y7L5.js";import{b as m}from"./chunk-MHANGBVH.js";import{a as V}from"./chunk-LVNLH6ER.js";import{a as y}from"./chunk-ZZS3NLOT.js";import{a as L}from"./chunk-IRFQ4Q6M.js";import"./chunk-FXN5JGBL.js";import"./chunk-AN443625.js";import"./chunk-UICWONBW.js";import{a as C}from"./chunk-ZLI5KJBW.js";import"./chunk-EUBCJC2U.js";import{a as _}from"./chunk-GVLE3LCU.js";import"./chunk-6HK7Y3PF.js";import"./chunk-22YAZV3W.js";import"./chunk-WBUJCSKW.js";import"./chunk-ND3XCMOS.js";import"./chunk-74YALW75.js";import{a as Q}from"./chunk-F5QOVYT2.js";import{a as b}from"./chunk-R5ZZQ5HH.js";import{a as F}from"./chunk-XQ3ZEJ26.js";import"./chunk-PO34EML4.js";import"./chunk-QFSH2B2J.js";import"./chunk-2PFHY365.js";import"./chunk-GGKSIQST.js";import"./chunk-JSWEJZHY.js";import{a as s}from"./chunk-4OJTKSB2.js";import{a as f}from"./chunk-G3O526VI.js";import"./chunk-GHQYBWLT.js";import{a as c}from"./chunk-N2KVYLIG.js";import"./chunk-PKDG64MH.js";import{a as I}from"./chunk-2B42SRXB.js";import"./chunk-3IGXKFMQ.js";import{a as u}from"./chunk-GLHEJYH7.js";import{a as i}from"./chunk-EPYDL6MF.js";import"./chunk-TDNJGM62.js";import{a as j}from"./chunk-TP7JP7VV.js";import{b as B}from"./chunk-HAINOYE5.js";import{a as x}from"./chunk-AN5TC666.js";import"./chunk-B7PLPUHK.js";import{na as p,oa as N}from"./chunk-YNXRNCRL.js";import{b as T}from"./chunk-7DPOBF7C.js";import{a as r}from"./chunk-DEDCEYVR.js";function S(e){return Q({cache:!1,dataType:"json",data:{cmd:"composing",subcmd:"createajax",template_id:e,fshrnd:M()}})}function G(){return`url(${T}composing/${h(1,11)}_${h(1,51)}.png)`}function K(e,t){s("",e.children[0]),e.children[0].classList.add("fshPot"),e.children[0].style.backgroundImage=G(),s(`Creating '<span class="fshBold">${t}</span>' Potion`,e.children[2]),s("",e.children[3])}function U(){i('[id|="composing-template"]:not(#composing-template-multi)').length===0&&a(p,!1)}function W(e){let t=e.parentNode;!t||(s('<div class="fshScs">Success</div>',t),K(t.previousElementSibling.previousElementSibling,e[e.selectedIndex].text),U())}function X(e,t){let o=e.parentNode;!o||!t||(t.error?s(`<div class="fshScs">${t.error}</div>`,o):W(e))}function Y(e){S(e.value).then(r(X,e))}function l(e,t){t.id=`proc-${t.id}`,s("",e),e.classList.add("fshSpinner","fshSpinner12","fshComposingSpinner"),Y(t),D("quickcreate")}function O(e,t){e.classList.add(`left-${t.toString()}`)}function Z(e){let t=i(".quickCreate .sendLink");O(e,t.length)}function ee(e,t){c("composing","FastComposeButton");let o=i('[id|="composing-template"]:not(#composing-template-multi)');if(!(o.length<e.value))for(let n=0;n<e.value;n+=1)o[n].value=t,l(o[n].nextElementSibling.nextElementSibling,o[n])}function te(e){let t=e.target,{templateId:o}=t.dataset;o&&ee(t,o)}function oe(e,t){return y({className:"awesome orange",dataset:{templateId:t},type:"button",value:e})}function ne(e,t,o,n){return n===0&&_(e[1],t.insertCell(-1)),b(t.insertCell(-1),oe((n+1).toString(),e[0])),t}function re(e,t,o,n){return e.reduce(r(ne,n),o.insertRow(-1)),o}function me(e,t,o){let n=w({id:"fshFastCompose"});return O(n,o),e.reduce(r(re,t,o),n)}function se(e){return[e.value,e.text]}function ie(e,t,o){let n=u("#composing-template-multi option").map(se),v=me(n,t,o);b(e,v),f(m,te),J("quickcreate",r(Z,v))}function ce(e){c("composing","FastCompose"),C(e,"<br>");let t=d("composing-potion-time",document),o=t.filter(L("ETA: n/a")).length;o>0?ie(e,t,o):C(e,"No open slots!")}function k(){let e=H("#pCC div.centered");g(e.children[1],' | <label for="fast-compose"><span class="sendLink">Fast Compose</span></label>');let t=F({className:"centered"});E(t,e);let o=y({id:"fast-compose",type:"checkbox"});E(o,e),q(o,"change",r(ce,t))}var ae=/ETA:\s*(\d+)h\s*(\d+)m\s*(\d+)s/;function le(e){let t=ae.exec(j(e));return t?(t[1]*3600+t[2]*60+Number(t[3]))*1e3+P:0}function z(e){a(p,e)}function A(){if(!x.enableComposingAlert)return;let e=d("composing-potion-time",document),t=Math.min(...e.map(le));t===0?z(!0):(z(!1),a(N,t))}function pe(){if(B("moveComposingButtons")){let e=I("composing-error-dialog").previousElementSibling;e.setAttribute("style","text-align: right; padding: 0 38px 0 0");let t=$("composing-level",m)[0].parentNode;V(e,t)}}function ue(e){g(e,'<span class="quickCreate">[<span class="sendLink">Quick Create</span>]</span>')}function fe(e){return e.tagName==="SPAN"&&e.className==="quickCreate"}function de(e){let t=e.previousElementSibling.previousElementSibling;t&&t.value!=="none"&&(l(e,t),c("composing","QuickCreate"))}function ge(e){let t=e.target.parentNode;fe(t)&&de(t)}function Ce(){A(),u("input[id^=create-]:not(#create-multi)",m).forEach(ue),f(m,ge),pe(),k()}function ye(){R()&&m&&Ce()}export{ye as default};
//# sourceMappingURL=composing-P4LLH67V.js.map
