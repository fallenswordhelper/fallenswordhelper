import{a as Q}from"./chunk-X54ETEQC.js";import{a as G}from"./chunk-4SHO4X2Z.js";import"./chunk-D7QZUQTE.js";import{a as u}from"./chunk-REAPNIUL.js";import{a as W}from"./chunk-U5R67D52.js";import{a as H}from"./chunk-Y2JX5GQ6.js";import{a as w}from"./chunk-X5ZSXFJV.js";import"./chunk-TVG77EME.js";import{b as p}from"./chunk-6MUFX5NS.js";import{a as F}from"./chunk-WHAZT5VY.js";import"./chunk-UWKUUDVQ.js";import{a as B}from"./chunk-VYP6BYDA.js";import{a as M}from"./chunk-D6BL5IS3.js";import"./chunk-NIO7Y7L5.js";import{c as j}from"./chunk-MHANGBVH.js";import"./chunk-LVNLH6ER.js";import{a as c}from"./chunk-AN443625.js";import"./chunk-UICWONBW.js";import{a as v}from"./chunk-ZLI5KJBW.js";import"./chunk-EUBCJC2U.js";import"./chunk-ND3XCMOS.js";import{a as q}from"./chunk-WPRJK6Q2.js";import{a as U}from"./chunk-PJ32ASZ7.js";import"./chunk-F5QOVYT2.js";import{a as l}from"./chunk-R5ZZQ5HH.js";import{a as f}from"./chunk-XQ3ZEJ26.js";import"./chunk-PO34EML4.js";import"./chunk-QFSH2B2J.js";import"./chunk-2PFHY365.js";import{a as N}from"./chunk-2V5OQ7JE.js";import"./chunk-GGKSIQST.js";import"./chunk-JSWEJZHY.js";import"./chunk-JZLUF437.js";import{a as h}from"./chunk-4OJTKSB2.js";import{a as k}from"./chunk-G3O526VI.js";import"./chunk-GHQYBWLT.js";import"./chunk-PKDG64MH.js";import{a as x}from"./chunk-2B42SRXB.js";import"./chunk-3IGXKFMQ.js";import{a as m}from"./chunk-TP7JP7VV.js";import{b as S}from"./chunk-HAINOYE5.js";import{a as i}from"./chunk-AN5TC666.js";import"./chunk-B7PLPUHK.js";import{U as L}from"./chunk-YNXRNCRL.js";import"./chunk-7DPOBF7C.js";import"./chunk-DEDCEYVR.js";function d(t){return U({cmd:"bounty",page:t})}function tt(t){return t.children[0].tagName==="A"?t.children[0]:t.children[0].children[0]}function et(t){return B("img",t[2]).title}function y(t){let e=tt(t[0]);return{target:m(e),link:e.href,lvl:m(e.nextSibling).replace(/[[|\]]/g,""),reward:m(t[2]),rewardType:et(t),posted:m(t[3]),xpLoss:m(t[4])}}var r,o,R,O,b,T;function nt(t){return!/No bounties active/.test(t.rows[1].cells[0].innerHTML)}function ot(t){return N(y(t),{progress:m(t[5])})}function rt(t){for(let e=1;e<t.rows.length-2;e+=2){let n=t.rows[e].cells,g=ot(n);r.bounty.push(g)}}function it(t){nt(t)&&rt(t)}function X(t){let e=x("bounty-info",t);if(!e)return;let n=e.parentNode.parentNode.previousElementSibling.children[0].children[0];r={},r.bounty=[],r.isRefreshed=!0,r.lastUpdate=p,n&&it(n),R=!0}function st(){return r&&p-r.lastUpdate>O}function at(){return o&&p-o.lastUpdate>O}function mt(){return st()||at()}function z(){r=W("bountyList"),o=W("wantedList"),O=S("bountyListRefreshTime"),b=S("bwNeedsRefresh"),!b&&mt()&&(b=!0)}function K(){o={},o.bounty=[],o.isRefreshed=!0,o.lastUpdate=p,R=!1,T=G("wantedNames"),M("bwNeedsRefresh",!1)}function ct(t){let e=t[6];return c(e)!=="[n/a]"?e.children[0].children[0].getAttribute("onclick"):""}function ut(t){return N(y(t),{offerer:c(t[1].children[0].children[0]),tickets:c(t[5]),accept:ct(t)})}var ft=[()=>T.includes("*"),t=>T.includes(t),(t,e)=>i.wantedGuildMembers&&c(e.cells[6])==="[n/a]"];function lt(t,e){return c(e.cells[6])!=="[active]"&&ft.some(n=>n(t,e))}function pt(t,e){lt(t,e)&&o.bounty.push(ut(e.cells))}function V(t){for(let e=1;e<t.rows.length-2;e+=2){let n=t.rows[e],g=c(n.cells[0].children[0].children[0]);if(g==="[ No bounties available. ]")break;pt(g,n)}}var s,a;function C(){return f({className:"minibox"})}function Y(){i.enableWantedList&&(a=C(),H(j,a)),i.enableActiveBountyList&&(s=C(),H(j,s))}var D;function dt(t){return`Level:  ${t.lvl}<br>Reward: ${t.reward} ${t.rewardType}<br>XP Loss Remaining: ${t.xpLoss}<br>Progress:  ${t.progress}`}function A(){u("bountyList",r),h("",s);let t=f({innerHTML:`<a href="${L}">Active Bounties</a> `});D=w({className:"xxsLink",textContent:"Reset"}),l(t,D),l(s,t);let e="";if(r.bounty.length===0)e+='<div class="xsOrange">[No active bounties]</div>';else for(let n=0;n<r.bounty.length;n+=1)e+=`<a href="${r.bounty[n].link}" class="tip-static" data-tipped="${dt(r.bounty[n])}">${r.bounty[n].target}</a><br>`;v(s,e)}var $;function yt(t){return`Target Level:  ${t.lvl}<br>Offerer: ${t.offerer}<br>Reward: ${t.reward} ${t.rewardType}<br>XP Loss Remaining: ${t.xpLoss}<br>Posted: ${t.posted}<br>Tickets Req.:  ${t.tickets}`}function bt(t){return t.accept?`<span class="xsGreen" onclick="${t.accept}">[a]</span>&nbsp;`:""}function E(){u("wantedList",o),h("",a);let t=f({innerHTML:`<a href="${L}">Wanted Bounties</a> `});$=w({className:"xxsLink",textContent:"Reset"}),l(t,$),l(a,t);let e="";if(o.bounty.length===0)e+='<div class="xsOrange">[No wanted bounties]</div>';else for(let n=0;n<o.bounty.length;n+=1)e+=`${bt(o.bounty[n])}<a class="xsKhaki tip-static" data-tipped="${yt(o.bounty[n])}" href="${o.bounty[n].link}">${o.bounty[n].target}</a><br>`;v(a,e)}var I,Z;function gt(t){let e=B('#pCC input[name="page"]',t);if(!e)return;I=Number(e.value),Z=Number(e.parentNode.innerHTML.match(/of&nbsp;(\d*)/)[1]);let n=x("bounty-info",t).parentNode.parentNode.nextElementSibling.children[0].children[0];n&&V(n)}function Lt(t){i.enableActiveBountyList&&!R&&(X(t),A())}function P(t){let e=q(t);Lt(e),i.enableWantedList&&(gt(e),I<Z?d(I+1).then(P):E())}function xt(t,e){e&&(o.isRefreshed=!1,E()),t&&(r.isRefreshed=!1,A())}var vt=[()=>!r,()=>!o,()=>b];function ht(){return vt.some(Q)}function J(t,e){z(),ht()?(K(),d(1).then(P)):xt(t,e)}function _(t){t.target===D&&(u("bountyList",null),J(i.enableActiveBountyList,i.enableWantedList)),t.target===$&&(u("wantedList",null),J(i.enableActiveBountyList,i.enableWantedList))}function Bt(){s&&k(s,_),a&&k(a,_)}function wt(){F()||(Y(),Bt(),J(i.enableActiveBountyList,i.enableWantedList))}export{wt as default};
//# sourceMappingURL=activeWantedBounties-5XZY3NLZ.js.map
