import{a as ne,b as se}from"./chunk-XNYTJ7QF.js";import{a as Zt}from"./chunk-ZQTT2AXB.js";import"./chunk-CXATELLY.js";import{a as ie}from"./chunk-EMBOFKPO.js";import{a as B}from"./chunk-BW5PH5NQ.js";import{a as Kt,b as O,c as te,d as Q,e as ee,f as oe,g as re}from"./chunk-WUBRY2Q4.js";import"./chunk-NIOXVTNG.js";import{a as $t,b as Gt,c as Vt,d as jt}from"./chunk-NM4URYPM.js";import{a as Ot}from"./chunk-YIGSER4T.js";import{a as zt}from"./chunk-Y2JX5GQ6.js";import{a as E}from"./chunk-OJFIHZIB.js";import{a as Qt,b as _t}from"./chunk-BF7TG5EL.js";import{a as Nt}from"./chunk-YSEBBEII.js";import{a as R,b as Ht}from"./chunk-CBSLU3K7.js";import"./chunk-2WUGIKWH.js";import"./chunk-33B54EL4.js";import{a as wt}from"./chunk-2MSFZ3SC.js";import{a as Pt}from"./chunk-KWIXRSMY.js";import{a as Dt}from"./chunk-VFCOMEFT.js";import{f as $}from"./chunk-ORMKR3OV.js";import"./chunk-FS3TKOQM.js";import{a as At}from"./chunk-QCFPXMNH.js";import{a as Ft}from"./chunk-CPUCL5KC.js";import{a as It}from"./chunk-GCEMRPTW.js";import{a as Wt}from"./chunk-WYSBQHH4.js";import{a as Yt}from"./chunk-PQ3EMI2B.js";import{a as z}from"./chunk-X5ZSXFJV.js";import{a as me}from"./chunk-633OEY6F.js";import{a as ae}from"./chunk-MF5UI2DL.js";import{a as qt}from"./chunk-E7MKAKV7.js";import"./chunk-V3H5BBPU.js";import{a as Rt}from"./chunk-OFZ4M2H7.js";import{a as vt}from"./chunk-6N67M5GA.js";import{a as U}from"./chunk-ULKY3I7L.js";import{a as Et}from"./chunk-TVG77EME.js";import{a as Jt}from"./chunk-L4E4NT4L.js";import"./chunk-6MUFX5NS.js";import{a as ce}from"./chunk-WHAZT5VY.js";import"./chunk-UWKUUDVQ.js";import"./chunk-WDK5KJW5.js";import{a as St}from"./chunk-NPQLLSM5.js";import"./chunk-OFLIN3VT.js";import{a as p}from"./chunk-VYP6BYDA.js";import"./chunk-RGN4RGGV.js";import{a as Bt}from"./chunk-6VZYKCGK.js";import{a as M}from"./chunk-D6BL5IS3.js";import"./chunk-NIO7Y7L5.js";import"./chunk-VXT65ZUM.js";import{b as a}from"./chunk-MHANGBVH.js";import{a as Mt}from"./chunk-HCWIM2QM.js";import"./chunk-2XZ4ALI2.js";import"./chunk-LVNLH6ER.js";import{a as F}from"./chunk-ZZS3NLOT.js";import"./chunk-WPSD22KE.js";import{a as k}from"./chunk-57PZ6XJI.js";import{a as P}from"./chunk-IRFQ4Q6M.js";import"./chunk-FXN5JGBL.js";import{a as xt}from"./chunk-AN443625.js";import"./chunk-UICWONBW.js";import{a as c}from"./chunk-ZLI5KJBW.js";import"./chunk-EUBCJC2U.js";import{a as T}from"./chunk-UWAT3VA7.js";import{a as i}from"./chunk-6HK7Y3PF.js";import"./chunk-22YAZV3W.js";import"./chunk-WBUJCSKW.js";import"./chunk-ND3XCMOS.js";import"./chunk-74YALW75.js";import{a as Xt}from"./chunk-WPRJK6Q2.js";import{a as Ut}from"./chunk-PJ32ASZ7.js";import"./chunk-F5QOVYT2.js";import"./chunk-CT4SVZHO.js";import{a as r}from"./chunk-R5ZZQ5HH.js";import{a as m}from"./chunk-XQ3ZEJ26.js";import{a as Lt}from"./chunk-PO34EML4.js";import"./chunk-QFSH2B2J.js";import"./chunk-2PFHY365.js";import{a as _}from"./chunk-V6CXAOJZ.js";import"./chunk-GGKSIQST.js";import"./chunk-JSWEJZHY.js";import{a as X}from"./chunk-JZLUF437.js";import{a as f}from"./chunk-4OJTKSB2.js";import{a as v}from"./chunk-G3O526VI.js";import{a as u}from"./chunk-GHQYBWLT.js";import{a as L}from"./chunk-N2KVYLIG.js";import"./chunk-PKDG64MH.js";import"./chunk-2B42SRXB.js";import"./chunk-3IGXKFMQ.js";import{a as I}from"./chunk-GLHEJYH7.js";import{a as Ct}from"./chunk-EPYDL6MF.js";import"./chunk-TDNJGM62.js";import"./chunk-TP7JP7VV.js";import{b as s}from"./chunk-HAINOYE5.js";import{a as h}from"./chunk-AN5TC666.js";import{a as bt}from"./chunk-B7PLPUHK.js";import{D,H as Tt,Ka as kt,e as H,qa as C,sa as y,v as yt}from"./chunk-YNXRNCRL.js";import"./chunk-7DPOBF7C.js";import{a as l}from"./chunk-DEDCEYVR.js";var le=0,fe=1;function Ae(t,e){let o=H.exec(e.dataset.tipped);return wt({min:o[3],hour:o[2],day:o[1]})<44640&&(t[le]+=1,t[fe]+=Number(/Stamina:<\/td><td>(\d+)/.exec(e.dataset.tipped)[1])),t}function He(t){return t.reduce(Ae,[0,0])}function J(){let t=k("b",a).find(P("Members"));if(t){let e=R(),o=He(e);t.classList.add("tip-static"),Nt(`Active: ${o[le]}/${e.length}<br>Stamina: ${E(o[fe])}`,t)}}var De=t=>Pt(xt(Dt(t).cells[4]));function W(){console.log(E(R().map(De).reduce(It,0)))}function pe(t,e){let o,n=t.replace(/,/g,"").match(e);return n?o=parseInt(n[1],10):o=0,o}function Pe(t,e){let o="";return t>e&&(o="+"),o+E(t-e)}function Ie(t){let e=t.dataset.tipped,o=pe(e,/XP Lock: <b>(\d*)/),n=pe(e,/XP: <b>(\d*)/);c(t.parentNode.nextElementSibling,` (<b>${Pe(n,o)}</b>)`),h.userIsDev&&W()}function Y(){let t=p('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&Ie(t)}function Z(){let t=k(y,a).slice(-2,-1)[0].rows[0].cells[0],e=m({id:"profile-bio",innerHTML:t.innerHTML});f("",t),r(t,e),Mt()}var K,tt;function Me(t){return K&&t>=$t()&&t<=Gt()}function Re(t){return tt&&t>=Vt()&&t<=jt()}var $e=t=>[t,H.exec(t.dataset.tipped)[1]],Ge=([,t])=>t<7,Ve=([t])=>[t,Number(/VL:.+?(\d+)/.exec(t.dataset.tipped)[1])],je=([t,e])=>[t.parentNode.parentNode.rowIndex,Me(e),Re(e)];function qe(){return I('#pCC a[data-tipped*="<td>VL:</td>"]').map($e).filter(Ge).map(Ve).map(je)}function Ue(){return Number(St("guild_id"))!==Rt()&&(K||tt)}var ue=t=>t.map(([e])=>`.fshHighlight tr:nth-child(${e+1})`).join(",");function Xe(t){if(t.length){let e=`${ue(t)} {background-color: #4671C8;}`;r(document.body,B(e))}}function Fe(t){if(t.length){let e=`${ue(t)} {background-color: #FF9900;}`;r(document.body,B(e))}}function Oe(t,e){if(t.length+e.length){let o=T(y,a);o[o.length-1].classList.add("fshHighlight")}}function Qe(){let t=qe(),e=t.filter(([,n])=>n),o=t.filter(([,n,x])=>!n&&x);Xe(e),Fe(o),Oe(e,o)}function _e(){Ue()&&Qe()}function et(){K=s("highlightPlayersNearMyLvl"),tt=s("highlightGvGPlayersNearMyLvl"),_e(),s("enableHistoryCompressor")&&Z()}function ze(t){c(t.parentNode,' <span class="smallLink">[b]</span>')}function Je(t){t.target.className==="smallLink"&&qt(t.target.previousElementSibling.text)}function ot(){let t=Ct(`#pCC a[href^="${yt}"]`);At([5,3,t,0,ze]),v(a,Je)}function G(t){return Ut({cmd:"guild",subcmd:"conflicts",page:t})}function de(t,e){f(e,t.insertCell(-1))}function ge(t,e,o){let n=t.insertRow(t.rows.length-2);de(n,e),de(n,o)}function We(t){ge(t,`<a href="${D}conflicts">Active Conflicts</a>`,"Score")}function Ye(t,e){ge(t,e.cells[0].innerHTML,`<b>${e.cells[6].innerHTML}</b>`)}function Ze(t,e,o){e===1&&We(o),Ft(t.rows,7,0).forEach(l(Ye,o))}function Ke(t,e,o){let n=p("#pCC > table > tbody > tr > td > table",t);n&&n.rows.length>3&&Ze(n,e,o)}function to(t){return Number(t.parentNode.innerHTML.match(/of&nbsp;(\d*)/)[1])}function eo(t,e,o){G(t+1).then(l(e,o))}function he(t,e){let o=Xt(e),n=p('#pCC input[name="page"]',o);if(!n)return;let x=Number(n.value),Ne=to(n);Ke(o,x,t.node),Ne>x&&eo(x,he,t)}function rt(t){let e=t.rows[6].cells[0].children[0];e&&G(1).then(l(he,{node:e}))}function oo(t){t.target.id===C&&M(C,!s(C))}function nt(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,o=m({className:"fsh-tracker"}),n=m({innerHTML:`${$(C)}&nbsp;<label class="custombutton" for="tracker">Show</label>`});u(n,"change",oo),r(o,t),r(o,n),zt(e,o)}function mt(t){return Lt("th",t)}var it,V,w,ct,j;function ro(t,e){return`${t}<option value="${e}">${e}</option>`}function no(t){return`<select name="member"><option value="- All -" selected>- All -</option>${X(t).sort(Jt).reduce(ro,"")}</select>`}function N(t){return bt(t)?"#DEF":t.toLocaleString()}function mo(t){return V&&V!=="- All -"&&V!==t}function io(t,e,o){return`${e}<tr><td>${Zt(new Date(o[ee]*1e3))}</td><td>${t}</td><td class="fshRight">${N(o[te])}</td><td class="fshRight">${N(o[oe])}</td><td class="fshRight">${N(o[O])}</td><td class="fshRight">${N(o[Q])}</td><td class="fshRight">${Math.floor(o[O]/o[Q]*100)}</td><td class="fshRight">${o[Kt]}</td><td class="fshRight">${N(o[re])}</td></tr>`}function co(t,e){return mo(e)?t:t+j[e].reduce(l(io,e),"")}function ao(){return X(j).reduce(co,"")}function so(){j&&f(ao(),it),w.classList.remove("fshSpinner")}function be(){w.classList.add("fshSpinner"),i(3,so)}function lo(t){V=t.target.value,be()}function q(t){t&&(j=t,f(no(t),ct),be())}function fo(){let t=mt({textContent:"Member"});return ct=m(),r(t,ct),t}function po(t){let e=t.createTHead().insertRow(-1);c(e,"<th>Date</th>");let o=fo();r(e,o),c(e,"<th>Level</th><th>VL</th><th>Stam</th><th>Max<br>Stam</th><th>Stam<br>%</th><th>Last<br>Activity<br>(Days)</th><th>GXP</th>")}function uo(t){it=Wt(),r(t,it)}function ye(){let t=Yt({id:"tg"});return po(t),uo(t),u(t,"change",lo),w=m({className:"tgCont fshSpinner64"}),r(w,t),w}var d,Te,ke,g;function go(t){d.value=t,g.classList.remove("fshSpinner")}function ve(t){t&&(g.classList.add("fshSpinner"),i(4,go,[t]))}function ho(){d.value='{"lastUpdate": 0, "members": {}}'}function bo(t){_("Update successful"),q(t.members)}function yo(){let t=Et(d.value);_t("fsh_guildActivity",t).then(l(bo,t)).catch(_)}function Ee(t,e){let o=me({className:"custombutton",textContent:t});return v(o,e),o}function To(){d=ie(),d.setAttribute("autocapitalize","off"),d.setAttribute("autocomplete","off"),d.setAttribute("autocorrect","off"),d.setAttribute("spellcheck","false")}function Se(){return g=m({id:"io",className:"fshSpinner64"}),To(),Te=Ee("Save",yo),ke=Ee("Reset",ho),r(g,d),r(g,ne()),r(g,Te),r(g,ke),g}var at,b,A,st;function xe(){return!b.checked}function ko(){return b.checked}function vo(){b.checked=!1}function Eo(t){ko()&&t.code==="Escape"&&vo()}function So(t){xe()&&(t.style.transform=null)}function xo(){return Ot({className:"fshMove ui-tabs-nav ui-widget-header ui-corner-all ui-helper-reset ui-helper-clearfix",innerHTML:'<li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab1">Guild Activity Tracker</label></li><li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab2">Import/Export</label></li><label for="tracker" class="fsh-dialog-close ui-dialog-titlebar-close">&times;</label>'})}function Co(){L("guildTracker","updateRawData"),at&&ve(at)}function Lo(){let t=m({className:"fsh-dialog-popup ui-dialog ui-tabs ui-widget ui-widget-content ui-corner-all",innerHTML:'<input id="acttab1" class="fsh-tab-open" name="acttabs" checked type="radio">'});return st=F({className:"fsh-tab-open",id:"acttab2",name:"acttabs",type:"radio"}),U(st,"change",Co),r(t,st),t}function Bo(){let t=Lo(),e=xo();return r(t,e),vt(e,t),t}function wo(){let t=m({className:"fsh-dialog-content"});return r(t,ye()),r(t,Se()),t}function No(){let t=Bo(),e=wo();r(t,e),u(b,"change",l(So,t)),r(A,t)}function Ao(){c(A,'<div class="fsh-dialog-overlay"><label class="fsh-dialog-cancel" for="tracker"></label></div>')}function Ho(t){t&&(at=JSON.stringify(t),q(t.members))}function Do(){L("guildTracker","openDialog"),Qt("fsh_guildActivity").then(Ho),h.dialogIsClosed=xe,Ao(),No()}function Po(){b=F({id:"tracker",className:"fsh-dialog-open",type:"checkbox"}),U(b,"change",Do),A=m({className:"fsh-dialog"}),r(A,b),u(document.body,"keydown",Eo),r(document.body,A)}function lt(){nt(),Po()}var ft="enableStamBars",S,pt;function Io(t){let e=t.dataset.tipped.match(/(\d+) \/ (\d+)/);return Math.min(Math.round(Number(e[1])/Number(e[2])*100),100)}function Mo(t){let e=Io(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${e}%, transparent ${e+1}%)}`}function Ro(){let t=T(y,a),e=t[t.length-1];e.classList.add("fshProgressBar");let n=I(kt,e).map(Mo).join(`
`);pt=r(document.body,B(n)).sheet}function Ce(){pt?pt.disabled=!S:Ro()}function $o(){S=!S,M(ft,S),Ce(),L("guildManage","StamBars")}function Go(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,o=r(e,m({className:"fshCenter",innerHTML:$(ft)}));u(o,"change",$o)}function ut(){Go(),S=s(ft),S&&Ce()}function Vo(t){return z({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function jo(t){let e=z({className:"fshNoWrap",innerHTML:"[&nbsp;"});return r(e,t),c(e,"&nbsp;]"),e}function dt(t,e,o){let n=Vo(o);r(t,jo(n)),e.id=o,s(o)&&ae(e),v(n,se)}function Le(t){dt(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function Be(t){let e=t.rows[4].cells[1].children[0];f(e.innerHTML.trim(),e),dt(e,t.rows[6].cells[0].children[0],"statisticsControl")}function we(t){dt(t.rows[15].cells[1].children[0],t.rows[17].cells[0].children[0],"guildStructureControl")}function qo(t){let e=k("b",t).filter(P("Relics"));if(e.length!==1)return;let o=e[0].parentNode.nextElementSibling.children[0];f(`[ <a href="${D}reliclist">Control</a> ]&nbsp;`,o)}function Uo(t){let e=T("li",t);if(!e||!e.length)return;let o=e[e.length-1].parentNode;c(o,`<li><a href="${Tt}${Bt()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function Xo(){return a.lastElementChild.rows[2].cells[0].children[0]}function Fo(t,e){i(3,e,[t])}function Oo(t){[Le,Be,we,qo,Uo].forEach(l(Fo,t))}function Qo(t){ce()||(s("detailedConflictInfo")&&i(3,rt,[t]),i(4,lt))}function gt(){if(!a)return;let t=Xo();Oo(t),i(3,ot),Qo(t),ut()}function _o(t){let e=t.nextElementSibling.nextElementSibling;e&&e.classList.add("fshBreakAll")}function ht(){let t=p('#pCC img[src*="/guilds/"][width="200"]');!t||(t.removeAttribute("style"),_o(t))}function zo(){i(3,Ht),i(3,ht),i(3,Y),i(3,J),h.subcmd==="manage"&&gt(),h.subcmd==="view"&&et()}export{zo as default};
//# sourceMappingURL=guild-65XAN4NZ.js.map
