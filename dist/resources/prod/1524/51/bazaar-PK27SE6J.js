import{a as E,b as j}from"./chunk-OGX3GPP7.js";import{a as x}from"./chunk-BJG2K66W.js";import"./chunk-LLWNE4EE.js";import{a as T}from"./chunk-WHAZT5VY.js";import"./chunk-UWKUUDVQ.js";import"./chunk-RGN4RGGV.js";import{b as i}from"./chunk-MHANGBVH.js";import{a as b}from"./chunk-57PZ6XJI.js";import{a as f}from"./chunk-ZLI5KJBW.js";import"./chunk-EUBCJC2U.js";import{a as y}from"./chunk-UWAT3VA7.js";import{a as m}from"./chunk-GVLE3LCU.js";import{a as _}from"./chunk-YYZHVDZH.js";import"./chunk-VI3RZM5G.js";import{a as N}from"./chunk-WV4YXE4F.js";import"./chunk-ND3XCMOS.js";import"./chunk-WPRJK6Q2.js";import{a as A}from"./chunk-PJ32ASZ7.js";import"./chunk-F5QOVYT2.js";import{a as h}from"./chunk-CT4SVZHO.js";import{a as z}from"./chunk-R5ZZQ5HH.js";import"./chunk-QFSH2B2J.js";import"./chunk-2PFHY365.js";import{a as I}from"./chunk-ZDFDMUO4.js";import"./chunk-2V5OQ7JE.js";import"./chunk-GGKSIQST.js";import"./chunk-JSWEJZHY.js";import"./chunk-JZLUF437.js";import{a as g}from"./chunk-4OJTKSB2.js";import{a as s}from"./chunk-G3O526VI.js";import{a as p}from"./chunk-GHQYBWLT.js";import"./chunk-PKDG64MH.js";import{a}from"./chunk-2B42SRXB.js";import"./chunk-3IGXKFMQ.js";import"./chunk-TDNJGM62.js";import{a as B}from"./chunk-TP7JP7VV.js";import"./chunk-HAINOYE5.js";import"./chunk-AN5TC666.js";import"./chunk-B7PLPUHK.js";import"./chunk-YNXRNCRL.js";import"./chunk-7DPOBF7C.js";import"./chunk-DEDCEYVR.js";function q(t){let e=_(t);return e==="You purchased the item!"?{s:!0}:{e:{message:e},s:!1}}function u(t){return A({cmd:"potionbazaar",subcmd:"buyitem",item_id:t}).then(q)}function c(t){return I({cmd:"potionbazaar",subcmd:"buyitem",item_id:t})}function d(t){return N(c,u,t)}var l,n='<table id="fshBazaar"><tr><td colspan="5">Select an item to quick-buy:</td></tr><tr><td colspan="5">Select how many to quick-buy</td></tr><tr><td colspan="5"><input id="buy_amount" class="fshNumberInput" type="number" min="0" max="99" value="1"></td></tr><tr><td>@0@</td><td>@1@</td><td>@2@</td><td>@3@</td><td>@4@</td></tr><tr><td>@5@</td><td>@6@</td><td>@7@</td><td>@8@</td><td>@9@</td></tr><tr><td colspan="3">Selected item:</td><td id="selectedItem" colspan="2"></td></tr><tr><td colspan="5"><span id="fshBazaarWarning" class="fshHide">Warning:<br>pressing [<span id="fshBuy" class="fshLink">This button</span>] now will buy the <span id="quantity">1</span> item(s) WITHOUT confirmation!</span></td></tr><tr><td colspan="5"><span id="buyResultLabel"></span><ol id="buy_result"></ol></td></tr></table>',H=`<span class="bazaarButton tip-dynamic" style="background-image: url('@src@');" itemid="@itemid@" data-tipped="@tipped@"></span>`;function k(){return x(a("buy_amount").value)}function R(t,e){m(e,a("quantity")),l=t.getAttribute("itemid"),a("fshBazaarWarning").removeAttribute("class");let o=t.cloneNode(!1);o.className="bazaarSelected tip-dynamic";let r=a("selectedItem");g("",r),z(r,o)}function F(t){let{target:e}=t;if(!h("bazaarButton",e))return;let o=k();!o||R(e,o)}function v(){let t=k();t&&m(t,a("quantity"))}function C(t){let e=a("buy_result");j(t,e)||t.s&&E("You purchased the item!",e)}function L(){if(!l)return;let t=B(a("quantity"));m(`Buying ${t} items`,a("buyResultLabel"));for(let e=0;e<t;e+=1)d(l).then(C)}function Q(t,e){let o=t.children[0],{tipped:r}=o.dataset;n=n.replace(`@${e}@`,H).replace("@src@",o.getAttribute("src")).replace("@itemid@",r.match(/\?item_id=(\d+)/)[1]).replace("@tipped@",r)}function S(){s(a("fshBazaar"),F),p(a("buy_amount"),"input",v),s(a("fshBuy"),L)}function W(){if(T())return;let t=y("img",i)[0];t.className="fshFloatLeft",b("a",i).forEach(Q),n=n.replace(/@\d@/g,""),f(t.parentNode,n),S()}export{W as default};
//# sourceMappingURL=bazaar-PK27SE6J.js.map
