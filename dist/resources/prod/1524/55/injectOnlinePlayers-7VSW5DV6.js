import{a as H,b as q}from"./chunk-RHP4VH3X.js";import{a as B}from"./chunk-QOTC7P7B.js";import{a as d}from"./chunk-3YZECJVP.js";import{a as E}from"./chunk-MKQ54CT7.js";import"./chunk-BV2MYMF5.js";import"./chunk-LZ23YXGK.js";import{a as T,b as k}from"./chunk-MNDSRAYL.js";import{a as I,b as D}from"./chunk-4JPLNJXC.js";import"./chunk-BACJUG3B.js";import"./chunk-P6QOQPLT.js";import{a as p}from"./chunk-EQEDSKYN.js";import{a as N}from"./chunk-FSJKGO56.js";import{a as u}from"./chunk-2A2BOA2Y.js";import{a as j}from"./chunk-RT5GGQZO.js";import"./chunk-I3HDBAJB.js";import"./chunk-XUMFQRZN.js";import{a as w}from"./chunk-WKB7UAH3.js";import{a as o}from"./chunk-NX5SSUGZ.js";import"./chunk-R6SLBHCS.js";import"./chunk-MF5BZBCN.js";import"./chunk-CDJXMXAD.js";import"./chunk-FIYDSWPU.js";import{a as O}from"./chunk-CRUEJ3F6.js";import"./chunk-SKB75UHJ.js";import"./chunk-D6P46ZXI.js";import{a as C}from"./chunk-DPUM55LY.js";import"./chunk-CJ5MYL4D.js";import"./chunk-BPJKI26M.js";import"./chunk-7FXPMHZ5.js";import"./chunk-TUWDUCWH.js";import{a as V}from"./chunk-TEW6YNEY.js";import{a as R}from"./chunk-BXVF4M5G.js";import{a as M}from"./chunk-SNSTWQSS.js";import"./chunk-B5XQQNQZ.js";import"./chunk-NIYIBTJZ.js";import"./chunk-V5W6AOGE.js";import"./chunk-LFCR6ZTM.js";import"./chunk-CN4P2KLK.js";import"./chunk-BGO273GM.js";import{a as f,b as l}from"./chunk-XJX3OTSZ.js";import"./chunk-GUUYKSUL.js";import"./chunk-D6HZ4P35.js";import{h as x}from"./chunk-E72VSDOE.js";import"./chunk-U4WGNCSF.js";import{a as s}from"./chunk-3XQ73JET.js";function J(e,t){let n=$("<div/>").append(e[t][0]);return $("img",n).addClass("fshImgCntr"),[n.html(),e[t][1],e[t][2],e[t][3]*100+e[t][4]+1]}function g(e){return V(e).map(s(J,e))}var _,A;function K(e){let t=e.match(x);if(t)return Number(t[1])}var X=[()=>_,e=>K(e[0])!==N(),e=>p(e[2])>=T(),e=>p(e[2])<=k()];function Y(e){return X.every(t=>t(e))}function Z(e,t){Y(t)&&$("td",e).eq(2).addClass("lvlHighlight")}function ee(e){return{columns:[{title:"Guild",class:"dt-center",orderable:!1},{title:"Name",class:"dt-center"},{title:"Level",class:"dt-center"},{title:"Page/Index",class:"dt-center"}],createdRow:Z,data:e,deferRender:!0,lengthMenu:[[30,60,-1],[30,60,"All"]],order:[3,"desc"],pageLength:30,stateDuration:0,stateSave:!0}}function G(e,t){_=l("highlightPlayersNearMyLvl"),A=$("#fshInv",e).DataTable(ee(t))}function h(){A.draw()}function v(e){(e.target.id==="fshMinLvl"||e.target.id==="fshMaxLvl")&&h()}function y(){let e=l("lastOnlineCheck");return u-e>3e5?'<span> (takes a while to refresh so only do it if you really need to) </span><span id="fshRefresh" class="fshLink">[Refresh]</span>':`<span>[ Wait ${Math.round(300-(u-e)/1e3)}s ]</span>`}function S(e,t){return parseInt($(e,t).val(),10)}function Q(e,t){w(t)||o(e,t)}function te(e,t,n){let i=S("#fshMinLvl",e),m=S("#fshMaxLvl",e);Q("onlinePlayerMinLvl",i),Q("onlinePlayerMaxLvl",m);let F=O(p(n[2]),0);return q(H,F,i,m)}function b(e){$.fn.dataTable.ext.search.push(s(te,e)),$("#fshOutput",e).html(`<div align=right>Min lvl:<input value="${l("onlinePlayerMinLvl")}" class="fshNumberInput" type="number" id="fshMinLvl" /> Max lvl:<input value="${l("onlinePlayerMaxLvl")}" class="fshNumberInput" type="number" id="fshMaxLvl" /> <input id="fshReset" type="button" value="Reset"/></div><table id="fshInv" class="allow stripe hover"></table>`)}function P(e){o("onlinePlayerMinLvl",f.onlinePlayerMinLvl),o("onlinePlayerMaxLvl",f.onlinePlayerMaxLvl),$("#fshMinLvl",e).val(f.onlinePlayerMinLvl),$("#fshMaxLvl",e).val(f.onlinePlayerMaxLvl),h()}var r,a,c,L;function U(e){a=e||{},b(r),G(r,g(a))}function ne(){c===L&&(D("fsh_onlinePlayers",a),U(a))}function re(e,t){return a[e]&&a[e][3]>t}function ae(e,t,n){return[n.eq(0).html(),n.eq(1).html(),n.eq(2).text(),e,t]}function le(e,t,n){let i=$("td",$(n)),m=i.eq(1).text();re(m,e)||(a[m]=ae(e,t,i))}function oe(e,t){let n=t.attr("value");$('#pCC img[src$="/world/icon_action_view.png',e).parent().parent().parent().each(s(le,n))}function ie(e){return parseInt(e.parent().text().match(/(\d+)/g)[0],10)}function se(e,t){L=ie(t);for(let n=2;n<=L;n+=1)d(n).then(e)}function W(e){$("#fshOutput",r).append(e)}function z(e){W(` ${c+1}`);let t=C(e),n=$("#pCC input.custominput",t).first();oe(t,n),c+=1,c===1&&se(z,n),ne()}function me(){$("#fshRefresh",r).hide(),c=0,a={},d(1).then(z),o("lastOnlineCheck",u),W("Parsing online players...")}function fe(e){e.target.id==="fshRefresh"&&me(),e.target.id==="fshReset"&&P(r)}function ue(){r.html(`<span><b>Online Players</b></span>${y()}<div id="fshOutput"></div>`),I("fsh_onlinePlayers").then(U),R(r[0],fe),M(r[0],"keyup",v)}function pe(e){j()||(e?r=$(e):r=$("#pCC"),B().then(ue),E("ui-dialog-titlebar-close").forEach(t=>t.blur()))}export{pe as default};
//# sourceMappingURL=injectOnlinePlayers-7VSW5DV6.js.map
