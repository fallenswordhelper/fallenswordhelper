import{a as O}from"./chunk-6CRJD6JC.js";import{a as Q}from"./chunk-XCY4ABN7.js";import{a as G}from"./chunk-UILHWJRW.js";import{a as W}from"./chunk-DLTLK7MI.js";import{a as M}from"./chunk-F7GEAZQG.js";import{a as H}from"./chunk-5KDEBU7Z.js";import{a as $}from"./chunk-7NGSFOWW.js";import"./chunk-BV2MYMF5.js";import{a as U}from"./chunk-DLSGX6PZ.js";import{a as F}from"./chunk-EO5XDEZO.js";import"./chunk-R4CFGI6O.js";import{b as v}from"./chunk-HUTQN7VU.js";import"./chunk-4JPLNJXC.js";import{a as _}from"./chunk-JR6EGJDG.js";import{a as I}from"./chunk-I4L5KJVD.js";import"./chunk-FSJKGO56.js";import"./chunk-2A2BOA2Y.js";import{a as q}from"./chunk-RT5GGQZO.js";import"./chunk-I3HDBAJB.js";import{a}from"./chunk-3IZSRBVW.js";import"./chunk-WKB7UAH3.js";import{a as j}from"./chunk-S5U6RFFU.js";import{a as D}from"./chunk-42RKXLID.js";import{b as f}from"./chunk-WZOINAX5.js";import{a as V}from"./chunk-VVT2NY3X.js";import{a as P}from"./chunk-GMACQ6ZE.js";import"./chunk-MF5BZBCN.js";import{a as u}from"./chunk-EQNCUII2.js";import"./chunk-5NIAUQBB.js";import"./chunk-FIYDSWPU.js";import"./chunk-3LVRLS3W.js";import"./chunk-4JORPG32.js";import"./chunk-OO7D5SQF.js";import"./chunk-CRUEJ3F6.js";import"./chunk-SKB75UHJ.js";import"./chunk-D6P46ZXI.js";import{a as T}from"./chunk-ZD6KR2JJ.js";import"./chunk-EXPYEXEP.js";import{a as d}from"./chunk-ZACGLTFX.js";import"./chunk-QJQL33BB.js";import{a as L}from"./chunk-FMNM33OL.js";import{a as h}from"./chunk-DPUM55LY.js";import{a as i}from"./chunk-CJ5MYL4D.js";import"./chunk-BPJKI26M.js";import"./chunk-7FXPMHZ5.js";import"./chunk-TUWDUCWH.js";import"./chunk-TEW6YNEY.js";import{a as l}from"./chunk-BXVF4M5G.js";import"./chunk-SNSTWQSS.js";import"./chunk-B5XQQNQZ.js";import"./chunk-OCPSJVCN.js";import"./chunk-NIYIBTJZ.js";import"./chunk-V5W6AOGE.js";import{a as E}from"./chunk-LFCR6ZTM.js";import{a as k}from"./chunk-6UVNJJZQ.js";import"./chunk-Z4OUE4BH.js";import{a as S}from"./chunk-CN4P2KLK.js";import{a as p}from"./chunk-BGO273GM.js";import{b as C}from"./chunk-XJX3OTSZ.js";import"./chunk-GUUYKSUL.js";import"./chunk-D6HZ4P35.js";import"./chunk-E72VSDOE.js";import"./chunk-U4WGNCSF.js";import{a as m}from"./chunk-3XQ73JET.js";function x(t){return Object.values(t)}function s(t){return M(L({subcmd:"ranks"},t))}var K=t=>i({cmd:"guild",subcmd:"ranks",subcmd2:"add",rank_id:t}),X=t=>K(t.getAttribute("onclick").match(/[=](\d+)/)[1]),Y=t=>k('input[name^="permission"]:checked',t).reduce((r,n)=>r+2**Number(n.name.match(/\[(\d+)\]/)[1]),0);function Z(t){return{id:Number(a('input[name="rank_id"]',t).value),name:a('input[name="rank_name"]',t).value,permissions:Y(t),tax:Number(a('input[name="rank_tax"]',t).value)}}function tt(t){let n=t.map(h).map(Z);return{r:{0:n[0],ranks:n.slice(1)},s:!0}}function rt(t){let r=h(t),n=k('input[value="Edit"]',r);return H(n.map(X),tt)}function g(){return i({cmd:"guild",subcmd:"ranks"}).then(rt)}function w(){return d(s,g)}function b(t,r){return t+r}var nt=[[2,5],[4,4],[64,5],[256,.1],[512,.2],[4096,.5],[32768,.2],[524288,.1],[65536,5],[4194304,4]];function ot(t){return v(nt.filter(([r])=>Q(t,r)).reduce((r,[,n])=>r+n-1,0)+t.toString(2).split("").map(Number).reduce(b,0),1)}function et(t,r){let n=r.children[0],o=p(n.firstChild),e=t.find(c=>c&&c.name===o);e&&U(n,`<span class="fshBlue">(${ot(e.permissions)}) Tax:(${e.tax}%)</span> `)}function mt(t,r,n){n.s&&(t.forEach(m(et,[n.r["0"]].concat(n.r.ranks))),r.classList.remove("fshSpinner"))}function at(t,r){let n=I({className:"fshBlock fshRelative fshSpinner fshSpinner12",style:{height:"15px",width:"136px"}});G(n,r),w().then(m(mt,t,n))}function it(t,r){let n=P({className:"custombutton",type:"button",value:"Get Rank Weightings"});l(n,m(at,t,n));let o=r.parentNode.parentNode;u(o,"&nbsp;"),T(o,n)}function R(t){let r=a('#pCC a[href*="=ranks&subcmd2=add"]');r&&it(t,r)}function y(t,r){return i({cmd:"guild",subcmd:"ranks",subcmd2:t,rank_id:r}).then(()=>({s:!0}))}function N(t,r){return s({subcmd2:t,rank_id:r})}function A(t,r){return d(N,y,t,r)}var B;function st(t,r){return B>=Math.min(t.rowIndex,r)||r<1||r>t.parentNode.rows.length}function ct(t){return t==="Up"?-1:2}function ut(t){return t==="Up"?-22:22}function ft(t,r,n){let o=t.target.getAttribute("onclick").match(/rank_id=(\d+)/);A(D(t.target.value),o[1]);let e=r.parentNode.rows[n];V(r,e);let c=ut(t.target.value);window.scrollBy(0,c),t.stopPropagation()}function pt(t){let r=t.target.parentNode.parentNode.parentNode,n=r.rowIndex+ct(t.target.value);st(r,n)||ft(t,r,n)}function lt(t){return["Up","Down"].includes(t.target.value)}function dt(t){lt(t)&&pt(t)}function z(){B&&C("ajaxifyRankControls")&&l(f,dt,!0)}function J(t,r){r&&r[1].includes(j())&&(B=t.rowIndex)}function kt(){let t=f.lastElementChild.previousElementSibling;if(t.rows&&t.rows.length>7)return S(t.rows[7].children[0].children[0].rows)}function ht(t,r){return r[0]===t}function xt(t){return t&&t[1].length>0}function gt(t,r){return t.rowIndex===1?"Guild Founder":p(r)}function wt(t,r){let n=r.children[0],o=gt(r,n),e=t.find(m(ht,o));xt(e)&&(J(r,e),u(n,` <span class="fshBlue">- ${e[1].join(", ")}</span>`))}function bt(t){let r=kt();r&&(_([5,3,r,1,m(wt,t)]),R(r),z())}function Rt(t){let r=x(F(E(t).filter(O)));return $(r.map(n=>n.rank_name)).map(n=>[n,r.filter(o=>o.rank_name===n).map(o=>o.username)])}function yt(){q()||W(!1).then(Rt).then(bt)}export{yt as default};
//# sourceMappingURL=rank-SPNTMAQZ.js.map
