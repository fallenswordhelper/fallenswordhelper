import{a as Ee}from"./chunk-7F4BMXUR.js";import{b as K}from"./chunk-QSQMBTXL.js";import{a as je}from"./chunk-LLYS5JSU.js";import{A as E,B as U,C as i,I as ye,J as we,K as qe,L as T,M as N,N as J,Q as Ae,R as Ce,S as xe,T as Re,U as Se,b as Ie,d as be,o as r,p as L,q as Q,s as a,t as b,u as k,w as z,x as ke,y as f,z as H}from"./chunk-672ZPAPS.js";import{a as De}from"./chunk-L7IS4QIV.js";import{a as ve}from"./chunk-I3HDBAJB.js";import{a as D}from"./chunk-3IZSRBVW.js";import{b as le}from"./chunk-WZOINAX5.js";import{a as pe}from"./chunk-VVT2NY3X.js";import"./chunk-CRUEJ3F6.js";import"./chunk-D6P46ZXI.js";import{a as fe}from"./chunk-ZD6KR2JJ.js";import"./chunk-EXPYEXEP.js";import{a as he}from"./chunk-LJSNN3UL.js";import"./chunk-375QMJKQ.js";import{a as ge}from"./chunk-ZACGLTFX.js";import{a as _e}from"./chunk-QJQL33BB.js";import"./chunk-FMNM33OL.js";import"./chunk-DPUM55LY.js";import{a as de}from"./chunk-CJ5MYL4D.js";import"./chunk-BPJKI26M.js";import"./chunk-7FXPMHZ5.js";import"./chunk-TUWDUCWH.js";import"./chunk-TEW6YNEY.js";import"./chunk-SNSTWQSS.js";import{a as O}from"./chunk-LFXZGYGZ.js";import"./chunk-B5XQQNQZ.js";import"./chunk-OCPSJVCN.js";import"./chunk-NIYIBTJZ.js";import"./chunk-V5W6AOGE.js";import"./chunk-LFCR6ZTM.js";import{a as B}from"./chunk-6UVNJJZQ.js";import"./chunk-Z4OUE4BH.js";import"./chunk-CN4P2KLK.js";import{a as ae}from"./chunk-BGO273GM.js";import"./chunk-XJX3OTSZ.js";import"./chunk-GUUYKSUL.js";import"./chunk-D6HZ4P35.js";import{V as ce,n as me}from"./chunk-E72VSDOE.js";import{b as ue}from"./chunk-U4WGNCSF.js";import"./chunk-3XQ73JET.js";function W(t){return _e({cmd:"inventing",subcmd:"doinvent",recipe_id:t})}function Qe(t){let e=he(t);return e.includes("successfully")?{r:{item:{}},s:!0}:{e:{message:e},s:!1}}function X(t){return de({cmd:"inventing",subcmd:"doinvent",recipe_id:t}).then(Qe)}function Y(t){return ge(W,X,t)}function Ne(t){let e;return{c(){e=b("(max)")},m(n,l){L(n,e,l)},d(n){n&&Q(e)}}}function Fe(t){let e,n,l,s,p,o,d;return{c(){e=a("div"),n=a("div"),n.textContent="INFORMATION",l=k(),s=a("div"),p=b(t[4]),i(n,"background","#8E8668"),i(n,"color","#FFF"),i(n,"font-size","smaller"),i(e,"border","2px solid #FFF"),i(e,"margin","10px auto"),i(e,"width","80%"),i(e,"background","#D3CFC1")},m(u,_){L(u,e,_),r(e,n),r(e,l),r(e,s),r(s,p),d=!0},p(u,_){(!d||_&16)&&E(p,u[4])},i(u){d||(u&&ye(()=>{o||(o=J(e,K,{},!0)),o.run(1)}),d=!0)},o(u){u&&(o||(o=J(e,K,{},!1)),o.run(0)),d=!1},d(u){u&&Q(e),u&&o&&o.end()}}}function Pe(t){let e,n,l,s,p,o,d,u,_,I,F,v,h,w,q,S=t[1]+t[2]+"",A,C,P,te,j,x,ne,G,re,R,ie,M,y,V,oe;o=new je({props:{$$slots:{default:[Ne]},$$scope:{ctx:t}}}),o.$on("click",t[5]);let c=t[4]&&Fe(t);return{c(){e=a("form"),n=a("label"),n.textContent="Select how many to quick invent",l=k(),s=a("input"),p=k(),Ae(o.$$.fragment),d=k(),u=a("input"),_=k(),I=a("div"),c&&c.c(),F=k(),v=a("div"),h=a("div"),w=k(),q=a("p"),A=b(S),C=b(" / "),P=b(t[0]),te=k(),j=a("div"),x=a("div"),ne=b("Successes: "),G=b(t[1]),re=k(),R=a("div"),ie=b("Failures: "),M=b(t[2]),f(n,"for","quick-invent-amount"),f(s,"type","number"),f(s,"id","quick-invent-amount"),f(s,"name","quick-invent-amount"),f(s,"min","0"),f(s,"step","1"),f(s,"class","custominput fshNumberInput"),s.required=!0,f(u,"class","custombutton"),f(u,"type","submit"),u.value="Quick Invent",i(u,"margin-left","8px"),f(h,"class","composing-progress-bar"),i(h,"background-position","right top"),i(h,"width",t[3]+"%"),i(h,"transition","width 0.4s ease-out"),i(h,"position","absolute"),i(h,"top","0px"),i(q,"position","relative"),f(v,"class","composing-progress"),i(v,"margin","0px auto"),i(v,"font-weight","bold"),i(v,"color","#fff"),i(v,"left","0px"),i(x,"display","inline-block"),i(x,"width","250px"),f(x,"class","fshQs fshGreen"),i(R,"display","inline-block"),i(R,"width","250px"),f(R,"class","fshQs fshRed"),i(j,"margin-top","36px"),f(e,"class","fshCenter"),i(e,"margin-top","12px")},m(m,g){L(m,e,g),r(e,n),r(e,l),r(e,s),U(s,t[0]),r(e,p),Ce(o,e,null),r(e,d),r(e,u),r(e,_),r(e,I),c&&c.m(I,null),r(I,F),r(I,v),r(v,h),r(v,w),r(v,q),r(q,A),r(q,C),r(q,P),r(I,te),r(I,j),r(j,x),r(x,ne),r(x,G),r(j,re),r(j,R),r(R,ie),r(R,M),y=!0,V||(oe=[z(s,"input",t[9]),z(e,"submit",ke(t[6]))],V=!0)},p(m,[g]){g&1&&H(s.value)!==m[0]&&U(s,m[0]);let se={};g&2048&&(se.$$scope={dirty:g,ctx:m}),o.$set(se),m[4]?c?(c.p(m,g),g&16&&T(c,1)):(c=Fe(m),c.c(),T(c,1),c.m(I,F)):c&&(we(),N(c,1,1,()=>{c=null}),qe()),(!y||g&8)&&i(h,"width",m[3]+"%"),(!y||g&6)&&S!==(S=m[1]+m[2]+"")&&E(A,S),(!y||g&1)&&E(P,m[0]),(!y||g&2)&&E(G,m[1]),(!y||g&4)&&E(M,m[2])},i(m){y||(T(o.$$.fragment,m),T(c),y=!0)},o(m){N(o.$$.fragment,m),N(c),y=!1},d(m){m&&Q(e),xe(o),c&&c.d(),V=!1,Ie(oe)}}}function Ge(t,e,n){let{max:l}=e,{recipeID:s}=e,p=1,o=0,d=0,u=0,_="";function I(){n(1,o=0),n(2,d=0),n(3,u=0),n(4,_="")}function F(){n(0,p=l),O("inventing","maxInventButton")}async function v(){if(O("inventing","quickInvent"),!p)return;I(),Array(p).fill(s).reduce(async(q,S)=>{let A=await q;if(!A||A.s===!0){let C=await Y(S);return C.s===!1?n(4,_=C.e.message):C.r.success_count>0?n(1,o+=1):n(2,d+=1),n(3,u=100*((o+d)/p)),C}return A},Promise.resolve())}function h(){p=H(this.value),n(0,p)}return t.$$set=w=>{"max"in w&&n(7,l=w.max),"recipeID"in w&&n(8,s=w.recipeID)},[p,o,d,u,_,F,v,l,s,h]}var Te=class extends Se{constructor(e){super();Re(this,e,Ge,Pe,be,{max:7,recipeID:8})}},Be=Te;function Me(t){let[e,n]=ae(D("tr:nth-child(2) td",t)).split("/").map(l=>parseInt(l,10));return{have:e,need:n}}function Ve(){return B(`#pCC td[background^="${ue}ui/inventory/"]`).map(e=>e.parentElement.parentElement).map(Me)}function Z(){return Ve().reduce((e,n)=>Math.min(e,Math.floor(n.have/n.need)),1/0)}function Oe(t,e){return new Be({props:t,target:e})}function ze(t){let n=t.insertRow(-1).insertCell(-1);n.className="header",n.setAttribute("height","1")}function He(t){let n=t.insertRow(-1).insertCell(-1);return n.className="fshCenter",n}function $(){let t=D('input[name="recipe_id"]');if(!t)return;let e=Z(),n=le.lastElementChild;ze(n),Oe({max:e,recipeID:t.value},He(n))}function Ue(t){if(!t)return;let e=t.src.match(/\/items\/(\d+)\.gif/);if(e)return e[1]}function Je(t){return`${ce}items${me}view&item_id=${t}`}function Ke(t){return De({href:Je(t),target:"_blank"})}function Le(t,e){let n=Ue(e);if(!n)return;let l=Ke(n);pe(l,t),fe(l,t)}function We(t){Le(t,t)}function Xe(){let t=Ee('.//b[.="Target Invention"]/../../following-sibling::*[1]//img'),e=D("#pCC b");Le(e,t)}function Ye(){B('#pCC img[src*="/items/"]').forEach(We)}function ee(){Xe(),Ye()}function Ze(){ve()&&(ee(),$())}export{Ze as default};
//# sourceMappingURL=inventing-7MAEZEJ3.js.map
