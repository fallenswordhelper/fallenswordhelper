import{a as m}from"./chunk-HYLQEGZ4.js";import{a as l}from"./chunk-7I6ASYKS.js";import{a as d}from"./chunk-E53ZSUER.js";function h(t){return t.data?(delete t.data.fshrnd,$.param(t.data)):t.url}function T(t,e,n,r){let i=`${e.status} ${e.statusText} - `;if(e.statusText===r.toString())return i+h(t);let a=`${i+n} ${r} - ${h(t)}`;return n==="parsererror"?`${a} - ${e.responseText}`:a}var u=class extends Error{constructor([e,n,r,i],...a){super(T(e,n,r,i),...a),Error.captureStackTrace&&Error.captureStackTrace(this,u),this.jqSettings=e,this.jqXhr=n,this.jqTextStatus=r,this.jqErrorThrown=i}};var s=!0,o=[],p=0;function b(t){return typeof t=="string"?{url:t}:t}function q(t){t.abort(),o=[]}function w(t){d(window,"beforeunload",m(q,t))}var j=[0,503,504],k=["abort"],F=["We have encountered an issue with a server connection","We're performing maintenance on the game","the team have been notified and will get it fixed soon","uUDRezBqFM4"];function R(t){return j.includes(t.jqXhr.status)||k.includes(t.jqTextStatus)||F.some(e=>t.jqXhr.responseText.includes(e))}function v(t,e){R(e)||(l(e.toString(),!1),t(null))}function y([t,e,n,r,i]){return function(c,x,S){n>0&&c.status===503?setTimeout(t,100,e,n-1,r,i):v(r,new u([e,c,x,S]))}}function g(t,e,n,r){let i=b(t);return i.beforeSend=w,$.ajax(i).then(n).catch(y([g,i,e,n,r]))}function E(t){if($.active<5){let e=o.shift();g(...e),t()}}function f(){o.length===0?s=!0:(s=!1,E(f))}function H(){p||($(document).ajaxComplete(f),p=!0)}function M(t,e,n,r){o.push([t,e,n,r]),s&&f()}function W(t){if(H(),t)return new Promise((e,n)=>{M(t,10,e,n)})}export{W as a};
//# sourceMappingURL=chunk-4MID3VOD.js.map
