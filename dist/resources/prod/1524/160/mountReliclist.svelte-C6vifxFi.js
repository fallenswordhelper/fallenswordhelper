import{ap as s,y as e,z as a,ak as i,al as l,J as t,dW as c,aG as n,E as v,aF as r,C as d,P as o,S as u,K as m,F as g,N as $,bR as f,bG as b,D as h,G as k,H as y,Q as C,bb as H,bc as G,bF as _,bT as p,O as w,s as S,ad as F,e7 as L,bN as N,c2 as P,aA as R,t as j}from"./calfSystem-HVCiy-VV.js"
import{r as x}from"./reliclist-ChZezNXR.js"
var A=d("<a> </a>"),D=d('<div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"><a> </a></div> <div class="svelte-s68cg2"><!></div> <div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"> </div> <div class="svelte-s68cg2"><!></div>',1),O=d('<div class="content grid svelte-s68cg2"><div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <div class="innerColumnHeader svelte-s68cg2"><!></div> <!></div>'),T=d('<div class="content svelte-s68cg2"> </div>'),z=d(" <br/>",1),E=d('<div class="content svelte-s68cg2"></div>')
function I(s,d){e(d,!0)
let R=a(d,"visible",15,!0),j=i(l([])),I=i(l([])),J=-1,K=""
function M(s){S("Relic List",s)}function Q(s){t(I,s.concat(m(I)),!0)}const U=(s,e)=>s?.attributes?.find((s=>e=>e.id===s)(e)),W=(s,e)=>U(s,e)?.value??"",X=s=>U(s,6),Y=(s,e)=>J*(s.time-e.time),q=(s,e)=>U(s,e)?.value??0,B=s=>(e,a)=>J*(q(e,s)-q(a,s)),V=(s,e)=>J*P(s.guild?.name??"",e.guild?.name??""),Z=(s,e)=>J*P(s.name,e.name),ss=s=>s.location.realm.min_level,es=(s,e)=>J*(ss(s)-ss(e))
function as(s,e){J=K===s?-1*J:1,t(j,m(j).slice().sort(e),!0),K=s}function is(s,e){M(s),as(s,e)}async function ls(s=0,e=100){Q([`offset ${s}`])
const a=await x(null,s,e)
if(a?.s)return a.r.remaining_relics?a.r.relics.concat(await ls(s+a.r.relics.length,Math.min(100,a.r.remaining_relics))):a.r.relics}async function ts(){Q(["Loading..."])
const s=await ls()
F(s)&&(t(j,s.filter(X),!0),as("sort by level",es))}let cs=i(l(Promise.resolve()))
t(cs,ts(),!0)
{const e=s=>{var e=b("Relic List")
$(s,e)}
c(s,{close:function(){M("close"),R(!1)},get visible(){return R()},title:e,children:(s,e)=>{var a=n(),i=v(a)
r(i,()=>m(cs),s=>{var e=E()
k(e,21,()=>m(I),p,(s,e)=>{var a=z(),i=v(a)
o(()=>u(i,`${m(e)??""} `)),$(s,a)}),$(s,e)},s=>{var e=O(),a=g(e),i=g(a)
f(i,{onclick:()=>{is("sort by level",es)},children:(s,e)=>{var a=b("Level")
$(s,a)},$$slots:{default:!0}})
var l=h(a,2),t=g(l)
f(t,{onclick:()=>{is("sort by name",Z)},children:(s,e)=>{var a=b("Name")
$(s,a)},$$slots:{default:!0}})
var c=h(l,2),n=g(c)
f(n,{onclick:()=>{is("sort by guild",V)},children:(s,e)=>{var a=b("Guild")
$(s,a)},$$slots:{default:!0}})
var r=h(c,2),d=g(r)
f(d,{onclick:()=>{is("sort by stam gain",B(6))},children:(s,e)=>{var a=b("Stam Gain")
$(s,a)},$$slots:{default:!0}})
var p=h(r,2),w=g(p)
f(w,{onclick:()=>{is("sort by attack",B(0))},children:(s,e)=>{var a=b("Atk")
$(s,a)},$$slots:{default:!0}})
var S=h(p,2),F=g(S)
f(F,{onclick:()=>{is("sort by damage",B(4))},children:(s,e)=>{var a=b("Dmg")
$(s,a)},$$slots:{default:!0}})
var P=h(S,2),R=g(P)
f(R,{onclick:()=>{is("sort by stamina",B(5))},children:(s,e)=>{var a=b("Stam")
$(s,a)},$$slots:{default:!0}})
var x=h(P,2),T=g(x)
f(T,{onclick:()=>{is("sort by gold gain",B(7))},children:(s,e)=>{var a=b("Gold Gain")
$(s,a)},$$slots:{default:!0}})
var z=h(x,2),E=g(z)
f(E,{onclick:()=>{is("sort by xp gain",B(8))},children:(s,e)=>{var a=b("XP Gain")
$(s,a)},$$slots:{default:!0}})
var I=h(z,2),J=g(I)
f(J,{onclick:()=>{is("sort by time",Y)},children:(s,e)=>{var a=b("Time")
$(s,a)},$$slots:{default:!0}})
var K=h(I,2)
k(K,17,()=>m(j),s=>s.id,(s,e)=>{var a=D(),i=v(a),l=g(i),t=h(i,2),c=g(t)
c.__click=()=>M("view relic on UFSG")
var n=g(c),r=h(t,2),d=g(r),f=s=>{var a=A()
a.__click=()=>M("view guild")
var i=g(a)
o(()=>{C(a,"href",`${_??""}${m(e).guild.id??""}`),u(i,m(e).guild.name)}),$(s,a)}
y(d,s=>{m(e).guild&&s(f)})
var k=h(r,2),p=g(k),w=h(k,2),S=g(w),F=h(w,2),P=g(F),R=h(F,2),j=g(R),x=h(R,2),O=g(x),T=h(x,2),z=g(T),E=h(T,2),I=g(E),J=s=>{var a=b()
o(s=>u(a,s),[()=>function(s){const[e,a,i,l]=L(s)
return`${e}d ${N(a)}h ${N(i)}m ${N(l)}s`}(m(e).time)]),$(s,a)}
y(I,s=>{m(e).time&&s(J)}),o((s,a,i,t,v,r)=>{u(l,m(e).location.realm.min_level),C(c,"href",`${H??""}relics${G}view&relic_id=${m(e).id??""}`),u(n,m(e).name),u(p,s),u(S,a),u(P,i),u(j,t),u(O,v),u(z,r)},[()=>W(m(e),6),()=>W(m(e),0),()=>W(m(e),4),()=>W(m(e),5),()=>W(m(e),7),()=>W(m(e),8)]),$(s,a)}),$(s,e)},(s,e)=>{var a=T(),i=g(a)
o(()=>u(i,m(e).message)),$(s,a)}),$(s,a)},$$slots:{title:!0,default:!0}})}w()}s(["click"])
const J=l({visible:!0})
let K=0
function M(){R("betaOptIn")&&(K?J.visible=!0:K=j(I,{props:J,target:document.body}))}export{M as default}
//# sourceMappingURL=mountReliclist.svelte-C6vifxFi.js.map
