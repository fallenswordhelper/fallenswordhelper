import{a as o}from"./chunk-R23QVEJA.js";import{a as u}from"./chunk-WKK2D5SI.js";function y(){if(!(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent))||!indexedDB.databases)return Promise.resolve();let e;return new Promise(r=>{let n=()=>indexedDB.databases().finally(r);e=setInterval(n,100),n()}).finally(()=>clearInterval(e))}var s=y;function a(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function h(t,e){let r=s().then(()=>{let n=indexedDB.open(t);return n.onupgradeneeded=()=>n.result.createObjectStore(e),a(n)});return(n,p)=>r.then(m=>p(m.transaction(e,n).objectStore(e)))}var i;function c(){return i||(i=h("keyval-store","keyval")),i}function f(t,e=c()){return e("readonly",r=>a(r.get(t)))}function l(t,e,r=c()){return r("readwrite",n=>(n.put(e,t),a(n.transaction)))}var d=t=>{t&&t.name!=="NotFoundError"&&u(o(t),!1)};async function E(t,e){try{return await f(t,e)}catch(r){d(r)}}async function k(t,e,r){try{return await l(t,e,r)}catch(n){d(n)}}export{E as a,k as b};
//# sourceMappingURL=chunk-QB2MZ562.js.map
