import{a as M}from"./chunk-Q3S5DRJJ.js";import{a as T}from"./chunk-IHL2UW6R.js";import"./chunk-4CIDA5KU.js";import"./chunk-7FPLNTO3.js";import"./chunk-MHE6IB75.js";import{a as I}from"./chunk-UYKJTL3G.js";import{a as x}from"./chunk-HPPEXIMR.js";import{a as P}from"./chunk-4QY6SPTZ.js";import"./chunk-RN6NICJ7.js";import{a as s}from"./chunk-WP265O3M.js";import"./chunk-TZIXO72F.js";import{a as y}from"./chunk-GUJMNTXY.js";import{a as E}from"./chunk-QCO5J3CK.js";import"./chunk-3R32ULME.js";import"./chunk-KTI2IMEY.js";import{a as B}from"./chunk-GXOFVYKC.js";import"./chunk-LGNFNBOW.js";import"./chunk-A6LP6MUS.js";import{a as w}from"./chunk-MHWHHESW.js";import{d as C}from"./chunk-B7ZGEAQ4.js";import{a}from"./chunk-NT4BD23Z.js";import"./chunk-B7LKBV3M.js";import"./chunk-E3BH7XBT.js";import"./chunk-IUVEXKRJ.js";import"./chunk-NRW7AT6T.js";import"./chunk-DPECAWNM.js";import"./chunk-NIOVFM2M.js";import"./chunk-6ZCA6D63.js";import"./chunk-YXAOTQ2S.js";import"./chunk-OHAOQZFW.js";import"./chunk-4KWKR7LL.js";import{b as m}from"./chunk-Q3ULPWYK.js";import{a as r}from"./chunk-JCK66TTB.js";import{a as o}from"./chunk-SY4ES3W2.js";import{a as v}from"./chunk-S7AF3SZF.js";import"./chunk-TFKKNJKY.js";import"./chunk-ZFTJPJLX.js";import{c as h}from"./chunk-R7J7NY4A.js";import{T as k,r as b}from"./chunk-5ELKH2XV.js";import"./chunk-5ORZS6IQ.js";import"./chunk-BRQN5OZB.js";import{a as f}from"./chunk-BZJZQFW2.js";import"./chunk-QCTVAEOV.js";async function p(e){let t=await M({data:{cmd:"composing",subcmd:"dobreakdown",item_list:e},dataType:"text"});return w(t)??{error:1,msg:"Server Error"}}var l=0,d=0;function j(e){let t=e.id.replace(`${d}-item-`,"");l[t]&&l[t].craft==="Perfect"&&E(e)}function A(){let e=P("selectable-item",o(`${d}-items`));e.length!==0&&e.forEach(j)}function D(e){l=e.items;let t=y({className:"fshAC"});s(t,'<button class="fshBl">Perfect</button>'),B(m(),t),r(t,A)}async function u(e){if(a())return;d=e;let t=await T();t?.items&&D(t)}var c="disableBreakdownPrompts",i=0,n=[];function F(e){e.hide()}function H(e,t){e.animate({height:0},500,t)}function O(){let e=$("#composingMessageContainer");e.animate({opacity:0},500,f(H,e,f(F,e)))}function Q(e,t){return $("<div/>",{id:"composingMessageText"}).css({width:"90%","text-align":"center","background-color":t,color:"rgb(255, 255, 255)",margin:"5px auto 5px auto",padding:"2px"}).html(e)}function N(e,t){$("#composingMessageContainer").remove(),$("#composingMessage").append($("<div/>",{id:"composingMessageContainer",width:"100%"}).append(Q(e,t))),setTimeout(O,5e3)}function S(e){e.error!==0?N(`Error: ${e.msg}`,"rgb(164, 28, 28)"):I(`${k+b}breakdown&m=1`)}async function V(){let e=await p(n);S(e)}function L(e){if(e.stopPropagation(),n.length===0){N("Error: No items selected.","rgb(164, 28, 28)");return}V()}function R(e){i&&e.target.id==="breakdown-selected-items"&&L(e)}function U(e){if(!x("selectable-item",e.target))return;let t=e.target.id.replace("composing-item-",""),g=n.indexOf(t);g===-1?n.push(t):n.splice(g,1)}function _(){i=!i,v(c,i)}function q(){s(m(),`<table class="fshTblCenter"><tbody>${C(c)}</tbody></table>`)}function z(e){r(e.parentNode,R,!0),r(o("composing-items"),U),r(o(c),_)}function G(){if(a())return;let e=o("breakdown-selected-items");e&&(u("composing"),i=h(c),q(),z(e))}export{G as default};
//# sourceMappingURL=breakdown-DKGAMYIA.js.map
