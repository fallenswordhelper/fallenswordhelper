import{a as O}from"./chunk-DZF5XANJ.js";import{a as N}from"./chunk-ORW7B7YJ.js";import{a as m}from"./chunk-3XG27UWS.js";import{a as _}from"./chunk-I6ZSBYQ3.js";import{a as R}from"./chunk-YQ625XVJ.js";import{a as E}from"./chunk-VMCLSOZO.js";import{a as n}from"./chunk-CAX7THIP.js";import{a as l}from"./chunk-LGNFNBOW.js";import{a as T,b as D}from"./chunk-K2ALIVI4.js";import{a as A}from"./chunk-SY2OGTK4.js";import{b as p,c as k,f as P}from"./chunk-FR27OJE5.js";import{a as M}from"./chunk-JG7KZ32H.js";import{a as x}from"./chunk-FMA2QB7F.js";import{b as h}from"./chunk-DPECAWNM.js";import{a as L}from"./chunk-YXAOTQ2S.js";import{a as y}from"./chunk-BZJZQFW2.js";function u(){return E({cmd:"superelite"})}function C(t){let e=t.replace("<br>"," ").split(/[: /]/);return O([e[2],e[1],e[0],e[3],e[4]])}function $(t){return Math.floor((k()-C(t))/1e3)}function F(t){return{time:$(t.cells[0].innerHTML),creature:{name:M(t.cells[1])}}}function H(t){let e=x("#pCC table table",t);return e?{r:N(e,4,1).map(F),s:!0,t:`0 ${String(P())}`}:{s:!1}}async function d(){return H(await _({cmd:"superelite"}))}function b(){return R(u,d)}function g(t){return L(t?.se??{}).flatMap(([e,r])=>A(r)?r.map(([o,s])=>[o,e,s,t?.loc[s]]):[[r,e.replaceAll(" ","_"),0,""]])}var U=t=>t.join("|"),v=(t,e)=>t.r.map(r=>[e-r.time,r.creature.name.replace(" (Super Elite)","").replaceAll(" ","_"),r.realm.realm.id,r.realm.realm.name]),z=(t,e)=>n(t.map(U).concat(e.map(U))).map(r=>r.split("|")).map(([r,o,s,f])=>[Number(r),o,Number(s),f]).sort(([r],[o])=>o-r),B=t=>l(n(t.map(([,e])=>e)).map(e=>[e,t.filter(([,r])=>r===e).map(([r,,o])=>[r,o]).slice(0,10)])),G=t=>l(n(t.map(([,,e])=>e)).map(e=>[e,t.find(([,,r])=>r===e)[3]])),J=t=>({se:B(t),loc:G(t)});function S(t,e){let r=Number(e.t.split(" ")[1]),o=v(e,r),s=g(t),f=z(o,s),q=J(f);return{lastUpdate:r,...q}}var K=m(),w=K;var c=!1,a={},j=0,i=!1,Q=t=>Math.max(0,600-(p()-(t?.lastUpdate??0)),600-(p()-j));async function V(){j=p();let t=await b();t?.s&&(a=S(a,t),D("fsh_seLog",a),w.set(a))}async function W(){for(c=!0,a=await T("fsh_seLog"),w.set(a);i;)c=!0,await h(Q(a)*1e3),i&&await V(),c=!1}function X(t,e){i=e,t(i),i&&!c&&W()}function Y(){let{subscribe:t,set:e}=m(0);return{subscribe:t,set:y(X,e)}}var Z=Y(),Et=Z;export{g as a,w as b,Et as c};
//# sourceMappingURL=chunk-OIVGO2C2.js.map
