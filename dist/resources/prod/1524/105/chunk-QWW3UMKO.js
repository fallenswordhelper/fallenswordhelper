import{a as Rt,b as Ht,c as Vt}from"./chunk-RK3NJZTQ.js";import{a as Et}from"./chunk-KR4OHMLE.js";import{a as Tt}from"./chunk-H7SNCFWP.js";import{a as Qt}from"./chunk-LD3RGCFD.js";import{a as Zt}from"./chunk-3UR76VTO.js";import{a as Xt}from"./chunk-IHL2UW6R.js";import{a as C}from"./chunk-U5XRZO3G.js";import{a as z}from"./chunk-6HYHAIWX.js";import{a as F}from"./chunk-HPPEXIMR.js";import{a as _t}from"./chunk-PVXVA62G.js";import{a as j}from"./chunk-6HERGS5C.js";import{a as U}from"./chunk-YQ625XVJ.js";import{a as At}from"./chunk-LGNFNBOW.js";import{a as w}from"./chunk-Y5EGDMIB.js";import{A as Y,D as B,F as $,G as M,H as x,I as q,J as vt,P as T,T as Lt,X as y,Y as N,a as O,aa as K,b as wt,d as X,fa as E,ga as R,ha as H,ia as V,ja as W,s as g,t as d,u as p,v as xt,w as h,x as I,y as Q,z as Ct}from"./chunk-TVNPLL64.js";import{a as Dt}from"./chunk-NT4BD23Z.js";import{a as Gt}from"./chunk-JG7KZ32H.js";import{a as pt}from"./chunk-KOM3R443.js";import{a as $t}from"./chunk-YXAOTQ2S.js";import{a as Nt}from"./chunk-V45UJIF2.js";import{b as Bt}from"./chunk-Q3ULPWYK.js";import{a as yt}from"./chunk-JCK66TTB.js";import{a as tt}from"./chunk-S7AF3SZF.js";import{c as It}from"./chunk-R7J7NY4A.js";import{Y as gt,c as kt,r as ht,u as bt}from"./chunk-5ELKH2XV.js";import{a as St}from"./chunk-BZJZQFW2.js";import{a as S}from"./chunk-QCTVAEOV.js";var Wt=0,Ft=0;function A(){if(!Ft){let t=S.subcmd==="dropitems"?"removeIndex[]":"storeIndex[]";Wt=document.forms[0]?.elements[t],Ft=!0}return Wt}function D(){let t=A();return t?Et(t):[]}function Z(){return D().filter(t=>!F("fshHide",C(t)))}var et=null;function v(){return et||(et=Xt()),et}function ot(t){return j({subcmd:"dodropitems",removeIndex:t})}async function nt(t){let e=await Vt(t),o={s:e.r===0};return o.s?o.r={items:[],deleted_items:t}:o.e={message:e.m},o}function rt(t){return U(ot,nt,t)}function Ut(t){return C(t.target).cells[0].children[0].value}async function te(t){let{items:e}=await v();w("storeitems","Check All of Type"),Z().filter(o=>e[o.value]&&e[o.value].item_id===e[Ut(t)].item_id).forEach(o=>{o.checked=!o.disabled&&!o.checked})}function ee(t){let e=C(t);e.cells[0].children[0].disabled=!0,Nt(".actionButton",e).forEach(o=>{o.disabled=!0,o.textContent="",o.removeAttribute("data-tooltip"),o.classList.add("inProgress")}),t.blur(),t.classList.add("fshSpinner","fshSpinner12")}function oe(t,e){t.target.classList.remove("fshSpinner","fshSpinner12"),t.target.classList.add("fshGreen"),t.target.textContent=e}async function jt(t,e,o){ee(t.target);let i=await e([Ut(t)]);i&&i.s?oe(t,o):Tt(i)}var ne=[["Check All",te],["Quick Send",t=>{w("storeitems","Quick Send"),jt(t,Ht,"Sent")}],["Quick Drop",t=>{w("storeitems","Quick Drop"),jt(t,rt,"Dropped")}]];function it(t){if(t.target.tagName==="A"&&["AH","UFSG"].includes(t.target.textContent)&&w("storeitems",t.target.textContent),t.target.tagName!=="BUTTON"||F("custombutton",t.target))return;let e=ne.find(([o])=>o===pt(t.target));e&&e[1](t)}var zt=["showExtraLinks","enableItemColoring","checkAllOfType","showQuickSendLinks","showQuickDropLinks"];function re(t){let e=t[2](t[0])+"",o,i;return{c(){o=I(e),i=I(" AH and UFSG Links")},m(n,r){d(n,o,r),d(n,i,r)},p(n,r){r&1&&e!==(e=n[2](n[0])+"")&&$(o,e)},d(n){n&&(p(o),p(i))}}}function ie(t){let e=t[2](t[1])+"",o,i;return{c(){o=I(e),i=I(" Quick Drop links")},m(n,r){d(n,o,r),d(n,i,r)},p(n,r){r&2&&e!==(e=n[2](n[1])+"")&&$(o,e)},d(n){n&&(p(o),p(i))}}}function se(t){let e,o,i;return e=new z({props:{$$slots:{default:[ce]},$$scope:{ctx:t}}}),e.$on("click",t[5]),{c(){o=h("div"),E(e.$$.fragment),x(o,"display","contents"),x(o,"--button-width","10.8em")},m(n,r){d(n,o,r),R(e,o,null),i=!0},p(n,r){let c={};r&128&&(c.$$scope={dirty:r,ctx:n}),e.$set(c)},i(n){i||(y(e.$$.fragment,n),i=!0)},o(n){N(e.$$.fragment,n),i=!1},d(n){n&&e&&p(o),H(e,n)}}}function ce(t){let e;return{c(){e=I("Select All Guild Locked")},m(o,i){d(o,e,i)},d(o){o&&p(e)}}}function le(t){let e,o,i,n,r,c,b,k;e=new z({props:{$$slots:{default:[re]},$$scope:{ctx:t}}}),e.$on("click",t[3]),n=new z({props:{$$slots:{default:[ie]},$$scope:{ctx:t}}}),n.$on("click",t[4]);let l=S.subcmd2==="storeitems"&&se(t);return{c(){o=h("div"),E(e.$$.fragment),i=I(`\xA0
`),r=h("div"),E(n.$$.fragment),c=I(`\xA0
`),l&&l.c(),b=Ct(),x(o,"display","contents"),x(o,"--button-width","11.8em"),x(r,"display","contents"),x(r,"--button-width","10.6em")},m(s,f){d(s,o,f),R(e,o,null),d(s,i,f),d(s,r,f),R(n,r,null),d(s,c,f),l&&l.m(s,f),d(s,b,f),k=!0},p(s,[f]){let _={};f&129&&(_.$$scope={dirty:f,ctx:s}),e.$set(_);let a={};f&130&&(a.$$scope={dirty:f,ctx:s}),n.$set(a),S.subcmd2==="storeitems"&&l.p(s,f)},i(s){k||(y(e.$$.fragment,s),y(n.$$.fragment,s),y(l),k=!0)},o(s){N(e.$$.fragment,s),N(n.$$.fragment,s),N(l),k=!1},d(s){s&&(p(i),p(c),p(b)),s&&e&&p(o),H(e,s),s&&n&&p(r),H(n,s),l&&l.d(s)}}}function ae(t,e,o){let i=T(),n=s=>s?"Hide":"Show",{showExtraLinks:r=!1}=e,{showQuickDropLinks:c=!1}=e;function b(){w("storeitems","toggleShowExtraLinks"),o(0,r=!r),tt("showExtraLinks",r),i("showExtraLinks",r)}function k(){w("storeitems","toggleShowQuickDropLinks"),o(1,c=!c),tt("showQuickDropLinks",c),i("showQuickDropLinks",c)}function l(){w("storeitems","selectLocked"),i("selectLocked")}return t.$$set=s=>{"showExtraLinks"in s&&o(0,r=s.showExtraLinks),"showQuickDropLinks"in s&&o(1,c=s.showQuickDropLinks)},[r,c,n,b,k,l]}var st=class extends W{constructor(e){super(),V(this,e,ae,le,X,{showExtraLinks:0,showQuickDropLinks:1})}},Pt=st;var ct=null;function me(t,e){if(e.item_id!==13699)return e.item_name;let o=t.find(i=>i.value===String(e.inv_id));return o?Gt(o.parentNode.parentNode.children[2]):e.item_name}async function ue(t){let e=await v();return e?.items?At($t(e.items).map(([o,i])=>[o,{...i,item_name:me(t,i)}])):{}}function fe(t){return ct||(ct=ue(t)),ct}async function lt(){let t=D();if(!t.length)return[];let e=await fe(t);return t.map(o=>[C(o).cells[2],e[o.value]]).filter(([,o])=>o)}function ke(t,e){return t[e]=(t[e]||0)+1,t}function he(t){return{...t.map(([,e])=>e.item_id).reduce(ke,{}),13699:1}}var be=t=>` data-tooltip="INSTANTLY ${t} THE ITEM. NO REFUNDS OR DO-OVERS! Use at own risk."`,Yt=(t,e,o)=>` [<button class="fshStoreItemsButton ${t}"${e}>${o}</button>]`,Jt=(t,e,o)=>Yt(`${t} actionButton tooltip-multiline fshNoWrap`,be(e),`Quick ${o}`),Mt=(t,e,o)=>`[<a href="${t}"${e}>${o}</a>]`;function ge(t){return t.bound?'<span class="aHSpacer"></span>':Mt(`${bt}${encodeURIComponent(t.item_name)}`,"","AH")}var Ie=t=>Mt(`${gt}items${ht}view&item_id=${t.item_id}`,' target="_blank"',"UFSG"),_e=(t,e,o)=>t[2]&&e[o.item_id]>1,we=(t,e)=>t[3]&&(!e.bound||e.guild_tag!==-1),xe=(t,e)=>t[4]&&e.guild_tag===-1;function Ce(t,e){return e[0]()?t+e[1]():t}function ve(t,e,o){return[[()=>t[0],()=>`${ge(o)} ${Ie(o)}`],[()=>!0,()=>`&nbsp;${o.item_name}`],[()=>_e(t,e,o),()=>Yt("fshBlack","","Check All")],[()=>we(t,o),()=>Jt("fshBlue","SENDS","Send")],[()=>xe(t,o),()=>Jt("fshRed","DROP","Drop")]]}function Le(t,e,[o,i]){let n=o;t[1]&&(n.className=kt[i.rarity].clas);let r=ve(t,e,i).reduce(Ce,"");n.innerHTML!==r&&(n.innerHTML=r)}async function L(t){let e=await lt(),o=t[2]?he(e):[];_t(3,Qt,[[3,e,0,St(Le,t,o)]])}function Ge(t){let[e]=document.forms;return new Pt({props:{showExtraLinks:t[0],showQuickDropLinks:t[4]},target:e.parentNode.children[5].children[0]})}async function Se(){let t=Z();if(!t.length)return;let e=await v();e.items&&t.map(o=>[o,e.items[o.value]]).filter(([,o])=>o).forEach(([o,i])=>{o.checked=!o.disabled&&i.guild_tag!==-1})}function at(t){let e=Ge(t);e.$on("showExtraLinks",o=>{t[0]=o.detail,L(t)}),e.$on("showQuickDropLinks",o=>{t[4]=o.detail,L(t)}),e.$on("selectLocked",()=>{Se()})}function Be(){if(Dt()||!A())return;let e=zt.map(o=>It(o));Zt(),at(e),e.some(o=>o)&&L(e),yt(Bt(),it)}function mt(t,e){return j({subcmd:"sendtofolder",folder_id:t,folderItem:e})}async function ut(t,e){return await Rt(e,t),{r:e}}function $e(t,e){return U(mt,ut,t,e)}function qt(t,e,o){let i=t.slice();return i[5]=e[o],i}function Kt(t){let e,o=t[5].name+"",i,n;return{c(){e=h("option"),i=I(o),e.__value=n=t[5].id,M(e,e.__value)},m(r,c){d(r,e,c),g(e,i)},p(r,c){c&1&&o!==(o=r[5].name+"")&&$(i,o),c&1&&n!==(n=r[5].id)&&(e.__value=n,M(e,e.__value))},d(r){r&&p(e)}}}function ye(t){let e,o,i,n,r,c,b,k,l,s,f,_=K(t[0]),a=[];for(let m=0;m<_.length;m+=1)a[m]=Kt(qt(t,_,m));return{c(){e=h("tr"),o=h("td"),i=h("span"),i.textContent="Move selected items to:",n=Q(),r=h("select");for(let m=0;m<a.length;m+=1)a[m].c();c=Q(),b=h("span"),b.textContent="\xA0",k=Q(),l=h("button"),l.textContent="Move",B(r,"class","customselect"),t[1]===void 0&&Lt(()=>t[3].call(r)),B(l,"class","custombutton svelte-vafhru"),B(l,"type","button"),B(o,"class","fshCenter")},m(m,G){d(m,e,G),g(e,o),g(o,i),g(o,n),g(o,r);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(r,null);q(r,t[1],!0),g(o,c),g(o,b),g(o,k),g(o,l),s||(f=[Y(r,"change",t[3]),Y(l,"click",t[2])],s=!0)},p(m,[G]){if(G&1){_=K(m[0]);let u;for(u=0;u<_.length;u+=1){let dt=qt(m,_,u);a[u]?a[u].p(dt,G):(a[u]=Kt(dt),a[u].c(),a[u].m(r,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=_.length}G&3&&q(r,m[1])},i:O,o:O,d(m){m&&p(e),xt(a,m),s=!1,wt(f)}}}function Ne(t,e,o){let i=T(),{folders:n}=e,r;function c(){i("move",r)}function b(){r=vt(this),o(1,r),o(0,n)}return t.$$set=k=>{"folders"in k&&o(0,n=k.folders)},[n,r,c,b]}var ft=class extends W{constructor(e){super(),V(this,e,Ne,ye,X,{folders:0})}},fn=ft;export{A as a,D as b,$e as c,fn as d,Z as e,v as f,rt as g,Be as h};
//# sourceMappingURL=chunk-QWW3UMKO.js.map
