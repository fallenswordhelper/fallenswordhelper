import{a as Tt,b as St}from"./chunk-4TYJGL7D.js";import{a as wt}from"./chunk-57I5DSQZ.js";import{a as vt}from"./chunk-LD3RGCFD.js";import{a as H}from"./chunk-2OJ3BCNF.js";import{a as Ct}from"./chunk-SIVD45TW.js";import{a as kt}from"./chunk-TFGWERU3.js";import{a as Lt}from"./chunk-UACQUCUH.js";import{a as xt}from"./chunk-XF27WXPN.js";import"./chunk-YKSRGHW2.js";import{a as M}from"./chunk-KHQRPRKG.js";import{a as yt}from"./chunk-7B4GOJM5.js";import{a as ut,b as gt,c as dt,d as ht}from"./chunk-YUEFMISM.js";import"./chunk-LX7ZFTP3.js";import"./chunk-LT7Q3DRH.js";import"./chunk-4QG63JWN.js";import"./chunk-GPANXWBJ.js";import{a as bt}from"./chunk-ORW7B7YJ.js";import{a as st}from"./chunk-75UEVILX.js";import{a as ot}from"./chunk-MAI6UPAW.js";import"./chunk-JWVJSOBO.js";import"./chunk-6WIP4RNC.js";import{a as nt}from"./chunk-HPPEXIMR.js";import{a as s}from"./chunk-PVXVA62G.js";import"./chunk-RN6NICJ7.js";import{a as c}from"./chunk-WP265O3M.js";import"./chunk-TZIXO72F.js";import{a as N}from"./chunk-Z4JN5BHS.js";import"./chunk-EJFOLQ4R.js";import{a as b}from"./chunk-GUJMNTXY.js";import{a as lt}from"./chunk-LBMN7XL3.js";import{a as n}from"./chunk-GXOFVYKC.js";import"./chunk-A6LP6MUS.js";import{a as x}from"./chunk-Y5EGDMIB.js";import"./chunk-SNNJRQSX.js";import"./chunk-5YAX7RCO.js";import"./chunk-Z5JYB3FL.js";import"./chunk-SY2OGTK4.js";import"./chunk-DLFQE7QF.js";import"./chunk-5HGBKHLV.js";import{a as B}from"./chunk-TR4OIUT3.js";import"./chunk-MZORVVMZ.js";import{c as E}from"./chunk-B7ZGEAQ4.js";import{a as ft}from"./chunk-QQEKW5LY.js";import"./chunk-FR27OJE5.js";import{a as Y}from"./chunk-2BZRDCMM.js";import{a as P}from"./chunk-DDG7VJDB.js";import"./chunk-GMQMPQTF.js";import{a as at}from"./chunk-NT4BD23Z.js";import"./chunk-B7LKBV3M.js";import"./chunk-E3BH7XBT.js";import"./chunk-IUVEXKRJ.js";import{a as pt}from"./chunk-WVO4VYA4.js";import{a as ct}from"./chunk-C63Q3HN7.js";import"./chunk-JG7KZ32H.js";import{a as l}from"./chunk-FMA2QB7F.js";import{a as it}from"./chunk-35MRBVSX.js";import{a as h}from"./chunk-5UBD44K5.js";import{a as d}from"./chunk-AH7GU5B4.js";import"./chunk-NRW7AT6T.js";import"./chunk-DPECAWNM.js";import"./chunk-KOM3R443.js";import"./chunk-NIOVFM2M.js";import"./chunk-6ZCA6D63.js";import"./chunk-YXAOTQ2S.js";import{a as w}from"./chunk-V45UJIF2.js";import{a as mt}from"./chunk-64PLTPQD.js";import"./chunk-OHAOQZFW.js";import{a as u}from"./chunk-PJWDCLVE.js";import"./chunk-4KWKR7LL.js";import{b as i}from"./chunk-Q3ULPWYK.js";import{a}from"./chunk-SSAI4GAC.js";import{a as y}from"./chunk-JCK66TTB.js";import{a as K}from"./chunk-SY4ES3W2.js";import{a as f}from"./chunk-S7AF3SZF.js";import"./chunk-TFKKNJKY.js";import"./chunk-ZFTJPJLX.js";import{c as m}from"./chunk-R7J7NY4A.js";import{G as C,K as rt,Na as et,k,l as Z,ta as v,wa as g,y as tt}from"./chunk-5ELKH2XV.js";import{a as T}from"./chunk-5ORZS6IQ.js";import"./chunk-BRQN5OZB.js";import{a as S}from"./chunk-BZJZQFW2.js";import{a as G}from"./chunk-QCTVAEOV.js";import"./chunk-VQDTHLUC.js";var Nt=0,Bt=1;function Rt(t,r){let{mins:e}=B(r.dataset.tipped);return e<44640&&(t[Nt]+=1,t[Bt]+=Number(u(k,r.dataset.tipped))),t}function jt(t){return t.reduce(Rt,[0,0])}function $(){let t=h("b",i()).find(P("Members"));if(t){let r=Tt(),e=jt(r);t.classList.add("tip-static"),Ct(`Active: ${e[Nt]}/${r.length}<br>Stamina: ${N(e[Bt])}`,t)}}function Et(t,r){let e=u(r,t.replace(/,/g,""));return e?parseInt(e,10):0}function Dt(t,r){let e="";return t>r&&(e="+"),e+N(t-r)}function Ft(t){let r=t.dataset.tipped,e=Et(r,/XP Lock: <b>(?<lockXp>\d*)/),o=Et(r,/XP: <b>(?<realXp>\d*)/);c(t.parentNode.nextElementSibling,` (<b>${Dt(o,e)}</b>)`)}function V(){let t=l('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&Ft(t)}function R(){let t=h(g,i()).slice(-2,-1)[0];if(!t)return;let r=t.rows[0].cells[0],e=b({id:"profile-bio",innerHTML:r.innerHTML});a("",r),n(r,e),wt()}var j=0,D=0;function Ut(t){return j&&t>=ut()&&t<=gt()}function Xt(t){return D&&t>=dt()&&t<=ht()}var qt=t=>[t,B(t.dataset.tipped).days],_t=([,t])=>t<7,Qt=([t])=>[t,Number(u(Z,t.dataset.tipped))],zt=([t,r])=>[t.parentNode.parentNode.rowIndex,Ut(r),Xt(r)];function Ot(){return w('#pCC a[data-tipped*="<td>VL:</td>"]').map(qt).filter(_t).map(Qt).map(zt)}function Wt(){return Number(ot("guild_id"))!==lt()&&(j||D)}var Jt=t=>t.map(([r])=>`.fshHighlight tr:nth-child(${r+1})`).join(",");function Pt(t,r){if(t.length){let e=`${Jt(t)} {background-color: #${r};}`;n(document.body,H(e))}}function Kt(t,r){if(t.length+r.length){let e=d(g,i());e[e.length-1].classList.add("fshHighlight")}}function Yt(){let t=Ot(),r=t.filter(([,o])=>o),e=t.filter(([,o,L])=>!o&&L);Pt(r,"4671C8"),Pt(e,"FF9900"),Kt(r,e)}function Zt(){Wt()&&Yt()}function F(){j=m("highlightPlayersNearMyLvl"),D=m("highlightGvGPlayersNearMyLvl"),Zt(),m("enableHistoryCompressor")&&R()}function tr(t){c(t.parentNode,' <span class="smallLink">[b]</span>')}function rr(t){t.target.className==="smallLink"&&xt(Lt(t.target.previousElementSibling.href))}function U(){let t=mt(`#pCC a[href^="${tt}"]`);vt([3,t,0,tr]),y(i(),rr)}function I(t){return ct({cmd:"guild",subcmd:"conflicts",page:t})}function Ht(t,r){a(r,t.insertCell(-1))}function It(t,r,e){let o=t.insertRow(t.rows.length-2);Ht(o,r),Ht(o,e)}function er(t){It(t,`<a href="${C}conflicts">Active Conflicts</a>`,"Score")}function or(t,r){It(t,r.cells[0].innerHTML,`<b>${r.cells[6].innerHTML}</b>`)}function ir(t,r,e){r===1&&er(e),bt(t,7,0).forEach(S(or,e))}function nr(t,r,e){let o=l("#pCC > table > tbody > tr > td > table",t);o&&o.rows.length>3&&ir(o,r,e)}function mr(t){return Number(t.nextSibling.textContent.split("\xA0")[2])}async function lr(t,r,e){let o=await I(t+1);r(e,o)}function At(t,r){let e=pt(r),o=l('#pCC input[name="page"]',e);if(!o)return;let L=Number(o.value),Vt=mr(o);nr(e,L,t.node),Vt>L&&lr(L,At,t)}async function X(t){let[r]=t.rows[6].cells[0].children;if(r){let e=await I(1);At({node:r},e)}}function q(t){let r=t.target.dataset.linkto,e=K(r);if(!e)return;let o=nt("fshHide",e);e.classList.toggle("fshHide"),o?f(r,""):f(r,"ON")}function sr(t){return M({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function cr(t){let r=M({className:"fshNoWrap",innerHTML:"[&nbsp;"});return n(r,t),c(r,"&nbsp;]"),r}function _(t,r,e){let o=sr(e);n(t,cr(o)),r.id=e,m(e)&&yt(r),y(o,q)}function Gt(t){_(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function Mt(t){let r=t.rows[4].cells[1].children[0];a(it(r.innerHTML),r),_(r,t.rows[6].cells[0].children[0],"statisticsControl")}function $t(t){let r=t.rows[15]?.cells[1].children[0];r&&_(r,t.rows[17].cells[0].children[0],"guildStructureControl")}var Q=0;function ar(t){let{stam:r,max:e}=ft(k,t.dataset.tipped);return Math.min(Math.round(Number(r)/Number(e)*100),100)}function fr(t){let r=ar(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${r}%, transparent ${r+1}%)}`}function pr(){let t=d(g,i()),r=t[t.length-1];r.classList.add("fshProgressBar");let o=w(et,r).map(fr).join(`
`);Q=n(document.body,H(o)).sheet}function A(t){Q?Q.disabled=!t:pr()}var z="enableStamBars",p=0;function ur(){p=!p,f(z,p),A(p),x("guildManage","StamBars")}function gr(){if(!l("#pCC img.guild_openGuildStore"))return;let r=n(i(),b({innerHTML:E(z),style:{marginLeft:"66%"}}));T(r,"change",ur)}function O(){gr(),p=m(z),p&&A(p)}function dr(t){t.target.id===v&&(x("Guild Tracker","togglePref"),f(v,t.target.checked))}function hr(){x("Guild Tracker","showTracker"),st()}function W(){let t=l("#pCC img.guild_openGuildStore");if(!t)return;let r=t.parentNode;r.classList.add("fshRelative");let e=b({className:"fsh-tracker",innerHTML:`${E(v)}&nbsp;`});T(e,"change",dr);let o=kt({textContent:"Show"});y(o,hr),n(e,o),n(r,e)}function br(t){let r=h("b",t).filter(P("Relics"));if(r.length!==1)return;let e=r[0].parentNode.nextElementSibling.children[0];a(`[ <a href="${C}reliclist">Control</a> ]&nbsp;`,e)}function yr(t){let r=d("li",t);if(!r||!r.length)return;let e=r[r.length-1].parentNode;c(e,`<li><a href="${rt}${Y()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function Lr(){return i().lastElementChild.rows?.[2]?.cells[0].children[0]}function xr(t,r){s(3,r,[t])}function kr(t){[Gt,Mt,$t,br,yr].forEach(S(xr,t))}function Cr(t){at()||(m("detailedConflictInfo")&&s(3,X,[t]),s(4,W))}function J(){if(!i())return;let t=Lr();t&&(kr(t),m("showBuffLinks")&&s(3,U),Cr(t),O())}function vr(){s(3,St),s(3,V),s(3,$),["-","manage"].includes(G.subcmd)&&J(),G.subcmd==="view"&&F()}export{vr as default};
//# sourceMappingURL=injectGuild-NB3KPONF.js.map
