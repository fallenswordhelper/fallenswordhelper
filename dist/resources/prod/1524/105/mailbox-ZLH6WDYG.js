import{a as w}from"./chunk-ELQ42VUR.js";import{a as A}from"./chunk-4QG63JWN.js";import{a as R}from"./chunk-GPANXWBJ.js";import{a as l}from"./chunk-JWVJSOBO.js";import{a as Q}from"./chunk-HPPEXIMR.js";import{a as N}from"./chunk-JUGQGPY3.js";import{a as T}from"./chunk-WP265O3M.js";import"./chunk-TZIXO72F.js";import{a as O}from"./chunk-YQ625XVJ.js";import{a as L}from"./chunk-VMCLSOZO.js";import"./chunk-PBUQY6G2.js";import{a}from"./chunk-GUJMNTXY.js";import{a as B}from"./chunk-3UNKZDTI.js";import{a as E}from"./chunk-KTI2IMEY.js";import{a as o}from"./chunk-GXOFVYKC.js";import"./chunk-A6LP6MUS.js";import{a as q}from"./chunk-E2MFTVAH.js";import{a as b}from"./chunk-SY2OGTK4.js";import"./chunk-MHWHHESW.js";import{a as M}from"./chunk-QQEKW5LY.js";import{a as C}from"./chunk-NT4BD23Z.js";import"./chunk-E3BH7XBT.js";import"./chunk-IUVEXKRJ.js";import{a as v}from"./chunk-5UBD44K5.js";import"./chunk-AH7GU5B4.js";import"./chunk-NRW7AT6T.js";import"./chunk-DPECAWNM.js";import"./chunk-NIOVFM2M.js";import"./chunk-6ZCA6D63.js";import{a as y}from"./chunk-YXAOTQ2S.js";import"./chunk-OHAOQZFW.js";import{b as c}from"./chunk-Q3ULPWYK.js";import{a as u}from"./chunk-SSAI4GAC.js";import{a as I}from"./chunk-JCK66TTB.js";import{a as g}from"./chunk-SY4ES3W2.js";import"./chunk-ZFTJPJLX.js";import{g as x}from"./chunk-5ELKH2XV.js";import"./chunk-5ORZS6IQ.js";import{a as m}from"./chunk-BZJZQFW2.js";import"./chunk-VQDTHLUC.js";function p(t){return L({cmd:"tempinv",subcmd:"takeitems",item:t})}function S(t){return E({cmd:"tempinv",subcmd:"takeitem",temp_id:t,ajax:1})}function D(t){let e=t.filter(r=>r.r===0),i=t.filter(r=>r.r!==0);return e.length>0?{r:e.map(r=>({id:r.temp_id})),s:!0}:i.length>0?{e:{message:i[0].m},s:!1}:{e:{message:t[0].m},s:!1}}async function d(t){let e=await B(t.map(S));return D(e)}function k(t){return O(p,d,t)}function f(t,e){T(e,`<li class="fshNbrList">${t}</li>`)}var G;function F(t){return!t.s&&G!==t.e.message}function h(t,e){if(!t||(F(t)&&(G=t.e.message,f(t.e.message,e)),!t.s))return!0}function H(t,e,i){let r=A({id:t,className:"sendLink",htmlFor:"fshQuickTake",textContent:`Toggle ${e}`});return l(r,i),r}function _(t,e){let i=e.children[0],{tipped:r}=i.dataset,{itemId:n,invId:s}=M(x,r);return!n||!s||(t[n]?t[n].invIds.push(s):t[n]={invIds:[s],tipped:r.replace(/&extra=\d/,""),src:i.src}),t}function z(){return a({id:"quickTake",innerHTML:'<div class="fshCenter"><br><font size="3"><b>Quick Take</b></font><br><br>Select which item to take all similar items from your Mailbox.</div><div></div>'})}function J(){let t=a(),e=N();return o(t,e),{takeContainer:t,takeResult:e}}function P(t,e){let i=e[1],r=a(),n=a({innerHTML:`<img src="${i.src}" class="tip-dynamic" data-tipped="${i.tipped}">`});o(r,n);let s=a({innerHTML:`<button class="fshBl fshBls" data-id="${e[0]}">Take All ${i.invIds.length}</button>`});o(r,s),o(t,r)}function U(t,e){y(e).forEach(m(P,t))}function j(t){let e=$(`#temp-inv-img-${t}`).qtip("api");e&&e.destroy(!0)}function K(t){j(t.id);let e=g(`temp-inv-${t.id}`);e&&u("",e)}function V(t,e){e.r.forEach(K),f(`${e.r.length.toString()} item(s) taken.`,t)}function W(t,e){h(e,t)||b(e.r)&&V(t,e)}async function X(t,e){let i=await k(e);W(t,i)}function Y(t,e,i){let r=i.dataset.id,{invIds:n}=t[r];u(`taking all ${n.length} items`,i.parentNode),w(40,n).forEach(m(X,e))}function Z(t,e,i){Q("fshBls",i.target)&&Y(t,e,i.target)}function tt(t,e,i){let r=a({className:"fshTakeGrid"});U(r,t),o(e,r),I(r,m(Z,t,i))}function et(t){let e=z(),{takeContainer:i,takeResult:r}=J();tt(t,e,r),o(e,a()),o(e,i),o(c(),e)}function it(t,e){H("qtOn","Mailbox",e);let i=t.reduce(_,{});et(i)}function rt(t,e){let i=R({id:"fshQuickTake",type:"checkbox"});l(i,e),q(i,"change",m(it,t,e))}function nt(){if(C()||!c())return;let t=v("a",c());if(t.length===0)return;let e=c().lastElementChild;rt(t,e),H("qtOff","Quick Take",e)}export{nt as default};
//# sourceMappingURL=mailbox-ZLH6WDYG.js.map
