import{b as m}from"./chunk-ESHX3R26.js";import{a as y}from"./chunk-USQ4I2P4.js";import{a as k}from"./chunk-JUU6TIW3.js";import{b}from"./chunk-TMMBKVUE.js";import{a as B}from"./chunk-QGKEDUO2.js";import{a as c}from"./chunk-BI6EF352.js";import{a as T}from"./chunk-MDOXDTXF.js";import{a as h}from"./chunk-NOLCAT6N.js";import{a as u}from"./chunk-I7NTXRDN.js";import{a as x}from"./chunk-OOUI3CKV.js";import{a as i}from"./chunk-SHVFOAM5.js";import{a as r}from"./chunk-FE4PDZXL.js";import{b as d}from"./chunk-VMJ6DXBZ.js";import{a as g}from"./chunk-3PDILZ3R.js";import{a as f}from"./chunk-RH5336H4.js";var E=[[t=>t.fsp>0,t=>`${m(t.fsp,2)} FSP`],[t=>t.fsp>0&&t.k>0,()=>" and "],[t=>t.k>0,t=>`${t.k} k`],[t=>t.stam>0&&(t.fsp>0||t.k>0),()=>" and "],[t=>t.stam>0,t=>`${t.stam} Stam(${m(t.stam/25,1)}fsp)`],[t=>t.unknown>0,t=>` (${t.unknown} buff(s) with unknown cost)`]];function S(t,e){return e[0](t)?e[1](t):""}function a(t){return E.map(f(S,t)).join("")}function L(){g.subcmd==="-"&&x("profile","formatBuffsToBuy")}function P(){let t=B("h1",b);return t.length!==0?t=r(t[0]):t=y(),t}var v=[[t=>!t.includes("{buffs}"),(t,e)=>`${t} ${e}`],[t=>!t.includes("{cost}"),(t,e)=>t.replace(/{buffs}/g,`\`~${e}~\``)],[()=>!0,(t,e,o)=>t.replace(/{buffs}/g,`\`~${e}~\``).replace(/{cost}/g,o.buffCostTotalText)]];function F(t,e){return e[0](t)}function I(t,e){return v.find(f(F,t))[1](t,h(e.buffs).join(", "),e)}function R(t){L();let e=P(),o=d("buyBuffsGreeting").trim();o=o.replace(/{playername}/g,e),o=I(o,t),window.openQuickMsgDialog(e,o,"")}function l(t){t.count>0&&R(t)}var A=/[^a-zA-Z0-9.,+\- ]/g,j=/([+-]{0,1}[.\d]+ *k)|([+-]{0,1}[.\d]+ *fsp)|([+-]{0,1}[.\d]+ *stam)/;function w(t){return t&&t.nodeName!=="BR"}function C(t){return k(t.replace(A,"")).match(j)}function H(t){let e="",o=t;for(;w(o);){let s=r(o);o=o.nextSibling,e+=s}return C(e)}function M(t){let e="",o=t;for(;w(o);){let s=r(o);o=o.previousSibling,e=s+e}return C(e)}function p(t){let e=H(t);return e||(e=M(t)),e}var n={count:0,buffs:{}};function z(t){return`<tr><td>${t[0]}</td><td>: ${t[1][0]}${t[1][1]}</td></tr>`}function G(t,e){return t[e[1][1]]+=e[1][0],t}function U(){let t=T(n.buffs),e=a(t.reduce(G,{k:0,fsp:0,stam:0,unknown:0}));u(`<span class="tip-static" data-tipped="This is an estimated cost based on how the script finds the cost associated with buffs from viewing bio. It can be incorrect, please use with discretion.<br><hr><table border=0>${t.map(z).join("")}</table><b>Total: ${e}</b>">Estimated Cost: <b>${e}</b></span>`,i("buffCost")),n.buffCostTotalText=e}function V(){n.count>0?U():(u("&nbsp;",i("buffCost")),n.buffCostTotalText="")}function D(t){return t[0].includes("k")?"k":t[0].includes("f")?"fsp":"stam"}function O(t){let e=p(t),o,s;e?(o=D(e),[s]=e[0].match(/([+-]?[.\d]+)/)):(o="unknown",s="1"),n.buffs[r(t)]=[parseFloat(s),o],n.count+=1}function Q(t){let e=c("fshBlue",t);t.classList.toggle("fshBlue"),t.classList.toggle("fshYellow");let o=r(t);e?O(t):(n.count-=1,delete n.buffs[o]),V()}function $(t){return!t.tagName||t.tagName==="SPAN"?t:$(t.parentNode)}function Y(t){return t.classList&&c("buffLink",t)}function Z(t){if(t.target.id==="fshSendBuffMsg"){l(n);return}let e=$(t.target);Y(e)&&Q(e)}function q(t,e,o){return t.replace(e,`<span id="fshBuff${o}" class="buffLink fshBlue">${e.replace(/(`~)|(~`)|(\{b\})|(\{\/b\})/g,"")}</span>`)}function J(t){let e=t.replace(/\{b\}/g,"`~").replace(/\{\/b\}/g,"~`"),o=e.match(/`~([^~]|~(?!`))*~`/g);if(!!o)return e=o.reduce(q,e),e.indexOf("[cmd]")<0&&(e+="[cmd]"),e=e.replace("[cmd]",'<br><input id="fshSendBuffMsg" class="custombutton" type="button" value="Ask For Buffs"><br><span id="buffCost" class="fshRed">&nbsp;</span>'),e}export{Z as a,J as b};
//# sourceMappingURL=chunk-MJXTBGMU.js.map
