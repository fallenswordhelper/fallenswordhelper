import{a as o}from"./chunk-3M65L4MQ.js";import{a as u}from"./chunk-QPRB5F5E.js";function m(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var r;return new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};r=setInterval(n,100),n()}).finally(function(){return clearInterval(r)})}var s=m;function a(t){return new Promise((r,e)=>{t.oncomplete=t.onsuccess=()=>r(t.result),t.onabort=t.onerror=()=>e(t.error)})}function h(t,r){let e=s().then(()=>{let n=indexedDB.open(t);return n.onupgradeneeded=()=>n.result.createObjectStore(r),a(n)});return(n,p)=>e.then(y=>p(y.transaction(r,n).objectStore(r)))}var i;function c(){return i||(i=h("keyval-store","keyval")),i}function f(t,r=c()){return r("readonly",e=>a(e.get(t)))}function d(t,r,e=c()){return e("readwrite",n=>(n.put(r,t),a(n.transaction)))}var l=t=>{t&&t.name!=="NotFoundError"&&u(o(t),!1)};async function S(t,r){try{return await f(t,r)}catch(e){l(e)}}async function k(t,r,e){try{return await d(t,r,e)}catch(n){l(n)}}export{S as a,k as b};
//# sourceMappingURL=chunk-4WWEO4K3.js.map
