import{a as Pa,b as Fa}from"./chunk-JSXZKKN2.js";import{a as _a}from"./chunk-6PG5HAIW.js";import"./chunk-YEH5AZJJ.js";import{a as Ia}from"./chunk-DMYQ6CER.js";import{a as Lt}from"./chunk-HRRO3RJ6.js";import{a as $a,b as Ra}from"./chunk-6N4YS763.js";import{a as Ha,b as Na}from"./chunk-VR3QUQCC.js";import{a as Ga}from"./chunk-A2TV6OHR.js";import{a as Va}from"./chunk-ROVHFUGL.js";import{b as Ta}from"./chunk-Y724IBZ3.js";import{a as Ma}from"./chunk-YXABNXQA.js";import"./chunk-UKD7GI2F.js";import"./chunk-MIIGAWWQ.js";import{a as bt}from"./chunk-S4AATYOV.js";import{a as Aa}from"./chunk-33TRSIDJ.js";import{a as Ca}from"./chunk-EZIO425G.js";import"./chunk-6QLUSWNZ.js";import{a as ur}from"./chunk-XE7TIOXJ.js";import"./chunk-4O2WFYTC.js";import{a as Ba}from"./chunk-YIPBMOIC.js";import{a as mr}from"./chunk-LJKLSJGP.js";import{a as h}from"./chunk-UD427447.js";import{a as ca}from"./chunk-3D22I2HY.js";import{a as Ct}from"./chunk-AFCJ6IYJ.js";import{a as ha}from"./chunk-YRH7FGLK.js";import{a as Bt}from"./chunk-ANRQZDQO.js";import{a as ga}from"./chunk-LPKRTEX4.js";import{a as lr}from"./chunk-NO65USSB.js";import"./chunk-ZVOORZ7V.js";import{C as fr,D as wa,E as ka,F as Ea,a as At,c as va,d as sr,e as w,f as fe,g as ue,h as ya,i as b,j as ke,k as Ee,l as xa,o as A,q as St,s as Da}from"./chunk-GFRUEC27.js";import{a as Sa,b as ba,c as La}from"./chunk-NJ7PIGYJ.js";import"./chunk-AOOPN6WB.js";import"./chunk-7CPCF3KM.js";import"./chunk-WPNBOM6T.js";import{a as na}from"./chunk-TA4QOD3S.js";import"./chunk-ZUWCCEE2.js";import{a as xe,b as gt}from"./chunk-ESHX3R26.js";import{a as P}from"./chunk-NN4F7SZH.js";import{a as ia}from"./chunk-HNWBHHXU.js";import{a as wt}from"./chunk-MSZ7COHN.js";import"./chunk-QBETZAP2.js";import{a as Q}from"./chunk-BTCLYERS.js";import{a as xt,b as Dt}from"./chunk-4WWEO4K3.js";import{a as la}from"./chunk-C2SBMSGL.js";import"./chunk-OYFIU772.js";import{f as se}from"./chunk-LSD44FRF.js";import"./chunk-ABHC4DJD.js";import{a as ua}from"./chunk-3H3ZB3QO.js";import{a as ma}from"./chunk-HCYDYHQ4.js";import{a as p}from"./chunk-4GNRWF5F.js";import{a as J}from"./chunk-TI66IBQX.js";import{a as kt}from"./chunk-FOEXXIS5.js";import{a as sa}from"./chunk-W45H44WQ.js";import"./chunk-RFY35PWA.js";import"./chunk-LARETTHC.js";import{a as Ln}from"./chunk-EDQMH5SE.js";import{a as Jn}from"./chunk-LYIUQA6S.js";import{a as dt,b as ir}from"./chunk-MJHY5FVK.js";import{a as we}from"./chunk-63EULCQA.js";import{a as Y}from"./chunk-EHLYPUDG.js";import{a as ra}from"./chunk-CQWLAW3I.js";import{a as z}from"./chunk-USQ4I2P4.js";import{a as y}from"./chunk-VLL6MMT3.js";import"./chunk-QRPHAINE.js";import{a as aa}from"./chunk-KBNPO4VD.js";import{a as yt}from"./chunk-J6TJ2S7E.js";import{a as vt}from"./chunk-XGRP4UT7.js";import"./chunk-G6VG7VOM.js";import{a as _e}from"./chunk-ZIHIMNUH.js";import{a as le}from"./chunk-OZZ26S4K.js";import"./chunk-FBJQLDZK.js";import{a as ie}from"./chunk-2BFYZNUH.js";import"./chunk-GRHMKKXW.js";import{a as Zn}from"./chunk-QGKEDUO2.js";import{a as pa}from"./chunk-LAGOFWF3.js";import{a as s}from"./chunk-3P332KR6.js";import"./chunk-R3QPGR5M.js";import"./chunk-LWPHQG2H.js";import{a as X}from"./chunk-AQKFNZOY.js";import{a as Xn}from"./chunk-KAHUID7Q.js";import{a as j}from"./chunk-OAQ3GOTA.js";import"./chunk-3M65L4MQ.js";import{a as ct}from"./chunk-M5ZN4Z2N.js";import{a as R}from"./chunk-C27IPPK7.js";import{a as V}from"./chunk-6R6RPTTO.js";import{a as F}from"./chunk-UU6HXUOC.js";import"./chunk-4KMRATSZ.js";import{a as Fe}from"./chunk-BI6EF352.js";import{a}from"./chunk-BM4FUEFL.js";import{a as c}from"./chunk-JW2UKJSK.js";import"./chunk-PKECKIP5.js";import"./chunk-BSKCRAT3.js";import"./chunk-MDOXDTXF.js";import{a as da}from"./chunk-FLC7HS56.js";import{a as Et}from"./chunk-N3R6MXRE.js";import{a as fa}from"./chunk-PX7MLT6T.js";import"./chunk-QPRB5F5E.js";import{a as oa}from"./chunk-NOLCAT6N.js";import{a as E}from"./chunk-I7NTXRDN.js";import{a as C}from"./chunk-TO3QNLYY.js";import{a as I}from"./chunk-QHU4ICCH.js";import{a as De}from"./chunk-OOUI3CKV.js";import"./chunk-JROAODNJ.js";import{a as i}from"./chunk-SHVFOAM5.js";import"./chunk-N56IAE2U.js";import{a as ht}from"./chunk-O5NIYLDT.js";import{a as ta}from"./chunk-EEHLAE3S.js";import{a as pt}from"./chunk-ISL3KEXS.js";import{a as ea}from"./chunk-FE4PDZXL.js";import{b as g}from"./chunk-VMJ6DXBZ.js";import{a as n}from"./chunk-3PDILZ3R.js";import{a as Yn}from"./chunk-3WAX2TNR.js";import{$ as In,Aa as jn,Ba as zn,Ca as Qn,I as nr,L as Mn,La as mt,N as ar,V as Hn,W as ye,X as st,Y as Vn,Z as Nn,_ as Gn,aa as $n,ba as Rn,c as lt,ca as Pn,da as Fn,ea as ft,fa as _n,ga as On,ha as Kn,i as ve,ja as qn,ka as U,la as ut,ma as T,n as or,v as Tn,ya as Wn,za as Un}from"./chunk-4P4O4YGO.js";import{b as ae}from"./chunk-KTAAKVTB.js";import{a as m}from"./chunk-RH5336H4.js";var me;function ul(e){return e}function ml(e){return n.showBuffInfo&&e.some(ul)}function cl(){if(me)h(me,!1);else{me=c({className:"fshActionBox",innerHTML:"<div></div><div></div><div></div><div></div><div></div><div></div>"});let e=i("actionContainer");Aa(me,e.children[2])}return me}function dl(){me&&h(me,!0)}function cr(e){if(ml(e))return cl();dl()}var _,dr;function pl(e){_=e.children[3],_.className="fshBlue",s("CA ",_),dr=p(),a(_,dr),P(_," active")}function hl(e,t){_?h(_,!1):pl(e),s(t.level,dr)}function gl(){_&&h(_,!0)}function pr(e,t){t?hl(e,t):gl()}var O,hr;function vl(e){O=e.children[4],O.className="fshRed",s("Doubler ",O),hr=p(),a(O,hr),P(O," active")}function yl(e,t){O?h(O,!1):vl(e),s(t.level,hr)}function xl(){O&&h(O,!0)}function gr(e,t){t?yl(e,t):xl()}var Z,vr;function Dl(e){Z=e.children[2],s("Damage bonus: ",Z),vr=p(),a(Z,vr),P(Z,"%")}function wl(e,t){if(e){let r=Math.min(Math.round(Math.floor(t/5)*Number(e.level))*.01,20);return xe(r,2).toString()}return"0"}function kl(e,t,r){Z?h(Z,!1):Dl(e),s(wl(t,Number(r)),vr)}function El(){Z&&h(Z,!0)}function yr(e,t,r){t?kl(e,t,r):El()}function d(e,t){s(Q(e),t)}var ce,xr;function Cl(e){ce=e.children[1],s("Kill Streak: ",ce),xr=p(),a(ce,xr)}function Bl(e,t){ce?h(ce,!1):Cl(e),d(t,xr)}function Al(){ce&&h(ce,!0)}function Dr(e,t,r,o){t||r?Bl(e,o):Al()}function Sl(e,t){return t.name===e}function ee(e){let{buffs:t}=GameData.player();if(t)return t.find(m(Sl,e))}function wr(){let e=GameData.player().teleportCooldown;return e>1&&e}var bl=["red","orange","yellow"];function kr(){let e=$("#actionlist-shield-imp");e.length===1&&e.css("background-color",bl[e.text()]||"#ad8043")}var N,Er;function Ll(e){Fa(e)&&GameData.fetch(U)}function Tl(){ee("Summon Shield Imp")||Pa([z()],[55]).then(Ll)}function Ml(e){return e?Number(e.stack):0}var Hl=["imp-0","imp-1","imp-1"];function Vl(e){return Hl[e]||"fshGreen"}function Nl(e){N=e.children[0],s("Shield Imps Remaining: ",N),Er=p(),a(N,Er),ie(N,"&nbsp;");let t=p({className:"xSmallLink",textContent:"Recast"});a(N,t),C(t,Tl)}function Gl(e,t){N?h(N,!1):Nl(e);let r=Ml(t);N.className=Vl(r),s(r,Er)}function Il(){N&&h(N,!0)}function Cr(e,t,r){t||r?Gl(e,t):Il()}function $l(e){return e.type===0}function Br(){let{dynamic:e}=GameData.realm();return R(e)&&e.some($l)}function D(e){return p({textContent:e})}var de,Tt,Oa;function Rl(e,t){de=e.children[5],s("Teleport Cooldown: ",de),Tt=D(t.toString()),a(de,Tt)}function Pl(e,t){de?h(de,!1):Rl(e,t)}function Fl(){de&&h(de,!0)}function Ka(){let e=Math.max(Math.ceil((Oa-Date.now())/1e3),0);s(e,Tt),e>0&&setTimeout(Ka,500)}function qa(e){Tt&&(Oa=Date.now()+e*1e3,Ka())}function Wa(e,t){t?Pl(e,t):Fl()}var Oe,Ar,Sr,br,Lr,Tr,Mr;function _l(){Oe=ee("Death Dealer"),Ar=ee("Doubler"),Sr=ee("Counter Attack"),br=ee("Summon Shield Imp"),Lr=wr(),Tr=Br(),Mr=GameData.player().killStreak}function Hr(){kr(),_l();let e=cr([Oe,Ar,Sr,br,Lr,Tr]);e&&(Cr(e,br,Oe),Dr(e,Oe,Tr,Mr),yr(e,Oe,Mr),pr(e,Sr),gr(e,Ar),Wa(e,Lr))}function Ol(e,t){qa(t.player.teleportCooldown)}function Ua(){Hr(),$.subscribe(`${st} ${Vn}`,Hr),$.subscribe(Kn,Ol)}function ja(){n.showBuffInfo=!n.showBuffInfo,y("showBuffInfo",n.showBuffInfo),Hr()}function Kl(){return window.GameController&&GameController.Realm&&!GameController.Realm.footprintTileList}function Vr(){Kl()&&(GameController.Realm.footprintTileList=[])}function za(e,t,r){return aa({className:`fshCurveEle fshCurveLbl fshPoint tip-static ${e}`,dataset:{tipped:t},htmlFor:r})}function Mt(e){let t=c({className:"fshToggle"}),r=vt({checked:e.prefVal,id:e.checkId,type:"checkbox"});a(t,r);let o=za(e.onClass,e.onTip,e.checkId);a(t,o);let l=za(e.offClass,e.offTip,e.checkId);return a(t,l),a(e.worldName,t),r}var te,Ht,Vt,Qa,Ya,Ja,Xa,Za,ei;function ql(e){_e(e),GameData.doAction(12,401,{},0)}function Wl(){sa(z())}function Ul(){window.open(`${Mn+or}map`,"fsMap")}function jl(){let e=GameData.realm();window.open(`${Hn}realms${or}view&realm_id=${e.id}`,"mapUfsg")}function zl(){y("playNewMessageSound",!g("playNewMessageSound"))}function Ql(){n.huntingMode=!n.huntingMode,y("huntingMode",n.huntingMode)}function Yl(){return c({className:"fshCurveContainer",id:"fshWorldButtonContainer"})}function ti(e){return e?e.toString():"?"}function Jl(){let e=c({textContent:"Min Lvl: "});return Ht=D(ti(GameData.realm().minlevel)),a(e,Ht),e}function Xl(){let e=c({textContent:"Your Lvl: "});return Vt=D(ti(GameData.player().level)),a(e,Vt),e}function Zl(e){let t=c({className:"fshFsty"});a(t,Jl()),a(t,Xl()),a(e,t)}function Nt(e,t,r){let o=J({className:`fshCurveEle fshCurveBtn fshPoint tip-static ${e}`,dataset:{tipped:t}});return a(r,o),o}function es(e){Zl(e),Qa=Nt("fshFormGroup","Quick Create Attack Group",e),Ya=Nt("fshQuickBuff","Open Quick Buff Popup",e),Ja=Nt("fshRealmMap","Open Realm Map",e),Xa=Nt("fshTempleOne","Search map in Ultimate FSG",e)}function ts(e){if(g("showSpeakerOnWorld")){let t=g("playNewMessageSound");Za=Mt({prefVal:t,checkId:"fshSoundCheck",onClass:"soundOn",onTip:"Turn Off Sound when you have a new log message",offClass:"soundOff",offTip:"Turn On Sound when you have a new log message",worldName:e})}}function rs(e){let t=n.huntingMode;ei=Mt({prefVal:t,checkId:"fshHuntCheck",onClass:"huntOn",onTip:"Hunting mode is ON",offClass:"huntOff",offTip:"Hunting mode is OFF",worldName:e})}function os(){es(te),ts(te),rs(te)}var ns=[[e=>e===Za,zl],[e=>e===ei,Ql]],as=[[e=>e===Qa,ql],[e=>e===Ya,Wl],[e=>e===Ja,Ul],[e=>e===Xa,jl]];function is(){C(te,ur(as)),I(te,"change",ur(ns))}function ls(){te||(te=Yl(),os(),is(),yt(te,i("worldCoord")))}function ss(e,t){Ht&&t.b.minlevel&&(Vr(),s(t.b.minlevel,Ht))}function fs(e,t){Vt&&s(t.b,Vt)}function Nr(){ls(),$.subscribe(Rn,ss),$.subscribe(Nn,fs)}var us=["NORMAL","CHAMPION","ELITE","SUPER ELITE","TITAN","LEGENDARY"],Gt=!1;function Gr(e){return Y(".verb.attack",e)}function Ir(e){let t=us.indexOf(e.toUpperCase());return ht(`#actionList .actionListItem.creature.creature-${t}`)}function ri(e){let t=["LEGENDARY","NORMAL"].flatMap(Ir),r=Ir("CHAMPION"),[o,l]=e?[t,r]:[r,t],f=`url("${ae}ui/world/icon_action_attack_`;o.map(Gr).filter(u=>u!==null).forEach(u=>{u.classList.remove("attack-1","attack-2","attack-3","attack-4","attack-5","attack-6","attack-7","attack-8"),u.style.backgroundImage=""}),l.slice(0,8).map(Gr).forEach((u,S)=>{u!==null&&(u.classList.add(`attack-${S+1}`),u.style.backgroundImage=`${f}${S+1}.png")`)})}function ms(e){if(!e.ctrlKey||!e.shiftKey||e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||(Gt||ri(!0),Gt=!0,!e.code.match(/(Digit|Numpad)[1-8]/)))return;let t=Ir("CHAMPION"),r=parseInt(e.code.slice(-1),10)-1;if(r<t.length){let o=Gr(t[r]);o!==null&&(De("world","ChampionAttack"),o.click())}}function cs(e){Gt&&(!e.ctrlKey||!e.shiftKey)&&(Gt=!1,ri(!1))}function $r(){let e=Zn("body")[0];I(e,"keydown",ms),I(e,"keyup",cs)}var ds=["Breaker","Protection","Master Thief","Protect Gold","Disarm","Duelist","Thievery","Master Blacksmith","Master Crafter","Fury Caster","Master Inventor","Sustain"],Rr=[],L;function ps(e){(e.id===54||e.id===26)&&(L.player.buffs[e.id]=parseInt(e.level,10))}function hs(e){ds.indexOf(e.name)===-1&&(L.player.enhancements[e.name]=e.value)}function gs(e){e.player.buffs&&e.player.buffs.forEach(ps)}function vs(e){e.player.enhancements&&e.player.enhancements.forEach(hs)}function ys(e,t){L={},L.combat=t.response.data,L.combat.inventory_id&&(L.combat.drop=L.combat.item.id),L.player={},L.player.buffs={},L.player.enhancements={},gs(t),vs(t),L.time=t.time,Rr.push(L),Dt("fsh_combatLog",Rr)}function xs(e,t){t.response.response===0&&ys(e,t)}function Ds(e){e&&(Rr=e),$.subscribe(ft,xs)}function Pr(){g("keepLogs")&&xt("fsh_combatLog").then(Ds)}function pe(e){return n.doNotKillList.includes(e.trim())}function ws(e){e.classList.toggle("fshBlue",pe(ea(e)))}function Ce(){let e=i("actionList");Bt("creature",e).forEach(ws)}function ks(e,t){if(pe(e))return i("actionList").children[t].children[0].children[1].classList.remove("loading"),!0}function Es(e){let t=GameData.actions()[e];if(t)return ks(t.data.name,e)}function Cs(e){return function(r,o,l,f){Es(l.passback)||e(r,o,l,f)}}var Bs={2:Cs};function As(e){return Yn(e)||e===0}function Ss(e){return e&&ct(e)}function bs(e){return function(r,o,l,f){let u=Bs[r];Ss(u)&&As(f)?u(e)(r,o,l,f):e(r,o,l,f)}}function Fr(){let e=GameData.doAction;GameData.doAction=bs(e)}function _r(){$.subscribe(ye,Ce),Ce(),Fr()}function oi(e){e[1]=e[2].r.list}function ni(e,t,r){let o=e.slice();return o[3]=t[r],o[5]=r,o}function Ls(e){let t,r=e[6].message+"",o;return{c(){t=b("p"),o=ke(r),Da(t,"color","red")},m(l,f){fe(l,t,f),w(t,o)},p(l,f){f&1&&r!==(r=l[6].message+"")&&St(o,r)},d(l){l&&ue(t)}}}function Ts(e){oi(e);let t,r,o,l=e[1],f=[];for(let u=0;u<l.length;u+=1)f[u]=ii(ni(e,l,u));return{c(){t=b("table"),r=b("tr"),r.innerHTML=`<td class="header"></td> 
      <td class="header"></td> 
      <td class="header">Username</td> 
      <td class="header">Kills</td>`,o=Ee();for(let u=0;u<f.length;u+=1)f[u].c();A(r,"class","svelte-1p6satm"),A(t,"id","world-event-contrib-table"),A(t,"class","svelte-1p6satm")},m(u,S){fe(u,t,S),w(t,r),w(t,o);for(let x=0;x<f.length;x+=1)f[x].m(t,null)},p(u,S){if(oi(u),S&1){l=u[1];let x;for(x=0;x<l.length;x+=1){let W=ni(u,l,x);f[x]?f[x].p(W,S):(f[x]=ii(W),f[x].c(),f[x].m(t,null))}for(;x<f.length;x+=1)f[x].d(1);f.length=l.length}},d(u){u&&ue(t),ya(f,u)}}}function ai(e){let t,r,o,l;return{c(){t=b("a"),r=b("img"),sr(r.src,o=""+(ae+"guilds/"+e[3].guild.id+"_mini.png"))||A(r,"src",o),A(r,"alt","guild logo"),A(r,"class","svelte-1p6satm"),A(t,"href",l=""+(nr+e[3].guild.id))},m(f,u){fe(f,t,u),w(t,r)},p(f,u){u&1&&!sr(r.src,o=""+(ae+"guilds/"+f[3].guild.id+"_mini.png"))&&A(r,"src",o),u&1&&l!==(l=""+(nr+f[3].guild.id))&&A(t,"href",l)},d(f){f&&ue(t)}}}function ii(e){let t,r,o=e[5]+1+"",l,f,u,S,x,W,nt=e[3].player.name+"",er,at,Sn,tr,it=e[3].value+"",rr,bn,k=e[3].guild&&ai(e);return{c(){t=b("tr"),r=b("td"),l=ke(o),f=Ee(),u=b("td"),k&&k.c(),S=Ee(),x=b("td"),W=b("a"),er=ke(nt),Sn=Ee(),tr=b("td"),rr=ke(it),bn=Ee(),A(W,"href",at=""+(ar+e[3].player.name)),A(t,"class","svelte-1p6satm")},m(H,ge){fe(H,t,ge),w(t,r),w(r,l),w(t,f),w(t,u),k&&k.m(u,null),w(t,S),w(t,x),w(x,W),w(W,er),w(t,Sn),w(t,tr),w(tr,rr),w(t,bn)},p(H,ge){H[3].guild?k?k.p(H,ge):(k=ai(H),k.c(),k.m(u,null)):k&&(k.d(1),k=null),ge&1&&nt!==(nt=H[3].player.name+"")&&St(er,nt),ge&1&&at!==(at=""+(ar+H[3].player.name))&&A(W,"href",at),ge&1&&it!==(it=H[3].value+"")&&St(rr,it)},d(H){H&&ue(t),k&&k.d()}}}function Ms(e){let t;return{c(){t=ke("Loading...")},m(r,o){fe(r,t,o)},p:At,d(r){r&&ue(t)}}}function Hs(e){let t,r,o={ctx:e,current:null,token:null,hasCatch:!0,pending:Ms,then:Ts,catch:Ls,value:2,error:6};return fr(r=e[0],o),{c(){t=xa(),o.block.c()},m(l,f){fe(l,t,f),o.block.m(l,o.anchor=f),o.mount=()=>t.parentNode,o.anchor=t},p(l,[f]){e=l,o.ctx=e,f&1&&r!==(r=e[0])&&fr(r,o)||wa(o,e,f)},i:At,o:At,d(l){l&&ue(t),o.block.d(l),o.token=null,o=null}}}function Vs(e,t,r){let{promise:o}=t;return e.$$set=l=>{"promise"in l&&r(0,o=l.promise)},[o]}var li=class extends Ea{constructor(t){super();ka(this,t,Vs,Hs,va,{promise:0})}},si=li;function Or(e){return da({cmd:"toprated",subcmd:e})}var Ns=({username:e,value:t})=>({player:{name:e},value:t});async function Kr(e){if(e==="globalquest")return{r:{list:(await pa({cmd:"toprated",subcmd:"eventcontrib"})).map(Ns)}}}function qr(e){return X(Or,Kr,e)}var Wr,fi=()=>({promise:qr("globalquest")});function Gs(e){Wr?Wr.$set(fi()):Wr=new si({props:fi(),target:e})}function Is(){let e=i("world-event-contrib");Gs(e),$(e).dialog({title:"Top 100 Event Contributers",minWidth:300,height:300,zIndex:9999})}function Ur(){let e=$("#world-event-badge");!e.length||(e.off(),C(e[0],Is))}function $s(e){return e.response&&e.response.msg&&e.response.msg.startsWith("Creature did not exist at that location")}function Rs(e){$s(e)&&GameData.fetch(ut+T)}function Ps(e){e.remove()}function Fs(e,t){Rs(t),ht(".creature-4 > .quickCombat > .verbs").forEach(Ps)}function jr(){$.subscribe(ft,Fs)}function K(e){return!e||!e.response||!e.response.data}var ui='<table class="relicT relicS"><thead><tr><th colspan="2">Adjusted defense values</th></tr></thead><tbody><tr><td>DC225:</td><td id="DC225">0</td></tr><tr><td>DC175:</td><td id="DC175">0</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody><thead><tr><th colspan="2">Attacking Group Stats</th></tr></thead><tbody><tr><td>Raw Group Attack:</td><td class="fshGrey" id="GroupAttack"></td></tr><tr><td>Group Attack w/ buffs:</td><td id="GroupAttackBuffed"></td></tr><tr><td>Raw Group Defense:</td><td class="fshGrey" id="GroupDefense"></td></tr><tr><td>Group Defense w/ buffs:</td><td id="GroupDefenseBuffed"></td></tr><tr><td>Raw Group Armor:</td><td class="fshGrey" id="GroupArmor"></td></tr><tr><td>Group Armor w/ buffs:</td><td id="GroupArmorBuffed"></td></tr><tr><td>Raw Group Damage:</td><td class="fshGrey" id="GroupDamage"></td></tr><tr><td>Group Damage w/ buffs:</td><td id="GroupDamageBuffed"></td></tr><tr><td>Raw Group HP:</td><td class="fshGrey" id="GroupHP"></td></tr><tr><td>Group HP w/ buffs:</td><td id="GroupHPBuffed"></td></tr></tbody></table>',mi='<table class="relicT relicS"><thead><tr><th colspan="2">Defending Guild Stats</th></tr></thead><tbody><tr><td>Relic Count:</td><td id="relicCount">0</td></tr><tr><td>Lead Defender Bonus:</td><td id="LDPercentage">0</td></tr><tr><td>Lead Defender Cloaked:</td><td id="LDCloaked">No</td></tr></tbody><thead><tr><th colspan="2">Other Defender Stats</th></tr></thead><tbody><tr><td>Raw Attack:</td><td class="fshGrey" id="attackValue">0</td></tr><tr><td>Attack w/ buffs:</td><td id="attackValueBuffed">0</td></tr><tr><td>Raw Defense:</td><td class="fshGrey" id="defenseValue">0</td></tr><tr><td>Defense w/buffs:</td><td id="defenseValueBuffed">0</td></tr><tr><td>Raw Armor:</td><td class="fshGrey" id="armorValue">0</td></tr><tr><td>Armor w/ buffs:</td><td id="armorValueBuffed">0</td></tr><tr><td>Raw Damage:</td><td class="fshGrey" id="damageValue">0</td></tr><tr><td>Damage w/ buffs:</td><td id="damageValueBuffed">0</td></tr><tr><td>Raw HP:</td><td class="fshGrey" id="hpValue">0</td></tr><tr><td>HP w/ buffs:</td><td id="hpValueBuffed">0</td></tr><tr><td>Cloaked:</td><td id="defendersCloaked">0</td></tr><tr><td>Processed:</td><td id="defendersProcessed">0</td></tr></tbody></table>',ci='<table class="relicT"><thead><tr><th colspan="2">Processing</th></tr></thead><tbody><tr><td class="fshGreen" colspan="2" id="ProcessingStatus">Parsing defending guild stats ...</td></tr></tbody><thead><tr><th colspan="2">Assumptions</th></tr></thead><tbody><tr><td colspan="2" class="fshGrey">Above calculations include Constitution, Fortitude, Nightmare Visage, Chi Strike, Sanctuary, Terrorize and Flinch bonus calculations (in that order) on both the defending group and attacking group.</td></tr></tbody></table>';var q,Be,Ae,Se;function _s(e){return e.player_name}function Os(e){Se=e.defenders.map(_s)}function Ks(){q?E("",q):q=c({className:"body"})}function qs(e){Be=c({className:"fshFloatLeft fshRelicLeftDiv"}),a(q,Be),e.is_owner&&a(Be,Ha(Se)),Ae=J({className:"custombutton",textContent:"Fetch Stats"}),a(Be,Ae)}function di(e){Os(e),Ks(),qs(e);let t=i("dialog-relic");a(t,q)}var G,pi,hi,zr,Qr,Yr,Jr,It,Xr,Zr,eo,to,ro,oo,no,ao,io,lo,so,fo,uo,mo,co,po,ho,go,vo,yo,xo,Do,re,Ws=[e=>e!=="lastUpdate",e=>!Se.includes(e),e=>G[e].last_login,e=>Number(G[e].last_login)<pi,e=>Number(G[e].last_login)>hi,e=>G[e].level<400||G[e].level>421,e=>G[e].level<441||G[e].level>450];function Us(e,t){return t(e)}function js(e){return Ws.every(m(Us,e))}function zs(e){return`<a href="${Tn}${G[e].id}">${e}</a>`}function Qs(e){G=e,pi=ir-120,hi=ir-604800;let t=oa(G).filter(js).map(zs);ie(q,`<div class="fshFloatLeft fshRelicLowDiv"><table class="relicT"><thead><tr><th>${t.length.toString()} Offline guild members not at relic:</th></tr></thead><tbody><tr><td>${t.join(" ")}</td></tr></tbody></table></div>`)}function Ys(){zr=i("relicCount"),Qr=i("LDPercentage"),Yr=i("LDCloaked"),Jr=i("attackValue"),It=i("attackValueBuffed"),Xr=i("defenseValue"),Zr=i("defenseValueBuffed"),eo=i("armorValue"),to=i("armorValueBuffed"),ro=i("damageValue"),oo=i("damageValueBuffed"),no=i("hpValue"),ao=i("hpValueBuffed"),io=i("defendersCloaked"),lo=i("defendersProcessed")}function Js(){so=i("DC225"),fo=i("DC175"),uo=i("GroupAttack"),mo=i("GroupAttackBuffed"),co=i("GroupDefense"),po=i("GroupDefenseBuffed"),ho=i("GroupArmor"),go=i("GroupArmorBuffed"),vo=i("GroupDamage"),yo=i("GroupDamageBuffed"),xo=i("GroupHP"),Do=i("GroupHPBuffed")}function gi(e){kt(Ae);let t=g("hideRelicOffline");e.is_owner&&!t&&Ma(!0).then(Qs),ie(Be,ci),re=i("ProcessingStatus");let r=c({className:"fshFloatLeft fshRelicMidDiv",innerHTML:mi});a(q,r),Ys();let o=c({className:"fshFloatLeft fshRelicRightDiv",innerHTML:ui});a(q,o),Js()}var $t;function Xs(e){return e===1?1.5:xe(1-e/10,2)}function vi(e){let t=V(e),o=ta('#pCC img[src*="/relics/"]',t).length;s(o,zr),$t=Xs(o),s(`${String($t*100)}%`,Qr)}function Rt(e,t){return e>t*10||e<t?e:t*10}function Zs(e){e.attackValue=Rt(e.attackBonus,e.levelValue),e.defenseValue=Rt(e.defenseBonus,e.levelValue),e.armorValue=Rt(e.armorBonus,e.levelValue),e.damageValue=Rt(e.damageBonus,e.levelValue),e.hpValue=e.hpBonus}var ef=[["levelValue","level"],["attackValue","attack"],["attackBonus","bonus_attack"],["defenseValue","defense"],["defenseBonus","bonus_defense"],["armorValue","armor"],["armorBonus","bonus_armor"],["damageValue","damage"],["damageBonus","bonus_damage"],["hpValue","hp"],["hpBonus","bonus_hp"],["killStreakValue","killstreak"]];function tf(e,t,r){e[r[0]]=Number(t[r[1]])}function rf(e,t){ef.forEach(m(tf,e,t))}var of=[["counterAttackLevel","Counter Attack"],["doublerLevel","Doubler"],["deathDealerLevel","Death Dealer"],["darkCurseLevel","Dark Curse"],["holyFlameLevel","Holy Flame"],["constitutionLevel","Constitution"],["sanctuaryLevel","Sanctuary"],["flinchLevel","Flinch"],["nightmareVisageLevel","Nightmare Visage"],["superEliteSlayerLevel","Super Elite Slayer"],["fortitudeLevel","Fortitude"],["chiStrikeLevel","Chi Strike"],["terrorizeLevel","Terrorize"],["barricadeLevel","Barricade"],["reignOfTerrorLevel","Reign Of Terror"],["anchoredLevel","Anchored"],["severeConditionLevel","Severe Condition"],["entrenchLevel","Entrench"],["cloakLevel","Cloak"]];function nf(e,t,r){e[r[0]]=t[r[1]]||0}function af(e,t){of.forEach(m(nf,e,t))}function be(e){if(!e)return;let t=Lt(e._skills),r={};return rf(r,e),af(r,t),r.superEliteSlayerMultiplier=xe(.002*r.superEliteSlayerLevel,2),ra(r.armorValue)&&Zs(r),r}var Le,Pt,Ke,Te,qe,Ft,We,wo,ko,B,v,he;function lf(){v.attack-=he.attack,v.defense-=he.defense,v.armor-=he.armor,v.damage-=he.damage,v.hp-=he.hp}function Ue(e){return Math.round(e*$t)}function sf(){Le+=Ue(B.attackValue),Ke+=Ue(B.defenseValue),Te+=Ue(B.armorValue),qe+=Ue(B.damageValue),We+=Ue(B.hpValue)}function yi(){d(Le,Jr),d(Ke,Xr),d(Te,eo),d(qe,ro),d(We,no),s(wo,io),ko+=1,s(ko,lo)}function ff(){d(v.attack,uo),d(v.defense,co),d(v.armor,ho),d(v.damage,vo),d(v.hp,xo)}function uf(e){return Math.ceil(v.attack*(j(e["Nightmare Visage"],0)*.0025))}function mf(){let e=Math.ceil(v.attack*B.flinchLevel*.001);d(v.attack-e,mo)}function cf(e){return Math.ceil(v.defense*(1+j(e.Constitution,0)*.001))}function df(e,t){d(t+e,po)}function pf(e){d(v.armor+Math.floor(v.armor*j(e.Sanctuary,0)*.001),go)}function hf(e,t){return Math.ceil(t*j(e.Fortitude,0)*.001)}function gf(e){d(v.hp+e,Do)}function vf(e,t){let r=Math.ceil((v.hp+t)*j(e["Chi Strike"],0)*.001),o=Math.ceil(v.damage*B.terrorizeLevel*.001);d(v.damage+r-o,yo)}function yf(e){let t=uf(e);v.attack-=t,mf();let r=cf(e);df(t,r),pf(e);let o=hf(e,r);gf(o),vf(e,o)}function xf(e){let t=Math.ceil(Pt*j(e.Flinch,0)*.001);d(Pt-t,It)}function Df(e){let t=Math.ceil(Ft*j(e.Terrorize,0)*.001);d(Ft-t,oo)}function wf(){s("Processing attacking group stats ... ",re),he&&lf(),ff();let e=Lt(GameData.player().buffs);yf(e),xf(e),Df(e),s("Done.",re)}function kf(){return Math.ceil(Le*(B.nightmareVisageLevel*.0025))}function Ef(){return Math.ceil(Ke*(1+B.constitutionLevel*.001))}function Cf(e){Pt=Le-e,d(Pt,It)}function xi(e){return 1-e*mt}function Bf(e,t){let r=t+e;d(r,Zr),d(Math.ceil(r*xi(225)),so),d(Math.ceil(r*xi(175)),fo)}function Af(){d(Te+Math.floor(Te*B.sanctuaryLevel*.001),to)}function Sf(e){return Math.ceil(e*B.fortitudeLevel*.001)}function bf(e){Ft=qe+Math.ceil(e*B.chiStrikeLevel*.001),d(Ft)}function Lf(){B.cloakLevel!==0&&s("Yes",Yr)}function Di(){s("Processing defending guild stats ... ",re),sf(),yi();let e=kf();Cf(e);let t=Ef();Bf(e,t),Af();let r=We+Sf(t);d(r,ao),bf(r),Lf(),GameData.player().hasGroup&&v?wf():s("Done.",re)}function wi(e){let t=be(e);Le+=Math.round(t.attackValue*ve),Ke+=Math.round(t.defenseValue*ve),Te+=Math.round(t.armorValue*ve),qe+=Math.round(t.damageValue*ve),We+=Math.round(t.hpValue*ve),t.cloakLevel!==0&&(wo+=1),yi()}function ki(e){B=be(e)}function Ei(e){v=e}function Ci(e){he=e}function Bi(){Le=0,Ke=0,Te=0,qe=0,We=0,wo=0,ko=0}var je;function Tf(e){s(e.message,re)}function Mf(e){return e.parentNode.parentNode.previousElementSibling.previousElementSibling.innerHTML.indexOf('"#000099"')!==-1}function Hf(e){let t=e.previousElementSibling.href,r=[Na(t).then(Ei)];return Mf(e)&&r.push(Ga().then(Ci)),r}function Vf(e){let t=V(e),r=Y('#pCC a[href*="confirmDisband"]',t);if(!r)return;let o=Hf(r);return ha(o)}function Nf(){return F({cmd:"guild",subcmd:"groups"}).then(Vf)}function Gf(){return F({cmd:"guild",subcmd:"view",guild_id:je.controlled_by.guild_id}).then(vi)}function If(e,t){return t===0?mr(e).then(ki):mr(e).then(wi).catch(Tf)}function $f(){return Se.map(If)}function Rf(){let e=[Gf()];return GameData.player().hasGroup&&e.push(Nf()),e=e.concat($f()),e}function Pf(){gi(je),Bi();let e=Rf();Ct(e,Di)}function Ff(e,t){K(t)||(je=t.response.data,je.defenders.length>0&&(di(je),Ln(Ae,"click",Pf)))}function Eo(){$.subscribe(_n,Ff)}function ze(e){return fa({cache:!1,url:"fetchdata.php",data:Et(e,{fshrnd:Ta()}),dataType:"json"})}var Ai=[];function _f(e){return K(e)||Ai.push(e),e}function Of(e,t){return e===Number(t.response.data.id)}function Kf(e,t){e(t)}function qf(e){return new Promise(t=>{Xn(3,Kf,[t,e])})}function Qe(e,t){let r=Ai.find(m(Of,e));return r?qf(r):ze({a:1,id:e,passback:t}).then(_f)}var _t,Co,Bo,Ao,So,bo;function Ye(e,t){return la(we(t,e))}function Wf(e){Bo=Ye(e,Un),Co=Ye(e,Wn),So=Ye(e,zn),Ao=Ye(e,jn),bo=Ye(e,Qn)}function Si(){_t=GameData.player().level,Wf(i("statbar-character-tooltip-stats"))}function Uf(e){return`<table><tr><td><img src="${ae}creatures/${e.image_id}.png" height="200" width="200"></td><td rowspan="2"><table width="400"><tr><td class="header" colspan="4" class="fshCenter">Statistics</td></tr>`}function jf(e,t){return`<tr><td>Class:&nbsp;</td><td width="40%">${e.creature_class}</td><td>Level:&nbsp;</td><td width="40%">${e.level} (your level:<span class="${t}">${_t}</span>)</td></tr>`}function zf(e){return`<tr><td>Attack:&nbsp;</td><td width="40%">${e.attack} (your defense:<span class="fshYellow">${Co}</span>)</td><td>Defense:&nbsp;</td><td width="40%">${e.defense} (your attack:<span class="fshYellow">${Bo}</span>)</td></tr>`}function Qf(e){return`<tr><td>Armor:&nbsp;</td><td width="40%">${e.armor} (your damage:<span class="fshYellow">${Ao}</span>)</td><td>Damage:&nbsp;</td><td width="40%">${e.damage} (your armor:<span class="fshYellow">${So}</span>)</td></tr>`}function Yf(e,t){return`<tr><td>HP:&nbsp;</td><td width="40%">${e.hp} (your HP:<span class="fshYellow">${bo}</span>)(1H: <span class="fshRed">${t}</span>)</td><td>Gold:&nbsp;</td><td width="40%">${e.gold}</td></tr>`}var Jf='<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Enhancements</td></tr>';function Xf(e){return`<tr><td colspan="2">${e.name}:</td><td colspan="2">${e.value}</td></tr>`}function Zf(e){return e.enhancements.length===0?'<tr><td colspan="4">[no enhancements]</td></tr>':e.enhancements.map(Xf).join("")}function eu(e){return`<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Description</td></tr><tr><td colspan="4">${e.description}</td></tr><tr><td colspan="4" height="5"></td></tr></table></td></tr><tr><td class="fshCenter"><b>${e.name}</b></td></tr></table>`}function tu(e,t,r){return Uf(e)+jf(e,r)+zf(e)+Qf(e)+Yf(e,t)+Jf+Zf(e)+eu(e)}function ru(e){let t=Math.ceil(e.hp*n.hpVariable+e.armor*n.generalVariable),r="fshYellow";return Si(),_t>e.level&&(r="fshRed"),tu(e,t,r)}function Lo(e){if(!K(e))return ru(e.response.data)}var ou=["verb","view","tip-static"];function nu(e,t){$(e).qtip({overwrite:!0,show:{event:"mouseover",ready:!0},style:{classes:"qtip-tipsy qtip-custom"},position:{my:"center right",at:"center left",effect:!1,viewport:$(window)},content:{text:t},hide:{effect:!1}})}function au(e){return pt(e.parentNode.children).indexOf(e)}function iu(e,t){let r=Lo(t);e.set("content.text",r)}function lu(e,t,r){return Qe(GameData.actions()[e].data.id,e).then(m(iu,r)),"Loading..."}function su(e,t){De("NewMap","CreatureInfo");let r=au(t);e.classList.add("fshTip"),nu(e,m(lu,r))}function fu(e,t){return Ca(ou,e)&&!Fe("fshTip",e)&&Fe("creature",t)}function uu(e){if(!n.showCreatureInfo)return;let{target:t}=e,r=t.parentNode.parentNode.parentNode;fu(t,r)&&su(t,r)}function To(){I(i("actionList"),"mouseover",uu)}var M;function mu(e,t){t.creature_class=e.creature_class,t.image_id=e.image_id,t.level=Number(e.level),t.type=e.type}function cu(e){M[e.name]?M[e.name].seen&&(M[e.name].seen+=1):(M[e.name]={seen:1},mu(e,M[e.name]))}function bi(e,t,r){return t?e(t,r):r}function Li(e,t){let r=e||{};return r.min=bi(Math.min,r.min,t),r.max=bi(Math.max,r.max,t),r}var du=["attack","armor","damage","defense","hp"];function pu(e,t){return!e||e.min!==t.min||e.max!==t.max}function hu(e,t,r){let o=Li(t[r],Number(e[r]));pu(t[r],o)&&(t[r]=o)}function gu(e,t){du.forEach(m(hu,e,t))}function vu(e){return e.enhancements&&e.enhancements.length>0}function yu(e,t){e[t.name]=Li(e[t.name],Number(t.value))}function xu(e,t){vu(e)&&(t.enhancements=t.enhancements||{},e.enhancements.forEach(m(yu,t.enhancements)))}function Du(e){M||(M={}),cu(e),gu(e,M[e.name]),xu(e,M[e.name]),Dt("fsh_monsterLog",M)}function Ti(e){n.showMonsterLog&&Du(e)}function wu(e){M=e||{}}function Mi(){xt("fsh_monsterLog").then(wu)}var Hi=[];function ku(e){K(e)||(De("NewMap","MonsterLog"),Ti(e.response.data))}function Eu(e,t){return e.id===t.id}function Cu(e){if(Hi.find(m(Eu,e.data)))return!0;Hi.push(e.data)}function Bu(e,t){e.type!==6||Cu(e)||Qe(e.data.id,t).then(ku)}function Vi(){n.showMonsterLog&&GameData.actions().forEach(Bu)}function Mo(){Mi(),$.subscribe("-1-success.action-response 4-success.action-response 5-success.action-response 25-success.action-response",Vi),Vi()}function Ho(){return bt({subcmd:"scouttower"})}function Au(e){let t=e.split(/[: /[]/);return new Date(Number(t[4]),lt.indexOf(t[3]),Number(t[2]),Number(t[0]),Number(t[1]))}function Su(e){let t=le(e[1]);return t==="No active cooldown"?0:Math.ceil((Au(t.slice(16))-dt)/1e3)}function bu(e){let t=e[0].cells[0].children[0];return{base_id:Number(t.src.match(/s\/(\w+)\.p/)[1].slice(0,-32)),name:t.title}}function Lu(e){return{cooldown:Su(e),creature:bu(e),kills:Number(le(e[0].cells[3]))}}function Tu(e){let t=le(e[0].cells[1]);if(t!=="n/a"){let r=le(e[0].cells[2]).match(/(\d+)\/(\d+)/);return{realm:t,current_hp:Number(r[1]),max_hp:Number(r[2])}}}function Mu(e){let t=e[2].cells[0].children;if(t.length===1)return{contributors:ua(t[0].rows,3,0).map(o=>({kills:Number(le(o.cells[1])),player:{name:le(o.cells[0])}}))}}function Hu(e){return{...Lu(e),...Tu(e),...Mu(e)}}function Vu(e){let t=V(e),r=Y('table[width="500"]',t);if(!r)return{s:!1};let o=pt(r.rows).filter((f,u,S)=>u!==0&&u<S.length-1&&(u-1)%6<3);return{r:ga(3,o).map(Hu),s:!0}}function Vo(){return F({cmd:"guild",subcmd:"scouttower"}).then(Vu)}function No(){return X(Ho,Vo)}function Nu(e,[t,r,o]){let l=e.insertCell(-1);return l.colSpan=t,o&&(l.className="header"),a(l,r),l}function Gu(e,t){t.forEach(m(Nu,e))}function Iu(e,t,r){let o=e.insertRow(-1);return r&&(o.className="fshBlue"),Gu(o,t),o}function $u(e,t){Iu(e,t[0],t[1])}function Je(e,t){t.forEach(m($u,e))}var Go;function Ni(e){Go=e}var Io,$o,Ro,Po,Fo,_o,Oo,Ko;function Ru(){Io=D("Current"),$o=D("Kills"),Ro=D("Member"),Po=D("% of Total")}function Pu(){Fo=D("Status"),_o=D("Titan HP"),Oo=D("Total"),Ko=D("Your Guild")}function Gi(){Ru(),Pu()}var Me,He,Ve,Ne,Ge,Ie,$e;function Ii(){Me=p(),He=p(),Ve=p(),Ne=p(),Ge=p(),Ie=p(),$e=p()}function $i(){s("",Me),s("",He),s("",Ve),s("",Ne),s("",Ge),E("",Ie),E("",$e)}var oe;function Ot(){for(;oe.rows.length>7;)oe.deleteRow(7)}function Fu(){let e=p();return a(e,Me),P(e,"/"),a(e,He),e}function Ri(e){let t=p();return a(t,e),P(t,"%"),t}function Pi(){oe=ma({className:"fshCenter"}),Gi(),Je(oe,[[[[2,_o,!0],[4,Ko,!0]]],[[[2,Fu()],[4,Ve]]],[[[2,Io,!0],[4,Ri(Ne)]],!0],[[[2,Oo,!0],[4,Ri(Ge)]],!0],[[[2,Fo,!0],[4,Ie]],!0],[[[6,$e]]],[[[2,Ro,!0],[2,$o,!0],[2,Po,!0]]]])}var ne,Kt;function qo(){Kt=null,ne&&!Fe("fshHide",ne)&&(h(ne,!0),$i(),Ot())}function Fi(e){return e.type===0?(Kt=e.base_creature_id,!0):!1}function _i(){if(ne)h(ne,!1);else{let e=i("actionContainer");ne=c({className:"fshActionBox titanInfo"}),Ii(),Pi(),a(ne,oe),a(e,ne)}}function _u(e){let t=new Date(dt+e*1e3);return`${wt(t.getHours())}:${wt(t.getMinutes())} ${wt(t.getDate())}/${lt[t.getMonth()]}/${t.getFullYear()}`}function Ou(e){return e<=0?'<span class="fshGreen cooldown">No active cooldown</span>':`<span class="fshMaroon cooldown">Cooldown until: ${_u(e)}</span>`}function Ku(e){return gt($a(e.max_hp-e.current_hp,e.kills),2)}function qu(e){return gt(e.kills*100/e.max_hp,2)}function Wu(e){return Ra(e.kills,e.max_hp,e.current_hp)}function Uu(e){e.forEach(([t,r])=>{s(t,r)})}function ju(e){Uu([[e.current_hp,Me],[e.max_hp,He],[e.kills,Ve],[Ku(e),Ne],[qu(e),Ge]]),E(Wu(e),Ie),E(Ou(e.cooldown),$e)}function zu(e,t){return[[[2,D(t.player.name)],[2,D(t.kills.toString())],[2,D(`${gt(t.kills*100/e.kills,2)}%`)]]]}function Qu(e){if(Ot(),!e.contributors)return;let t=e.contributors.map(m(zu,e));Je(oe,t)}function Yu(e){return e.realm&&e.creature.base_id===Kt&&e.realm===Go}function Wo(e){let t=e.find(Yu);t&&(ju(t),Qu(t))}var qt;function Ju(){qt&&(window.clearTimeout(qt),qt=null)}function Xu(e){return e&&e.s&&R(e.r)}function Oi(e){return n.showTitanInfo&&R(e)&&e.some(Fi)}function Zu(e,t){!Xu(t)||(Wo(t.r),Oi(GameData.realm().dynamic)?qt=window.setTimeout(e,3e4):qo())}function Ki(){No().then(m(Zu,Ki))}function qi(e){Ju(),Oi(e)?(_i(),Ki()):qo()}function Wi(e){e.dynamic&&(Ni(e.name),qi(e.dynamic))}function Ui(){n.showTitanInfo=!n.showTitanInfo,y("showTitanInfo",n.showTitanInfo),qi(GameData.realm().dynamic)}function em(e){return e.realm&&e.realm.name}function ji(e,t){em(t)&&Wi(t.realm)}function Uo(){window.initialGameData&&ji(null,window.initialGameData),$.subscribe(`${Pn} ${On}`,ji)}var jo;function zi(e){$("#statbar-gold").css("background-color",e)}function Qi(){$("#HelperSendTotal").html(Q(g("currentGoldSentTotal"))),Number(GameData.player().gold)>jo?zi("red"):zi("inherit")}function tm(){return`<dt class="stat-gold-sendTo">Send To:</dt><dd id="HelperSendTo">${g("goldRecipient")}</dd><dt class="stat-gold-sendAmt">Amount:</dt><dd id="HelperSendAmt">${Q(jo)}</dd><dt class="stat-gold-sendTo">Send?</dt><dd><input id="HelperSendGold" value="Send!" class="custombutton" type="submit"><input type="hidden" id="xc" value=""</dd><dt class="stat-gold-sendTotal">Total Sent:</dt><dd id="HelperSendTotal">${Q(g("currentGoldSentTotal"))}</dd>`}function rm(){jo=g("goldAmount"),$("#statbar-gold-tooltip-general").append(tm()),$("#HelperSendGold").on("click",La),Qi(),$.subscribe(Gn,Qi)}function zo(){ba(),Sa&&rm()}var Xe,Ze,Wt,Re,Qo,Yo,Ut;function om(){return ze({a:14,d:0,id:Xe.id,item_id:Xe.itemId})}function nm(e){let t=e.response.response,r=e.response.msg,o;if(t!==0){let l=r.indexOf("<");l!==-1?o=r.substring(0,l):o=r}else o=`You purchased ${e.response.data.name} for ${Q(e.response.data.cost)} gold.`;ie(Ut,`${o}<br>`)}function am(){GameData.doAction(14,3,{id:Xe.id,item_id:Xe.itemId},0),Wt.close()}function im(){let e=na(Qo.value);if(!e)return;let t=[];for(let r=1;r<e;r+=1)t.push(om().then(nm));Ct(t,am)}function lm(){Re=c({className:"fshClear",textContent:"Select how many to quick-buy:"}),Qo=vt({id:"buyAmount",className:"fshNumberInput",min:1,max:99,value:1,type:"number"}),a(Re,Qo),Yo=J({textContent:"Quick-buy"}),C(Yo,im),a(Re,Yo),Ut=c(),a(Re,Ut),a(Ze,Re)}function sm(){return Ze||i("shopDialogConfirm")}function fm(){return Wt||$(Ze).data("hcsWorldDialogShopConfirm")}function um(){Re?s("",Ut):lm()}function mm(e,t){Xe=t,Ze=sm(),!!Ze&&(Wt=fm(),Wt&&um())}function Jo(){$.subscribe(In,mm)}function cm(e){let t=V(e),r=Va(t);return{r:{attributes:[{value:r.attack},{value:r.defense},{value:r.armor},{value:r.damage},{value:r.hp}]}}}function Xo(e){return F({cmd:"guild",subcmd:"groups",subcmd2:"viewstats",group_id:e}).then(cm)}function et(e){return bt(Et({subcmd:"groups"},e))}function Zo(e){return et({subcmd2:"viewstats",group_id:e})}function en(e){return X(Zo,Xo,e)}function tn(){return et({subcmd2:"view"})}function dm(e){let t=V(e),r=Y('#pCC img[src$="disband.png"]',t);return r?{r:[{id:Number(r.parentNode.href.match(/\((\d+)\)/)[1]),members:[{name:z()}]}]}:{}}function rn(){return F({cmd:"guild",subcmd:"groups"}).then(dm)}function on(){return X(tn,rn)}function Yi(e){return e.numberOfCreatureHitsTillDead-e.numberOfHitsRequired<=1?", dies on miss":", survives a miss"}function pm(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired>e.numberOfCreatureHitsTillDead}function hm(e){return e.numberOfCreatureHitsTillDead==="-"?e.numberOfHitsRequired:pm(e)?"-":e.numberOfHitsRequired}function gm(e){return e.numberOfCreatureHitsTillDead==="-"||e.numberOfCreatureHitsTillDead>e.numberOfHitsRequired}function vm(e){return e.numberOfHitsRequired==="-"?e.numberOfCreatureHitsTillDead:gm(e)?"-":e.numberOfCreatureHitsTillDead}var ym=[[e=>e.playerHits==="-"&&e.creatureHits==="-",()=>"Unresolved"],[e=>e.playerHits==="-",()=>"Player dies"],[e=>e.playerHits===1,e=>`Player 1 hits${Yi(e)}`],[e=>e.playerHits>1,e=>`Player > 1 hits${Yi(e)}`]];function xm(e,t){return t[0](e)}function Dm(e){let t=ym.find(m(xm,e));return t?t[1](e):"Unknown"}function nn(e){e.playerHits=hm(e),e.creatureHits=vm(e),e.fightStatus=Dm(e)}function wm(e){return e.callback.groupExists?e.callback.groupArmorValue:e.player.armorValue}function km(e){let t=wm(e);e.overallArmorValue=t+Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}function Em(e){e.player.sanctuaryLevel>0&&(e.extraNotes+=`Sanc Bonus Armor = ${Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}<br>`)}function Cm(e){e.terrorizeEffect=Math.floor(e.creature.damage*e.player.terrorizeLevel*.001)}function Bm(e){e.player.terrorizeLevel>0&&(e.extraNotes+=`Terrorize Creature Damage Effect = ${e.terrorizeEffect*-1}<br>`)}function Am(e){e.creatureDamageDone=Math.ceil(e.generalVariable*e.creature.damage-e.overallArmorValue+e.overallHPValue)}function Sm(e){let t=e.generalVariable*e.creature.damage;t<e.overallArmorValue?e.numberOfCreatureHitsTillDead=e.overallHPValue:e.numberOfCreatureHitsTillDead=Math.ceil(e.overallHPValue/(t-e.overallArmorValue))}function bm(e){e.creatureHitByHowMuch>=0?Sm(e):e.numberOfCreatureHitsTillDead="-"}function an(e){km(e),Em(e),Cm(e),Bm(e),e.creature.damage-=e.terrorizeEffect,Am(e),bm(e)}function Lm(e){return e.callback.groupExists?e.callback.groupAttackValue:e.player.attackValue}function Ji(e){return Math.floor(e.creature.defense*e.player.darkCurseLevel*mt)}function Tm(e){let t=e.creature.defense-Ji(e);return e.combatEvaluatorBias===3?e.overallAttackValue-Math.ceil(t)-50:e.overallAttackValue-Math.ceil(e.attackVariable*t)}function ln(e){let t=Lm(e);e.player.darkCurseLevel>0&&(e.extraNotes+=`DC Bonus Attack = ${Ji(e)}<br>`),e.nightmareVisageAttackMovedToDefense=Math.floor((t+e.counterAttackBonusAttack)*e.player.nightmareVisageLevel*.0025),e.player.nightmareVisageLevel>0&&(e.extraNotes+=`NMV Attack moved to Defense = ${e.nightmareVisageAttackMovedToDefense}<br>`),e.overallAttackValue=t+e.counterAttackBonusAttack-e.nightmareVisageAttackMovedToDefense,e.hitByHowMuch=Tm(e)}function Mm(e){return e.player.counterAttackLevel>0&&e.numberOfHitsRequired===1}function Xi(e){e.lowestCALevelToStillHit=Math.max(Math.ceil((e.counterAttackBonusAttack-e.hitByHowMuch+1)/e.player.attackValue/.0025),0),e.lowestCALevelToStillKill=Math.max(Math.ceil((e.counterAttackBonusDamage-e.damageDone+1)/e.player.damageValue/.0025),0)}function Hm(e){return e.player.counterAttackLevel>0?Math.ceil((1+e.player.doublerLevel/50)*.0025*e.lowestFeasibleCALevel):0}function Vm(e){e.extraAttackAtLowestFeasibleCALevel=Math.floor(e.player.attackValue*.0025*e.lowestFeasibleCALevel),e.extraDamageAtLowestFeasibleCALevel=Math.floor(e.player.damageValue*.0025*e.lowestFeasibleCALevel),e.extraNotes+=`Extra CA Att/Dam at this lowered CA level = ${e.extraAttackAtLowestFeasibleCALevel} / ${e.extraDamageAtLowestFeasibleCALevel}<br>`}function Nm(e){Xi(e),e.lowestFeasibleCALevel=Math.max(e.lowestCALevelToStillHit,e.lowestCALevelToStillKill),e.extraNotes+=`Lowest CA to still 1-hit this creature = ${e.lowestFeasibleCALevel}<br>`,e.lowestFeasibleCALevel!==0&&Vm(e),e.extraStaminaPerHitAtLowestFeasibleCALevel=Hm(e),e.extraStaminaPerHitAtLowestFeasibleCALevel<e.extraStaminaPerHit?e.extraNotes+=`Extra Stam Used at this lowered CA level = ${e.extraStaminaPerHitAtLowestFeasibleCALevel}<br>`:e.extraNotes+="No reduction of stam used at the lower CA level<br>"}function Gm(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired!==1}function Im(e){e.lowestCALevelToStillHit>175?e.extraNotes+="Even with CA175 you cannot hit this creature<br>":e.lowestCALevelToStillHit!==0&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillHit} to hit this creature<br>`)}function $m(e){e.lowestCALevelToStillKill>175?e.extraNotes+="Even with CA175 you cannot 1-hit kill this creature<br>":e.lowestCALevelToStillKill!==0&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillKill} to 1-hit kill this creature<br>`)}function Rm(e){Xi(e),Im(e),$m(e)}function sn(e){Mm(e)&&Nm(e),Gm(e)&&Rm(e)}function Pm(e){return e.callback.groupExists?e.callback.groupHPValue:e.player.hpValue}function Fm(e){return e.callback.groupExists?e.callback.groupDamageValue:e.player.damageValue}function _m(e){let t=Pm(e),{fortitudeLevel:r}=e.player;e.fortitudeExtraHPs=Math.floor(t*r*.001),r>0&&(e.extraNotes+=`Fortitude Bonus HP = ${e.fortitudeExtraHPs}<br>`),e.overallHPValue=t+e.fortitudeExtraHPs}function Om(e){let{chiStrikeLevel:t}=e.player;e.chiStrikeExtraDamage=Math.floor(e.overallHPValue*t*.001),t>0&&(e.extraNotes+=`Chi Strike Bonus Damage = ${e.chiStrikeExtraDamage}<br>`)}function fn(e){_m(e),Om(e);let t=Fm(e);if(e.overallDamageValue=t+e.deathDealerBonusDamage+e.counterAttackBonusDamage+e.holyFlameBonusDamage+e.chiStrikeExtraDamage,e.damageDone=Math.floor(e.overallDamageValue-(e.generalVariable*e.creature.armor+e.hpVariable*e.creature.hp)),e.hitByHowMuch>0){let r=1;e.overallDamageValue>=e.generalVariable*e.creature.armor&&(r=e.overallDamageValue-e.generalVariable*e.creature.armor),e.numberOfHitsRequired=Math.ceil(e.hpVariable*e.creature.hp/r)}else e.numberOfHitsRequired="-"}function un(e){return e.callback.groupExists?e.callback.groupDefenseValue:e.player.defenseValue}function Km(e){e.player.constitutionLevel>0&&(e.extraNotes+=`Constitution Bonus Defense = ${Math.floor(un(e)*e.player.constitutionLevel*.001)}<br>`)}function qm(e){e.player.flinchLevel>0&&(e.extraNotes+=`Flinch Bonus Attack Reduction = ${Math.floor(e.creature.attack*e.player.flinchLevel*.001)}<br>`)}function mn(e){e.overallDefenseValue=un(e)+Math.floor(un(e)*e.player.constitutionLevel*.001)+e.nightmareVisageAttackMovedToDefense,Km(e),qm(e),e.creatureHitByHowMuch=Math.floor(e.attackVariable*e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue),e.combatEvaluatorBias===3&&(e.creatureHitByHowMuch=Math.floor(e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue-50))}function Wm(e){e.player.superEliteSlayerLevel>0&&(e.extraNotes+=`SES Stat Reduction Multiplier = ${e.player.superEliteSlayerMultiplier}<br>`)}function Um(e){e.holyFlameBonusDamage=0,e.creature.class==="Undead"&&(e.holyFlameBonusDamage=Math.max(Math.floor((e.player.damageValue-e.creature.armor)*e.player.holyFlameLevel*.002),0),e.player.holyFlameLevel>0&&(e.extraNotes+=`HF Bonus Damage = ${e.holyFlameBonusDamage}<br>`))}function jm(e){e.deathDealerBonusDamage=Math.floor(e.player.damageValue*(Math.min(Math.floor(e.player.killStreakValue/5)*.01*e.player.deathDealerLevel,20)/100))}function zm(e){e.counterAttackBonusAttack=Math.floor(e.player.attackValue*.0025*e.player.counterAttackLevel),e.counterAttackBonusDamage=Math.floor(e.player.damageValue*.0025*e.player.counterAttackLevel)}function Qm(e){e.extraStaminaPerHit=0,e.player.counterAttackLevel>0&&(e.extraStaminaPerHit=Math.ceil((1+e.player.doublerLevel/50)*.0025*e.player.counterAttackLevel))}function Ym(e){e.player.deathDealerLevel>0&&(e.extraNotes+=`DD Bonus Damage = ${e.deathDealerBonusDamage}<br>`)}function Jm(e){e.player.counterAttackLevel>0&&(e.extraNotes+=`CA Bonus Attack/Damage = ${e.counterAttackBonusAttack} / ${e.counterAttackBonusDamage}<br>CA Extra Stam Used = ${e.extraStaminaPerHit}<br>`)}function cn(e){e.extraNotes="",Wm(e),Um(e),jm(e),zm(e),Qm(e),Ym(e),Jm(e)}function Xm(e){return e.callback.groupExists?"Group ":""}function Zm(e){return`<tr><td bgcolor="#CD9E4B" colspan="4" align="center">${Xm(e)}Combat Evaluation</td></tr>`}function ec(e){return e.hitByHowMuch>0?"Yes":"No"}function tc(e){return`<tr><td align="right"><span style="color:#333333">Will I hit it? </td><td align="left">${ec(e)}</td><td align="right"><span style="color:#333333">Extra Attack: </td><td align="left">( ${e.hitByHowMuch} )</td></tr>`}function rc(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill it? </td><td align="left">${e.numberOfHitsRequired}</td><td align="right"><span style="color:#333333">Extra Damage: </td><td align="left">( ${e.damageDone} )</td></tr>`}function oc(e){return e.creatureHitByHowMuch>=0?"Yes":"No"}function nc(e){return`<tr><td align="right"><span style="color:#333333">Will I be hit? </td><td align="left">${oc(e)}</td><td align="right"><span style="color:#333333">Extra Defense: </td><td align="left">( ${-1*e.creatureHitByHowMuch} )</td></tr>`}function ac(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill me? </td><td align="left">${e.numberOfCreatureHitsTillDead}</td><td align="right"><span style="color:#333333">Extra Armor + HP: </td><td align="left">( ${-1*e.creatureDamageDone} )</td></tr>`}function ic(e){return`<tr><td align="right"><span style="color:#333333"># Player Hits? </td><td align="left">${e.playerHits}</td><td align="right"><span style="color:#333333"># Creature Hits? </td><td align="left">${e.creatureHits}</td></tr>`}function lc(e){return`<tr><td align="right"><span style="color:#333333">Fight Status: </span></td><td align="left" colspan="3"><span>${e.fightStatus}</span></td></tr>`}function sc(e){return`<tr><td align="right"><span style="color:#333333">Notes: </span></td><td align="left" colspan="3"><span style="font-size:x-small;">${e.extraNotes}</span></td></tr>`}function dn(e){return`<table width="100%"><tbody>${Zm(e)}${tc(e)}${rc(e)}${nc(e)}${ac(e)}${ic(e)}${lc(e)}${sc(e)}</tbody></table>`}var jt,zt,tt;function fc(e){if(!jt){let t=we("body",e);t.length===1&&([jt]=t)}}function Zi(){return pe(zt)?"Remove from do not kill list":"Add to the do not kill list"}function el(){s(Zi(),tt)}function uc(){let e=n.doNotKillList.indexOf(zt);e===-1?n.doNotKillList.push(zt):n.doNotKillList.splice(e,1),el(),y("doNotKillList",n.doNotKillList.join()),Ce()}function mc(){tt=J({className:"fshBl",textContent:Zi(),type:"button"});let e=c({className:"description",innerHTML:'<span class="ui-helper-hidden-accessible"><input type="text"></span>'});a(e,tt),a(jt,e),C(tt,uc)}function cc(){tt?el():mc()}function pn(e,t){fc(t),jt&&(zt=e.trim(),cc())}var Pe,rt,Qt,Yt;function dc(){Pe||(Pe=i("dialog-viewcreature"))}function pc(){rt||(rt=c(),a(Pe,rt),a(Pe,c({innerHTML:'<span class="fshFooter">*Does include CA, DD, HF, DC, Flinch, Super Elite Slayer, NMV, Sanctuary, Constitution, Fortitude, Chi Strike and Terrorize (if active) and allow for randomness (1.1053). Constitution, NMV, Fortitude and Chi Strike apply to group stats.</span>'})))}function tl(){Qt||(pc(),Qt=c(),a(rt,Qt))}function hc(){Yt||(tl(),Yt=c(),a(rt,Yt))}function rl(e){tl(),E(e,Qt)}function ol(e){hc(),E(e,Yt)}function gc(e,t,r){r===3&&(t.attack-=Math.ceil(t.attack*e),t.defense-=Math.ceil(t.defense*e),t.armor-=Math.ceil(t.armor*e),t.damage-=Math.ceil(t.damage*e),t.hp-=Math.ceil(t.hp*e))}function vc(e,t){let r={name:e.name,class:e.creature_class,attack:Number(e.attack),defense:Number(e.defense),armor:Number(e.armor),damage:Number(e.damage),hp:Number(e.hp)};return gc(t,r,e.type),r}function yc(e){e.combatEvaluatorBias=n.combatEvaluatorBias,e.attackVariable=1.1053,e.generalVariable=n.generalVariable,e.hpVariable=n.hpVariable}function xc(e){cn(e),ln(e),fn(e),mn(e),an(e),nn(e),sn(e)}function nl(e,t,r){let o={};o.callback=r,o.player=be(t),yc(o),o.creature=vc(e.response.data,o.player.superEliteSlayerMultiplier),xc(o),o.evaluatorHTML=dn(o),r.groupExists?ol(o.evaluatorHTML):rl(o.evaluatorHTML)}function Dc(e){return e.members[0].name===z()}function wc(e){if(R(e.r))return e.r.find(Dc).id}function kc(e,t,r){if(!r.r||!r.r.attributes)return;let o=r.r.attributes;nl(e,t,{groupExists:!0,groupAttackValue:o[0].value,groupDefenseValue:o[1].value,groupArmorValue:o[2].value,groupDamageValue:o[3].value,groupHPValue:o[4].value})}function Ec(e,t,r){r&&en(r).then(m(kc,e,t))}function Cc(e,t){on().then(wc).then(m(Ec,e,t))}function Bc(e,t){e.player.hasGroup&&Cc(e,t),nl(e,t,{groupExists:!1})}function Ac(e){return e.response&&e.response.data}function Sc(e,t){dc(),!!Pe&&(rl(""),ol(""),Ac(t)&&(pn(t.response.data.name,Pe),Ba(!0).then(m(Bc,t))))}function hn(){$.subscribe(Fn,Sc)}var Jt,gn;function Xt(){let e=[null,[n.buffs,n.buffsName],[n.buffs2,n.buffs2Name],[n.buffs3,n.buffs3Name]][n.enabledHuntingMode];R(e)&&([Jt,gn]=e)}function vn(e){e.target.name==="enabledHuntingMode"&&(n.enabledHuntingMode=e.target.value,y("enabledHuntingMode",n.enabledHuntingMode),Xt(),GameData.fetch(U))}var ot;function al(){ot=!ot,y("hidePlayerActions",ot),GameData.fetch(T)}function bc(e){let t=we("verbs",e);t.length===1&&kt(t[0])}function il(){if(!ot)return;let e=i("actionList");Bt("player",e).forEach(bc)}function ll(){ot=g("hidePlayerActions"),$.subscribe(ye,il),il()}function yn(){n.showCreatureInfo=!n.showCreatureInfo,y("showCreatureInfo",n.showCreatureInfo)}function xn(){n.showBuffs=!n.showBuffs,y("showHuntingBuffs",n.showBuffs),GameData.fetch(U)}function Dn(){n.showMonsterLog=!n.showMonsterLog,y("showMonsterLog",n.showMonsterLog)}function wn(){n.hideSubLvlCreature=!n.hideSubLvlCreature,y("hideSubLvlCreature",n.hideSubLvlCreature),GameData.fetch(T)}function Lc(){return c({id:"fshWorldPrefs",innerHTML:`${se("showCreatureInfo")}&nbsp;&nbsp;${se("showMonsterLog")}&nbsp;&nbsp;${se("showTitanInfo")}&nbsp;&nbsp;${se("showBuffInfo")}<br>${se("hideSubLvlCreature")}&nbsp;&nbsp;${se("hidePlayerActions")}&nbsp;&nbsp;${_a()}`})}var Tc={hideSubLvlCreature:wn,hidePlayerActions:al,showCreatureInfo:yn,showHuntingBuffs:xn,showMonsterLog:Dn,showTitanInfo:Ui,showBuffInfo:ja};function Mc(e){let t=Tc[e.target.name];ct(t)&&(e.target.blur(),t(e))}function kn(){let e=c({className:"fshCenter fshFten"}),t=Lc();C(t,Mc),I(t,"change",vn),a(e,t);let r=c();a(e,r);let o=i("worldContainerBelow").children[0];return yt(e,o),r}function Hc(e,t){return e[t.name]=!0,e}function Vc(e,t,r){return e[r.trim()]||t.push(r),t}function Nc(e,t){E(`You are missing some ${gn} hunting buffs<br>(${t.join(", ")})`,e)}function sl(e){E("",e)}function Gc(e,t){let r=t.b.reduce(Hc,{}),o=Jt.reduce(m(Vc,r),[]);o.length>0?Nc(e,o):sl(e)}function Ic(e,t,r){n.showBuffs?Gc(e,r):sl(e)}function $c(e,t,r){Jt&&Ic(e,t,r)}function En(e){Xt();let t=m($c,e);$.subscribe(st,t),n.showBuffs&&window.initialGameData&&t(null,{b:window.initialGameData.player.buffs})}var Zt=[{generalVariable:1.1053,hpVariable:1.1},{generalVariable:1.1,hpVariable:1.053},{generalVariable:1.053,hpVariable:1},{generalVariable:1.1053,hpVariable:1}];function Rc(e){return Zt[e]?Zt[e].generalVariable:1.1053}function Pc(e){return Zt[e]?Zt[e].hpVariable:1.1}function Cn(){n.combatEvaluatorBias=g("combatEvaluatorBias"),n.generalVariable=Rc(n.combatEvaluatorBias),n.hpVariable=Pc(n.combatEvaluatorBias)}function Fc(e){return!e||!e.actions||e.actions.length===0}function _c(e,t){return t.type===6?t.data.creature_type!==0||t.data.level>=e:!0}function Oc(e){return e.realm&&e.realm.minlevel||GameData.realm().minlevel}function Kc(e){let t=Jn(e);return Fc(t)?e:(t.actions=t.actions.filter(m(_c,Oc(t))),JSON.stringify(t))}function qc(e){return e.data&&e.data.d&&Ia(e.data.d,T)}function Wc(e,t){n.hideSubLvlCreature&&qc(t)&&(e.dataFilter=Kc)}function Bn(){$.ajaxPrefilter("JSON",Wc),n.hideSubLvlCreature&&GameData.fetch(T)}function Uc(e){n[e[0]]=lr(e[1])}function jc(){[["buffs","huntingBuffs"],["buffs2","huntingBuffs2"],["buffs3","huntingBuffs3"]].forEach(Uc)}function zc(e){n[e]=lr(e)}function Qc(){["doNotKillList"].forEach(zc)}function Yc(){jc(),Qc()}function Jc(e){n[e[0]]=g(e[1])}function Xc(){[["buffsName","huntingBuffsName"],["buffs2Name","huntingBuffs2Name"],["buffs3Name","huntingBuffs3Name"],["showBuffs","showHuntingBuffs"]].forEach(Jc)}function Zc(e){n[e]=g(e)}function ed(){["enabledHuntingMode","hideSubLvlCreature","showTitanInfo","showBuffInfo","showMonsterLog","showCreatureInfo"].forEach(Zc)}function td(){Xc(),ed()}function rd(){Yc(),td()}function An(){Cn(),rd();let e=kn();Bn(),En(e),ll()}function fl(e){$(`#actionList li.creature-${e.toString()} a.create-group`).hide()}function od(e){$.subscribe(ye,m(fl,e))}var nd=["hideChampionsGroup","hideElitesGroup","hideSEGroup","hideTitanGroup","hideLegendaryGroup"];function ad(e,t){g(e)&&(od(t+1),fl(t+1))}function id(){nd.forEach(ad)}function ld(){a(document.body,ia(`#actionList .creature-1 {color: green;}
#actionList .creature-2 {color: yellow;}
#actionList .creature-3 {color: red;}`))}function sd(){g("enableCreatureColoring")&&ld()}function fd(e,t){t==="ACT_REPAIR"&&GameData.fetch(qn+U+ut+T)}function ud(){$.subscribe($n,fd)}function md(){$("#messageCenter").worldMessageCenter({offset:"0 60"})}function cd(){_e("#mapTooltip")}function dd(e){_e(e.target)}function pd(){C(i("buffList"),dd)}var hd=[An,zo,hn,id,sd,_r,Mo,ud,Pr,Uo,Jo,Eo,md,cd,Nr,Ua,pd,To,$r,Ur];function gd(){ca(hd),n.userIsDev&&jr()}export{gd as default};
//# sourceMappingURL=newMap-UYA6C7KU.js.map
