import{a as z}from"./chunk-MTW3GLVW.js";import{a as k,b as M}from"./chunk-XR2BZFNG.js";import{a as O}from"./chunk-GNKEIK35.js";import{a as G,b as J}from"./chunk-N6RHAVBO.js";import{a as h}from"./chunk-3GDZ2KGR.js";import{a as S}from"./chunk-3UGDDRHZ.js";import{a as $}from"./chunk-DT4L6H53.js";import"./chunk-JQSGGOG4.js";import{a as g}from"./chunk-X6X25TQC.js";import{a as f}from"./chunk-3U2KFVE3.js";import"./chunk-FLANWCWH.js";import{a as w}from"./chunk-HX4UNUKN.js";import{a as L}from"./chunk-A3YSMN3P.js";import{a as b}from"./chunk-WEH2BEPF.js";import"./chunk-S4LJSUOM.js";import"./chunk-V4X4HJXK.js";import{a as _}from"./chunk-KRD4PNLK.js";import"./chunk-FQH3XCI6.js";import"./chunk-OZO3C2DW.js";import"./chunk-GMLTBP5U.js";import{b as r}from"./chunk-MVLZ5DIF.js";import{a as i}from"./chunk-TBDAY7IJ.js";import{a as E}from"./chunk-RLMEWYFJ.js";import{a as Q}from"./chunk-V6KZDOYH.js";import{a as R}from"./chunk-NWDGTVVH.js";import"./chunk-R27ZUPLV.js";import{a as P}from"./chunk-X6HXFDDM.js";import{a as V}from"./chunk-MCKCLPTM.js";import{a as N}from"./chunk-HDDSTVDW.js";import"./chunk-3M4JV256.js";import"./chunk-3VGCM7V6.js";import"./chunk-5AMVPEUS.js";import{a}from"./chunk-BSRRLYDA.js";import"./chunk-EEOI3QHS.js";import"./chunk-E5RHLETX.js";import"./chunk-XKHKWWUO.js";import"./chunk-BKQ5B4GS.js";import"./chunk-DRO6BEBO.js";import{a as j}from"./chunk-YERAUQ3J.js";import"./chunk-OC2AAQPF.js";import{a as d}from"./chunk-KDMA4L6I.js";import{b as I}from"./chunk-5IFOIBKY.js";import{b as A,f as B,qa as u,ra as q}from"./chunk-LGYGKPKS.js";import{a as F}from"./chunk-W6WYHSG7.js";import{a as m}from"./chunk-5SYR2ZZN.js";import{a as C}from"./chunk-A4HY7BPZ.js";import{a as c}from"./chunk-XR4XHCV2.js";import{a as H}from"./chunk-QTNVBBKP.js";import"./chunk-VX5V3MQE.js";import"./chunk-U5QRCCLA.js";import"./chunk-C4N36YS5.js";import{a as s}from"./chunk-DG6P646J.js";import"./chunk-K4LSLGQK.js";import"./chunk-MC4TDBQ5.js";import"./chunk-OXVY43H4.js";import"./chunk-HN4Q5DUC.js";import{a as T}from"./chunk-QDZWRTTK.js";import"./chunk-WWWWNWRL.js";function y(e){return V({cache:!1,dataType:"json",data:{cmd:"composing",subcmd:"createajax",template_id:e,fshrnd:M()}})}function U(){return`url(${A}composing/${k(1,11)}_${k(1,51)}.png)`}function W(e,t){i("",e.children[0]),e.children[0].classList.add("fshPot"),e.children[0].style.backgroundImage=U(),i(`Creating '<span class="fshBold">${t}</span>' Potion`,e.children[2]),i("",e.children[3])}function X(){c('[id|="composing-template"]:not(#composing-template-multi)').length===0&&a(u,!1)}function Y(e){let t=e.parentNode;t&&(i('<div class="fshScs">Success</div>',t),W(t.previousElementSibling.previousElementSibling,e[e.selectedIndex].text),X())}function Z(e,t){let o=e.parentNode;!o||!t||(t.error?i(`<div class="fshScs">${t.error}</div>`,o):Y(e))}async function ee(e){let t=await y(e.value);Z(e,t)}function p(e,t){t.id=`proc-${t.id}`,i("",e),e.classList.add("fshSpinner","fshSpinner12","fshComposingSpinner"),ee(t),G("quickcreate")}function D(e,t){e.classList.add(`left-${t.toString()}`)}function te(e){let t=c(".quickCreate .sendLink");D(e,t.length)}function oe(e,t){m("composing","FastComposeButton");let o=c('[id|="composing-template"]:not(#composing-template-multi)');if(!(o.length<e.value))for(let n=0;n<e.value;n+=1)o[n].value=t,p(o[n].nextElementSibling.nextElementSibling,o[n])}function ne(e){let t=e.target,{templateId:o}=t.dataset;o&&oe(t,o)}function re(e,t){return h({className:"awesome orange",dataset:{templateId:t},type:"button",value:e})}function ie(e,t,o,n){return n===0&&w(e[1],t.insertCell(-1)),b(t.insertCell(-1),re((n+1).toString(),e[0])),t}function se(e,t,o){return e.reduce(s(ie,o),t.insertRow(-1)),t}function me(e,t,o){let n=O({id:"fshFastCompose"});return D(n,o),e.reduce(s(se,t),n)}function ae(e){return[e.value,e.text]}function ce(e,t,o){let n=C("#composing-template-multi option").map(ae),l=me(n,t,o);b(e,l),d(r(),ne),J("quickcreate",s(te,l))}function pe(e){m("composing","FastCompose"),f(e,"<br>");let t=g("composing-potion-time",document),o=t.filter(_("ETA: n/a")).length;o>0?ce(e,t,o):f(e,"No open slots!")}function v(){let e=P("#pCC div.centered");f(e,'<span class="fsh-fast-compose">[ <label for="fast-compose"><span class="sendLink">Fast Compose</span></label> ]</span>');let t=L({className:"centered"});S(t,e);let o=h({id:"fast-compose",type:"checkbox"});S(o,e),F(o,"change",s(pe,t))}function le(e){let t=R(B,N(e));if(t){let{h:o,m:n,s:l}=t;return(o*3600+n*60+Number(l))*1e3+H()}return 0}function K(e){a(u,e)}function x(){if(!T.enableComposingAlert)return;let e=g("composing-potion-time",document),t=Math.min(...e.map(le));t===0?K(!0):(K(!1),a(q,t))}function fe(){if(I("moveComposingButtons")){let e=E("composing-error-dialog").previousElementSibling;e.setAttribute("style","text-align: right; padding: 0 38px 0 0");let t=Q("composing-level",r())[0].parentNode;$(e,t)}}function ue(e){z(e,'<span class="quickCreate">[<span class="sendLink">Quick Create</span>]</span>')}function de(e){return e.tagName==="SPAN"&&e.className==="quickCreate"}function ge(e){let t=e.previousElementSibling.previousElementSibling;t&&t.value!=="none"&&(p(e,t),m("composing","QuickCreate"))}function Ce(e){let t=e.target.parentNode;de(t)&&ge(t)}function be(){x(),C("input[id^=create-]:not(#create-multi)",r()).forEach(ue),d(r(),Ce),fe(),v()}function he(){j()&&r()&&be()}export{he as default};
//# sourceMappingURL=composing-54CY7H4C.js.map
