import{a as ne,b as se}from"./chunk-CZR6WICN.js";import{a as Zt}from"./chunk-LTLAP6UJ.js";import"./chunk-VOF7TJXF.js";import{a as It}from"./chunk-FEZYFQFE.js";import{a as ie}from"./chunk-H2XB4KTN.js";import{a as B}from"./chunk-FTISKLUQ.js";import{a as Kt,b as O,c as te,d as Q,e as ee,f as oe,g as re}from"./chunk-ATZ5GENP.js";import"./chunk-4BYXJMDS.js";import{a as $t,b as Gt,c as Vt,d as jt}from"./chunk-IRBFI2MQ.js";import{a as Wt}from"./chunk-YWPLIQAS.js";import{a as Ot}from"./chunk-JHAOWT2E.js";import{a as Yt}from"./chunk-YRKRNDOT.js";import{a as zt}from"./chunk-MM7LHL77.js";import{a as E}from"./chunk-LJNI24RX.js";import{a as Qt,b as _t}from"./chunk-WHB77CI2.js";import{a as Nt}from"./chunk-HINVILVW.js";import{a as R,b as Ht}from"./chunk-QPZCTKMP.js";import"./chunk-5E7SVBLG.js";import"./chunk-4O5RKJ2H.js";import{a as wt}from"./chunk-DHAEY5QI.js";import{a as Pt}from"./chunk-JMYN526V.js";import{a as Dt}from"./chunk-K4SYXXXK.js";import{f as $}from"./chunk-LHXRZRWI.js";import"./chunk-BYBFSNNA.js";import{a as At}from"./chunk-HU2ZFPLQ.js";import{a as Ft}from"./chunk-RJHXDCMG.js";import{a as z}from"./chunk-TKXHJ4BI.js";import{a as me}from"./chunk-X63THUW4.js";import{a as ae}from"./chunk-DEZFJJ5P.js";import{a as qt}from"./chunk-TQKI2CVR.js";import"./chunk-GYS6JAFZ.js";import{a as Rt}from"./chunk-YEGYUZNB.js";import{a as bt}from"./chunk-6PXI5ZAX.js";import{a as U}from"./chunk-UVEZOEVF.js";import{a as Et}from"./chunk-SAH3AQWT.js";import{a as Jt}from"./chunk-TVK3LLAK.js";import"./chunk-OHOH67XG.js";import{a as ce}from"./chunk-XNGQGTQC.js";import"./chunk-S5PNJEX5.js";import"./chunk-NWEDQK2E.js";import{a as St}from"./chunk-DOGXLUG7.js";import"./chunk-BG5SGDVW.js";import{a as p}from"./chunk-SDLEVN3U.js";import"./chunk-KRMC6RHB.js";import{a as Bt}from"./chunk-UBK43KQH.js";import"./chunk-DEPIZODT.js";import{a as M}from"./chunk-X5WGZB5F.js";import"./chunk-ELYJB6VC.js";import{b as a}from"./chunk-PL52TDTI.js";import{a as Mt}from"./chunk-2HOUM6F4.js";import"./chunk-24RGKWWU.js";import"./chunk-GO7TNSV2.js";import{a as F}from"./chunk-FSLU2JHT.js";import"./chunk-OJ3R4IZK.js";import{a as T}from"./chunk-T5SOXK6H.js";import{a as P}from"./chunk-4HL2GWEF.js";import"./chunk-CSHA5RY7.js";import{a as xt}from"./chunk-AKFTWN4L.js";import"./chunk-JHBW2WEU.js";import{a as c}from"./chunk-6YCYI5QI.js";import"./chunk-N6OIOPGP.js";import{a as k}from"./chunk-4BGELNLW.js";import{a as i}from"./chunk-T4Z7JY2Z.js";import"./chunk-VOSZ275N.js";import"./chunk-NFWUZ6G7.js";import"./chunk-MU27BHL6.js";import"./chunk-KJFFVIXC.js";import{a as Xt}from"./chunk-AA2SS673.js";import{a as Ut}from"./chunk-FJRQCZWN.js";import"./chunk-UTDTWSR5.js";import"./chunk-6AI4EA3G.js";import{a as r}from"./chunk-PTVVXABI.js";import{a as m}from"./chunk-OEVQOGQE.js";import{a as Lt}from"./chunk-ZKGIRUUN.js";import"./chunk-IZT3DORW.js";import"./chunk-REJ57ZO4.js";import{a as _}from"./chunk-24BRC5WD.js";import"./chunk-AOLXKWOL.js";import"./chunk-2WRNIMPS.js";import{a as X}from"./chunk-DVEUT6SI.js";import{a as f}from"./chunk-ACUHISUK.js";import{a as v}from"./chunk-LKZ3ZEU4.js";import{a as u}from"./chunk-KTSA4HUA.js";import{a as L}from"./chunk-MF5QCESC.js";import"./chunk-3WWWYMDW.js";import"./chunk-ZKT3V6EP.js";import"./chunk-562FJNCP.js";import{a as I}from"./chunk-OSE7TXVS.js";import{a as Ct}from"./chunk-AEOIQGDY.js";import"./chunk-JFH2ANYQ.js";import"./chunk-4RUOSMIM.js";import{b as l}from"./chunk-3PFYPJ7R.js";import{a as h}from"./chunk-6U4GCDKS.js";import{a as vt}from"./chunk-C6Z346VW.js";import{D,H as kt,Ka as Tt,e as H,qa as C,sa as y,v as yt}from"./chunk-4X7HEDV6.js";import"./chunk-XZ2D5B2Y.js";import{a as s}from"./chunk-HGTLDLGM.js";var le=0,fe=1;function Ae(t,e){let o=H.exec(e.dataset.tipped);return wt({min:o[3],hour:o[2],day:o[1]})<44640&&(t[le]+=1,t[fe]+=Number(/Stamina:<\/td><td>(\d+)/.exec(e.dataset.tipped)[1])),t}function He(t){return t.reduce(Ae,[0,0])}function J(){let t=T("b",a).find(P("Members"));if(t){let e=R(),o=He(e);t.classList.add("tip-static"),Nt(`Active: ${o[le]}/${e.length}<br>Stamina: ${E(o[fe])}`,t)}}var De=t=>Pt(xt(Dt(t).cells[4]));function W(){console.log(E(R().map(De).reduce(It,0)))}function pe(t,e){let o,n=t.replace(/,/g,"").match(e);return n?o=parseInt(n[1],10):o=0,o}function Pe(t,e){let o="";return t>e&&(o="+"),o+E(t-e)}function Ie(t){let e=t.dataset.tipped,o=pe(e,/XP Lock: <b>(\d*)/),n=pe(e,/XP: <b>(\d*)/);c(t.parentNode.nextElementSibling,` (<b>${Pe(n,o)}</b>)`),h.userIsDev&&W()}function Y(){let t=p('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&Ie(t)}function Z(){let t=T(y,a).slice(-2,-1)[0].rows[0].cells[0],e=m({id:"profile-bio",innerHTML:t.innerHTML});f("",t),r(t,e),Mt()}var K,tt;function Me(t){return K&&t>=$t()&&t<=Gt()}function Re(t){return tt&&t>=Vt()&&t<=jt()}var $e=t=>[t,H.exec(t.dataset.tipped)[1]],Ge=([,t])=>t<7,Ve=([t])=>[t,Number(/VL:.+?(\d+)/.exec(t.dataset.tipped)[1])],je=([t,e])=>[t.parentNode.parentNode.rowIndex,Me(e),Re(e)];function qe(){return I('#pCC a[data-tipped*="<td>VL:</td>"]').map($e).filter(Ge).map(Ve).map(je)}function Ue(){return Number(St("guild_id"))!==Rt()&&(K||tt)}var ue=t=>t.map(([e])=>`.fshHighlight tr:nth-child(${e+1})`).join(",");function Xe(t){if(t.length){let e=`${ue(t)} {background-color: #4671C8;}`;r(document.body,B(e))}}function Fe(t){if(t.length){let e=`${ue(t)} {background-color: #FF9900;}`;r(document.body,B(e))}}function Oe(t,e){if(t.length+e.length){let o=k(y,a);o[o.length-1].classList.add("fshHighlight")}}function Qe(){let t=qe(),e=t.filter(([,n])=>n),o=t.filter(([,n,x])=>!n&&x);Xe(e),Fe(o),Oe(e,o)}function _e(){Ue()&&Qe()}function et(){K=l("highlightPlayersNearMyLvl"),tt=l("highlightGvGPlayersNearMyLvl"),_e(),l("enableHistoryCompressor")&&Z()}function ze(t){c(t.parentNode,' <span class="smallLink">[b]</span>')}function Je(t){t.target.className==="smallLink"&&qt(t.target.previousElementSibling.text)}function ot(){let t=Ct(`#pCC a[href^="${yt}"]`);At([5,3,t,0,ze]),v(a,Je)}function G(t){return Ut({cmd:"guild",subcmd:"conflicts",page:t})}function de(t,e){f(e,t.insertCell(-1))}function ge(t,e,o){let n=t.insertRow(t.rows.length-2);de(n,e),de(n,o)}function We(t){ge(t,`<a href="${D}conflicts">Active Conflicts</a>`,"Score")}function Ye(t,e){ge(t,e.cells[0].innerHTML,`<b>${e.cells[6].innerHTML}</b>`)}function Ze(t,e,o){e===1&&We(o),Ft(t.rows,7,0).forEach(s(Ye,o))}function Ke(t,e,o){let n=p("#pCC > table > tbody > tr > td > table",t);n&&n.rows.length>3&&Ze(n,e,o)}function to(t){return Number(t.parentNode.innerHTML.match(/of&nbsp;(\d*)/)[1])}function eo(t,e,o){G(t+1).then(s(e,o))}function he(t,e){let o=Xt(e),n=p('#pCC input[name="page"]',o);if(!n)return;let x=Number(n.value),Ne=to(n);Ke(o,x,t.node),Ne>x&&eo(x,he,t)}function rt(t){let e=t.rows[6].cells[0].children[0];e&&G(1).then(s(he,{node:e}))}function oo(t){t.target.id===C&&M(C,!l(C))}function nt(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,o=m({className:"fsh-tracker"}),n=m({innerHTML:`${$(C)}&nbsp;<label class="custombutton" for="tracker">Show</label>`});u(n,"change",oo),r(o,t),r(o,n),zt(e,o)}function mt(t){return Lt("th",t)}var it,V,w,ct,j;function ro(t,e){return`${t}<option value="${e}">${e}</option>`}function no(t){return`<select name="member"><option value="- All -" selected>- All -</option>${X(t).sort(Jt).reduce(ro,"")}</select>`}function N(t){return vt(t)?"#DEF":t.toLocaleString()}function mo(t){return V&&V!=="- All -"&&V!==t}function io(t,e,o){return`${e}<tr><td>${Zt(new Date(o[ee]*1e3))}</td><td>${t}</td><td class="fshRight">${N(o[te])}</td><td class="fshRight">${N(o[oe])}</td><td class="fshRight">${N(o[O])}</td><td class="fshRight">${N(o[Q])}</td><td class="fshRight">${Math.floor(o[O]/o[Q]*100)}</td><td class="fshRight">${o[Kt]}</td><td class="fshRight">${N(o[re])}</td></tr>`}function co(t,e){return mo(e)?t:t+j[e].reduce(s(io,e),"")}function ao(){return X(j).reduce(co,"")}function so(){j&&f(ao(),it),w.classList.remove("fshSpinner")}function be(){w.classList.add("fshSpinner"),i(3,so)}function lo(t){V=t.target.value,be()}function q(t){t&&(j=t,f(no(t),ct),be())}function fo(){let t=mt({textContent:"Member"});return ct=m(),r(t,ct),t}function po(t){let e=t.createTHead().insertRow(-1);c(e,"<th>Date</th>");let o=fo();r(e,o),c(e,"<th>Level</th><th>VL</th><th>Stam</th><th>Max<br>Stam</th><th>Stam<br>%</th><th>Last<br>Activity<br>(Days)</th><th>GXP</th>")}function uo(t){it=Wt(),r(t,it)}function ye(){let t=Yt({id:"tg"});return po(t),uo(t),u(t,"change",lo),w=m({className:"tgCont fshSpinner64"}),r(w,t),w}var d,ke,Te,g;function go(t){d.value=t,g.classList.remove("fshSpinner")}function ve(t){t&&(g.classList.add("fshSpinner"),i(4,go,[t]))}function ho(){d.value='{"lastUpdate": 0, "members": {}}'}function bo(t){_("Update successful"),q(t.members)}function yo(){let t=Et(d.value);_t("fsh_guildActivity",t).then(s(bo,t)).catch(_)}function Ee(t,e){let o=me({className:"custombutton",textContent:t});return v(o,e),o}function ko(){d=ie(),d.setAttribute("autocapitalize","off"),d.setAttribute("autocomplete","off"),d.setAttribute("autocorrect","off"),d.setAttribute("spellcheck","false")}function Se(){return g=m({id:"io",className:"fshSpinner64"}),ko(),ke=Ee("Save",yo),Te=Ee("Reset",ho),r(g,d),r(g,ne()),r(g,ke),r(g,Te),g}var at,b,A,st;function xe(){return!b.checked}function To(){return b.checked}function vo(){b.checked=!1}function Eo(t){To()&&t.code==="Escape"&&vo()}function So(t){xe()&&(t.style.transform=null)}function xo(){return Ot({className:"fshMove ui-tabs-nav ui-widget-header ui-corner-all ui-helper-reset ui-helper-clearfix",innerHTML:'<li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab1">Guild Activity Tracker</label></li><li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab2">Import/Export</label></li><label for="tracker" class="fsh-dialog-close ui-dialog-titlebar-close">&times;</label>'})}function Co(){L("guildTracker","updateRawData"),at&&ve(at)}function Lo(){let t=m({className:"fsh-dialog-popup ui-dialog ui-tabs ui-widget ui-widget-content ui-corner-all",innerHTML:'<input id="acttab1" class="fsh-tab-open" name="acttabs" checked type="radio">'});return st=F({className:"fsh-tab-open",id:"acttab2",name:"acttabs",type:"radio"}),U(st,"change",Co),r(t,st),t}function Bo(){let t=Lo(),e=xo();return r(t,e),bt(e,t),t}function wo(){let t=m({className:"fsh-dialog-content"});return r(t,ye()),r(t,Se()),t}function No(){let t=Bo(),e=wo();r(t,e),u(b,"change",s(So,t)),r(A,t)}function Ao(){c(A,'<div class="fsh-dialog-overlay"><label class="fsh-dialog-cancel" for="tracker"></label></div>')}function Ho(t){t&&(at=JSON.stringify(t),q(t.members))}function Do(){L("guildTracker","openDialog"),Qt("fsh_guildActivity").then(Ho),h.dialogIsClosed=xe,Ao(),No()}function Po(){b=F({id:"tracker",className:"fsh-dialog-open",type:"checkbox"}),U(b,"change",Do),A=m({className:"fsh-dialog"}),r(A,b),u(document.body,"keydown",Eo),r(document.body,A)}function lt(){nt(),Po()}var ft="enableStamBars",S,pt;function Io(t){let e=t.dataset.tipped.match(/(\d+) \/ (\d+)/);return Math.min(Math.round(Number(e[1])/Number(e[2])*100),100)}function Mo(t){let e=Io(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${e}%, transparent ${e+1}%)}`}function Ro(){let t=k(y,a),e=t[t.length-1];e.classList.add("fshProgressBar");let n=I(Tt,e).map(Mo).join(`
`);pt=r(document.body,B(n)).sheet}function Ce(){pt?pt.disabled=!S:Ro()}function $o(){S=!S,M(ft,S),Ce(),L("guildManage","StamBars")}function Go(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,o=r(e,m({className:"fshCenter",innerHTML:$(ft)}));u(o,"change",$o)}function ut(){Go(),S=l(ft),S&&Ce()}function Vo(t){return z({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function jo(t){let e=z({className:"fshNoWrap",innerHTML:"[&nbsp;"});return r(e,t),c(e,"&nbsp;]"),e}function dt(t,e,o){let n=Vo(o);r(t,jo(n)),e.id=o,l(o)&&ae(e),v(n,se)}function Le(t){dt(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function Be(t){let e=t.rows[4].cells[1].children[0];f(e.innerHTML.trim(),e),dt(e,t.rows[6].cells[0].children[0],"statisticsControl")}function we(t){dt(t.rows[15].cells[1].children[0],t.rows[17].cells[0].children[0],"guildStructureControl")}function qo(t){let e=T("b",t).filter(P("Relics"));if(e.length!==1)return;let o=e[0].parentNode.nextElementSibling.children[0];f(`[ <a href="${D}reliclist">Control</a> ]&nbsp;`,o)}function Uo(t){let e=k("li",t);if(!e||!e.length)return;let o=e[e.length-1].parentNode;c(o,`<li><a href="${kt}${Bt()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function Xo(){return a.lastElementChild.rows[2].cells[0].children[0]}function Fo(t,e){i(3,e,[t])}function Oo(t){[Le,Be,we,qo,Uo].forEach(s(Fo,t))}function Qo(t){ce()||(l("detailedConflictInfo")&&i(3,rt,[t]),i(4,lt))}function gt(){if(!a)return;let t=Xo();Oo(t),i(3,ot),Qo(t),ut()}function _o(t){let e=t.nextElementSibling.nextElementSibling;e&&e.classList.add("fshBreakAll")}function ht(){let t=p('#pCC img[src*="/guilds/"][width="200"]');!t||(t.removeAttribute("style"),_o(t))}function zo(){i(3,Ht),i(3,ht),i(3,Y),i(3,J),h.subcmd==="manage"&&gt(),h.subcmd==="view"&&et()}export{zo as default};
//# sourceMappingURL=injectGuild-G2IYZJ6X.js.map
