import{a as Ee}from"./chunk-CUU3TTPG.js";import{b as J}from"./chunk-DKVOK45R.js";import{a as je}from"./chunk-SNIFLWSF.js";import{A as E,B as U,C as r,I as ye,J as we,K as Ae,L as T,M as N,N as Z,Q as qe,R as Ce,S as xe,T as Re,U as Se,b as Ie,d as be,o as i,p as L,q as Q,s as a,t as b,u as k,w as O,x as ke,y as f,z as H}from"./chunk-3UYX2GUA.js";import{a as De}from"./chunk-RK5VVQXR.js";import{a as ve}from"./chunk-S5PNJEX5.js";import{a as S}from"./chunk-SDLEVN3U.js";import{b as le}from"./chunk-PL52TDTI.js";import{a as pe}from"./chunk-GO7TNSV2.js";import{a as _e}from"./chunk-KDAF7E27.js";import"./chunk-VNRGEE3X.js";import{a as he}from"./chunk-ZGR2D6YK.js";import"./chunk-NFWUZ6G7.js";import"./chunk-KJFFVIXC.js";import"./chunk-AA2SS673.js";import{a as de}from"./chunk-FJRQCZWN.js";import"./chunk-UTDTWSR5.js";import{a as fe}from"./chunk-PTVVXABI.js";import"./chunk-ZKGIRUUN.js";import"./chunk-IZT3DORW.js";import"./chunk-REJ57ZO4.js";import{a as ge}from"./chunk-VI6Y3FZI.js";import"./chunk-LAXTQMR6.js";import"./chunk-AOLXKWOL.js";import"./chunk-2WRNIMPS.js";import"./chunk-DVEUT6SI.js";import"./chunk-KTSA4HUA.js";import{a as z}from"./chunk-MF5QCESC.js";import"./chunk-3WWWYMDW.js";import"./chunk-ZKT3V6EP.js";import"./chunk-562FJNCP.js";import{a as B}from"./chunk-OSE7TXVS.js";import"./chunk-AEOIQGDY.js";import"./chunk-JFH2ANYQ.js";import{a as ae}from"./chunk-4RUOSMIM.js";import"./chunk-3PFYPJ7R.js";import"./chunk-6U4GCDKS.js";import"./chunk-C6Z346VW.js";import{V as ue,n as ce}from"./chunk-4X7HEDV6.js";import{b as me}from"./chunk-XZ2D5B2Y.js";import"./chunk-HGTLDLGM.js";function K(t){return ge({cmd:"inventing",subcmd:"doinvent",recipe_id:t})}function Qe(t){let e=_e(t);return e.includes("successfully")?{r:{item:{}},s:!0}:{e:{message:e},s:!1}}function W(t){return de({cmd:"inventing",subcmd:"doinvent",recipe_id:t}).then(Qe)}function X(t){return he(K,W,t)}function Ne(t){let e;return{c(){e=b("(max)")},m(n,l){L(n,e,l)},d(n){n&&Q(e)}}}function Fe(t){let e,n,l,s,p,o,d;return{c(){e=a("div"),n=a("div"),n.textContent="INFORMATION",l=k(),s=a("div"),p=b(t[4]),r(n,"background","#8E8668"),r(n,"color","#FFF"),r(n,"font-size","smaller"),r(e,"border","2px solid #FFF"),r(e,"margin","10px auto"),r(e,"width","80%"),r(e,"background","#D3CFC1")},m(m,_){L(m,e,_),i(e,n),i(e,l),i(e,s),i(s,p),d=!0},p(m,_){(!d||_&16)&&E(p,m[4])},i(m){d||(m&&ye(()=>{o||(o=Z(e,J,{},!0)),o.run(1)}),d=!0)},o(m){m&&(o||(o=Z(e,J,{},!1)),o.run(0)),d=!1},d(m){m&&Q(e),m&&o&&o.end()}}}function Pe(t){let e,n,l,s,p,o,d,m,_,I,F,v,h,w,A,j=t[1]+t[2]+"",q,C,P,te,D,x,ne,G,ie,R,re,M,y,V,oe;o=new je({props:{$$slots:{default:[Ne]},$$scope:{ctx:t}}}),o.$on("click",t[5]);let u=t[4]&&Fe(t);return{c(){e=a("form"),n=a("label"),n.textContent="Select how many to quick invent",l=k(),s=a("input"),p=k(),qe(o.$$.fragment),d=k(),m=a("input"),_=k(),I=a("div"),u&&u.c(),F=k(),v=a("div"),h=a("div"),w=k(),A=a("p"),q=b(j),C=b(" / "),P=b(t[0]),te=k(),D=a("div"),x=a("div"),ne=b("Successes: "),G=b(t[1]),ie=k(),R=a("div"),re=b("Failures: "),M=b(t[2]),f(n,"for","quick-invent-amount"),f(s,"type","number"),f(s,"id","quick-invent-amount"),f(s,"name","quick-invent-amount"),f(s,"min","0"),f(s,"step","1"),f(s,"class","custominput fshNumberInput"),s.required=!0,f(m,"class","custombutton"),f(m,"type","submit"),m.value="Quick Invent",r(m,"margin-left","8px"),f(h,"class","composing-progress-bar"),r(h,"background-position","right top"),r(h,"width",t[3]+"%"),r(h,"transition","width 0.4s ease-out"),r(h,"position","absolute"),r(h,"top","0px"),r(A,"position","relative"),f(v,"class","composing-progress"),r(v,"margin","0px auto"),r(v,"font-weight","bold"),r(v,"color","#fff"),r(v,"left","0px"),r(x,"display","inline-block"),r(x,"width","250px"),f(x,"class","fshQs fshGreen"),r(R,"display","inline-block"),r(R,"width","250px"),f(R,"class","fshQs fshRed"),r(D,"margin-top","36px"),f(e,"class","fshCenter"),r(e,"margin-top","12px")},m(c,g){L(c,e,g),i(e,n),i(e,l),i(e,s),U(s,t[0]),i(e,p),Ce(o,e,null),i(e,d),i(e,m),i(e,_),i(e,I),u&&u.m(I,null),i(I,F),i(I,v),i(v,h),i(v,w),i(v,A),i(A,q),i(A,C),i(A,P),i(I,te),i(I,D),i(D,x),i(x,ne),i(x,G),i(D,ie),i(D,R),i(R,re),i(R,M),y=!0,V||(oe=[O(s,"input",t[9]),O(e,"submit",ke(t[6]))],V=!0)},p(c,[g]){g&1&&H(s.value)!==c[0]&&U(s,c[0]);let se={};g&2048&&(se.$$scope={dirty:g,ctx:c}),o.$set(se),c[4]?u?(u.p(c,g),g&16&&T(u,1)):(u=Fe(c),u.c(),T(u,1),u.m(I,F)):u&&(we(),N(u,1,1,()=>{u=null}),Ae()),(!y||g&8)&&r(h,"width",c[3]+"%"),(!y||g&6)&&j!==(j=c[1]+c[2]+"")&&E(q,j),(!y||g&1)&&E(P,c[0]),(!y||g&2)&&E(G,c[1]),(!y||g&4)&&E(M,c[2])},i(c){y||(T(o.$$.fragment,c),T(u),y=!0)},o(c){N(o.$$.fragment,c),N(u),y=!1},d(c){c&&Q(e),xe(o),u&&u.d(),V=!1,Ie(oe)}}}function Ge(t,e,n){let{max:l}=e,{recipeID:s}=e,p=1,o=0,d=0,m=0,_="";function I(){n(1,o=0),n(2,d=0),n(3,m=0),n(4,_="")}function F(){n(0,p=l),z("inventing","maxInventButton")}async function v(){if(z("inventing","quickInvent"),!p)return;I(),Array(p).fill(s).reduce(async(A,j)=>{let q=await A;if(!q||q.s===!0){let C=await X(j);return C.s===!1?n(4,_=C.e.message):C.r.success_count>0?n(1,o+=1):n(2,d+=1),n(3,m=100*((o+d)/p)),C}return q},Promise.resolve())}function h(){p=H(this.value),n(0,p)}return t.$$set=w=>{"max"in w&&n(7,l=w.max),"recipeID"in w&&n(8,s=w.recipeID)},[p,o,d,m,_,F,v,l,s,h]}var Te=class extends Se{constructor(e){super();Re(this,e,Ge,Pe,be,{max:7,recipeID:8})}},Be=Te;function Me(t){let[e,n]=ae(S("tr:nth-child(2) td",t)).split("/").map(l=>parseInt(l,10));return{have:e,need:n,id:S("img",t).src.match(/(\d+)\.[A-Za-z]+$/)[1]}}function Ve(){return B(`#pCC td[background^="${me}ui/inventory/"]`).map(e=>e.parentElement.parentElement).map(Me)}function Y(){return Ve().reduce((e,n)=>Math.min(e,Math.floor(n.have/n.need)),1/0)}function ze(t,e){return new Be({props:t,target:e})}function Oe(t){let n=t.insertRow(-1).insertCell(-1);n.className="header",n.setAttribute("height","1")}function He(t){let n=t.insertRow(-1).insertCell(-1);return n.className="fshCenter",n}function $(){let t=S('input[name="recipe_id"]');if(!t)return;let e=Y(),n=le.lastElementChild;Oe(n),ze({max:e,recipeID:t.value},He(n))}function Ue(t){if(!t)return;let e=t.src.match(/\/items\/(\d+)\.gif/);if(e)return e[1]}function Ze(t){return`${ue}items${ce}view&item_id=${t}`}function Je(t){return De({href:Ze(t),target:"_blank"})}function Le(t,e){let n=Ue(e);if(!n)return;let l=Je(n);pe(l,t),fe(l,t)}function Ke(t){Le(t,t)}function We(){let t=Ee('.//b[.="Target Invention"]/../../following-sibling::*[1]//img'),e=S("#pCC b");Le(e,t)}function Xe(){B('#pCC img[src*="/items/"]').forEach(Ke)}function ee(){We(),Xe()}function Ye(){ve()&&(ee(),$())}export{Ye as default};
//# sourceMappingURL=inventing-ZQM5MNW2.js.map
