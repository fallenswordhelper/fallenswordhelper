import{a as it}from"./chunk-BBJTJ3PY.js";import{a as at}from"./chunk-NUUF63FH.js";import{a as st,b as ct}from"./chunk-ZSCTTD46.js";import"./chunk-T65I7RRZ.js";import"./chunk-YJWCXBI7.js";import{a as nt}from"./chunk-ZHRTCLDT.js";import"./chunk-ODYD27E4.js";import"./chunk-VK76G7OF.js";import{a as ot}from"./chunk-ZK7DROC7.js";import"./chunk-LHUEXIVY.js";import{a as et}from"./chunk-YWPLIQAS.js";import{a as rt}from"./chunk-YRKRNDOT.js";import{a as B}from"./chunk-LJNI24RX.js";import"./chunk-JMYN526V.js";import"./chunk-RJHXDCMG.js";import{a as y}from"./chunk-X63THUW4.js";import"./chunk-YEGYUZNB.js";import{b as Z}from"./chunk-OHOH67XG.js";import{a as k}from"./chunk-DEPIZODT.js";import{b as D}from"./chunk-PL52TDTI.js";import{a as tt}from"./chunk-FSLU2JHT.js";import"./chunk-T5SOXK6H.js";import"./chunk-AKFTWN4L.js";import"./chunk-JHBW2WEU.js";import"./chunk-4BGELNLW.js";import"./chunk-UUCRRVRT.js";import"./chunk-ZGR2D6YK.js";import"./chunk-AA2SS673.js";import"./chunk-FJRQCZWN.js";import"./chunk-UTDTWSR5.js";import{a as u}from"./chunk-PTVVXABI.js";import{a as h}from"./chunk-OEVQOGQE.js";import"./chunk-ZKGIRUUN.js";import"./chunk-IZT3DORW.js";import"./chunk-REJ57ZO4.js";import"./chunk-VI6Y3FZI.js";import"./chunk-LAXTQMR6.js";import"./chunk-AOLXKWOL.js";import"./chunk-2WRNIMPS.js";import"./chunk-DVEUT6SI.js";import{a as S}from"./chunk-ACUHISUK.js";import{a as C}from"./chunk-LKZ3ZEU4.js";import{a as K}from"./chunk-KTSA4HUA.js";import"./chunk-3WWWYMDW.js";import"./chunk-ZKT3V6EP.js";import"./chunk-562FJNCP.js";import"./chunk-JFH2ANYQ.js";import"./chunk-4RUOSMIM.js";import"./chunk-3PFYPJ7R.js";import"./chunk-6U4GCDKS.js";import"./chunk-C6Z346VW.js";import{v as V}from"./chunk-4X7HEDV6.js";import"./chunk-XZ2D5B2Y.js";import{a as b}from"./chunk-HGTLDLGM.js";function It(t){return`<td>${t.slot}</td><td><a href="${V}${t.id}">${t.name}</a></td><td>${t.level}</td><td>${t.rank_name}</td><td>${t.gxp}</td><td>${t.activity}</td><td>${t.pack}</td><td>${t.stam}</td>`}function kt(t){return t.dom||(t.dom=it({innerHTML:It(t)})),t.dom}function $(t,e,r){let n=t.tBodies[0],o=et();for(let s of r)o.appendChild(kt(s.value));t.replaceChild(o,n)}function Bt(t,e){return e.equipped||(t[e.player_id]=t[e.player_id]||[],t[e.player_id].push(e)),t}function $t(t,e){return{...e,rank_name:t}}function Ft(t){return t.members.map(b($t,t.name))}function Ut(t){return t.r.ranks.flatMap(Ft)}function zt(t,e,r){return{...e,slot:r+1,name_lower:k(e.name),lvl_reverse:0-e.level,rank_lower:k(e.rank_name.trim()),gxp:B(e.guild_xp),gxp_reverse:0-e.guild_xp,activity:ct(e.last_activity),act:e.last_activity-Z,pack:(t[e.id]||[]).length,pack_reverse:0-(t[e.id]||[]).length,stam:B(e.max_stamina),stam_reverse:0-e.max_stamina}}function F([t,e]){let r=t.items.reduce(Bt,{});return Ut(e).map(b(zt,r))}var lt=t=>(e,r)=>t(r,e),p=(t,...e)=>(...r)=>e.reduce((n,o)=>o(n),t(...r)),N=(t,e)=>{let r=e||t.length;return(...n)=>{let o=n.length||1;return r===o?t(...n):N((...c)=>t(...n,...c),r-n.length)}};var U=t=>e=>(t(e),e);var E=t=>{let e=t.split("."),r=(o={},s=[])=>{let c=s.shift(),a=o[c];return a==null||s.length===0?a:r(a,s)};return{get(o){return r(o,[...e])},set:(o,s)=>{let c=o,[a,...i]=e.reverse();for(let l of i.reverse())c[l]===void 0&&(c[l]={},c=c[l]);return c[a]=s,o}}};var Yt=(t,e)=>t===e?0:t===void 0?1:e===void 0||t<e?-1:1,z;(function(t){t.ASC="asc",t.DESC="desc",t.NONE="none"})(z||(z={}));var qt=(t,e)=>{let r=E(t).get;return(n,o)=>e(r(n),r(o))},Y=t=>{let{pointer:e,direction:r="asc",comparator:n=Yt}=t;if(!e||r==="none")return c=>[...c];let o=qt(e,n),s=r==="desc"?lt(o):o;return c=>[...c].sort(s)};var x;(function(t){t.BOOLEAN="boolean",t.NUMBER="number",t.DATE="date",t.STRING="string"})(x||(x={}));var Xt=t=>{switch(t){case x.BOOLEAN:return Boolean;case x.NUMBER:return Number;case x.DATE:return e=>new Date(e);case x.STRING:return p(String,e=>e.toLowerCase());default:return e=>e}},q;(function(t){t.INCLUDES="includes",t.IS="is",t.IS_NOT="isNot",t.LOWER_THAN="lt",t.GREATER_THAN="gt",t.GREATER_THAN_OR_EQUAL="gte",t.LOWER_THAN_OR_EQUAL="lte",t.EQUALS="equals",t.NOT_EQUALS="notEquals",t.ANY_OF="anyOf"})(q||(q={}));var T=t=>e=>!t(e),mt=t=>e=>Object.is(t,e),ut=t=>e=>e<t,pt=t=>e=>e>t,ft=t=>e=>t===e,Wt=t=>e=>e.includes(t),Qt=t=>e=>t.includes(e),jt={includes:Wt,is:mt,isNot:p(mt,T),lt:ut,gte:p(ut,T),gt:pt,lte:p(pt,T),equals:ft,notEquals:p(ft,T),anyOf:Qt},dt=t=>(...e)=>t.every(r=>r(...e)),Jt=({value:t="",operator:e="includes",type:r})=>{let n=Xt(r),s=p(n,jt[e])(t);return p(n,s)},Kt=t=>{let e={};return Object.keys(t).filter(n=>Array.isArray(t[n])).forEach(n=>{let o=t[n].filter(s=>s.value!=="");o.length>0&&(e[n]=o)}),e},X=t=>{let e=Kt(t),r=Object.keys(e).map(o=>{let s=E(o).get,c=e[o].map(Jt);return p(s,dt(c))}),n=dt(r);return o=>o.filter(n)};function Vt(t,...e){let r=gt(t.raw[0]);for(let[o,s]of e.entries()){if(s instanceof RegExp)r+=s.source;else if(typeof s=="string")r+=Zt(s);else throw new Error("Illegal substitution: "+s);r+=gt(t.raw[o+1])}let n="";if(r.startsWith("/")){let o=r.lastIndexOf("/");if(o===0)throw new Error("If the `re` string starts with a slash, it must end with a second slash and zero or more flags: "+r);n=r.slice(o+1),r=r.slice(1,o)}return new RegExp(r,n)}function gt(t){return t.replace(/\\`/g,"`")}function Zt(t){return t.replace(/[\\^$.*+?()[\]{}|=!<>:-]/g,"\\$&")}var W=t=>{let{value:e,scope:r=[],escape:n=!1,flags:o=""}=t,s=r.map(a=>E(a).get);if(r.length===0||!e)return a=>a;let c=n===!0?Vt`/${e}/${o}`:new RegExp(e,o);return a=>a.filter(i=>s.some(l=>c.test(String(l(i)))))};var ht=()=>{let t={},e={on(r,...n){return t[r]=(t[r]||[]).concat(n),e},dispatch(r,...n){let o=t[r]||[];for(let s of o)s(...n);return e},off(r,...n){if(r===void 0)Object.keys(t).forEach(o=>e.off(o));else{let o=t[r]||[];t[r]=n.length?o.filter(s=>!n.includes(s)):[]}return e}};return e},A=t=>({emitter:e})=>{let r={},n={off(o){return o||Object.keys(r).forEach(s=>n.off(s)),r[o]&&e.off(o,...r[o]),n}};for(let o of Object.keys(t)){let s=t[o];r[o]=[],n[s]=function(...c){return r[o]=r[o].concat(c),e.on(o,...c),n}}return n};var Et=({page:t=1,size:e}={page:1})=>(r=[])=>{let n=e||r.length,o=(t-1)*n;return r.slice(o,o+n)},vt;(function(t){t.TOGGLE_SORT="TOGGLE_SORT",t.DISPLAY_CHANGED="DISPLAY_CHANGED",t.PAGE_CHANGED="CHANGE_PAGE",t.EXEC_CHANGED="EXEC_CHANGED",t.FILTER_CHANGED="FILTER_CHANGED",t.SUMMARY_CHANGED="SUMMARY_CHANGED",t.SEARCH_CHANGED="SEARCH_CHANGED",t.EXEC_ERROR="EXEC_ERROR"})(vt||(vt={}));var G=t=>{let{get:e,set:r}=E(t);return{get:e,set:N(r)}},te=({sortFactory:t,tableState:e,data:r,filterFactory:n,searchFactory:o})=>{let s=r.length,c=r,a=ht(),i=G("sort"),l=G("slice"),f=G("filter"),d=G("search");a.on("SUMMARY_CHANGED",({filteredCount:m})=>{s=m});let R=m=>Object.assign({},m),Q=N(a.dispatch,2),Ht=m=>(c=m,Q("SUMMARY_CHANGED",{page:e.slice.page,size:e.slice.size,filteredCount:m.length})),Ot=({processingDelay:m=20}={processingDelay:20})=>{a.dispatch("EXEC_CHANGED",{working:!0}),setTimeout(()=>{try{let g=n(f.get(e)),v=o(d.get(e)),_=t(i.get(e)),I=Et(l.get(e)),L=p(g,v,U(Ht),_,I)(r);a.dispatch("DISPLAY_CHANGED",L.map(J=>({index:r.indexOf(J),value:J})))}catch(g){a.dispatch("EXEC_ERROR",g)}finally{a.dispatch("EXEC_CHANGED",{working:!1})}},m)},w=N((m,g,v)=>p(R,U(Q(g)),m.set(e))(v)),Rt=()=>w(l,"CHANGE_PAGE",Object.assign({},l.get(e),{page:1})),M=(m,g)=>{let v=p(w(m,g),Rt,()=>a.exec());return(_={})=>v(_)},wt={sort:M(i,"TOGGLE_SORT"),filter:M(f,"FILTER_CHANGED"),search:M(d,"SEARCH_CHANGED"),slice:p(w(l,"CHANGE_PAGE"),()=>a.exec()),exec:Ot,async eval(m=e){let g=t(i.get(m)),v=o(d.get(m)),_=n(f.get(m)),I=Et(l.get(m));return p(_,v,g,I)(r).map(L=>({index:r.indexOf(L),value:L}))},onDisplayChange(m){a.on("DISPLAY_CHANGED",m)},getTableState(){return JSON.parse(JSON.stringify(e))},getMatchingItems(){return[...c]}},j=Object.assign(a,wt);return Object.defineProperties(j,{filteredCount:{get(){return s}},length:{get(){return r.length}}}),j},ee=A({FILTER_CHANGED:"onFilterChange"}),yt;(function(t){t.BOOLEAN="boolean",t.NUMBER="number",t.DATE="date",t.STRING="string"})(yt||(yt={}));var At=({table:t,pointer:e,operator:r="includes",type:n="string"})=>{let o=ee({emitter:t});return Object.assign({filter(s){let c=this.state();return s===void 0?delete c[e]:Object.assign(c,{[e]:[{value:s,operator:r,type:n}]}),t.filter(c)},state(){return t.getTableState().filter||{}}},o)},re=A({SEARCH_CHANGED:"onSearchChange"}),P=({table:t,scope:e=[]})=>{let r=re({emitter:t});return Object.assign(r,{search(n,o={}){return t.search(Object.assign({},{value:n,scope:e},o))},state(){return t.getTableState().search}},r)},ne=A({CHANGE_PAGE:"onPageChange",SUMMARY_CHANGED:"onSummaryChange"}),H=({table:t})=>{let{slice:{page:e,size:r}}=t.getTableState(),n=t.filteredCount,o=r?Math.ceil(n/r):1,s=ne({emitter:t}),c={selectPage(i){return t.slice({page:i,size:r})},selectNextPage(){return c.selectPage(e+1)},selectPreviousPage(){return c.selectPage(e-1)},changePageSize(i){return t.slice({page:1,size:i})},isPreviousPageEnabled(){return e>1},isNextPageEnabled(){return o>e},state(){return Object.assign(t.getTableState().slice,{filteredCount:n,pageCount:o})}},a=Object.assign(c,s);return a.onSummaryChange(({page:i,size:l,filteredCount:f})=>{e=i,r=l,n=f,o=r?Math.ceil(n/r):1}),a},oe=(t,e)=>{let r=null;return(...n)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>t(...n),e)}},se=A({TOGGLE_SORT:"onSortToggle"}),Ct=["asc","desc"],xt=({pointer:t,table:e,cycle:r=!1,debounceTime:n=0})=>{let o=r===!0?["none"].concat(Ct):[...Ct].reverse(),s=oe(e.sort,n),c=0,a=se({emitter:e}),i=Object.assign({toggle(){c++;let d=o[c%o.length];return s({pointer:t,direction:d})},state(){return e.getTableState().sort}},a);i.onSortToggle(({pointer:d})=>{c=t!==d?0:c});let{pointer:l,direction:f="asc"}=i.state();return c=l===t?f==="asc"?1:2:0,i},Ye=A({SUMMARY_CHANGED:"onSummaryChange"});var ce=A({EXEC_CHANGED:"onExecutionChange"}),_t=({table:t})=>ce({emitter:t}),bt=()=>({sort:{},slice:{page:1},filter:{},search:{}}),St=({sortFactory:t=Y,filterFactory:e=X,searchFactory:r=W,tableState:n=bt(),data:o=[]}={sortFactory:Y,filterFactory:X,searchFactory:W,tableState:bt(),data:[]},...s)=>{let c=te({sortFactory:t,filterFactory:e,tableState:n,data:o,searchFactory:r});return s.reduce((a,i)=>Object.assign(a,i({sortFactory:t,filterFactory:e,searchFactory:r,tableState:n,data:o,table:c})),c)};var Nt=({table:t,el:e})=>{let r=_t({table:t});return r.onExecutionChange(function({working:n}){e.classList.remove("st-working"),n===!0&&e.classList.add("st-working")}),r};var Lt=({el:t,table:e,conf:r={}})=>{let n=r.pointer||t.getAttribute("data-st-sort"),o=r.cycle||t.hasAttribute("data-st-sort-cycle"),s=xt({pointer:n,table:e,cycle:o});s.onSortToggle(({pointer:a,direction:i})=>{if(t.classList.remove("st-sort-asc","st-sort-desc"),n===a&&i!=="none"){let l=i==="asc"?"st-sort-asc":"st-sort-desc";t.classList.add(l)}});let c=()=>s.toggle();return t.addEventListener("click",c),s};function O(t,e){let r;return n=>{r&&clearTimeout(r),r=setTimeout(function(){t(n)},e)}}var Dt=({table:t,el:e,delay:r=400,conf:n={}})=>{let o=n.pointer||e.getAttribute("data-st-filter"),s=n.operator||e.getAttribute("data-st-filter-operator")||"includes",c=e.hasAttribute("type")?e.getAttribute("type"):"string",a=n.type||e.getAttribute("data-st-filter-type");a||(a=["date","number"].includes(c)?c:"string");let i=At({table:t,pointer:o,type:a,operator:s}),l=O(f=>i.filter(e.value),r);return e.addEventListener("input",l),e.tagName==="SELECT"&&e.addEventListener("change",l),i};var Tt=({el:t,table:e,delay:r=400,conf:n={}})=>{let o=n.scope||(t.getAttribute("data-st-search")||"").split(",").map(i=>i.trim()),s=n.flags||t.getAttribute("data-st-search-flags")||"",c=P({table:e,scope:o}),a=O(()=>{c.search(t.value,{flags:s})},r);t.addEventListener("input",a)};var Gt=({el:t,table:e})=>{let r=(n,o)=>Array.from(t.querySelectorAll(o)).forEach(s=>n({el:s,table:e}));return r(Lt,"[data-st-sort]"),r(Nt,"[data-st-loading-indicator]"),r(Tt,"[data-st-search]"),r(Dt,"[data-st-filter]"),e};var ae='<thead><tr><th data-st-sort="slot" class="st-sort-asc">Slot</th><th data-st-sort="name_lower">Name</th><th class="st-sort-reverse" data-st-sort="lvl_reverse">Level</th><th data-st-sort="rank_lower">Rank</th><th class="st-sort-reverse" data-st-sort="gxp_reverse">GXP</th><th class="st-sort-reverse" data-st-sort="act">Activity</th><th class="st-sort-reverse" data-st-sort="pack_reverse">Pack</th><th class="st-sort-reverse" data-st-sort="stam_reverse">Stam</th></tr></thead><tbody></tbody>',Pt=ae;function ie(t){return u(t,rt({className:"whosGotWhat",innerHTML:Pt}))}function le(t,e){let r=at({innerHTML:'<option value="25">25</option><option value="50">50</option><option value="0" selected>All</option>'}),n=h();u(n,r),u(t,n);let o=H({table:e});K(r,"change",s=>{o.changePageSize(Number(s.target.value))})}function me(t,e){let r=h({className:"fsh-search-wrapper"}),n=tt({dataset:{stSearch:"name, rank_name",stSearchFlags:"i"},placeholder:"Enter search term",required:!0,type:"text"}),o=y({innerHTML:"&times;",type:"button"}),s=P({table:e});C(o,()=>{n.value="",n.focus(),s.search("")}),u(r,n),u(r,o),u(t,r)}function ue(t,e,r){let n=h();u(t,n),H({table:e}).onSummaryChange(({page:s,size:c,filteredCount:a})=>{let i=0;a&&(i=1),S(`showing ${(s-1)*c+i} - ${Math.min(a,s*c)} of ${a} (${r.length} total)`,n)})}function pe(t,e){let r=h(),n=y({innerHTML:"\xAB"}),o=y({innerHTML:"\u2039"}),s=y({disabled:!0,innerHTML:"1"}),c=y({innerHTML:"\u203A"}),a=y({innerHTML:"\xBB"}),i=1,l=H({table:e});l.onSummaryChange(({page:f,size:d,filteredCount:R})=>{n.disabled=!l.isPreviousPageEnabled(),o.disabled=!l.isPreviousPageEnabled(),c.disabled=!l.isNextPageEnabled(),a.disabled=!l.isNextPageEnabled(),S(f,s),i=Math.ceil(R/d)}),C(n,()=>l.selectPage(1)),C(o,()=>l.selectPreviousPage()),C(c,()=>l.selectNextPage()),C(a,()=>l.selectPage(i)),u(r,n),u(r,o),u(r,s),u(r,c),u(r,a),u(t,r)}function fe(t){let e=F(t);S("",D);let r=u(D,h()),n=u(r,h({className:"st-top-container"})),o=u(r,h()),s=ie(o),c=u(r,h({className:"st-bottom-container"})),i=St({data:e,tableState:{sort:{pointer:"slot",direction:"asc"},slice:{page:1,size:0},filter:{},search:{}}});le(n,i),me(n,i),ue(c,i,e),pe(c,i);let l=Gt({el:r,table:i});l.onDisplayChange(b($,s,i)),l.exec()}function de(){S("Loading...",D),nt([ot(),st()],fe)}export{de as default};
//# sourceMappingURL=whosGotWhat-XIJSEN7N.js.map
