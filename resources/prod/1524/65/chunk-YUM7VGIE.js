import{a as u}from"./chunk-IK52CCEJ.js";import{a as o}from"./chunk-RRWRGO3F.js";function g(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(r){var n=function(){return indexedDB.databases().finally(r)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)})}var c=g;function a(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function m(t,e){let r=c().then(()=>{let n=indexedDB.open(t);return n.onupgradeneeded=()=>n.result.createObjectStore(e),a(n)});return(n,p)=>r.then(y=>p(y.transaction(e,n).objectStore(e)))}var i;function s(){return i||(i=m("keyval-store","keyval")),i}function l(t,e=s()){return e("readonly",r=>a(r.get(t)))}function f(t,e,r=s()){return r("readwrite",n=>(n.put(e,t),a(n.transaction)))}var d=t=>{t&&t.name!=="NotFoundError"&&o(u(t),!1)};async function S(t,e){try{return await l(t,e)}catch(r){d(r)}}async function E(t,e,r){try{return await f(t,e,r)}catch(n){d(n)}}export{S as a,E as b};
//# sourceMappingURL=chunk-YUM7VGIE.js.map
