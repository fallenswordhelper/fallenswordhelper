import{a as $t,b as Lt}from"./chunk-AQWHNAV4.js";import{a as wt}from"./chunk-PBFRD2HO.js";import{a as bt}from"./chunk-RO2HQL6D.js";import{a as ht}from"./chunk-MZ255KQY.js";import{a as gt}from"./chunk-VEEK4BTZ.js";import{a as k}from"./chunk-AGH27DOD.js";import{a as at}from"./chunk-KFW42OIH.js";import{a as A}from"./chunk-L6IO47RN.js";import{a as kt}from"./chunk-GTNRKB3C.js";import{B,D as d,I as ut,O as L,P as x,V as v,W as E,X as Q,Y as pt,Z as dt,d as ft,p as a,q as f,s as T,t as p,v as lt}from"./chunk-O6TBNTSD.js";import{a as mt}from"./chunk-4LNJRZ6C.js";import{a as Z}from"./chunk-2KD24UDH.js";import{a as u}from"./chunk-EF2M573K.js";import{a as ct}from"./chunk-67W32VKU.js";import{a as rt}from"./chunk-5RI7URZ5.js";import{a as ot}from"./chunk-SGEJ7TQZ.js";import{a as et}from"./chunk-ABZ54ON2.js";import{a as N}from"./chunk-3FGVAWVX.js";import{a as it}from"./chunk-OUF5VK2B.js";import{a as I}from"./chunk-MQBCOMUU.js";import{b as tt}from"./chunk-ALGYGCJU.js";import{a as nt}from"./chunk-PFETQSML.js";import{a as Y}from"./chunk-E2LRFPD6.js";import{a as st}from"./chunk-3ODBLJBA.js";import{b as X}from"./chunk-MIAGY67V.js";import{X as W,c as z,p as J,t as K}from"./chunk-3IHZF2GE.js";import{a as $}from"./chunk-WZXZ6YXZ.js";var xt,_t;function _(){if(!_t){let t=$.subcmd==="dropitems"?"removeIndex[]":"storeIndex[]";xt=document.forms[0].elements[t],_t=!0}return xt}function S(){let t=_();return t?wt(t):[]}function D(){return S().filter(t=>!I("fshHide",k(t)))}var H;function h(){return H||(H=gt()),H}function R(t){return mt({subcmd:"dodropitems",removeIndex:t})}async function U(t){let e=await Lt(t),o={s:e.r===0};return o.s?o.r={items:[],deleted_items:t}:o.e={message:e.m},o}function O(t){return ct(R,U,t)}function St(t){return k(t.target).cells[0].children[0].value}async function Nt(t){let{items:e}=await h();u("storeitems","Check All of Type"),D().filter(o=>e[o.value]&&e[o.value].item_id===e[St(t)].item_id).forEach(o=>{o.checked=!o.disabled&&!o.checked})}function Bt(t){let e=k(t);e.cells[0].children[0].disabled=!0,rt(".actionButton",e).forEach(o=>{o.disabled=!0,o.textContent="",o.removeAttribute("data-tooltip"),o.classList.add("inProgress")}),t.blur(),t.classList.add("fshSpinner","fshSpinner12")}function Ht(t,e){t.target.classList.remove("fshSpinner","fshSpinner12"),t.target.classList.add("fshGreen"),t.target.textContent=e}async function Dt(t,e,o){Bt(t.target);let n=await e([St(t)]);n&&n.s?Ht(t,o):at(n)}var Rt=[["Check All",Nt],["Quick Send",t=>{u("storeitems","Quick Send"),Dt(t,$t,"Sent")}],["Quick Drop",t=>{u("storeitems","Quick Drop"),Dt(t,O,"Dropped")}]];function F(t){if(t.target.tagName==="A"&&["AH","UFSG"].includes(t.target.textContent)&&u("storeitems",t.target.textContent),t.target.tagName!=="BUTTON"||I("custombutton",t.target))return;let e=Rt.find(([o])=>o===et(t.target));e&&e[1](t)}function Ut(t){let e=t[2](t[0])+"",o,n;return{c(){o=p(e),n=p(" AH and UFSG Links")},m(r,s){a(r,o,s),a(r,n,s)},p(r,s){s&1&&e!==(e=r[2](r[0])+"")&&B(o,e)},d(r){r&&f(o),r&&f(n)}}}function Ot(t){let e=t[2](t[1])+"",o,n;return{c(){o=p(e),n=p(" Quick Drop links")},m(r,s){a(r,o,s),a(r,n,s)},p(r,s){s&2&&e!==(e=r[2](r[1])+"")&&B(o,e)},d(r){r&&f(o),r&&f(n)}}}function Ft(t){let e,o,n;return e=new A({props:{$$slots:{default:[Pt]},$$scope:{ctx:t}}}),e.$on("click",t[5]),{c(){o=T("div"),v(e.$$.fragment),d(o,"display","contents"),d(o,"--button-width","10.8em")},m(r,s){a(r,o,s),E(e,o,null),n=!0},p(r,s){let c={};s&128&&(c.$$scope={dirty:s,ctx:r}),e.$set(c)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){x(e.$$.fragment,r),n=!1},d(r){r&&f(o),Q(e,r)}}}function Pt(t){let e;return{c(){e=p("Select All Guild Locked")},m(o,n){a(o,e,n)},d(o){o&&f(e)}}}function Vt(t){let e,o,n,r,s,c,w,g;e=new A({props:{$$slots:{default:[Ut]},$$scope:{ctx:t}}}),e.$on("click",t[3]),r=new A({props:{$$slots:{default:[Ot]},$$scope:{ctx:t}}}),r.$on("click",t[4]);let l=$.subcmd2==="storeitems"&&Ft(t);return{c(){o=T("div"),v(e.$$.fragment),n=p(`\xA0
`),s=T("div"),v(r.$$.fragment),c=p(`\xA0
`),l&&l.c(),w=lt(),d(o,"display","contents"),d(o,"--button-width","11.8em"),d(s,"display","contents"),d(s,"--button-width","10.6em")},m(i,m){a(i,o,m),E(e,o,null),a(i,n,m),a(i,s,m),E(r,s,null),a(i,c,m),l&&l.m(i,m),a(i,w,m),g=!0},p(i,[m]){let j={};m&129&&(j.$$scope={dirty:m,ctx:i}),e.$set(j);let q={};m&130&&(q.$$scope={dirty:m,ctx:i}),r.$set(q),$.subcmd2==="storeitems"&&l.p(i,m)},i(i){g||(L(e.$$.fragment,i),L(r.$$.fragment,i),L(l),g=!0)},o(i){x(e.$$.fragment,i),x(r.$$.fragment,i),x(l),g=!1},d(i){i&&f(o),Q(e,i),i&&f(n),i&&f(s),Q(r,i),i&&f(c),l&&l.d(i),i&&f(w)}}}function Gt(t,e,o){let n=ut(),r=i=>i?"Hide":"Show",{showExtraLinks:s=!1}=e,{showQuickDropLinks:c=!1}=e;function w(){u("storeitems","toggleShowExtraLinks"),o(0,s=!s),N("showExtraLinks",s),n("showExtraLinks",s)}function g(){u("storeitems","toggleShowQuickDropLinks"),o(1,c=!c),N("showQuickDropLinks",c),n("showQuickDropLinks",c)}function l(){u("storeitems","selectLocked"),n("selectLocked")}return t.$$set=i=>{"showExtraLinks"in i&&o(0,s=i.showExtraLinks),"showQuickDropLinks"in i&&o(1,c=i.showQuickDropLinks)},[s,c,r,w,g,l]}var Ct=class extends dt{constructor(e){super();pt(this,e,Gt,Vt,ft,{showExtraLinks:0,showQuickDropLinks:1})}},yt=Ct;var P;function Mt(t,e){if(e.item_id!==13699)return e.item_name;let o=t.find(n=>n.value===String(e.inv_id));return o?ot(o.parentNode.parentNode.children[2]):e.item_name}async function jt(t){let e=await h();return!e||!e.items?{}:kt(nt(e.items).map(([o,n])=>[o,{...n,item_name:Mt(t,n)}]))}async function qt(t){return P||(P=await jt(t)),P}async function V(){let t=S();if(!t.length)return[];let e=await qt(t);return t.map(o=>[k(o).cells[2],e[o.value]]).filter(([,o])=>o)}var C=0,It=1,G=2,Tt=3,y=4,vt=["showExtraLinks","enableItemColoring","checkAllOfType","showQuickSendLinks","showQuickDropLinks"];function Yt(t,e){return t[e]=(t[e]||0)+1,t}function zt(t){return{...t.map(([,e])=>e.item_id).reduce(Yt,{}),13699:1}}var Jt=t=>` data-tooltip="INSTANTLY ${t} THE ITEM. NO REFUNDS OR DO-OVERS! Use at own risk."`,Et=(t,e,o)=>` [<button class="fshStoreItemsButton ${t}"${e}>${o}</button>]`,Qt=(t,e,o)=>Et(`${t} actionButton tooltip-multiline`,Jt(e),`Quick ${o}`),At=(t,e,o)=>`[<a href="${t}"${e}>${o}</a>]`;function Kt(t){return t.bound?'<span class="aHSpacer"></span>':At(`${K}${encodeURIComponent(t.item_name)}`,"","AH")}var Wt=t=>At(`${W}items${J}view&item_id=${t.item_id}`,' target="_blank"',"UFSG"),Xt=(t,e,o)=>t[G]&&e[o.item_id]>1,Zt=(t,e)=>t[Tt]&&(!e.bound||e.guild_tag!==-1),te=(t,e)=>t[y]&&e.guild_tag===-1;function ee(t,e){return e[0]()?t+e[1]():t}function oe(t,e,o){return[[()=>t[C],()=>`${Kt(o)} ${Wt(o)}`],[()=>!0,()=>`&nbsp;${o.item_name}`],[()=>Xt(t,e,o),()=>Et("fshBlack","","Check All")],[()=>Zt(t,o),()=>Qt("fshBlue","SENDS","Send")],[()=>te(t,o),()=>Qt("fshRed","DROP","Drop")]]}function re(t,e,[o,n]){let r=o;t[It]&&(r.className=z[n.rarity].clas);let s=oe(t,e,n).reduce(ee,"");r.innerHTML!==s&&(r.innerHTML=s)}async function b(t){let e=await V(),o=t[G]?zt(e):[];Z(3,bt,[[5,3,e,0,Y(re,t,o)]])}function ne(t){let e=document.forms[0];return new yt({props:{showExtraLinks:t[C],showQuickDropLinks:t[y]},target:e.parentNode.children[5].children[0]})}async function ie(){let t=D();if(!t.length)return;let e=await h();!e||!e.items||t.map(o=>[o,e.items[o.value]]).filter(([,o])=>o).forEach(([o,n])=>{o.checked=!o.disabled&&n.guild_tag!==-1})}function M(t){let e=ne(t);e.$on("showExtraLinks",o=>{t[C]=o.detail,b(t)}),e.$on("showQuickDropLinks",o=>{t[y]=o.detail,b(t)}),e.$on("selectLocked",()=>{ie()})}async function se(){if(it()||!_())return;let e=vt.map(o=>X(o));ht(),M(e),e.some(o=>o)&&b(e),st(tt,F)}export{_ as a,S as b,D as c,h as d,O as e,se as f};
//# sourceMappingURL=chunk-GV2QVGKZ.js.map
