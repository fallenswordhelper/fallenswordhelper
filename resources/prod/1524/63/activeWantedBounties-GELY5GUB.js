import{a as X}from"./chunk-SW526U2Q.js";import{a as N}from"./chunk-CJOIYBEX.js";import{a as G}from"./chunk-S476K7XG.js";import{a as O}from"./chunk-TZ4NRSBW.js";import"./chunk-CW6SZEHX.js";import{a as v}from"./chunk-2CM5F3MT.js";import"./chunk-ONPKPDBM.js";import{a as m}from"./chunk-MKP6263K.js";import{a as p}from"./chunk-AHVVGVUS.js";import"./chunk-LNV77PKU.js";import{a as c}from"./chunk-AQEYRG4T.js";import{a as S}from"./chunk-FO2Z5Q7H.js";import"./chunk-NZGJJTQ5.js";import"./chunk-67HBZW2J.js";import{a as w}from"./chunk-TSPZQ2SO.js";import{a as u}from"./chunk-FJUNK3QD.js";import"./chunk-DXPGKDUX.js";import{a as q}from"./chunk-DRKQTEJS.js";import{a as F}from"./chunk-ILQHWW7D.js";import{b as d}from"./chunk-RF4ISCAB.js";import"./chunk-ORKBU564.js";import"./chunk-MBEIWHXP.js";import{a as f}from"./chunk-C2QANIAW.js";import"./chunk-TPAH6QRT.js";import{a as J}from"./chunk-REETYBHA.js";import"./chunk-LYLBCS6U.js";import"./chunk-KCWNCERP.js";import{a as V}from"./chunk-WZGO2PGN.js";import{a as B}from"./chunk-2E6AQY2R.js";import{c as E}from"./chunk-ONUVRTHQ.js";import{a as x}from"./chunk-VMDTPM4Q.js";import{a as g}from"./chunk-XSMZ46A3.js";import"./chunk-4CSILNZE.js";import"./chunk-H5HEKC7D.js";import"./chunk-ID3GPDDL.js";import"./chunk-UD6FQZRC.js";import"./chunk-TYXNRC6B.js";import"./chunk-KXU3JWGA.js";import"./chunk-QFIFYPCN.js";import"./chunk-L7RMPRB5.js";import{a as H}from"./chunk-VYZGJOFZ.js";import{b as W}from"./chunk-55VGZ4O3.js";import"./chunk-ZVMTR3BU.js";import"./chunk-IGVUSJ47.js";import{W as h}from"./chunk-TD2HJ4A4.js";import{a as o}from"./chunk-PMRPPTTZ.js";function l(t){return F({cmd:"bounty",page:t})}function tt(t){return t.children[0].tagName==="A"?t.children[0]:t.children[0].children[0]}function et(t){return w("img",t[2]).title}function b(t){let e=tt(t[0]);return{target:f(e),link:e.href,lvl:f(e.nextSibling).replace(/[[|\]]/g,""),reward:f(t[2]),rewardType:et(t),posted:f(t[3]),xpLoss:f(t[4])}}var i,n,R,j,y,$;function rt(t){return!/No bounties active/.test(t.rows[1].cells[0].innerHTML)}function nt(t){return B(b(t),{progress:f(t[5])})}function ot(t){for(let e=1;e<t.rows.length-2;e+=2){let r=t.rows[e].cells,L=nt(r);i.bounty.push(L)}}function it(t){rt(t)&&ot(t)}function z(t){let e=g("bounty-info",t);if(!e)return;let r=e.parentNode.parentNode.previousElementSibling.children[0].children[0];i={},i.bounty=[],i.isRefreshed=!0,i.lastUpdate=d,r&&it(r),R=!0}function st(){return i&&d-i.lastUpdate>j}function at(){return n&&d-n.lastUpdate>j}function ft(){return st()||at()}function K(){i=S("bountyList"),n=S("wantedList"),j=W("bountyListRefreshTime"),y=W("bwNeedsRefresh"),!y&&ft()&&(y=!0)}function Q(){n={},n.bounty=[],n.isRefreshed=!0,n.lastUpdate=d,R=!1,$=G("wantedNames"),J("bwNeedsRefresh",!1)}function ut(t){let e=t[6];return u(e)!=="[n/a]"?e.children[0].children[0].getAttribute("onclick"):""}function ct(t){return B(b(t),{offerer:u(t[1].children[0].children[0]),tickets:u(t[5]),accept:ut(t)})}var mt=[()=>$.includes("*"),t=>$.includes(t),(t,e)=>o.wantedGuildMembers&&u(e.cells[6])==="[n/a]"];function pt(t,e){return u(e.cells[6])!=="[active]"&&mt.some(r=>r(t,e))}function dt(t,e){pt(t,e)&&n.bounty.push(ct(e.cells))}function M(t){for(let e=1;e<t.rows.length-2;e+=2){let r=t.rows[e],L=u(r.cells[0].children[0].children[0]);if(L==="[ No bounties available. ]")break;dt(L,r)}}var s,a;function C(){return m({className:"minibox"})}function Y(){o.enableWantedList&&(a=C(),O(E,a)),o.enableActiveBountyList&&(s=C(),O(E,s))}var T;function lt(t){return`Level:  ${t.lvl}<br>Reward: ${t.reward} ${t.rewardType}<br>XP Loss Remaining: ${t.xpLoss}<br>Progress:  ${t.progress}`}function A(){c("bountyList",i),x("",s);let t=m({innerHTML:`<a href="${h}">Active Bounties</a> `});T=N({className:"xxsLink",textContent:"Reset"}),p(t,T),p(s,t);let e="";if(i.bounty.length===0)e+='<div class="xsOrange">[No active bounties]</div>';else for(let r of i.bounty)e+=`<a href="${r.link}" class="tip-static" data-tipped="${lt(r)}">${r.target}</a><br>`;v(s,e)}var k;function bt(t){return`Target Level:  ${t.lvl}<br>Offerer: ${t.offerer}<br>Reward: ${t.reward} ${t.rewardType}<br>XP Loss Remaining: ${t.xpLoss}<br>Posted: ${t.posted}<br>Tickets Req.:  ${t.tickets}`}function yt(t){return t.accept?`<span class="xsGreen" onclick="${t.accept}">[a]</span>&nbsp;`:""}function D(){c("wantedList",n),x("",a);let t=m({innerHTML:`<a href="${h}">Wanted Bounties</a> `});k=N({className:"xxsLink",textContent:"Reset"}),p(t,k),p(a,t);let e="";if(n.bounty.length===0)e+='<div class="xsOrange">[No wanted bounties]</div>';else for(let r of n.bounty)e+=`${yt(r)}<a class="xsKhaki tip-static" data-tipped="${bt(r)}" href="${r.link}">${r.target}</a><br>`;v(a,e)}var I,Z;function Lt(t){let e=w('#pCC input[name="page"]',t);if(!e)return;I=Number(e.value),Z=Number(e.parentNode.innerHTML.match(/of&nbsp;(\d*)/)[1]);let r=g("bounty-info",t).parentNode.parentNode.nextElementSibling.children[0].children[0];r&&M(r)}function gt(t){o.enableActiveBountyList&&!R&&(z(t),A())}function P(t){let e=q(t);gt(e),o.enableWantedList&&(Lt(e),I<Z?l(I+1).then(P):D())}function ht(t,e){e&&(n.isRefreshed=!1,D()),t&&(i.isRefreshed=!1,A())}var vt=[()=>!i,()=>!n,()=>y];function xt(){return vt.some(X)}function U(t,e){K(),xt()?(Q(),l(1).then(P)):ht(t,e)}function _(t){t.target===T&&(c("bountyList",null),U(o.enableActiveBountyList,o.enableWantedList)),t.target===k&&(c("wantedList",null),U(o.enableActiveBountyList,o.enableWantedList))}function wt(){s&&H(s,_),a&&H(a,_)}function Bt(){V()||(Y(),wt(),U(o.enableActiveBountyList,o.enableWantedList))}export{Bt as default};
//# sourceMappingURL=activeWantedBounties-GELY5GUB.js.map
