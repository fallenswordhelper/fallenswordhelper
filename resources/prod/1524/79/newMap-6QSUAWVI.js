import{a as Xi}from"./chunk-7G5SVOGF.js";import{a as Yi,b as Qi}from"./chunk-PMUNOZKR.js";import"./chunk-LHEMVJK5.js";import"./chunk-2NRC3ZYJ.js";import"./chunk-KKDHMZXI.js";import{a as zi}from"./chunk-S5TPZ7EX.js";import{a as Ki}from"./chunk-SRHTHBZ4.js";import{a as Et}from"./chunk-M5KNHR7R.js";import{a as qi,b as Wi,c as Ui}from"./chunk-7D4FUE4K.js";import{a as Oi}from"./chunk-GOHIHN5O.js";import{b as Ni}from"./chunk-NSEVB4U7.js";import{a as Gi}from"./chunk-KQZWEXXU.js";import{a as $i}from"./chunk-E65F43EJ.js";import{a as P}from"./chunk-GDKPRDHC.js";import{a as Ae,b as St}from"./chunk-YDF2ZUKO.js";import"./chunk-A3RMIMQB.js";import{a as Ii,b as _i}from"./chunk-UDCAJCMO.js";import{a as T}from"./chunk-EA2RE2JR.js";import{a as Ri}from"./chunk-UXJHUPGX.js";import{a as Fi}from"./chunk-7SS2VCIO.js";import{a as Pi}from"./chunk-FIG6ZD2H.js";import{a as Vi}from"./chunk-EGMBUOXA.js";import{a as Ei}from"./chunk-HWYX7NEB.js";import{a as bt}from"./chunk-XDA7R4DO.js";import{a as Lt}from"./chunk-HQNTMOO3.js";import{a as g}from"./chunk-3LG2CFFN.js";import{a as Ai}from"./chunk-43HDQYHH.js";import{a as Li,b as Si}from"./chunk-6VXI3N5P.js";import{a as bi}from"./chunk-2VQTB7XI.js";import"./chunk-U6VXUCX2.js";import{a as ki}from"./chunk-JDX3PJWI.js";import"./chunk-6ZT3WHLZ.js";import{a as wt}from"./chunk-NSIE2BGX.js";import"./chunk-JYZIKN42.js";import"./chunk-YKPSGJH4.js";import{C as b,E as kt,G as hi,X as fr,Y as gi,a as xt,d as mi,e as lr,ea as vi,fa as yi,r as k,s as le,t as fe,u as di,v as L,w as xe,x as ke,y as pi}from"./chunk-BJ3QEZIV.js";import{a as Bi}from"./chunk-JDSHTCV6.js";import{a as Ci}from"./chunk-OEQOMJM6.js";import{a as ur}from"./chunk-ULY6DOUT.js";import"./chunk-TY72DKY4.js";import{a as p}from"./chunk-LQA2QWW5.js";import{a as sr}from"./chunk-UBYWPI6U.js";import{a as Bt}from"./chunk-S6D5RHY5.js";import{a as Mi,b as Hi,c as Ti}from"./chunk-DG4JWDPM.js";import{a as wi}from"./chunk-F3NHNKW5.js";import{a as Be}from"./chunk-4WS6LFVH.js";import{a as At}from"./chunk-AF5XS3UR.js";import"./chunk-UTOZ7VCW.js";import"./chunk-VUBYY35U.js";import{a as Di}from"./chunk-6HI3BTBE.js";import"./chunk-76FHETNA.js";import"./chunk-KJFTQFZJ.js";import{a as Vn}from"./chunk-2LVJ7OMH.js";import{a as ri}from"./chunk-MJ4TLF2J.js";import"./chunk-N6YFIN5D.js";import"./chunk-3W6W2D5U.js";import{a as ci}from"./chunk-DPJOHNXM.js";import{a as Ce}from"./chunk-PEST2X2S.js";import{a as we}from"./chunk-Q5V66F5H.js";import{a as xi}from"./chunk-UBU4HOCG.js";import"./chunk-VK76KS6Y.js";import{a as re}from"./chunk-W5TZOL5W.js";import"./chunk-NT4STL35.js";import{a as Ct}from"./chunk-BEKNPL5M.js";import{a as f}from"./chunk-SSW65BU5.js";import{a as m}from"./chunk-MFU3L6UV.js";import{a as i}from"./chunk-NZDRUEQ7.js";import"./chunk-NTMW32IA.js";import{a as I}from"./chunk-JYLJZMMH.js";import{a as ti}from"./chunk-SCNPNA6M.js";import{a as ii}from"./chunk-46KDOJ4P.js";import"./chunk-BRIQZTN3.js";import{f as ae}from"./chunk-JISJNNDC.js";import{a as Dt}from"./chunk-7UPVBJI2.js";import"./chunk-JGFPN7Z4.js";import{a as gt}from"./chunk-DVQ4HTUG.js";import{a as ni}from"./chunk-AW7BR4RY.js";import{a as oe}from"./chunk-GELOWOQR.js";import{a as ve}from"./chunk-WDKM7RFE.js";import"./chunk-4Q2SRW7I.js";import{a as fi}from"./chunk-4AZI4QQQ.js";import{a as si}from"./chunk-NBGTZWFP.js";import{a as ui}from"./chunk-PHHPFC5F.js";import"./chunk-AL4KDQST.js";import{a as De}from"./chunk-X76JHTHA.js";import"./chunk-QNBBZPHD.js";import"./chunk-PE3FJ2RG.js";import"./chunk-ZCYTQ2UF.js";import{a as ye}from"./chunk-Y65Z3XTF.js";import{a as z}from"./chunk-X2INWW4Q.js";import{a as ie}from"./chunk-E5IM4RMA.js";import{a as pt,b as ar}from"./chunk-ZNKXZYAQ.js";import"./chunk-BSLTHMLI.js";import{a as ai}from"./chunk-YO375HFG.js";import{a as ht}from"./chunk-C7AAZRMQ.js";import{a as oi}from"./chunk-2MNOMCC3.js";import"./chunk-WFSZD2EF.js";import{a as y}from"./chunk-ROGCWJM3.js";import"./chunk-PPVZKS76.js";import"./chunk-MVK2MUWC.js";import{a as Y}from"./chunk-VNQGA6OZ.js";import{a as ne}from"./chunk-J27NFZBK.js";import{a as w}from"./chunk-EKJRFQUL.js";import{a}from"./chunk-7KZSXEZV.js";import{a as li}from"./chunk-LQUQAOOA.js";import{a as U}from"./chunk-J7HJMT5D.js";import"./chunk-Y6VKRV7H.js";import"./chunk-QTXZJQPG.js";import{a as u}from"./chunk-NSORKVUP.js";import{a as vt,b as yt}from"./chunk-RWWHXXL2.js";import"./chunk-BYNMPNFU.js";import{a as dt}from"./chunk-QAN7R2R4.js";import"./chunk-TDBXMRU5.js";import"./chunk-BBWJJBGA.js";import{a as B}from"./chunk-6KVKWMOW.js";import{b as h}from"./chunk-ILOP54SQ.js";import{a as ei}from"./chunk-AGGFW4LO.js";import{a as R}from"./chunk-XGNI62R7.js";import{$ as Pn,Aa as Xn,Ba as Jn,Ca as jn,Da as Zn,J as nr,M as Gn,Ma as mt,O as ir,W as $n,X as ge,Y as st,Z as Rn,_ as In,aa as _n,b as te,ba as Fn,ca as On,da as Kn,e as ft,ea as qn,fa as ut,ga as Wn,ha as Un,ia as zn,k as he,ka as Yn,la as W,ma as ct,na as E,p as or,w as Nn,za as Qn}from"./chunk-QFVOKILJ.js";import{a as n}from"./chunk-6ZU7XATI.js";var se;function Dl(e){return e}function xl(e){return n.showBuffInfo&&e.some(Dl)}function kl(){if(se)g(se,!1);else{se=m({className:"fshActionBox",innerHTML:"<div></div><div></div><div></div><div></div><div></div><div></div>"});let e=a("actionContainer");Ai(se,e.children[2])}return se}function wl(){se&&g(se,!0)}function cr(e){if(xl(e))return kl();wl()}var _,mr;function Cl(e){_=e.children[3],_.className="fshBlue",f("CA ",_),mr=p(),i(_,mr),P(_," active")}function Bl(e,t){_?g(_,!1):Cl(e),f(t.level,mr)}function Al(){_&&g(_,!0)}function dr(e,t){t?Bl(e,t):Al()}var F,pr;function bl(e){F=e.children[4],F.className="fshRed",f("Doubler ",F),pr=p(),i(F,pr),P(F," active")}function Ll(e,t){F?g(F,!1):bl(e),f(t.level,pr)}function Sl(){F&&g(F,!0)}function hr(e,t){t?Ll(e,t):Sl()}var Q,gr;function El(e){Q=e.children[2],f("Damage bonus: ",Q),gr=p(),i(Q,gr),P(Q,"%")}function Ml(e,t){if(e){let r=Math.min(Math.round(Math.floor(t/5)*Number(e.level))*.01,20);return Ae(r,2).toString()}return"0"}function Hl(e,t,r){Q?g(Q,!1):El(e),f(Ml(t,Number(r)),gr)}function Tl(){Q&&g(Q,!0)}function vr(e,t,r){t?Hl(e,t,r):Tl()}function d(e,t){f(Y(e),t)}var ue,yr;function Vl(e){ue=e.children[1],f("Kill Streak: ",ue),yr=p(),i(ue,yr)}function Nl(e,t){ue?g(ue,!1):Vl(e),d(t,yr)}function Gl(){ue&&g(ue,!0)}function Dr(e,t,r,o){t||r?Nl(e,o):Gl()}function $l(e,t){return t.name===e}function X(e){let{buffs:t}=GameData.player();if(t)return t.find(u($l,e))}function xr(){let e=GameData.player().teleportCooldown;return e>1&&e}var Rl=["red","orange","yellow"];function kr(){let e=$("#actionlist-shield-imp");e.length===1&&e.css("background-color",Rl[e.text()]||"#ad8043")}var V=0,wr=0;function Il(e){Qi(e)&&GameData.fetch(W)}function Pl(){X("Summon Shield Imp")||Yi([Dt()],[55]).then(Il)}function _l(e){return e?Number(e.stack):0}var Fl=["imp-0","imp-1","imp-1"];function Ol(e){return Fl[e]||"fshGreen"}function Kl(e){[V]=e.children,f("Shield Imps Remaining: ",V),wr=p(),i(V,wr),re(V,"&nbsp;");let t=T({className:"xSmallLink",textContent:"Recast"});i(V,t),B(t,Pl)}function ql(e,t){V?g(V,!1):Kl(e);let r=_l(t);V.className=Ol(r),f(r,wr)}function Wl(){V&&g(V,!0)}function Cr(e,t,r){t||r?ql(e,t):Wl()}function Ul(e){return e.type===0}function Br(){let{dynamic:e}=GameData.realm();return I(e)&&e.some(Ul)}function x(e){return p({textContent:e})}var ce,Mt,Ji;function zl(e,t){ce=e.children[5],f("Teleport Cooldown: ",ce),Mt=x(t.toString()),i(ce,Mt)}function Yl(e,t){ce?g(ce,!1):zl(e,t)}function Ql(){ce&&g(ce,!0)}function ji(){let e=Math.max(Math.ceil((Ji-Date.now())/1e3),0);f(e,Mt),e>0&&setTimeout(ji,500)}function Zi(e){Mt&&(Ji=Date.now()+e*1e3,ji())}function ea(e,t){t?Yl(e,t):Ql()}var qe,Ar,br,Lr,Sr,Er,Mr;function Xl(){qe=X("Death Dealer"),Ar=X("Doubler"),br=X("Counter Attack"),Lr=X("Summon Shield Imp"),Sr=xr(),Er=Br(),Mr=GameData.player().killStreak}function Hr(){kr(),Xl();let e=cr([qe,Ar,br,Lr,Sr,Er]);e&&(Cr(e,Lr,qe),Dr(e,qe,Er,Mr),vr(e,qe,Mr),dr(e,br),hr(e,Ar),ea(e,Sr))}function Jl(e,t){Zi(t.player.teleportCooldown)}function ta(){Hr(),$.subscribe(`${st} ${Rn}`,Hr),$.subscribe(zn,Jl)}function ra(){n.showBuffInfo=!n.showBuffInfo,y("showBuffInfo",n.showBuffInfo),Hr()}function jl(){return window.GameController&&GameController.Realm&&!GameController.Realm.footprintTileList}function Tr(){jl()&&(GameController.Realm.footprintTileList=[])}function oa(e,t,r){return ki({className:`fshCurveEle fshCurveLbl fshPoint tip-static ${e}`,dataset:{tipped:t},htmlFor:r})}function Ht(e){let t=m({className:"fshToggle"}),r=wt({checked:e.prefVal,id:e.checkId,type:"checkbox"});i(t,r);let o=oa(e.onClass,e.onTip,e.checkId);i(t,o);let l=oa(e.offClass,e.offTip,e.checkId);return i(t,l),i(e.worldName,t),r}var J=0,Vt=0,Nt=0,ia=0,aa=0,la=0,fa=0,sa=0,ua=0;function Zl(e){Be(e),GameData.doAction(12,401,{},0)}function ef(){Bi(Di())}function tf(){window.open(`${Gn+or}map`,"fsMap")}function rf(){let e=GameData.realm();window.open(`${$n}realms${or}view&realm_id=${e.id}`,"mapUfsg")}function of(){y("playNewMessageSound",!h("playNewMessageSound"))}function nf(){n.huntingMode=!n.huntingMode,y("huntingMode",n.huntingMode)}function af(){return m({className:"fshCurveContainer",id:"fshWorldButtonContainer"})}function ca(e){return e?e.toString():"?"}function lf(){let e=m({textContent:"Min Lvl: "});return Vt=x(ca(GameData.realm().minlevel)),i(e,Vt),e}function ff(){let e=m({textContent:"Your Lvl: "});return Nt=x(ca(GameData.player().level)),i(e,Nt),e}function sf(e){let t=m({className:"fshFsty"});i(t,lf()),i(t,ff()),i(e,t)}function Tt(e,t,r){let o=T({className:`fshCurveEle fshCurveBtn fshPoint tip-static ${e}`,dataset:{tipped:t}});return i(r,o),o}function uf(e){sf(e),ia=Tt("fshFormGroup","Quick Create Attack Group",e),aa=Tt("fshQuickBuff","Open Quick Buff Popup",e),la=Tt("fshRealmMap","Open Realm Map",e),fa=Tt("fshTempleOne","Search map in Ultimate FSG",e)}function cf(e){if(h("showSpeakerOnWorld")){let t=h("playNewMessageSound");sa=Ht({prefVal:t,checkId:"fshSoundCheck",onClass:"soundOn",onTip:"Turn Off Sound when you have a new log message",offClass:"soundOff",offTip:"Turn On Sound when you have a new log message",worldName:e})}}function mf(e){let t=n.huntingMode;ua=Ht({prefVal:t,checkId:"fshHuntCheck",onClass:"huntOn",onTip:"Hunting mode is ON",offClass:"huntOff",offTip:"Hunting mode is OFF",worldName:e})}function df(){uf(J),cf(J),mf(J)}var pf=[[e=>e===sa,of],[e=>e===ua,nf]],hf=[[e=>e===ia,Zl],[e=>e===aa,ef],[e=>e===la,tf],[e=>e===fa,rf]];function gf(e,t){let{target:r}=t,o=e.find(([l])=>l(r));o&&(r.blur(),o[1](r))}function na(e){return u(gf,e)}function vf(){B(J,na(hf)),R(J,"change",na(pf))}function yf(){J||(J=af(),df(),vf(),At(J,a("worldCoord")))}function Df(e,t){Vt&&t.b.minlevel&&(Tr(),f(t.b.minlevel,Vt))}function xf(e,t){Nt&&f(t.b,Nt)}function Vr(){yf(),$.subscribe(On,Df),$.subscribe(In,xf)}var kf=["NORMAL","CHAMPION","ELITE","SUPER ELITE","TITAN","LEGENDARY"],wf=`url("${te}ui/world/icon_action_attack_`,Gt=!1;function Nr(e){return ye(".verb.attack",e)}function Gr(e){let t=kf.indexOf(e.toUpperCase());return gt(`#actionList .actionListItem.creature.creature-${t}`)}function Cf(e){e.classList.remove("attack-1","attack-2","attack-3","attack-4","attack-5","attack-6","attack-7","attack-8"),e.style.backgroundImage=""}function Bf(e,t){e!==null&&(e.classList.add(`attack-${t+1}`),e.style.backgroundImage=`${wf}${t+1}.png")`)}function ma(e){let t=["LEGENDARY","NORMAL"].flatMap(Gr),r=Gr("CHAMPION"),[o,l]=e?[t,r]:[r,t];o.map(Nr).filter(s=>s!==null).forEach(Cf),l.slice(0,8).map(Nr).forEach(Bf)}function Af(e){let t=Nr(e);t&&(Ce("world","ChampionAttack"),wi(t))}function bf(e){if(!e.altKey||!e.shiftKey||e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||(Gt||ma(!0),Gt=!0,!/(?:Digit|Numpad)[1-8]/.test(e.code)))return;let t=Gr("CHAMPION"),r=parseInt(e.code.slice(-1),10)-1;r<t.length&&Af(t[r])}function Lf(e){Gt&&(!e.ctrlKey||!e.shiftKey)&&(Gt=!1,ma(!1))}function $r(){let{body:e}=document;R(e,"keydown",bf),R(e,"keyup",Lf)}var Sf=["Breaker","Protection","Master Thief","Protect Gold","Disarm","Duelist","Thievery","Master Blacksmith","Master Crafter","Fury Caster","Master Inventor","Sustain"],Rr=[],S;function Ef(e){(e.id===54||e.id===26)&&(S.player.buffs[e.id]=parseInt(e.level,10))}function Mf(e){Sf.indexOf(e.name)===-1&&(S.player.enhancements[e.name]=e.value)}function Hf(e){e.player.buffs&&e.player.buffs.forEach(Ef)}function Tf(e){e.player.enhancements&&e.player.enhancements.forEach(Mf)}function Vf(e,t){S={},S.combat=t.response.data,S.combat.inventory_id&&(S.combat.drop=S.combat.item.id),S.player={},S.player.buffs={},S.player.enhancements={},Hf(t),Tf(t),S.time=t.time,Rr.push(S),yt("fsh_combatLog",Rr)}function Nf(e,t){t.response.response===0&&Vf(e,t)}function Gf(e){e&&(Rr=e),$.subscribe(ut,Nf)}function Ir(){h("keepLogs")&&vt("fsh_combatLog").then(Gf)}function $f(){i(document.body,Oi(`#actionList .creature-1 {color: green;}
#actionList .creature-2 {color: yellow;}
#actionList .creature-3 {color: red;}`))}function Pr(){h("enableCreatureColoring")&&$f()}function me(e){return n.doNotKillList.includes(ve(e))}function Rf(e){e.classList.toggle("fshBlue",me(oi(e)))}function be(){let e=a("actionList");Ct("creature",e).forEach(Rf)}function If(e,t){if(me(e))return a("actionList").children[t].children[0].children[1].classList.remove("loading"),!0}function Pf(e){let t=GameData.actions()[e];if(t)return If(t.data.name,e)}function _f(e){return function(r,o,l,s){Pf(l.passback)||e(r,o,l,s)}}var Ff={2:_f};function Of(e){return ei(e)||e===0}function Kf(e){return e&&dt(e)}function qf(e){return function(r,o,l,s){let c=Ff[r];Kf(c)&&Of(s)?c(e)(r,o,l,s):e(r,o,l,s)}}function _r(){let e=GameData.doAction;GameData.doAction=qf(e)}function Fr(){$.subscribe(ge,be),be(),_r()}function Wf(e){Be(e.target)}function Or(){B(a("buffList"),Wf)}function da(e){e[1]=e[2].r}function pa(e,t,r){let o=e.slice();return o[3]=t[r].player,o[2]=t[r].value,o[5]=r,o}function Uf(e){let t,r=e[6].message+"",o;return{c(){t=L("p"),o=xe(r),hi(t,"color","red")},m(l,s){le(l,t,s),k(t,o)},p(l,s){s&1&&r!==(r=l[6].message+"")&&kt(o,r)},d(l){l&&fe(t)}}}function zf(e){da(e);let t,r,o,l=e[1],s=[];for(let c=0;c<l.length;c+=1)s[c]=ga(pa(e,l,c));return{c(){t=L("table"),r=L("tr"),r.innerHTML=`<td class="header"></td> 
      <td class="header"></td> 
      <td class="header">Username</td> 
      <td class="header">Kills</td>`,o=ke();for(let c=0;c<s.length;c+=1)s[c].c();b(r,"class","svelte-1p6satm"),b(t,"id","world-event-contrib-table"),b(t,"class","svelte-1p6satm")},m(c,G){le(c,t,G),k(t,r),k(t,o);for(let D=0;D<s.length;D+=1)s[D].m(t,null)},p(c,G){if(da(c),G&1){l=c[1];let D;for(D=0;D<l.length;D+=1){let q=pa(c,l,D);s[D]?s[D].p(q,G):(s[D]=ga(q),s[D].c(),s[D].m(t,null))}for(;D<s.length;D+=1)s[D].d(1);s.length=l.length}},d(c){c&&fe(t),di(s,c)}}}function ha(e){let t,r,o,l;return{c(){t=L("a"),r=L("img"),lr(r.src,o=te+"guilds/"+e[3].guild_id+"_mini.png")||b(r,"src",o),b(r,"alt","guild logo"),b(r,"class","svelte-1p6satm"),b(t,"href",l=""+(nr+e[3].guild_id))},m(s,c){le(s,t,c),k(t,r)},p(s,c){c&1&&!lr(r.src,o=te+"guilds/"+s[3].guild_id+"_mini.png")&&b(r,"src",o),c&1&&l!==(l=""+(nr+s[3].guild_id))&&b(t,"href",l)},d(s){s&&fe(t)}}}function ga(e){let t,r,o=e[5]+1+"",l,s,c,G,D,q,it=e[3].name+"",er,at,Hn,tr,lt=e[2]+"",rr,Tn,C=e[3].guild_id&&ha(e);return{c(){t=L("tr"),r=L("td"),l=xe(o),s=ke(),c=L("td"),C&&C.c(),G=ke(),D=L("td"),q=L("a"),er=xe(it),Hn=ke(),tr=L("td"),rr=xe(lt),Tn=ke(),b(q,"href",at=""+(ir+e[3].name)),b(t,"class","svelte-1p6satm")},m(H,pe){le(H,t,pe),k(t,r),k(r,l),k(t,s),k(t,c),C&&C.m(c,null),k(t,G),k(t,D),k(D,q),k(q,er),k(t,Hn),k(t,tr),k(tr,rr),k(t,Tn)},p(H,pe){H[3].guild_id?C?C.p(H,pe):(C=ha(H),C.c(),C.m(c,null)):C&&(C.d(1),C=null),pe&1&&it!==(it=H[3].name+"")&&kt(er,it),pe&1&&at!==(at=""+(ir+H[3].name))&&b(q,"href",at),pe&1&&lt!==(lt=H[2]+"")&&kt(rr,lt)},d(H){H&&fe(t),C&&C.d()}}}function Yf(e){let t;return{c(){t=xe("Loading...")},m(r,o){le(r,t,o)},p:xt,d(r){r&&fe(t)}}}function Qf(e){let t,r,o={ctx:e,current:null,token:null,hasCatch:!0,pending:Yf,then:zf,catch:Uf,value:2,error:6};return fr(r=e[0],o),{c(){t=pi(),o.block.c()},m(l,s){le(l,t,s),o.block.m(l,o.anchor=s),o.mount=()=>t.parentNode,o.anchor=t},p(l,[s]){e=l,o.ctx=e,s&1&&r!==(r=e[0])&&fr(r,o)||gi(o,e,s)},i:xt,o:xt,d(l){l&&fe(t),o.block.d(l),o.token=null,o=null}}}function Xf(e,t,r){let{promise:o}=t;return e.$$set=l=>{"promise"in l&&r(0,o=l.promise)},[o]}var Kr=class extends yi{constructor(t){super(),vi(this,t,Xf,Qf,mi,{promise:0})}},va=Kr;function qr(e){return xi({cmd:"globalquests",...e})}function Wr(){return qr({subcmd:"contrib"})}var Jf=({username:e,value:t})=>({player:{name:e},value:t});async function Ur(){return{r:(await ci({cmd:"toprated",subcmd:"eventcontrib"})).map(Jf)}}function zr(){return we(Wr,Ur)}var Yr=0,ya=()=>({promise:zr()});function jf(e){Yr?Yr.$set(ya()):Yr=new va({props:ya(),target:e})}function Zf(){let e=a("world-event-contrib");jf(e),$(e).dialog({title:"Top 100 Event Contributers",minWidth:300,height:300,zIndex:9999})}function Qr(){let e=$("#world-event-badge");!e.length||(e.off(),B(e[0],Zf))}function Da(e){$(`#actionList li.creature-${e.toString()} a.create-group`).hide()}function es(e){$.subscribe(ge,u(Da,e))}var ts=["hideChampionsGroup","hideElitesGroup","hideSEGroup","hideTitanGroup","hideLegendaryGroup"];function rs(e,t){h(e)&&(es(t+1),Da(t+1))}function Xr(){ts.forEach(rs)}function os(e){return e.response&&e.response.msg&&e.response.msg.startsWith("Creature did not exist at that location")}function ns(e){os(e)&&GameData.fetch(ct+E)}function is(e){e.remove()}function as(e,t){ns(t),gt(".creature-4 > .quickCombat > .verbs").forEach(is)}function Jr(){$.subscribe(ut,as)}function O(e){return!e||!e.response||!e.response.data}var xa='<table class="relicT relicS"><thead><tr><th colspan="2">Adjusted defense values</th></tr></thead><tbody><tr><td>DC225:</td><td id="DC225">0</td></tr><tr><td>DC175:</td><td id="DC175">0</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody><thead><tr><th colspan="2">Attacking Group Stats</th></tr></thead><tbody><tr><td>Raw Group Attack:</td><td class="fshGrey" id="GroupAttack"></td></tr><tr><td>Group Attack w/ buffs:</td><td id="GroupAttackBuffed"></td></tr><tr><td>Raw Group Defense:</td><td class="fshGrey" id="GroupDefense"></td></tr><tr><td>Group Defense w/ buffs:</td><td id="GroupDefenseBuffed"></td></tr><tr><td>Raw Group Armor:</td><td class="fshGrey" id="GroupArmor"></td></tr><tr><td>Group Armor w/ buffs:</td><td id="GroupArmorBuffed"></td></tr><tr><td>Raw Group Damage:</td><td class="fshGrey" id="GroupDamage"></td></tr><tr><td>Group Damage w/ buffs:</td><td id="GroupDamageBuffed"></td></tr><tr><td>Raw Group HP:</td><td class="fshGrey" id="GroupHP"></td></tr><tr><td>Group HP w/ buffs:</td><td id="GroupHPBuffed"></td></tr></tbody></table>',ka='<table class="relicT relicS"><thead><tr><th colspan="2">Defending Guild Stats</th></tr></thead><tbody><tr><td>Relic Count:</td><td id="relicCount">0</td></tr><tr><td>Lead Defender Bonus:</td><td id="LDPercentage">0</td></tr><tr><td>Lead Defender Cloaked:</td><td id="LDCloaked">No</td></tr></tbody><thead><tr><th colspan="2">Other Defender Stats</th></tr></thead><tbody><tr><td>Raw Attack:</td><td class="fshGrey" id="attackValue">0</td></tr><tr><td>Attack w/ buffs:</td><td id="attackValueBuffed">0</td></tr><tr><td>Raw Defense:</td><td class="fshGrey" id="defenseValue">0</td></tr><tr><td>Defense w/buffs:</td><td id="defenseValueBuffed">0</td></tr><tr><td>Raw Armor:</td><td class="fshGrey" id="armorValue">0</td></tr><tr><td>Armor w/ buffs:</td><td id="armorValueBuffed">0</td></tr><tr><td>Raw Damage:</td><td class="fshGrey" id="damageValue">0</td></tr><tr><td>Damage w/ buffs:</td><td id="damageValueBuffed">0</td></tr><tr><td>Raw HP:</td><td class="fshGrey" id="hpValue">0</td></tr><tr><td>HP w/ buffs:</td><td id="hpValueBuffed">0</td></tr><tr><td>Cloaked:</td><td id="defendersCloaked">0</td></tr><tr><td>Processed:</td><td id="defendersProcessed">0</td></tr></tbody></table>',wa='<table class="relicT"><thead><tr><th colspan="2">Processing</th></tr></thead><tbody><tr><td class="fshGreen" colspan="2" id="ProcessingStatus">Parsing defending guild stats ...</td></tr></tbody><thead><tr><th colspan="2">Assumptions</th></tr></thead><tbody><tr><td colspan="2" class="fshGrey">Above calculations include Constitution, Fortitude, Nightmare Visage, Chi Strike, Sanctuary, Terrorize and Flinch bonus calculations (in that order) on both the defending group and attacking group.</td></tr></tbody></table>';var K,Le,Se,Ee;function ls(e){return e.player_name}function fs(e){Ee=e.defenders.map(ls)}function ss(){K?w("",K):K=m({className:"body"})}function us(e){Le=m({className:"fshFloatLeft fshRelicLeftDiv"}),i(K,Le),e.is_owner&&i(Le,Ii(Ee)),Se=T({className:"custombutton",textContent:"Fetch Stats"}),i(Le,Se)}function Ca(e){fs(e),ss(),us(e);let t=a("dialog-relic");i(t,K)}var N,Ba,Aa,jr,Zr,eo,to,$t,ro,oo,no,io,ao,lo,fo,so,uo,co,mo,po,ho,go,vo,yo,Do,xo,ko,wo,Co,Bo,j,cs=[e=>e!=="lastUpdate",e=>!Ee.includes(e),e=>N[e].last_login,e=>Number(N[e].last_login)<Ba,e=>Number(N[e].last_login)>Aa,e=>N[e].level<400||N[e].level>421,e=>N[e].level<441||N[e].level>450];function ms(e,t){return t(e)}function ds(e){return cs.every(u(ms,e))}function ps(e){return`<a href="${Nn}${N[e].id}">${e}</a>`}function hs(e){N=e,Ba=ar-120,Aa=ar-604800;let t=li(N).filter(ds).map(ps);re(K,`<div class="fshFloatLeft fshRelicLowDiv"><table class="relicT"><thead><tr><th>${t.length.toString()} Offline guild members not at relic:</th></tr></thead><tbody><tr><td>${t.join(" ")}</td></tr></tbody></table></div>`)}function gs(){jr=a("relicCount"),Zr=a("LDPercentage"),eo=a("LDCloaked"),to=a("attackValue"),$t=a("attackValueBuffed"),ro=a("defenseValue"),oo=a("defenseValueBuffed"),no=a("armorValue"),io=a("armorValueBuffed"),ao=a("damageValue"),lo=a("damageValueBuffed"),fo=a("hpValue"),so=a("hpValueBuffed"),uo=a("defendersCloaked"),co=a("defendersProcessed")}function vs(){mo=a("DC225"),po=a("DC175"),ho=a("GroupAttack"),go=a("GroupAttackBuffed"),vo=a("GroupDefense"),yo=a("GroupDefenseBuffed"),Do=a("GroupArmor"),xo=a("GroupArmorBuffed"),ko=a("GroupDamage"),wo=a("GroupDamageBuffed"),Co=a("GroupHP"),Bo=a("GroupHPBuffed")}function ba(e){Bt(Se);let t=h("hideRelicOffline");e.is_owner&&!t&&Vi(!0).then(hs),re(Le,wa),j=a("ProcessingStatus");let r=m({className:"fshFloatLeft fshRelicMidDiv",innerHTML:ka});i(K,r),gs();let o=m({className:"fshFloatLeft fshRelicRightDiv",innerHTML:xa});i(K,o),vs()}var Rt;function ys(e){return e===1?1.5:Ae(1-e/10,2)}function La(e){let t=z(e),o=ni('#pCC img[src*="/relics/"]',t).length;f(o,jr),Rt=ys(o),f(`${String(Rt*100)}%`,Zr)}function It(e,t){return e>t*10||e<t?e:t*10}function Ds(e){e.attackValue=It(e.attackBonus,e.levelValue),e.defenseValue=It(e.defenseBonus,e.levelValue),e.armorValue=It(e.armorBonus,e.levelValue),e.damageValue=It(e.damageBonus,e.levelValue),e.hpValue=e.hpBonus}var xs=[["levelValue","level"],["attackValue","attack"],["attackBonus","bonus_attack"],["defenseValue","defense"],["defenseBonus","bonus_defense"],["armorValue","armor"],["armorBonus","bonus_armor"],["damageValue","damage"],["damageBonus","bonus_damage"],["hpValue","hp"],["hpBonus","bonus_hp"],["killStreakValue","killstreak"]];function ks(e,t,r){e[r[0]]=Number(t[r[1]])}function ws(e,t){xs.forEach(u(ks,e,t))}var Cs=[["counterAttackLevel","Counter Attack"],["doublerLevel","Doubler"],["deathDealerLevel","Death Dealer"],["darkCurseLevel","Dark Curse"],["holyFlameLevel","Holy Flame"],["constitutionLevel","Constitution"],["sanctuaryLevel","Sanctuary"],["flinchLevel","Flinch"],["nightmareVisageLevel","Nightmare Visage"],["superEliteSlayerLevel","Super Elite Slayer"],["fortitudeLevel","Fortitude"],["chiStrikeLevel","Chi Strike"],["terrorizeLevel","Terrorize"],["barricadeLevel","Barricade"],["reignOfTerrorLevel","Reign Of Terror"],["anchoredLevel","Anchored"],["severeConditionLevel","Severe Condition"],["entrenchLevel","Entrench"],["cloakLevel","Cloak"]];function Bs(e,t,r){e[r[0]]=t[r[1]]||0}function As(e,t){Cs.forEach(u(Bs,e,t))}function Me(e){if(!e)return;let t=Et(e._skills),r={};return ws(r,e),As(r,t),r.superEliteSlayerMultiplier=Ae(.002*r.superEliteSlayerLevel,2),si(r.armorValue)&&Ds(r),r}var Te,Pt,Ue,He,ze,_t,Ye,bo,Ao,A,v,de;function bs(){v.attack-=de.attack,v.defense-=de.defense,v.armor-=de.armor,v.damage-=de.damage,v.hp-=de.hp}function We(e){return Math.round(e*Rt)}function Ls(){Te+=We(A.attackValue),Ue+=We(A.defenseValue),He+=We(A.armorValue),ze+=We(A.damageValue),Ye+=We(A.hpValue)}function Ea(){d(Te,to),d(Ue,ro),d(He,no),d(ze,ao),d(Ye,fo),f(bo,uo),Ao+=1,f(Ao,co)}function Ss(){d(v.attack,ho),d(v.defense,vo),d(v.armor,Do),d(v.damage,ko),d(v.hp,Co)}function Es(e){return Math.ceil(v.attack*(U(e["Nightmare Visage"],0)*.0025))}function Ms(){let e=Math.ceil(v.attack*A.flinchLevel*.001);d(v.attack-e,go)}function Hs(e){return Math.ceil(v.defense*(1+U(e.Constitution,0)*.001))}function Ts(e,t){d(t+e,yo)}function Vs(e){d(v.armor+Math.floor(v.armor*U(e.Sanctuary,0)*.001),xo)}function Ns(e,t){return Math.ceil(t*U(e.Fortitude,0)*.001)}function Gs(e){d(v.hp+e,Bo)}function $s(e,t){let r=Math.ceil((v.hp+t)*U(e["Chi Strike"],0)*.001),o=Math.ceil(v.damage*A.terrorizeLevel*.001);d(v.damage+r-o,wo)}function Rs(e){let t=Es(e);v.attack-=t,Ms();let r=Hs(e);Ts(t,r),Vs(e);let o=Ns(e,r);Gs(o),$s(e,o)}function Is(e){let t=Math.ceil(Pt*U(e.Flinch,0)*.001);d(Pt-t,$t)}function Ps(e){let t=Math.ceil(_t*U(e.Terrorize,0)*.001);d(_t-t,lo)}function _s(){f("Processing attacking group stats ... ",j),de&&bs(),Ss();let e=Et(GameData.player().buffs);Rs(e),Is(e),Ps(e),f("Done.",j)}function Fs(){return Math.ceil(Te*(A.nightmareVisageLevel*.0025))}function Os(){return Math.ceil(Ue*(1+A.constitutionLevel*.001))}function Ks(e){Pt=Te-e,d(Pt,$t)}function Sa(e){return 1-e*mt}function qs(e,t){let r=t+e;d(r,oo),d(Math.ceil(r*Sa(225)),mo),d(Math.ceil(r*Sa(175)),po)}function Ws(){d(He+Math.floor(He*A.sanctuaryLevel*.001),io)}function Us(e){return Math.ceil(e*A.fortitudeLevel*.001)}function zs(e){_t=ze+Math.ceil(e*A.chiStrikeLevel*.001),d(_t)}function Ys(){A.cloakLevel!==0&&f("Yes",eo)}function Ma(){f("Processing defending guild stats ... ",j),Ls(),Ea();let e=Fs();Ks(e);let t=Os();qs(e,t),Ws();let r=Ye+Us(t);d(r,so),zs(r),Ys(),GameData.player().hasGroup&&v?_s():f("Done.",j)}function Ha(e){let t=Me(e);Te+=Math.round(t.attackValue*he),Ue+=Math.round(t.defenseValue*he),He+=Math.round(t.armorValue*he),ze+=Math.round(t.damageValue*he),Ye+=Math.round(t.hpValue*he),t.cloakLevel!==0&&(bo+=1),Ea()}function Ta(e){A=Me(e)}function Va(e){v=e}function Na(e){de=e}function Ga(){Te=0,Ue=0,He=0,ze=0,Ye=0,bo=0,Ao=0}var Qe;function Qs(e){f(e.message,j)}function Xs(e){return e.parentNode.parentNode.previousElementSibling.previousElementSibling.innerHTML.indexOf('"#000099"')!==-1}function Js(e){let t=e.previousElementSibling.href,r=[_i(t).then(Va)];return Xs(e)&&r.push(Fi().then(Na)),r}function js(e){let t=z(e),r=ye('#pCC a[href*="confirmDisband"]',t);if(!r)return;let o=Js(r);return ui(o)}function Zs(){return ie({cmd:"guild",subcmd:"groups"}).then(js)}function eu(){return ie({cmd:"guild",subcmd:"view",guild_id:Qe.controlled_by.guild_id}).then(La)}function tu(e,t){return t===0?ur(e).then(Ta):ur(e).then(Ha).catch(Qs)}function ru(){return Ee.map(tu)}function ou(){let e=[eu()];return GameData.player().hasGroup&&e.push(Zs()),e=e.concat(ru()),e}function nu(){ba(Qe),Ga();let e=ou();Lt(e,Ma)}function iu(e,t){O(t)||(Qe=t.response.data,Qe.defenders.length>0&&(Ca(Qe),Vn(Se,"click",nu)))}function Lo(){$.subscribe(Wn,iu)}function Xe(e){return ai({cache:!1,url:"fetchdata.php",data:{...e,fshrnd:Ni()},dataType:"json"})}var $a=[];function au(e){return O(e)||$a.push(e),e}function lu(e,t){return e===Number(t.response.data.id)}function fu(e,t){e(t)}function su(e){return new Promise(t=>{ri(3,fu,[t,e])})}function Je(e,t){let r=$a.find(u(lu,e));return r?su(r):Xe({a:1,id:e,passback:t}).then(au)}function So(e,t){return e.every(r=>ne(r,t))}var Ft,Eo,Mo,Ho,To,Vo;function je(e,t){return fi(De(t,e))}function uu(e){Mo=je(e,Xn),Eo=je(e,Qn),To=je(e,jn),Ho=je(e,Jn),Vo=je(e,Zn)}function Ra(){Ft=GameData.player().level,uu(a("statbar-character-tooltip-stats"))}function cu(e){return`<table><tr><td><img src="${te}creatures/${e.image_id}.png" height="200" width="200"></td><td rowspan="2"><table width="400"><tr><td class="header" colspan="4" class="fshCenter">Statistics</td></tr>`}function mu(e,t){return`<tr><td>Class:&nbsp;</td><td width="40%">${e.creature_class}</td><td>Level:&nbsp;</td><td width="40%">${e.level} (your level:<span class="${t}">${Ft}</span>)</td></tr>`}function du(e){return`<tr><td>Attack:&nbsp;</td><td width="40%">${e.attack} (your defense:<span class="fshYellow">${Eo}</span>)</td><td>Defense:&nbsp;</td><td width="40%">${e.defense} (your attack:<span class="fshYellow">${Mo}</span>)</td></tr>`}function pu(e){return`<tr><td>Armor:&nbsp;</td><td width="40%">${e.armor} (your damage:<span class="fshYellow">${Ho}</span>)</td><td>Damage:&nbsp;</td><td width="40%">${e.damage} (your armor:<span class="fshYellow">${To}</span>)</td></tr>`}function hu(e,t){return`<tr><td>HP:&nbsp;</td><td width="40%">${e.hp} (your HP:<span class="fshYellow">${Vo}</span>)(1H: <span class="fshRed">${t}</span>)</td><td>Gold:&nbsp;</td><td width="40%">${e.gold}</td></tr>`}var gu='<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Enhancements</td></tr>';function vu(e){return`<tr><td colspan="2">${e.name}:</td><td colspan="2">${e.value}</td></tr>`}function yu(e){return e.enhancements.length===0?'<tr><td colspan="4">[no enhancements]</td></tr>':e.enhancements.map(vu).join("")}function Du(e){return`<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Description</td></tr><tr><td colspan="4">${e.description}</td></tr><tr><td colspan="4" height="5"></td></tr></table></td></tr><tr><td class="fshCenter"><b>${e.name}</b></td></tr></table>`}function xu(e,t,r){return cu(e)+mu(e,r)+du(e)+pu(e)+hu(e,t)+gu+yu(e)+Du(e)}function ku(e){let t=Math.ceil(e.hp*n.hpVariable+e.armor*n.generalVariable),r="fshYellow";return Ra(),Ft>e.level&&(r="fshRed"),xu(e,t,r)}function No(e){if(!O(e))return ku(e.response.data)}var wu=["verb","view","tip-static"];function Cu(e,t){$(e).qtip({overwrite:!0,show:{event:"mouseover",ready:!0},style:{classes:"qtip-tipsy qtip-custom"},position:{my:"center right",at:"center left",effect:!1,viewport:$(window)},content:{text:t},hide:{effect:!1}})}function Bu(e){return ht(e.parentNode.children).indexOf(e)}function Au(e,t){let r=No(t);e.set("content.text",r)}function bu(e,t,r){return Je(GameData.actions()[e].data.id,e).then(u(Au,r)),"Loading..."}function Lu(e,t){Ce("NewMap","CreatureInfo");let r=Bu(t);e.classList.add("fshTip"),Cu(e,u(bu,r))}function Su(e,t){return So(wu,e)&&!ne("fshTip",e)&&ne("creature",t)}function Eu(e){if(!n.showCreatureInfo)return;let{target:t}=e,r=t.parentNode.parentNode.parentNode;Su(t,r)&&Lu(t,r)}function Go(){R(a("actionList"),"mouseover",Eu)}var M;function Mu(e,t){t.creature_class=e.creature_class,t.image_id=e.image_id,t.level=Number(e.level),t.type=e.type}function Hu(e){M[e.name]?M[e.name].seen&&(M[e.name].seen+=1):(M[e.name]={seen:1},Mu(e,M[e.name]))}function Ia(e,t,r){return t?e(t,r):r}function Pa(e,t){let r=e||{};return r.min=Ia(Math.min,r.min,t),r.max=Ia(Math.max,r.max,t),r}var Tu=["attack","armor","damage","defense","hp"];function Vu(e,t){return!e||e.min!==t.min||e.max!==t.max}function Nu(e,t,r){let o=Pa(t[r],Number(e[r]));Vu(t[r],o)&&(t[r]=o)}function Gu(e,t){Tu.forEach(u(Nu,e,t))}function $u(e){return e.enhancements&&e.enhancements.length>0}function Ru(e,t){e[t.name]=Pa(e[t.name],Number(t.value))}function Iu(e,t){$u(e)&&(t.enhancements=t.enhancements||{},e.enhancements.forEach(u(Ru,t.enhancements)))}function Pu(e){M||(M={}),Hu(e),Gu(e,M[e.name]),Iu(e,M[e.name]),yt("fsh_monsterLog",M)}function _a(e){n.showMonsterLog&&Pu(e)}function _u(e){M=e||{}}function Fa(){vt("fsh_monsterLog").then(_u)}var Oa=[];function Fu(e){O(e)||(Ce("NewMap","MonsterLog"),_a(e.response.data))}function Ou(e,t){return e.id===t.id}function Ku(e){if(Oa.find(u(Ou,e.data)))return!0;Oa.push(e.data)}function qu(e,t){e.type!==6||Ku(e)||Je(e.data.id,t).then(Fu)}function Ka(){n.showMonsterLog&&GameData.actions().forEach(qu)}function $o(){Fa(),$.subscribe("-1-success.action-response 4-success.action-response 5-success.action-response 25-success.action-response",Ka),Ka()}function Ro(){return bi({subcmd:"scouttower"})}function Wu(e){let t=e.split(/[: /[]/);return new Date(Number(t[4]),ft.indexOf(t[3]),Number(t[2]),Number(t[0]),Number(t[1]))}function Uu(e){let t=oe(e[1]);return t==="No active cooldown"?0:Math.ceil((Wu(t.slice(16))-pt)/1e3)}function zu(e){let[t]=e[0].cells[0].children;return{base_id:Number(t.src.split("/").slice(-1)[0].slice(0,-36)),name:t.title}}function Yu(e){return{cooldown:Uu(e),creature:zu(e),kills:Number(oe(e[0].cells[3]))}}function Qu(e){let t=oe(e[0].cells[1]);if(t!=="n/a"){let r=oe(e[0].cells[2]).split("/");return{realm:t,current_hp:Number(r[0]),max_hp:Number(r[1])}}}function Xu(e){let t=e[2].cells[0].children;if(t.length===1)return{contributors:Ei(t[0],3,0).map(o=>({kills:Number(oe(o.cells[1])),player:{name:oe(o.cells[0])}}))}}function Ju(e){return{...Yu(e),...Qu(e),...Xu(e)}}function ju(e){let t=z(e),r=ye('table[width="500"]',t);if(!r)return{s:!1};let o=ht(r.rows).filter((s,c,G)=>c!==0&&c<G.length-1&&(c-1)%6<3);return{r:Ri(3,o).map(Ju),s:!0}}function Io(){return ie({cmd:"guild",subcmd:"scouttower"}).then(ju)}function Po(){return we(Ro,Io)}function Zu(e,[t,r,o]){let l=e.insertCell(-1);return l.colSpan=t,o&&(l.className="header"),i(l,r),l}function ec(e,t){t.forEach(u(Zu,e))}function tc(e,t,r){let o=e.insertRow(-1);return r&&(o.className="fshBlue"),ec(o,t),o}function rc(e,t){tc(e,t[0],t[1])}function Ze(e,t){t.forEach(u(rc,e))}var _o;function qa(e){_o=e}var Fo,Oo,Ko,qo,Wo,Uo,zo,Yo;function oc(){Fo=x("Current"),Oo=x("Kills"),Ko=x("Member"),qo=x("% of Total")}function nc(){Wo=x("Status"),Uo=x("Titan HP"),zo=x("Total"),Yo=x("Your Guild")}function Wa(){oc(),nc()}var Ve,Ne,Ge,$e,Re,Ie,Pe,_e,Fe;function ic(){Ve=p({innerHTML:"&nbsp;"}),Ne=p({innerHTML:"&nbsp;"}),Ge=p(),$e=p()}function ac(){Re=p(),Ie=p(),Pe=p(),_e=p(),Fe=p()}function Ua(){ic(),ac()}function za(){w("&nbsp;",Ve),w("&nbsp;",Ne),f("",Ge),f("",$e),f("",Re),f("",Ie),f("",Pe),w("",_e),w("",Fe)}var Z;function Ot(){for(;Z.rows.length>8;)Z.deleteRow(8)}function lc(){let e=p();return i(e,Ge),P(e,"/"),i(e,$e),e}function Ya(e){let t=p();return i(t,e),P(t,"%"),t}function Qa(){Z=Gi({className:"fshCenter"}),Wa(),Ze(Z,[[[[5,Ve,!0],[1,Ne,!0]]],[[[2,Uo,!0],[4,Yo,!0]]],[[[2,lc()],[4,Re]]],[[[2,Fo,!0],[4,Ya(Ie)]],!0],[[[2,zo,!0],[4,Ya(Pe)]],!0],[[[2,Wo,!0],[4,_e]],!0],[[[6,Fe]]],[[[2,Ko,!0],[2,Oo,!0],[2,qo,!0]]]])}var ee,Kt,Qo;function Xo(){Kt=null,ee&&!ne("fshHide",ee)&&(g(ee,!0),za(),Ot())}function Xa(e){return e.type===0?(Kt=e.base_creature_id,Qo=`(${e.x},${e.y})`,!0):!1}function Ja(){if(ee)g(ee,!1);else{let e=a("actionContainer");ee=m({className:"fshActionBox titanInfo"}),Ua(),Qa(),i(ee,Z),i(e,ee)}}function fc(e){let t=new Date(pt+e*1e3);return`${bt(t.getHours())}:${bt(t.getMinutes())} ${bt(t.getDate())}/${ft[t.getMonth()]}/${t.getFullYear()}`}function sc(e){return e<=0?'<span class="fshGreen cooldown">No active cooldown</span>':`<span class="fshMaroon cooldown">Cooldown until: ${fc(e)}</span>`}function uc(e){return St(qi(e.max_hp-e.current_hp,e.kills),2)}function cc(e){return St(e.kills*100/e.max_hp,2)}function mc(e){return Wi(e.kills,e.max_hp,e.current_hp)}function dc(e){e.forEach(([t,r])=>{f(t,r)})}function pc(e){dc([[Ui(e.creature.name),Ve],[Qo,Ne],[e.current_hp,Ge],[e.max_hp,$e],[e.kills,Re],[uc(e),Ie],[cc(e),Pe]]),w(mc(e),_e),w(sc(e.cooldown),Fe)}function hc(e,t){return[[[2,x(t.player.name)],[2,x(t.kills.toString())],[2,x(`${St(t.kills*100/e.kills,2)}%`)]]]}function gc(e){if(Ot(),!e.contributors)return;let t=e.contributors.map(u(hc,e));Ze(Z,t)}function vc(e){return e.realm&&e.creature.base_id===Kt&&e.realm===_o}function Jo(e){let t=e.find(vc);t&&(pc(t),gc(t))}var qt;function yc(){qt&&(window.clearTimeout(qt),qt=null)}function Dc(e){return e&&e.s&&I(e.r)}function ja(e){return n.showTitanInfo&&I(e)&&e.some(Xa)}function xc(e,t){!Dc(t)||(Jo(t.r),ja(GameData.realm().dynamic)?qt=window.setTimeout(e,3e4):Xo())}function Za(){Po().then(u(xc,Za))}function el(e){yc(),ja(e)?(Ja(),Za()):Xo()}function tl(e){e.dynamic&&(qa(e.name),el(e.dynamic))}function rl(){n.showTitanInfo=!n.showTitanInfo,y("showTitanInfo",n.showTitanInfo),el(GameData.realm().dynamic)}function kc(e){return e.realm&&e.realm.name}function ol(e,t){kc(t)&&tl(t.realm)}function jo(){window.initialGameData&&ol(null,window.initialGameData),$.subscribe(`${Kn} ${Un}`,ol)}function wc(e,t){t==="ACT_REPAIR"&&GameData.fetch(Yn+W+ct+E)}function Zo(){$.subscribe(Fn,wc)}var en;function nl(e){$("#statbar-gold").css("background-color",e)}function il(){$("#HelperSendTotal").html(Y(h("currentGoldSentTotal"))),Number(GameData.player().gold)>en?nl("red"):nl("inherit")}function Cc(){return`<dt class="stat-gold-sendTo">Send To:</dt><dd id="HelperSendTo">${h("goldRecipient")}</dd><dt class="stat-gold-sendAmt">Amount:</dt><dd id="HelperSendAmt">${Y(en)}</dd><dt class="stat-gold-sendTo">Send?</dt><dd><input id="HelperSendGold" value="Send!" class="custombutton" type="submit"><input type="hidden" id="xc" value=""</dd><dt class="stat-gold-sendTotal">Total Sent:</dt><dd id="HelperSendTotal">${Y(h("currentGoldSentTotal"))}</dd>`}function Bc(){en=h("goldAmount"),$("#statbar-gold-tooltip-general").append(Cc()),$("#HelperSendGold").on("click",Ti),il(),$.subscribe(Pn,il)}function tn(){Hi(),Mi&&Bc()}var et,tt,Wt,Oe,on,rn,Ut;function Ac(){return Xe({a:14,d:0,id:et.id,item_id:et.itemId})}function bc(e){let t=e.response.response,r=e.response.msg,o;if(t!==0){let l=r.indexOf("<");l!==-1?o=r.substring(0,l):o=r}else o=`You purchased ${e.response.data.name} for ${Y(e.response.data.cost)} gold.`;re(Ut,`${o}<br>`)}function Lc(){GameData.doAction(14,3,{id:et.id,item_id:et.itemId},0),Wt.close()}function Sc(){let e=$i(on.value);if(!e)return;let t=[];for(let r=1;r<e;r+=1)t.push(Ac().then(bc));Lt(t,Lc)}function Ec(){Oe=m({className:"fshClear",textContent:"Select how many to quick-buy:"}),on=wt({id:"buyAmount",className:"fshNumberInput",min:1,max:99,value:1,type:"number"}),i(Oe,on),rn=T({textContent:"Quick-buy"}),B(rn,Sc),i(Oe,rn),Ut=m(),i(Oe,Ut),i(tt,Oe)}function Mc(){return tt||a("shopDialogConfirm")}function Hc(){return Wt||$(tt).data("hcsWorldDialogShopConfirm")}function Tc(){Oe?f("",Ut):Ec()}function Vc(e,t){et=t,tt=Mc(),tt&&(Wt=Hc(),Wt&&Tc())}function nn(){$.subscribe(_n,Vc)}function Nc(e){let t=z(e),r=Pi(t);return{r:{attributes:[{value:r.attack},{value:r.defense},{value:r.armor},{value:r.damage},{value:r.hp}]}}}function an(e){return ie({cmd:"guild",subcmd:"groups",subcmd2:"viewstats",group_id:e}).then(Nc)}function ln(e){return Li({subcmd2:"viewstats",group_id:e})}function fn(e){return we(ln,an,e)}function al(e){return e.numberOfCreatureHitsTillDead-e.numberOfHitsRequired<=1?", dies on miss":", survives a miss"}function Gc(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired>e.numberOfCreatureHitsTillDead}function $c(e){return e.numberOfCreatureHitsTillDead==="-"?e.numberOfHitsRequired:Gc(e)?"-":e.numberOfHitsRequired}function Rc(e){return e.numberOfCreatureHitsTillDead==="-"||e.numberOfCreatureHitsTillDead>e.numberOfHitsRequired}function Ic(e){return e.numberOfHitsRequired==="-"?e.numberOfCreatureHitsTillDead:Rc(e)?"-":e.numberOfCreatureHitsTillDead}var Pc=[[e=>e.playerHits==="-"&&e.creatureHits==="-",()=>"Unresolved"],[e=>e.playerHits==="-",()=>"Player dies"],[e=>e.playerHits===1,e=>`Player 1 hits${al(e)}`],[e=>e.playerHits>1,e=>`Player > 1 hits${al(e)}`]];function _c(e,t){return t[0](e)}function Fc(e){let t=Pc.find(u(_c,e));return t?t[1](e):"Unknown"}function sn(e){e.playerHits=$c(e),e.creatureHits=Ic(e),e.fightStatus=Fc(e)}function Oc(e){return e.callback.groupExists?e.callback.groupArmorValue:e.player.armorValue}function Kc(e){let t=Oc(e);e.overallArmorValue=t+Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}function qc(e){e.player.sanctuaryLevel>0&&(e.extraNotes+=`Sanc Bonus Armor = ${Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}<br>`)}function Wc(e){e.terrorizeEffect=Math.floor(e.creature.damage*e.player.terrorizeLevel*.001)}function Uc(e){e.player.terrorizeLevel>0&&(e.extraNotes+=`Terrorize Creature Damage Effect = ${e.terrorizeEffect*-1}<br>`)}function zc(e){e.creatureDamageDone=Math.ceil(e.generalVariable*e.creature.damage-e.overallArmorValue+e.overallHPValue)}function Yc(e){let t=e.generalVariable*e.creature.damage;t<e.overallArmorValue?e.numberOfCreatureHitsTillDead=e.overallHPValue:e.numberOfCreatureHitsTillDead=Math.ceil(e.overallHPValue/(t-e.overallArmorValue))}function Qc(e){e.creatureHitByHowMuch>=0?Yc(e):e.numberOfCreatureHitsTillDead="-"}function un(e){Kc(e),qc(e),Wc(e),Uc(e),e.creature.damage-=e.terrorizeEffect,zc(e),Qc(e)}function Xc(e){return e.callback.groupExists?e.callback.groupAttackValue:e.player.attackValue}function ll(e){return Math.floor(e.creature.defense*e.player.darkCurseLevel*mt)}function Jc(e){let t=e.creature.defense-ll(e);return e.combatEvaluatorBias===3?e.overallAttackValue-Math.ceil(t)-50:e.overallAttackValue-Math.ceil(e.attackVariable*t)}function cn(e){let t=Xc(e);e.player.darkCurseLevel>0&&(e.extraNotes+=`DC Bonus Attack = ${ll(e)}<br>`),e.nightmareVisageAttackMovedToDefense=Math.floor((t+e.counterAttackBonusAttack)*e.player.nightmareVisageLevel*.0025),e.player.nightmareVisageLevel>0&&(e.extraNotes+=`NMV Attack moved to Defense = ${e.nightmareVisageAttackMovedToDefense}<br>`),e.overallAttackValue=t+e.counterAttackBonusAttack-e.nightmareVisageAttackMovedToDefense,e.hitByHowMuch=Jc(e)}function jc(e){return e.player.counterAttackLevel>0&&e.numberOfHitsRequired===1}function fl(e){e.lowestCALevelToStillHit=Math.max(Math.ceil((e.counterAttackBonusAttack-e.hitByHowMuch+1)/e.player.attackValue/.0025),0),e.lowestCALevelToStillKill=Math.max(Math.ceil((e.counterAttackBonusDamage-e.damageDone+1)/e.player.damageValue/.0025),0)}function Zc(e){return e.player.counterAttackLevel>0?Math.ceil((1+e.player.doublerLevel/50)*.0025*e.lowestFeasibleCALevel):0}function em(e){e.extraAttackAtLowestFeasibleCALevel=Math.floor(e.player.attackValue*.0025*e.lowestFeasibleCALevel),e.extraDamageAtLowestFeasibleCALevel=Math.floor(e.player.damageValue*.0025*e.lowestFeasibleCALevel),e.extraNotes+=`Extra CA Att/Dam at this lowered CA level = ${e.extraAttackAtLowestFeasibleCALevel} / ${e.extraDamageAtLowestFeasibleCALevel}<br>`}function tm(e){fl(e),e.lowestFeasibleCALevel=Math.max(e.lowestCALevelToStillHit,e.lowestCALevelToStillKill),e.extraNotes+=`Lowest CA to still 1-hit this creature = ${e.lowestFeasibleCALevel}<br>`,e.lowestFeasibleCALevel!==0&&em(e),e.extraStaminaPerHitAtLowestFeasibleCALevel=Zc(e),e.extraStaminaPerHitAtLowestFeasibleCALevel<e.extraStaminaPerHit?e.extraNotes+=`Extra Stam Used at this lowered CA level = ${e.extraStaminaPerHitAtLowestFeasibleCALevel}<br>`:e.extraNotes+="No reduction of stam used at the lower CA level<br>"}function rm(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired!==1}function om(e){e.lowestCALevelToStillHit>175?e.extraNotes+="Even with CA175 you cannot hit this creature<br>":e.lowestCALevelToStillHit!==0&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillHit} to hit this creature<br>`)}function nm(e){e.lowestCALevelToStillKill>175?e.extraNotes+="Even with CA175 you cannot 1-hit kill this creature<br>":e.lowestCALevelToStillKill!==0&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillKill} to 1-hit kill this creature<br>`)}function im(e){fl(e),om(e),nm(e)}function mn(e){jc(e)&&tm(e),rm(e)&&im(e)}function am(e){return e.callback.groupExists?e.callback.groupHPValue:e.player.hpValue}function lm(e){return e.callback.groupExists?e.callback.groupDamageValue:e.player.damageValue}function fm(e){let t=am(e),{fortitudeLevel:r}=e.player;e.fortitudeExtraHPs=Math.floor(t*r*.001),r>0&&(e.extraNotes+=`Fortitude Bonus HP = ${e.fortitudeExtraHPs}<br>`),e.overallHPValue=t+e.fortitudeExtraHPs}function sm(e){let{chiStrikeLevel:t}=e.player;e.chiStrikeExtraDamage=Math.floor(e.overallHPValue*t*.001),t>0&&(e.extraNotes+=`Chi Strike Bonus Damage = ${e.chiStrikeExtraDamage}<br>`)}function dn(e){fm(e),sm(e);let t=lm(e);if(e.overallDamageValue=t+e.deathDealerBonusDamage+e.counterAttackBonusDamage+e.holyFlameBonusDamage+e.chiStrikeExtraDamage,e.damageDone=Math.floor(e.overallDamageValue-(e.generalVariable*e.creature.armor+e.hpVariable*e.creature.hp)),e.hitByHowMuch>0){let r=1;e.overallDamageValue>=e.generalVariable*e.creature.armor&&(r=e.overallDamageValue-e.generalVariable*e.creature.armor),e.numberOfHitsRequired=Math.ceil(e.hpVariable*e.creature.hp/r)}else e.numberOfHitsRequired="-"}function pn(e){return e.callback.groupExists?e.callback.groupDefenseValue:e.player.defenseValue}function um(e){e.player.constitutionLevel>0&&(e.extraNotes+=`Constitution Bonus Defense = ${Math.floor(pn(e)*e.player.constitutionLevel*.001)}<br>`)}function cm(e){e.player.flinchLevel>0&&(e.extraNotes+=`Flinch Bonus Attack Reduction = ${Math.floor(e.creature.attack*e.player.flinchLevel*.001)}<br>`)}function hn(e){e.overallDefenseValue=pn(e)+Math.floor(pn(e)*e.player.constitutionLevel*.001)+e.nightmareVisageAttackMovedToDefense,um(e),cm(e),e.creatureHitByHowMuch=Math.floor(e.attackVariable*e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue),e.combatEvaluatorBias===3&&(e.creatureHitByHowMuch=Math.floor(e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue-50))}function mm(e){e.player.superEliteSlayerLevel>0&&(e.extraNotes+=`SES Stat Reduction Multiplier = ${e.player.superEliteSlayerMultiplier}<br>`)}function dm(e){e.holyFlameBonusDamage=0,e.creature.class==="Undead"&&(e.holyFlameBonusDamage=Math.max(Math.floor((e.player.damageValue-e.creature.armor)*e.player.holyFlameLevel*.002),0),e.player.holyFlameLevel>0&&(e.extraNotes+=`HF Bonus Damage = ${e.holyFlameBonusDamage}<br>`))}function pm(e){e.deathDealerBonusDamage=Math.floor(e.player.damageValue*(Math.min(Math.floor(e.player.killStreakValue/5)*.01*e.player.deathDealerLevel,20)/100))}function hm(e){e.counterAttackBonusAttack=Math.floor(e.player.attackValue*.0025*e.player.counterAttackLevel),e.counterAttackBonusDamage=Math.floor(e.player.damageValue*.0025*e.player.counterAttackLevel)}function gm(e){e.extraStaminaPerHit=0,e.player.counterAttackLevel>0&&(e.extraStaminaPerHit=Math.ceil((1+e.player.doublerLevel/50)*.0025*e.player.counterAttackLevel))}function vm(e){e.player.deathDealerLevel>0&&(e.extraNotes+=`DD Bonus Damage = ${e.deathDealerBonusDamage}<br>`)}function ym(e){e.player.counterAttackLevel>0&&(e.extraNotes+=`CA Bonus Attack/Damage = ${e.counterAttackBonusAttack} / ${e.counterAttackBonusDamage}<br>CA Extra Stam Used = ${e.extraStaminaPerHit}<br>`)}function gn(e){e.extraNotes="",mm(e),dm(e),pm(e),hm(e),gm(e),vm(e),ym(e)}function Dm(e){return e.callback.groupExists?"Group ":""}function xm(e){return`<tr><td bgcolor="#CD9E4B" colspan="4" align="center">${Dm(e)}Combat Evaluation</td></tr>`}function km(e){return e.hitByHowMuch>0?"Yes":"No"}function wm(e){return`<tr><td align="right"><span style="color:#333333">Will I hit it? </td><td align="left">${km(e)}</td><td align="right"><span style="color:#333333">Extra Attack: </td><td align="left">( ${e.hitByHowMuch} )</td></tr>`}function Cm(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill it? </td><td align="left">${e.numberOfHitsRequired}</td><td align="right"><span style="color:#333333">Extra Damage: </td><td align="left">( ${e.damageDone} )</td></tr>`}function Bm(e){return e.creatureHitByHowMuch>=0?"Yes":"No"}function Am(e){return`<tr><td align="right"><span style="color:#333333">Will I be hit? </td><td align="left">${Bm(e)}</td><td align="right"><span style="color:#333333">Extra Defense: </td><td align="left">( ${-1*e.creatureHitByHowMuch} )</td></tr>`}function bm(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill me? </td><td align="left">${e.numberOfCreatureHitsTillDead}</td><td align="right"><span style="color:#333333">Extra Armor + HP: </td><td align="left">( ${-1*e.creatureDamageDone} )</td></tr>`}function Lm(e){return`<tr><td align="right"><span style="color:#333333"># Player Hits? </td><td align="left">${e.playerHits}</td><td align="right"><span style="color:#333333"># Creature Hits? </td><td align="left">${e.creatureHits}</td></tr>`}function Sm(e){return`<tr><td align="right"><span style="color:#333333">Fight Status: </span></td><td align="left" colspan="3"><span>${e.fightStatus}</span></td></tr>`}function Em(e){return`<tr><td align="right"><span style="color:#333333">Notes: </span></td><td align="left" colspan="3"><span style="font-size:x-small;">${e.extraNotes}</span></td></tr>`}function vn(e){return`<table width="100%"><tbody>${xm(e)}${wm(e)}${Cm(e)}${Am(e)}${bm(e)}${Lm(e)}${Sm(e)}${Em(e)}</tbody></table>`}var zt,Yt,rt;function Mm(e){if(!zt){let t=De("body",e);t.length===1&&([zt]=t)}}function sl(){return me(Yt)?"Remove from do not kill list":"Add to the do not kill list"}function ul(){f(sl(),rt)}function Hm(){let e=n.doNotKillList.indexOf(Yt);e===-1?n.doNotKillList.push(Yt):n.doNotKillList.splice(e,1),ul(),y("doNotKillList",n.doNotKillList.join()),be()}function Tm(){rt=T({className:"fshBl",textContent:sl(),type:"button"});let e=m({className:"description",innerHTML:'<span class="ui-helper-hidden-accessible"><input type="text"></span>'});i(e,rt),i(zt,e),B(rt,Hm)}function Vm(){rt?ul():Tm()}function yn(e,t){Mm(t),zt&&(Yt=ve(e),Vm())}var Ke,ot,Qt,Xt;function Nm(){Ke||(Ke=a("dialog-viewcreature"))}function Gm(){ot||(ot=m(),i(Ke,ot),i(Ke,m({innerHTML:'<span class="fshFooter">*Does include CA, DD, HF, DC, Flinch, Super Elite Slayer, NMV, Sanctuary, Constitution, Fortitude, Chi Strike and Terrorize (if active) and allow for randomness (1.1053). Constitution, NMV, Fortitude and Chi Strike apply to group stats.</span>'})))}function cl(){Qt||(Gm(),Qt=m(),i(ot,Qt))}function $m(){Xt||(cl(),Xt=m(),i(ot,Xt))}function ml(e){cl(),w(e,Qt)}function dl(e){$m(),w(e,Xt)}function Rm(e,t,r){r===3&&(t.attack-=Math.ceil(t.attack*e),t.defense-=Math.ceil(t.defense*e),t.armor-=Math.ceil(t.armor*e),t.damage-=Math.ceil(t.damage*e),t.hp-=Math.ceil(t.hp*e))}function Im(e,t){let r={name:e.name,class:e.creature_class,attack:Number(e.attack),defense:Number(e.defense),armor:Number(e.armor),damage:Number(e.damage),hp:Number(e.hp)};return Rm(t,r,e.type),r}function Pm(e){e.combatEvaluatorBias=n.combatEvaluatorBias,e.attackVariable=1.1053,e.generalVariable=n.generalVariable,e.hpVariable=n.hpVariable}function _m(e){gn(e),cn(e),dn(e),hn(e),un(e),sn(e),mn(e)}function pl(e,t,r){let o={};o.callback=r,o.player=Me(t),Pm(o),o.creature=Im(e.response.data,o.player.superEliteSlayerMultiplier),_m(o),o.evaluatorHTML=vn(o),r.groupExists?dl(o.evaluatorHTML):ml(o.evaluatorHTML)}function Fm(e){return e.members[0].name===Dt()}function Om(e){if(I(e.r))return e.r.find(Fm).id}function Km(e,t,r){if(!r.r||!r.r.attributes)return;let o=r.r.attributes;pl(e,t,{groupExists:!0,groupAttackValue:o[0].value,groupDefenseValue:o[1].value,groupArmorValue:o[2].value,groupDamageValue:o[3].value,groupHPValue:o[4].value})}function qm(e,t,r){r&&fn(r).then(u(Km,e,t))}function Wm(e,t){Si().then(Om).then(u(qm,e,t))}function Um(e,t){e.player.hasGroup&&Wm(e,t),pl(e,t,{groupExists:!1})}function zm(e){return e.response&&e.response.data}function Ym(e,t){Nm(),Ke&&(ml(""),dl(""),zm(t)&&(yn(t.response.data.name,Ke),Ci(!0).then(u(Um,t))))}function Dn(){$.subscribe(qn,Ym)}var Jt,xn;function jt(){let e=[null,[n.buffs,n.buffsName],[n.buffs2,n.buffs2Name],[n.buffs3,n.buffs3Name]][n.enabledHuntingMode];I(e)&&([Jt,xn]=e)}function kn(e){e.target.name==="enabledHuntingMode"&&(n.enabledHuntingMode=e.target.value,y("enabledHuntingMode",n.enabledHuntingMode),jt(),GameData.fetch(W))}var nt;function gl(){nt=!nt,y("hidePlayerActions",nt),GameData.fetch(E)}function Qm(e){let t=De("verbs",e);t.length===1&&Bt(t[0])}function hl(){if(!nt)return;let e=a("actionList");Ct("player",e).forEach(Qm)}function vl(){nt=h("hidePlayerActions"),$.subscribe(ge,hl),hl()}function wn(){n.showCreatureInfo=!n.showCreatureInfo,y("showCreatureInfo",n.showCreatureInfo)}function Cn(){n.showBuffs=!n.showBuffs,y("showHuntingBuffs",n.showBuffs),GameData.fetch(W)}function Bn(){n.showMonsterLog=!n.showMonsterLog,y("showMonsterLog",n.showMonsterLog)}function An(){n.hideSubLvlCreature=!n.hideSubLvlCreature,y("hideSubLvlCreature",n.hideSubLvlCreature),GameData.fetch(E)}function Xm(){return m({id:"fshWorldPrefs",innerHTML:`${ae("showCreatureInfo")}&nbsp;&nbsp;${ae("showMonsterLog")}&nbsp;&nbsp;${ae("showTitanInfo")}&nbsp;&nbsp;${ae("showBuffInfo")}<br>${ae("hideSubLvlCreature")}&nbsp;&nbsp;${ae("hidePlayerActions")}&nbsp;&nbsp;${Xi()}`})}var Jm={hideSubLvlCreature:An,hidePlayerActions:gl,showCreatureInfo:wn,showHuntingBuffs:Cn,showMonsterLog:Bn,showTitanInfo:rl,showBuffInfo:ra};function jm(e){let t=Jm[e.target.name];dt(t)&&(e.target.blur(),t(e))}function bn(){let e=m({className:"fshCenter fshFten"}),t=Xm();B(t,jm),R(t,"change",kn),i(e,t);let r=m();i(e,r);let o=a("worldContainerBelow").children[0];return At(e,o),r}function Zm(e,t){return e[t.name]=!0,e}function ed(e,t,r){return e[ve(r)]||t.push(r),t}function td(e,t){w(`You are missing some ${xn} hunting buffs<br>(${t.join(", ")})`,e)}function yl(e){w("",e)}function rd(e,t){let r=t.b.reduce(Zm,{}),o=Jt.reduce(u(ed,r),[]);o.length>0?td(e,o):yl(e)}function od(e,t,r){n.showBuffs?rd(e,r):yl(e)}function nd(e,t,r){Jt&&od(e,t,r)}function Ln(e){jt();let t=u(nd,e);$.subscribe(st,t),n.showBuffs&&window.initialGameData&&t(null,{b:window.initialGameData.player.buffs})}var Zt=[{generalVariable:1.1053,hpVariable:1.1},{generalVariable:1.1,hpVariable:1.053},{generalVariable:1.053,hpVariable:1},{generalVariable:1.1053,hpVariable:1}];function id(e){return Zt[e]?Zt[e].generalVariable:1.1053}function ad(e){return Zt[e]?Zt[e].hpVariable:1.1}function Sn(){n.combatEvaluatorBias=h("combatEvaluatorBias"),n.generalVariable=id(n.combatEvaluatorBias),n.hpVariable=ad(n.combatEvaluatorBias)}function ld(e){return!e||!e.actions||e.actions.length===0}function fd(e,t){return t.type===6?t.data.creature_type!==0||t.data.level>=e:!0}function sd(e){return e.realm&&e.realm.minlevel||GameData.realm().minlevel}function ud(e){let t=ti(e);return ld(t)?e:(t.actions=t.actions.filter(u(fd,sd(t))),ii(t))}function cd(e){return e.data&&e.data.d&&Ki(e.data.d,E)}function md(e,t){n.hideSubLvlCreature&&cd(t)&&(e.dataFilter=ud)}function En(){$.ajaxPrefilter("JSON",md),n.hideSubLvlCreature&&GameData.fetch(E)}function dd(e){n[e[0]]=sr(e[1])}function pd(){[["buffs","huntingBuffs"],["buffs2","huntingBuffs2"],["buffs3","huntingBuffs3"]].forEach(dd)}function hd(e){n[e]=sr(e)}function gd(){["doNotKillList"].forEach(hd)}function vd(){pd(),gd()}function yd(e){n[e[0]]=h(e[1])}function Dd(){[["buffsName","huntingBuffsName"],["buffs2Name","huntingBuffs2Name"],["buffs3Name","huntingBuffs3Name"],["showBuffs","showHuntingBuffs"]].forEach(yd)}function xd(e){n[e]=h(e)}function kd(){["enabledHuntingMode","hideSubLvlCreature","showTitanInfo","showBuffInfo","showMonsterLog","showCreatureInfo"].forEach(xd)}function wd(){Dd(),kd()}function Cd(){vd(),wd()}function Mn(){Sn(),Cd();let e=bn();En(),Ln(e),vl()}function Bd(){$("#messageCenter").worldMessageCenter({offset:"0 60"})}function Ad(){Be("#mapTooltip")}var bd=[Mn,tn,Dn,Xr,Pr,Fr,$o,Zo,Ir,jo,nn,Lo,Bd,Ad,Vr,ta,Or,Go,$r,Qr];function Ld(){zi(bd),n.userIsDev&&Jr()}export{Ld as default};
//# sourceMappingURL=newMap-6QSUAWVI.js.map
