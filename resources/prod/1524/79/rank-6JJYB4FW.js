import{a as U}from"./chunk-SRHTHBZ4.js";import{a as V}from"./chunk-PVCDLDWK.js";import{a as I}from"./chunk-WJZ2JRVV.js";import{b as P}from"./chunk-YDF2ZUKO.js";import{a as A}from"./chunk-OTOGFZTF.js";import{a as v}from"./chunk-M6VZA5GB.js";import{a as T}from"./chunk-2VQTB7XI.js";import"./chunk-U6VXUCX2.js";import{a as D}from"./chunk-NSIE2BGX.js";import"./chunk-YKPSGJH4.js";import{a as S}from"./chunk-AF5XS3UR.js";import"./chunk-UTOZ7VCW.js";import"./chunk-MJ4TLF2J.js";import{a as d}from"./chunk-PEST2X2S.js";import{a as u}from"./chunk-Q5V66F5H.js";import"./chunk-UBU4HOCG.js";import"./chunk-VK76KS6Y.js";import{a as m}from"./chunk-W5TZOL5W.js";import"./chunk-NT4STL35.js";import{a as N}from"./chunk-NZDRUEQ7.js";import"./chunk-NTMW32IA.js";import"./chunk-JYLJZMMH.js";import"./chunk-SXJQGV3C.js";import{a as E}from"./chunk-7UPVBJI2.js";import"./chunk-DVQ4HTUG.js";import"./chunk-AW7BR4RY.js";import"./chunk-GELOWOQR.js";import"./chunk-WDKM7RFE.js";import"./chunk-NBGTZWFP.js";import"./chunk-AL4KDQST.js";import"./chunk-PE3FJ2RG.js";import"./chunk-ZCYTQ2UF.js";import{a as C}from"./chunk-Y65Z3XTF.js";import"./chunk-X2INWW4Q.js";import{a as y}from"./chunk-E5IM4RMA.js";import"./chunk-ZNKXZYAQ.js";import"./chunk-BSLTHMLI.js";import"./chunk-YO375HFG.js";import{a as b}from"./chunk-C7AAZRMQ.js";import{a as c}from"./chunk-2MNOMCC3.js";import"./chunk-WFSZD2EF.js";import"./chunk-MVK2MUWC.js";import{a as B}from"./chunk-MNZWXHAO.js";import{a as j}from"./chunk-Z4DLYK4X.js";import{b as f}from"./chunk-Q224JHGT.js";import"./chunk-7KZSXEZV.js";import"./chunk-J7HJMT5D.js";import"./chunk-Y6VKRV7H.js";import"./chunk-QTXZJQPG.js";import{a}from"./chunk-NSORKVUP.js";import"./chunk-BYNMPNFU.js";import"./chunk-AIEFEA62.js";import"./chunk-QAN7R2R4.js";import"./chunk-TDBXMRU5.js";import"./chunk-BBWJJBGA.js";import{a as p}from"./chunk-6KVKWMOW.js";import{b as R}from"./chunk-ILOP54SQ.js";import"./chunk-AGGFW4LO.js";import"./chunk-XGNI62R7.js";import"./chunk-QFVOKILJ.js";import"./chunk-6ZU7XATI.js";function s(t){return T({subcmd:"ranks",...t})}function l(){return u(s,v)}var _=[[2,5],[4,4],[64,5],[256,.1],[512,.2],[4096,.5],[32768,.2],[524288,.1],[65536,5],[4194304,4]],L=(t,[,o])=>t+o-1,M=t=>_.filter(([o])=>U(t,o)).reduce(L,0),q=t=>t>>>0,F=t=>q(t).toString(2),G=t=>F(t).split("").map(Number).reduce(V,0),O=t=>P(M(t)+G(t),1);function Q(t,o){let[r]=o.children,i=c(r.firstChild),n=t.find(e=>e&&e.name===i);n&&A(r,`<span class="fshBlue">(${O(n.permissions)}) Tax:(${n.tax||0}%)</span> `)}function Z(t,o){d("ranks","fetchRankData"),t.forEach(a(Q,o))}function z(t,o,r){let i=D({className:"custombutton",type:"button",value:"Get Rank Weightings"});p(i,a(Z,t,o));let n=r.parentNode.parentNode;m(n,"&nbsp;"),N(n,i)}function h(t,o){let r=C('#pCC a[href*="=ranks&subcmd2=add"]');r&&z(t,o,r)}function k(t,o){return y({cmd:"guild",subcmd:"ranks",subcmd2:t,rank_id:o}).then(()=>({s:!0}))}function g(t,o){return s({subcmd2:t,rank_id:o})}function x(t,o){return u(g,k,t,o)}var w,J=t=>["Up","Down"].includes(t.target.value);function K(t,o){return w>=Math.min(t.rowIndex,o)||o<1||o>t.parentNode.rows.length}function X(t){return t==="Up"?-1:2}function Y(t){return t==="Up"?-22:22}function tt(t,o,r){let i=t.target.getAttribute("onclick").match(/rank_id=(\d+)/);x(j(t.target.value),i[1]);let n=o.parentNode.rows[r];S(o,n);let e=Y(t.target.value);window.scrollBy(0,e),t.stopPropagation()}function ot(t){d("ranks","overrideUpDown");let o=t.target.parentNode.parentNode.parentNode,r=o.rowIndex+X(t.target.value);K(o,r)||tt(t,o,r)}function rt(t){J(t)&&ot(t)}function W(){w&&R("ajaxifyRankControls")&&p(f,rt,!0)}function $(t,o){o.includes(E())&&(w=t.rowIndex)}function nt(){let t=f.lastElementChild.previousElementSibling.rows?.[7]?.children[0]?.children[0]?.rows;if(t)return b(t)}function et(t,o){let r=o.children[0],i=c(r),n=t.find(e=>e.name===i);if(n?.members.length){let e=n.members.map(H=>H.name);$(o,e),m(r,` <span class="fshBlue">- ${e.join(", ")}</span>`)}}function it(t){let o=nt();o&&(I([3,o,1,a(et,t)]),h(o,t),W())}async function at(){if(B())return;let t=await l();t?.s&&it(t.r)}export{at as default};
//# sourceMappingURL=rank-6JJYB4FW.js.map
