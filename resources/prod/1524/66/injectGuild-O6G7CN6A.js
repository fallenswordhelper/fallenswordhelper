import{a as Yt,b as Kt}from"./chunk-JTTZMLHK.js";import{a as Wt}from"./chunk-6MNFT3ZH.js";import"./chunk-MQQY4LAB.js";import{a as _t,b as zt}from"./chunk-OZUVBJ5P.js";import{a as Jt}from"./chunk-IRDEREHK.js";import{a as Qt}from"./chunk-LBFCILOF.js";import{a as Zt}from"./chunk-IVHWVJRJ.js";import{a as x}from"./chunk-KZZT4JUL.js";import{a as Xt}from"./chunk-TLDKSKZ6.js";import{a as Ft}from"./chunk-3ZXPFF4S.js";import"./chunk-33C5JSKW.js";import{a as Ot}from"./chunk-3HCGBENC.js";import"./chunk-QI4PTCER.js";import{a as Dt}from"./chunk-CUU6FQF7.js";import"./chunk-WG26DURV.js";import{a as F}from"./chunk-M4E3GUBN.js";import{a as It}from"./chunk-BGI5E2EP.js";import{a as Gt}from"./chunk-PDQFWL32.js";import{a as O}from"./chunk-ZGJUBLOJ.js";import{a as Vt}from"./chunk-FQGBNMGN.js";import{a as qt}from"./chunk-XG5WC37K.js";import"./chunk-AA5CKHCJ.js";import{a as X}from"./chunk-MBJ37FYW.js";import{a as jt}from"./chunk-JJR4MJC5.js";import{a as ut}from"./chunk-7JGP7O2F.js";import{a as kt}from"./chunk-OQ2Y4DKM.js";import{a as U}from"./chunk-SA3MY6H2.js";import{a}from"./chunk-7DWVT37O.js";import"./chunk-XXE2FQRZ.js";import{a as w}from"./chunk-AMIV6VU6.js";import{a as Ut}from"./chunk-X5QSVM3M.js";import"./chunk-XKBBMJSB.js";import{a as l}from"./chunk-CAKCK4NI.js";import"./chunk-S4JGXK5I.js";import{a as n}from"./chunk-VOWLBX22.js";import{a as o}from"./chunk-GMERTW32.js";import{a as Ct}from"./chunk-IPCPLARM.js";import"./chunk-SGJW3QOZ.js";import{a as yt}from"./chunk-WMZAS474.js";import{a as At}from"./chunk-CFASH7IA.js";import{f as $}from"./chunk-HLZQULI6.js";import{a as Bt}from"./chunk-PXUZLVKP.js";import{a as p}from"./chunk-H3CO5HSE.js";import{a as M}from"./chunk-JCOWS4EJ.js";import"./chunk-YEZQPUL7.js";import{a as P}from"./chunk-ODQJYK6Y.js";import{a as Lt}from"./chunk-SMGTENZD.js";import"./chunk-XFT6LK7P.js";import{a as vt}from"./chunk-EVSMFORE.js";import"./chunk-7XP2MRVG.js";import{a as Mt,b as Pt,c as Rt,d as $t}from"./chunk-GV3BMAUO.js";import"./chunk-QU6YTJ5V.js";import"./chunk-3XRSQTXY.js";import"./chunk-R5QTS4JB.js";import{a as Ht}from"./chunk-4X4NY56W.js";import"./chunk-XCNY7XO4.js";import{a as k}from"./chunk-LZ2L2TIX.js";import{a as y}from"./chunk-EUWXZKWZ.js";import{a as xt}from"./chunk-DO7SCVXY.js";import{a as Nt}from"./chunk-HNI63WVA.js";import"./chunk-LL4JRT35.js";import"./chunk-KE767BLN.js";import"./chunk-TUVTWIHM.js";import"./chunk-4ATHPVF4.js";import"./chunk-RTMHI3L7.js";import{a as R}from"./chunk-TYMQPSI2.js";import"./chunk-ONCZ3D52.js";import"./chunk-ER7X2LNC.js";import{a as St}from"./chunk-JZHGPOOI.js";import{a as D}from"./chunk-LSTE36AK.js";import"./chunk-TUVTX7TQ.js";import{a as Et}from"./chunk-YXK7YMA4.js";import"./chunk-W5T3PU55.js";import{b as c}from"./chunk-SBFBOIF5.js";import{a as f}from"./chunk-M5RMVAY3.js";import"./chunk-VWFYI5BK.js";import{a as q}from"./chunk-QVWAWWED.js";import"./chunk-4QNYZHAB.js";import"./chunk-PYHGZC4L.js";import"./chunk-D76XH5RX.js";import{a as s}from"./chunk-MA3AC62H.js";import{a as Tt,b as wt}from"./chunk-6TMBLRRF.js";import"./chunk-IWF73C7V.js";import"./chunk-YJHKALOE.js";import"./chunk-ZMMQFEZR.js";import"./chunk-DTSXLBNB.js";import"./chunk-NCV3HP3S.js";import{a as v}from"./chunk-YG74QOJP.js";import{b as m}from"./chunk-STY5NEH4.js";import{a as bt}from"./chunk-M7Q5FD7X.js";import{a as u}from"./chunk-K2U7JEMX.js";import"./chunk-VCDLAVQZ.js";import"./chunk-PUAVFQTB.js";import{F as H,J as gt,Ma as ht,g as E,sa as T,ua as b,x as dt}from"./chunk-OHKPSLFK.js";import{a as S}from"./chunk-EJREXK3Y.js";var te=0,ee=1;function Ce(t,e){let r=E.exec(e.dataset.tipped);return At({min:r[3],hour:r[2],day:r[1]})<44640&&(t[te]+=1,t[ee]+=Number(/Stamina:<\/td><td>(\d+)/.exec(e.dataset.tipped)[1])),t}function Se(t){return t.reduce(Ce,[0,0])}function _(){let t=k("b",c).find(M("Members"));if(t){let e=_t(),r=Se(e);t.classList.add("tip-static"),Ot(`Active: ${r[te]}/${e.length}<br>Stamina: ${D(r[ee])}`,t)}}function re(t,e){let r,i=t.replace(/,/g,"").match(e);return i?r=parseInt(i[1],10):r=0,r}function Te(t,e){let r="";return t>e&&(r="+"),r+D(t-e)}function we(t){let e=t.dataset.tipped,r=re(e,/XP Lock: <b>(\d*)/),i=re(e,/XP: <b>(\d*)/);l(t.parentNode.nextElementSibling,` (<b>${Te(i,r)}</b>)`)}function Q(){let t=p('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&we(t)}function z(){let t=k(b,c).slice(-2,-1)[0].rows[0].cells[0],e=n({id:"profile-bio",innerHTML:t.innerHTML});f("",t),o(t,e),Jt()}var J,W;function xe(t){return J&&t>=Mt()&&t<=Pt()}function Ne(t){return W&&t>=Rt()&&t<=$t()}var Ae=t=>[t,E.exec(t.dataset.tipped)[1]],Be=([,t])=>t<7,Ee=([t])=>[t,Number(/VL:.+?(\d+)/.exec(t.dataset.tipped)[1])],He=([t,e])=>[t.parentNode.parentNode.rowIndex,xe(e),Ne(e)];function Me(){return P('#pCC a[data-tipped*="<td>VL:</td>"]').map(Ae).filter(Be).map(Ee).map(He)}function Pe(){return Number(kt("guild_id"))!==Ht()&&(J||W)}var oe=t=>t.map(([e])=>`.fshHighlight tr:nth-child(${e+1})`).join(",");function Re(t){if(t.length){let e=`${oe(t)} {background-color: #4671C8;}`;o(document.body,x(e))}}function $e(t){if(t.length){let e=`${oe(t)} {background-color: #FF9900;}`;o(document.body,x(e))}}function De(t,e){if(t.length+e.length){let r=y(b,c);r[r.length-1].classList.add("fshHighlight")}}function Ie(){let t=Me(),e=t.filter(([,i])=>i),r=t.filter(([,i,C])=>!i&&C);Re(e),$e(r),De(e,r)}function Ge(){Pe()&&Ie()}function Y(){J=m("highlightPlayersNearMyLvl"),W=m("highlightGvGPlayersNearMyLvl"),Ge(),m("enableHistoryCompressor")&&z()}function je(t){l(t.parentNode,' <span class="smallLink">[b]</span>')}function Ve(t){t.target.className==="smallLink"&&qt(Vt(t.target.previousElementSibling.href))}function Z(){let t=Lt(`#pCC a[href^="${dt}"]`);Qt([5,3,t,0,je]),v(c,Ve)}function I(t){return Nt({cmd:"guild",subcmd:"conflicts",page:t})}function ie(t,e){f(e,t.insertCell(-1))}function ne(t,e,r){let i=t.insertRow(t.rows.length-2);ie(i,e),ie(i,r)}function Ue(t){ne(t,`<a href="${H}conflicts">Active Conflicts</a>`,"Score")}function qe(t,e){ne(t,e.cells[0].innerHTML,`<b>${e.cells[6].innerHTML}</b>`)}function Fe(t,e,r){e===1&&Ue(r),Ft(t.rows,7,0).forEach(s(qe,r))}function Oe(t,e,r){let i=p("#pCC > table > tbody > tr > td > table",t);i&&i.rows.length>3&&Fe(i,e,r)}function Xe(t){return Number(t.parentNode.innerHTML.match(/of&nbsp;(\d*)/)[1])}function _e(t,e,r){I(t+1).then(s(e,r))}function ae(t,e){let r=xt(e),i=p('#pCC input[name="page"]',r);if(!i)return;let C=Number(i.value),Le=Xe(i);Oe(r,C,t.node),Le>C&&_e(C,ae,t)}function K(t){let e=t.rows[6].cells[0].children[0];e&&I(1).then(s(ae,{node:e}))}function Qe(t){t.target.id===T&&R(T,!m(T))}function tt(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,r=n({className:"fsh-tracker"}),i=n({innerHTML:`${$(T)}&nbsp;<label class="custombutton" for="tracker">Show</label>`});u(i,"change",Qe),o(r,t),o(r,i),Ut(e,r)}function et(t){return Ct("th",t)}var rt,G,A,ot,j;function Ke(t,e){return`${t}<option value="${e}">${e}</option>`}function tr(t){return`<select name="member"><option value="- All -" selected>- All -</option>${q(t).sort(Et).reduce(Ke,"")}</select>`}function N(t){return bt(t)?"#DEF":t.toLocaleString()}function er(t){return G&&G!=="- All -"&&G!==t}function rr(t,e,r){return`${e}<tr><td>${Wt(new Date(r[4]*1e3))}</td><td>${t}</td><td class="fshRight">${N(r[2])}</td><td class="fshRight">${N(r[5])}</td><td class="fshRight">${N(r[1])}</td><td class="fshRight">${N(r[3])}</td><td class="fshRight">${Math.floor(r[1]/r[3]*100)}</td><td class="fshRight">${r[0]}</td><td class="fshRight">${N(r[6])}</td></tr>`}function or(t,e){return er(e)?t:t+j[e].reduce(s(rr,e),"")}function ir(){return q(j).reduce(or,"")}function nr(){j&&f(ir(),rt),A.classList.remove("fshSpinner")}function ce(){A.classList.add("fshSpinner"),a(3,nr)}function ar(t){G=t.target.value,ce()}function V(t){t&&(j=t,f(tr(t),ot),ce())}function mr(){let t=et({textContent:"Member"});return ot=n(),o(t,ot),t}function lr(t){let e=t.createTHead().insertRow(-1);l(e,"<th>Date</th>");let r=mr();o(e,r),l(e,"<th>Level</th><th>VL</th><th>Stam</th><th>Max<br>Stam</th><th>Stam<br>%</th><th>Last<br>Activity<br>(Days)</th><th>GXP</th>")}function cr(t){rt=Dt(),o(t,rt)}function se(){let t=It({id:"tg"});return lr(t),cr(t),u(t,"change",ar),A=n({className:"tgCont fshSpinner64"}),o(A,t),A}var d,fe,pe,g;function sr(t){d.value=t,g.classList.remove("fshSpinner")}function de(t){t&&(g.classList.add("fshSpinner"),a(4,sr,[t]))}function fr(){d.value='{"lastUpdate": 0, "members": {}}'}function pr(t){F("Update successful"),V(t.members)}function ur(){let t=yt(d.value);wt("fsh_guildActivity",t).then(s(pr,t)).catch(F)}function ue(t,e){let r=Xt({className:"custombutton",textContent:t});return v(r,e),r}function dr(){d=Zt(),d.setAttribute("autocapitalize","off"),d.setAttribute("autocomplete","off"),d.setAttribute("autocorrect","off"),d.setAttribute("spellcheck","false")}function ge(){return g=n({id:"io",className:"fshSpinner64"}),dr(),fe=ue("Save",ur),pe=ue("Reset",fr),o(g,d),o(g,Yt()),o(g,fe),o(g,pe),g}var nt,h,B,it;function he(){return!h.checked}function gr(){return h.checked}function hr(){h.checked=!1}function br(t){gr()&&t.code==="Escape"&&hr()}function yr(t){he()&&(t.style.transform=null)}function kr(){return Gt({className:"fshMove ui-tabs-nav ui-widget-header ui-corner-all ui-helper-reset ui-helper-clearfix",innerHTML:'<li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab1">Guild Activity Tracker</label></li><li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab2">Import/Export</label></li><label for="tracker" class="fsh-dialog-close ui-dialog-titlebar-close">&times;</label>'})}function vr(){w("guildTracker","updateRawData"),nt&&de(nt)}function Lr(){let t=n({className:"fsh-dialog-popup ui-dialog ui-tabs ui-widget ui-widget-content ui-corner-all",innerHTML:'<input id="acttab1" class="fsh-tab-open" name="acttabs" checked type="radio">'});return it=O({className:"fsh-tab-open",id:"acttab2",name:"acttabs",type:"radio"}),U(it,"change",vr),o(t,it),t}function Cr(){let t=Lr(),e=kr();return o(t,e),ut(e,t),t}function Sr(){let t=n({className:"fsh-dialog-content"});return o(t,se()),o(t,ge()),t}function Tr(){let t=Cr(),e=Sr();o(t,e),u(h,"change",s(yr,t)),o(B,t)}function wr(){l(B,'<div class="fsh-dialog-overlay"><label class="fsh-dialog-cancel" for="tracker"></label></div>')}function xr(t){t&&(nt=JSON.stringify(t),V(t.members))}function Nr(){w("guildTracker","openDialog"),Tt("fsh_guildActivity").then(xr),S.dialogIsClosed=he,wr(),Tr()}function Ar(){h=O({id:"tracker",className:"fsh-dialog-open",type:"checkbox"}),U(h,"change",Nr),B=n({className:"fsh-dialog"}),o(B,h),u(document.body,"keydown",br),o(document.body,B)}function at(){tt(),Ar()}var lt="enableStamBars",L,mt;function Br(t){let e=t.dataset.tipped.match(/Stamina:<\/td><td>(\d{1,12}) \/ (\d{1,12})<\/td>/);return Math.min(Math.round(Number(e[1])/Number(e[2])*100),100)}function Er(t){let e=Br(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${e}%, transparent ${e+1}%)}`}function Hr(){let t=y(b,c),e=t[t.length-1];e.classList.add("fshProgressBar");let i=P(ht,e).map(Er).join(`
`);mt=o(document.body,x(i)).sheet}function be(){mt?mt.disabled=!L:Hr()}function Mr(){L=!L,R(lt,L),be(),w("guildManage","StamBars")}function Pr(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,r=o(e,n({className:"fshCenter",innerHTML:$(lt)}));u(r,"change",Mr)}function ct(){Pr(),L=m(lt),L&&be()}function Rr(t){return X({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function $r(t){let e=X({className:"fshNoWrap",innerHTML:"[&nbsp;"});return o(e,t),l(e,"&nbsp;]"),e}function st(t,e,r){let i=Rr(r);o(t,$r(i)),e.id=r,m(r)&&jt(e),v(i,Kt)}function ye(t){st(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function ke(t){let e=t.rows[4].cells[1].children[0];f(vt(e.innerHTML),e),st(e,t.rows[6].cells[0].children[0],"statisticsControl")}function ve(t){let e=t.rows[15]?.cells[1].children[0];e&&st(e,t.rows[17].cells[0].children[0],"guildStructureControl")}function Dr(t){let e=k("b",t).filter(M("Relics"));if(e.length!==1)return;let r=e[0].parentNode.nextElementSibling.children[0];f(`[ <a href="${H}reliclist">Control</a> ]&nbsp;`,r)}function Ir(t){let e=y("li",t);if(!e||!e.length)return;let r=e[e.length-1].parentNode;l(r,`<li><a href="${gt}${Bt()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function Gr(){return c.lastElementChild.rows[2].cells[0].children[0]}function jr(t,e){a(3,e,[t])}function Vr(t){[ye,ke,ve,Dr,Ir].forEach(s(jr,t))}function Ur(t){St()||(m("detailedConflictInfo")&&a(3,K,[t]),a(4,at))}function ft(){if(!c)return;let t=Gr();Vr(t),m("showBuffLinks")&&a(3,Z),Ur(t),ct()}function qr(t){let e=t.nextElementSibling.nextElementSibling;e&&e.classList.add("fshBreakAll")}function pt(){let t=p('#pCC img[src*="/guilds/"][width="200"]');!t||(t.removeAttribute("style"),qr(t))}function Fr(){a(3,zt),a(3,pt),a(3,Q),a(3,_),S.subcmd==="manage"&&ft(),S.subcmd==="view"&&Y()}export{Fr as default};
//# sourceMappingURL=injectGuild-O6G7CN6A.js.map
