import{a as et}from"./chunk-2O6RAQRQ.js";import{a as x,b as Z}from"./chunk-6FZ3Z5FD.js";import{a as tt}from"./chunk-ONYD7SQS.js";import{a as ot}from"./chunk-US3HIVNS.js";import{a as Y}from"./chunk-JKCQNGRB.js";import{a as K,b as W}from"./chunk-OWFHBXW2.js";import{a as k}from"./chunk-JQAELPMM.js";import{a as S}from"./chunk-SQ6EAFCA.js";import"./chunk-NZ6ZP254.js";import{a as z}from"./chunk-AZ5QRIUJ.js";import{a as g}from"./chunk-7WQ5UNSS.js";import"./chunk-4IQVGLAY.js";import{a as U}from"./chunk-5HH7GGGJ.js";import{a as M}from"./chunk-IAPLFRFL.js";import"./chunk-DQJLU6BH.js";import"./chunk-7YTTTE44.js";import{a as X}from"./chunk-VDABUAVV.js";import{a as b}from"./chunk-5KF2FUKO.js";import{a as V}from"./chunk-ATGVI5YH.js";import{a as w}from"./chunk-RK5HVFU5.js";import{a as R}from"./chunk-OSU72WF2.js";import{a as l}from"./chunk-JOI2Z4NP.js";import{a as h}from"./chunk-DSQHKKZ4.js";import"./chunk-IETC7J5T.js";import"./chunk-L4YLDFIV.js";import{a as J}from"./chunk-XA5QF7QF.js";import"./chunk-O2JS6JMC.js";import"./chunk-4BKRRB5O.js";import"./chunk-NZDFBLRQ.js";import{a as c}from"./chunk-S4DLXHFF.js";import{a}from"./chunk-PR2EAHHE.js";import{b as r}from"./chunk-DLFJWHV6.js";import{a as i}from"./chunk-MT75LODT.js";import{a as L}from"./chunk-6SYTCZ5G.js";import{a as _}from"./chunk-EFFTH5LW.js";import{a as D}from"./chunk-SUBR6HFY.js";import{c as O}from"./chunk-V56KALMS.js";import"./chunk-CMXQAXF2.js";import{a as F}from"./chunk-C257UEHM.js";import"./chunk-3XEIZZHC.js";import"./chunk-ZWSICCTU.js";import{a as G}from"./chunk-APLZF2FC.js";import"./chunk-NIE6URWE.js";import{a as d}from"./chunk-N7M4WPYO.js";import"./chunk-BGM7VCLD.js";import"./chunk-ZOICBMHG.js";import"./chunk-EL33JOKC.js";import"./chunk-EOP2LXLP.js";import{a as p}from"./chunk-MK3UHL4H.js";import"./chunk-PCHFEFT4.js";import"./chunk-CEFYYGFM.js";import{a as m}from"./chunk-ARPRWHND.js";import"./chunk-UXWHPN2C.js";import"./chunk-FBJYO5PW.js";import"./chunk-SASH6XDT.js";import"./chunk-DMJF4GTY.js";import{a as H}from"./chunk-J3H3UK4G.js";import"./chunk-LAQFFA4M.js";import"./chunk-3E53RUR7.js";import{a as s}from"./chunk-TTNOFDP6.js";import{c as j}from"./chunk-5D3DZNMD.js";import{b as P,f as Q,qa as C,ra as $}from"./chunk-B3TUML6P.js";import"./chunk-U2JBD6QP.js";import"./chunk-KXXSC5XL.js";import{a as I}from"./chunk-VVTHM3UH.js";import"./chunk-34VPQFZA.js";function y(t){return G({cache:!1,dataType:"json",data:{cmd:"composing",subcmd:"createajax",template_id:t,fshrnd:Z()}})}function st(){return`url(${P}composing/${x(1,11)}_${x(1,51)}.png)`}function ct(t,o){i("",t.children[0]),t.children[0].classList.add("fshPot"),t.children[0].style.backgroundImage=st(),i(`Creating '<span class="fshBold">${o}</span>' Potion`,t.children[2]),i("",t.children[3])}function mt(){a('[id|="composing-template"]:not(#composing-template-multi)').length===0&&p(C,!1)}function lt(t){let o=t.parentNode;o&&(i('<div class="fshScs">Success</div>',o),ct(o.previousElementSibling.previousElementSibling,t[t.selectedIndex].text),mt())}function at(t,o){let e=t.parentNode;!e||!o||(o.error?i(`<div class="fshScs">${o.error}</div>`,e):lt(t))}async function pt(t){let o=await y(t.value);at(t,o)}function f(t,o){o.id=`proc-${o.id}`,i("",t),t.classList.add("fshSpinner","fshSpinner12","fshComposingSpinner"),pt(o),K("quickcreate")}function nt(t,o){t.classList.add(`left-${o.toString()}`)}function ft(t){let o=a(".quickCreate .sendLink");nt(t,o.length)}function ut(t,o){l("composing","FastComposeButton");let e=a('[id|="composing-template"]:not(#composing-template-multi)');if(!(e.length<t.value))for(let n=0;n<t.value;n+=1)e[n].value=o,f(e[n].nextElementSibling.nextElementSibling,e[n])}function dt(t){let o=t.target,{templateId:e}=o.dataset;e&&ut(o,e)}function gt(t,o){return k({className:"awesome orange",dataset:{templateId:o},type:"button",value:t})}function Ct(t,o,e,n){return n===0&&V(t[1],o.insertCell(-1)),h(o.insertCell(-1),gt((n+1).toString(),t[0])),o}function bt(t,o,e){return t.forEach(m(Ct,e,o.insertRow(-1))),o}function ht(t,o,e){let n=tt({id:"fshFastCompose"});return nt(n,e),t.reduce(m(bt,o),n)}function kt(t){return[t.value,t.text]}function St(t,o,e){let n=c("#composing-template-multi option").map(kt),u=ht(n,o,e);h(t,u),s(r(),dt),W("quickcreate",m(ft,u))}function xt(t){l("composing","FastCompose"),g(t,"<br>");let o=b("composing-potion-time",document),e=o.filter(J("ETA: n/a")).length;e>0?St(t,o,e):g(t,"No open slots!")}function E(){let t=F("#pCC div.centered");g(t,'<span class="fsh-fast-compose">[ <label for="fast-compose"><span class="sendLink">Fast Compose</span></label> ]</span>');let o=w({className:"centered"});S(o,t);let e=k({id:"fast-compose",type:"checkbox"});S(e,t),R(e,"change",m(xt,o))}function yt(t){let o=D(Q,d(t));if(o){let{h:e,m:n,s:u}=o;return(e*3600+n*60+Number(u))*1e3+O()}return 0}function rt(t){p(C,t)}function v(){if(!I.enableComposingAlert)return;let t=b("composing-potion-time",document),o=Math.min(...t.map(yt));o===0?rt(!0):(rt(!1),p($,o))}function N(t){return Y({subcmd:"collect",potion_id:t})}async function T(t){let o=await U({cmd:"composing",subcmd:"collect",potion_id:t}),e=z(o);return e.includes("collected")?{s:!0}:{s:!1,e:{message:e}}}function B(t){return M(N,T,t)}function Et(t){let o=t.getAttribute("onclick").split("&")[2].split("=")[1];et(t.parentNode,`[ <span class="fsh-quick-collect"><button class="fshBl fsh-bli" type="button" value="${o}">Quick Collect</button></span> ]&nbsp;`)}var vt=t=>t.tagName==="BUTTON"&&d(t)==="Quick Collect";function Nt(t){t.nextElementSibling.disabled=!0,t.nextElementSibling.nextElementSibling.disabled=!0,i("",t),t.classList.add("fshSpinner")}function it(t,o,e){i(e,t),t.classList.add(o)}function Tt(t,o){t.classList.remove("fshSpinner"),o.s?it(t,"fshGreen","Collected"):it(t,"fshRed","Error")}async function Bt(t){let o=t.parentNode,e=t.value;Nt(o);let n=await B(e);Tt(o,n)}function At(t){vt(t.target)&&Bt(t.target)}function A(){c('input[value="Collect Potion"]',r()).forEach(Et),s(r(),At)}function qt(t){ot(t,'<span class="quickCreate">[<span class="sendLink">Quick Create</span>]</span>')}var Lt=t=>t.tagName==="SPAN"&&t.className==="quickCreate";function It(t){let o=t.previousElementSibling.previousElementSibling;o&&o.value!=="none"&&(f(t,o),l("composing","QuickCreate"))}function Pt(t){let o=t.target.parentNode;Lt(o)&&It(o)}function q(){c("input[id^=create-]:not(#create-multi)",r()).forEach(qt),s(r(),Pt)}function Qt(){if(!j("moveComposingButtons"))return;let t=L("composing-error-dialog").previousElementSibling;t.setAttribute("style","text-align: right; padding: 0 38px 0 0");let o=_("composing-level",r())[0].parentNode;X(t,o)}function $t(){v(),q(),Qt(),E(),A()}function jt(){H()&&r()&&$t()}export{jt as default};
//# sourceMappingURL=composing-QZ666FAE.js.map
