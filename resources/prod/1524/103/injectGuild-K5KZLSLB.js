import{a as St,b as vt}from"./chunk-LY5FFMJI.js";import{a as Nt}from"./chunk-FZJJJ2A6.js";import{a as kt}from"./chunk-2HRAQRIC.js";import{a as xt}from"./chunk-EUPTAZ7I.js";import{a as H}from"./chunk-SPUB7I7W.js";import{a as Tt}from"./chunk-SOCVADOV.js";import{a as Lt}from"./chunk-FHBAIS6F.js";import{a as Ct}from"./chunk-LVLIQY43.js";import{a as G}from"./chunk-Y2XJKF35.js";import{a as yt}from"./chunk-GPKPGVKY.js";import"./chunk-46O67TGQ.js";import{a as P}from"./chunk-PZKX2LFQ.js";import"./chunk-57RWRL5T.js";import"./chunk-JQAELPMM.js";import{a as bt}from"./chunk-WKYCC6BP.js";import{a as ct}from"./chunk-SBHK7RFK.js";import"./chunk-UY4JXOX5.js";import{a as ot}from"./chunk-5XV7M6KH.js";import{a as nt}from"./chunk-K6RV6BG4.js";import{a as l}from"./chunk-NZ6ZP254.js";import"./chunk-Z6NIY7AN.js";import{a as c}from"./chunk-7WQ5UNSS.js";import"./chunk-4IQVGLAY.js";import"./chunk-VDABUAVV.js";import{a as b}from"./chunk-RK5HVFU5.js";import{a as C}from"./chunk-JOI2Z4NP.js";import{a as n}from"./chunk-DSQHKKZ4.js";import"./chunk-IETC7J5T.js";import"./chunk-L4YLDFIV.js";import"./chunk-6K5WFQPP.js";import{a as w}from"./chunk-QCITHZZO.js";import{c as B}from"./chunk-IHGCI6LD.js";import{a as Y}from"./chunk-R63U7AZ3.js";import{a as E}from"./chunk-XA5QF7QF.js";import"./chunk-O2JS6JMC.js";import"./chunk-4BKRRB5O.js";import{a as it}from"./chunk-NZDFBLRQ.js";import{a as N}from"./chunk-S4DLXHFF.js";import{a as st}from"./chunk-PR2EAHHE.js";import"./chunk-7M4DEPZS.js";import{b as i}from"./chunk-DLFJWHV6.js";import{a as f}from"./chunk-MT75LODT.js";import{a as K}from"./chunk-6SYTCZ5G.js";import{a as ut,b as gt,c as dt,d as ht}from"./chunk-OJ5JMZD6.js";import"./chunk-77CT6XY6.js";import"./chunk-BENEZ44C.js";import"./chunk-EFFTH5LW.js";import{a as lt}from"./chunk-4JYNGGXH.js";import"./chunk-V4VDCP3C.js";import{a as at}from"./chunk-SUBR6HFY.js";import"./chunk-V56KALMS.js";import"./chunk-CMXQAXF2.js";import{a as s}from"./chunk-C257UEHM.js";import{a as pt}from"./chunk-3XEIZZHC.js";import{a as ft}from"./chunk-ZWSICCTU.js";import"./chunk-APLZF2FC.js";import"./chunk-NIE6URWE.js";import{a as h}from"./chunk-VDZHRZJL.js";import{a as d}from"./chunk-KU5JAIEB.js";import"./chunk-N7M4WPYO.js";import"./chunk-BGM7VCLD.js";import"./chunk-ZOICBMHG.js";import"./chunk-EL33JOKC.js";import"./chunk-EOP2LXLP.js";import{a}from"./chunk-MK3UHL4H.js";import"./chunk-PCHFEFT4.js";import"./chunk-CEFYYGFM.js";import{a as v}from"./chunk-ARPRWHND.js";import"./chunk-UXWHPN2C.js";import"./chunk-FBJYO5PW.js";import"./chunk-SASH6XDT.js";import"./chunk-DMJF4GTY.js";import{a as mt}from"./chunk-3SG23KH5.js";import"./chunk-J3H3UK4G.js";import"./chunk-LAQFFA4M.js";import{a as u}from"./chunk-3E53RUR7.js";import{a as y}from"./chunk-TTNOFDP6.js";import{c as m}from"./chunk-5D3DZNMD.js";import{G as T,K as et,Na as rt,k as x,l as Z,ta as k,wa as g,y as tt}from"./chunk-B3TUML6P.js";import"./chunk-U2JBD6QP.js";import{a as S}from"./chunk-KXXSC5XL.js";import{a as M}from"./chunk-VVTHM3UH.js";import"./chunk-34VPQFZA.js";var wt=0,Bt=1;function Rt(t,e){let{mins:r}=w(e.dataset.tipped);return r<44640&&(t[wt]+=1,t[Bt]+=Number(u(x,e.dataset.tipped))),t}function jt(t){return t.reduce(Rt,[0,0])}function $(){let t=h("b",i()).find(E("Members"));if(t){let e=St(),r=jt(e);t.classList.add("tip-static"),Tt(`Active: ${r[wt]}/${e.length}<br>Stamina: ${P(r[Bt])}`,t)}}function Et(t,e){let r=u(e,t.replace(/,/g,""));return r?parseInt(r,10):0}function Dt(t,e){let r="";return t>e&&(r="+"),r+P(t-e)}function Ft(t){let e=t.dataset.tipped,r=Et(e,/XP Lock: <b>(?<lockXp>\d*)/),o=Et(e,/XP: <b>(?<realXp>\d*)/);c(t.parentNode.nextElementSibling,` (<b>${Dt(o,r)}</b>)`)}function V(){let t=s('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&Ft(t)}function R(){let t=h(g,i()).slice(-2,-1)[0];if(!t)return;let e=t.rows[0].cells[0],r=b({id:"profile-bio",innerHTML:e.innerHTML});f("",e),n(e,r),Nt()}var j=0,D=0;function Ut(t){return j&&t>=ut()&&t<=gt()}function Xt(t){return D&&t>=dt()&&t<=ht()}var qt=t=>[t,w(t.dataset.tipped).days],Qt=([,t])=>t<7,_t=([t])=>[t,Number(u(Z,t.dataset.tipped))],zt=([t,e])=>[t.parentNode.parentNode.rowIndex,Ut(e),Xt(e)];function Ot(){return N('#pCC a[data-tipped*="<td>VL:</td>"]').map(qt).filter(Qt).map(_t).map(zt)}function Wt(){return Number(ot("guild_id"))!==lt()&&(j||D)}var Jt=t=>t.map(([e])=>`.fshHighlight tr:nth-child(${e+1})`).join(",");function Pt(t,e){if(t.length){let r=`${Jt(t)} {background-color: #${e};}`;n(document.body,H(r))}}function Kt(t,e){if(t.length+e.length){let r=d(g,i());r[r.length-1].classList.add("fshHighlight")}}function Yt(){let t=Ot(),e=t.filter(([,o])=>o),r=t.filter(([,o,L])=>!o&&L);Pt(e,"4671C8"),Pt(r,"FF9900"),Kt(e,r)}function Zt(){Wt()&&Yt()}function F(){j=m("highlightPlayersNearMyLvl"),D=m("highlightGvGPlayersNearMyLvl"),Zt(),m("enableHistoryCompressor")&&R()}function te(t){c(t.parentNode,' <span class="smallLink">[b]</span>')}function ee(t){t.target.className==="smallLink"&&Ct(Lt(t.target.previousElementSibling.href))}function U(){let t=st(`#pCC a[href^="${tt}"]`);kt([3,t,0,te]),y(i(),ee)}function I(t){return ft({cmd:"guild",subcmd:"conflicts",page:t})}function Ht(t,e){f(e,t.insertCell(-1))}function It(t,e,r){let o=t.insertRow(t.rows.length-2);Ht(o,e),Ht(o,r)}function re(t){It(t,`<a href="${T}conflicts">Active Conflicts</a>`,"Score")}function oe(t,e){It(t,e.cells[0].innerHTML,`<b>${e.cells[6].innerHTML}</b>`)}function ie(t,e,r){e===1&&re(r),bt(t,7,0).forEach(v(oe,r))}function ne(t,e,r){let o=s("#pCC > table > tbody > tr > td > table",t);o&&o.rows.length>3&&ie(o,e,r)}function me(t){return Number(t.nextSibling.textContent.split("\xA0")[2])}async function se(t,e,r){let o=await I(t+1);e(r,o)}function At(t,e){let r=pt(e),o=s('#pCC input[name="page"]',r);if(!o)return;let L=Number(o.value),Vt=me(o);ne(r,L,t.node),Vt>L&&se(L,At,t)}async function X(t){let[e]=t.rows[6].cells[0].children;if(e){let r=await I(1);At({node:e},r)}}function q(t){let e=t.target.dataset.linkto,r=K(e);if(!r)return;let o=nt("fshHide",r);r.classList.toggle("fshHide"),o?a(e,""):a(e,"ON")}function le(t){return G({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function ce(t){let e=G({className:"fshNoWrap",innerHTML:"[&nbsp;"});return n(e,t),c(e,"&nbsp;]"),e}function Q(t,e,r){let o=le(r);n(t,ce(o)),e.id=r,m(r)&&yt(e),y(o,q)}function Mt(t){Q(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function Gt(t){let e=t.rows[4].cells[1].children[0];f(it(e.innerHTML),e),Q(e,t.rows[6].cells[0].children[0],"statisticsControl")}function $t(t){let e=t.rows[15]?.cells[1].children[0];e&&Q(e,t.rows[17].cells[0].children[0],"guildStructureControl")}var _=0;function fe(t){let{stam:e,max:r}=at(x,t.dataset.tipped);return Math.min(Math.round(Number(e)/Number(r)*100),100)}function ae(t){let e=fe(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${e}%, transparent ${e+1}%)}`}function pe(){let t=d(g,i()),e=t[t.length-1];e.classList.add("fshProgressBar");let o=N(rt,e).map(ae).join(`
`);_=n(document.body,H(o)).sheet}function A(t){_?_.disabled=!t:pe()}var z="enableStamBars",p=0;function ue(){p=!p,a(z,p),A(p),C("guildManage","StamBars")}function ge(){if(!s("#pCC img.guild_openGuildStore"))return;let e=n(i(),b({innerHTML:B(z),style:{marginLeft:"66%"}}));S(e,"change",ue)}function O(){ge(),p=m(z),p&&A(p)}function de(t){t.target.id===k&&(C("guildTracker","togglePref"),a(k,t.target.checked))}function he(){C("guildTracker","showTracker"),ct()}function W(){let t=s("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode;e.classList.add("fshRelative");let r=b({className:"fsh-tracker",innerHTML:`${B(k)}&nbsp;`});S(r,"change",de);let o=xt({textContent:"Show",type:"button"});y(o,he),n(r,o),n(e,r)}function be(t){let e=h("b",t).filter(E("Relics"));if(e.length!==1)return;let r=e[0].parentNode.nextElementSibling.children[0];f(`[ <a href="${T}reliclist">Control</a> ]&nbsp;`,r)}function ye(t){let e=d("li",t);if(!e||!e.length)return;let r=e[e.length-1].parentNode;c(r,`<li><a href="${et}${Y()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function Le(){return i().lastElementChild.rows?.[2]?.cells[0].children[0]}function Ce(t,e){l(3,e,[t])}function xe(t){[Mt,Gt,$t,be,ye].forEach(v(Ce,t))}function Te(t){mt()||(m("detailedConflictInfo")&&l(3,X,[t]),l(4,W))}function J(){if(!i())return;let t=Le();t&&(xe(t),m("showBuffLinks")&&l(3,U),Te(t),O())}function ke(){l(3,vt),l(3,V),l(3,$),["-","manage"].includes(M.subcmd)&&J(),M.subcmd==="view"&&F()}export{ke as default};
//# sourceMappingURL=injectGuild-K5KZLSLB.js.map
