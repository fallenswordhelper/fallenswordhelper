import{a as ot,b as it}from"./chunk-RQPBLPKQ.js";import"./chunk-E2NHU2NT.js";import{b as et}from"./chunk-VPLH37IV.js";import"./chunk-PDTP73PN.js";import{a as tt}from"./chunk-D7XNOC3Q.js";import"./chunk-3BIKLBUY.js";import{a as L}from"./chunk-MTDSL3EC.js";import"./chunk-SPUB7I7W.js";import{a as Z}from"./chunk-ONYD7SQS.js";import"./chunk-V24GP2G2.js";import"./chunk-YHMEPQN6.js";import"./chunk-FHBAIS6F.js";import"./chunk-LVLIQY43.js";import{a as X}from"./chunk-BYSZ4CDN.js";import{a}from"./chunk-GPKPGVKY.js";import"./chunk-46O67TGQ.js";import"./chunk-45EWONWO.js";import"./chunk-WKYCC6BP.js";import"./chunk-WGVGLZHS.js";import"./chunk-7C6CQ5I2.js";import"./chunk-K6RV6BG4.js";import"./chunk-Z6NIY7AN.js";import"./chunk-3TMUGSDY.js";import{a as j}from"./chunk-7WQ5UNSS.js";import"./chunk-4IQVGLAY.js";import"./chunk-IAPLFRFL.js";import"./chunk-DQJLU6BH.js";import"./chunk-7YTTTE44.js";import{a as u}from"./chunk-ATGVI5YH.js";import"./chunk-RK5HVFU5.js";import"./chunk-2Y5VLTIC.js";import"./chunk-JOI2Z4NP.js";import"./chunk-DSQHKKZ4.js";import"./chunk-IETC7J5T.js";import{a as Q,b as m}from"./chunk-MZVN4GFQ.js";import"./chunk-XA5QF7QF.js";import"./chunk-O2JS6JMC.js";import{a as _}from"./chunk-4BKRRB5O.js";import"./chunk-NZDFBLRQ.js";import"./chunk-S4DLXHFF.js";import"./chunk-PR2EAHHE.js";import{b as w}from"./chunk-DLFJWHV6.js";import{a as h}from"./chunk-MT75LODT.js";import{a as n}from"./chunk-6SYTCZ5G.js";import{a as K}from"./chunk-Z7MUAB3C.js";import{a as J}from"./chunk-ADLGCSQK.js";import{a as U}from"./chunk-EFFTH5LW.js";import"./chunk-BWBGYMAI.js";import"./chunk-V56KALMS.js";import{a as S}from"./chunk-C257UEHM.js";import{a as Y}from"./chunk-3XEIZZHC.js";import{a as W}from"./chunk-ZWSICCTU.js";import"./chunk-APLZF2FC.js";import"./chunk-NIE6URWE.js";import{a as D}from"./chunk-VDZHRZJL.js";import"./chunk-KU5JAIEB.js";import{a as M}from"./chunk-N7M4WPYO.js";import"./chunk-BGM7VCLD.js";import"./chunk-ZOICBMHG.js";import"./chunk-EL33JOKC.js";import"./chunk-EOP2LXLP.js";import"./chunk-MK3UHL4H.js";import{a as B}from"./chunk-PCHFEFT4.js";import"./chunk-CEFYYGFM.js";import{a as r}from"./chunk-ARPRWHND.js";import{a as q,b as z}from"./chunk-VOI5HXP6.js";import"./chunk-UXWHPN2C.js";import"./chunk-FBJYO5PW.js";import"./chunk-SASH6XDT.js";import"./chunk-DMJF4GTY.js";import{a as V}from"./chunk-3SG23KH5.js";import"./chunk-J3H3UK4G.js";import"./chunk-LAQFFA4M.js";import"./chunk-3E53RUR7.js";import{a as $}from"./chunk-TTNOFDP6.js";import{c as F}from"./chunk-5D3DZNMD.js";import{H as A}from"./chunk-B3TUML6P.js";import"./chunk-U2JBD6QP.js";import"./chunk-KXXSC5XL.js";import"./chunk-VVTHM3UH.js";import{a as O}from"./chunk-34VPQFZA.js";var st=`<table id="fshNewGuildLog" class="fshInvFilter"><thead><tr><th colspan="11"><b>Guild Log Version 4</b></th><th colspan="3"><span id="rfsh" class="sendLink">Reset</span> <a href="${A}" class="sendLink">Old Guild Log</a></th></tr></thead><tbody><tr><td rowspan="3"><b>&nbsp;Filters:</b></td><td class="fshRight">&nbsp;Potions:</td><td><input id="fshPotion" type="checkbox" item="1"/></td><td class="fshRight">&nbsp;Store/Recalls:</td><td><input id="fshStore" type="checkbox" item="2"/></td><td class="fshRight">&nbsp;Relics:</td><td><input id="fshRelic" type="checkbox" item="4"/></td><td class="fshRight">&nbsp;Mercenaries:</td><td><input id="fshMerc" type="checkbox" item="5"/></td><td class="fshRight">&nbsp;Group Combats:</td><td><input id="fshGroup" type="checkbox" item="6"/></td><td colspan="3">&nbsp;</td></tr><tr><td class="fshRight">&nbsp;Donations:</td><td><input id="fshDonation" type="checkbox" item="7"/></td><td class="fshRight">&nbsp;Rankings:</td><td><input id="fshRank" type="checkbox" item="8"/></td><td class="fshRight">&nbsp;GvGs:</td><td><input id="fshGvG" type="checkbox" item="9"/></td><td class="fshRight">&nbsp;Tag/UnTags:</td><td><input id="fshTag" type="checkbox" item="3"/></td><td class="fshRight">&nbsp;Titans:</td><td><input id="fshTitan" type="checkbox" item="10"/></td><td class="fshRight">&nbsp;Other:</td><td><input id="fshOther" type="checkbox" item="0"/></td><td>&nbsp;</td></tr><tr><td colspan="2">&nbsp;[<span id="fshAll" class="fshLink">Select All</span>]</td><td colspan="2">&nbsp;[<span id="fshNone" class="fshLink">Select None</span>]</td><td colspan="9"></td></tr><tr><td id="fshOutput" class="fshBlue" colspan="14">Loading Page 1 ...</td></tr></tbody></table><table id="fshInjectHere"></table>`,nt='<tbody><tr><td class="header" width="16">&nbsp;</td><td class="header" width="20%">Date</td><td class="header" width="80%">Message</td></tr></tbody>',x=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],rt=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];function d(t){return W({cmd:"guild",subcmd:"log",page:t})}function R(){let t=n("notification-guild-log");a(t)}var ft=[[],["(Potion)"],["recalled the item","took the item","auto-returned the","stored the item"],["has added flags to","has removed flags to","has added tags to","has removed some tags from"],["relic. This relic now has an empower level of","relic. The relic empower level has been reset to zero.","failed to capture the relic","captured the relic","captured your relic","has captured the undefended relic","attempted to capture your relic",/ empowered the .+ relic/,/ removed the empowerment from the .+ relic/],["disbanded a mercenary.","hired the mercenary"],["has disbanded one of their groups",/A group from your guild was (.*) in combat./],[/deposited [,0-9]+ gold into the guild bank/,/deposited [,0-9]+ Fallen Sword Points into the guild./],["has added a new rank entitled","has deleted the rank","has requested to join the guild","has invited the player","has officially joined the guild","has been kicked from the guild by","has left the guild","has been assigned the rank","has added/updated a rank entitled","has been stripped of their rank by",/has revoked .+'s invite to the guild/],[/resulted in .* with a final score of/,"resulted in a draw. Your GvG rating ","has just initiated a conflict with the guild","has initiated a conflict with your guild","is participating in the conflict against"],["Titan Reward item","from your guild's contribution to the defeat of the titan","7 day cooldown has been activated on your guild for this titan"]];function ht(t,e){return B(e)?t.includes(e):e.test(t)}function ut(t,e){return e.some(r(ht,t))}function P(t){let e=ft.findIndex(r(ut,t));return e===-1?0:e}var o={},v=0,g=0,G=0,p=0,N=0,c=0,at=0,s=[],b=!0,l=0;function mt(t){c=Number(t.value);let[e]=O(/\d+/,M(t.parentNode));at=Number(e),c===1&&(p=Math.min(at,G)),u(`Loading ${c} of ${p}...`,g)}function pt(t){N=Y(t);let e=S('input[name="page"]',N);e&&mt(e)}function gt(t,e){return[()=>c===1,()=>o.log,()=>o.log[0],()=>o.log[0][0],()=>t===o.log[0][0],()=>e===o.log[0][2]].every(X)}function bt(t){let e=t[0],i=e.rows.length-1;for(let f=1;f<i;f+=2){let C=e.rows[f],H=_(C.cells[1]),I=tt(H),k=C.cells[2].innerHTML;if(gt(I,k)){b=!1;break}s.push([c*100+f,I,H,k,P(k)])}}function yt(){let t=U("width_full",N);t.length===1&&bt(t)}function ct(t){pt(t),yt()}function kt(t){s.push([0].concat(t))}function wt(){let t=[];return b?t=K(p,d).map(async e=>ct(await e)):o.log.forEach(kt),J(t)}function y(){z("fsh_guildLog",o)}var Lt=(t,e)=>e[1]!==t,xt=t=>t.slice(1,5);function Rt(){o.log=s.filter(r(Lt,new Date().setSeconds(0,0))).map(xt),y()}function T(t,e){let i=t.insertCell(-1);h(e,i),i.className="row"}function Pt(t){let e=l.insertRow(-1);t.push(e),o.checks[t[4]]||(e.className="fshHide"),T(e,'<i class="fas fa-user-friends" style="color: rgb(122,95,46);"></i>'),T(e,`<nobr>${t[2]}</nobr>`),T(e,t[3])}function Tt(t){let e=l.insertRow(-1);t.push(e),o.checks[t[4]]||(e.className="fshHide");let i=e.insertCell(-1);i.className="divider",i.colSpan=3}function Gt(t){Pt(t),Tt(t)}function Nt(){l=Z({id:"fshInjectHere",className:"width_full"}),j(l,nt),s.forEach(Gt);let t=n("fshInjectHere");w().replaceChild(l,t),et("myGuildLog",1,3),ot(),it()}function vt(t){t.checked=o.checks[t.getAttribute("item")]}function E(){D("input",v).forEach(vt),y()}var Et=(t,e)=>t[0]-e[0];function Ct(){b&&s.sort(Et),u("Loading complete.",g),Rt(),Nt()}async function lt(t){ct(t),await wt(),Ct()}function Ht(t,e,i){i[4]===t&&(L(i[5],e),L(i[6],e))}function It(t){let e=Number(t.getAttribute("item"));o.checks[e]=!o.checks[e],y(),s.forEach(r(Ht,e,!o.checks[e]))}function dt(t){t&&t.classList&&t.classList.remove("fshHide")}function Ot(t){dt(t[5]),dt(t[6])}function Mt(){o.checks=x.slice(0),E(),s.forEach(Ot)}function jt(t){a(t[5]),a(t[6])}function At(){o.checks=rt.slice(0),E(),s.forEach(jt)}async function Ft(){o.log=!1,y(),u("Loading Page 1 ...",g),s=[],b=!0,h("",n("fshInjectHere"));let t=await d(1);lt(t)}function St(){return Q([[t=>t.tagName==="INPUT",It],[m("fshAll"),Mt],[m("fshNone"),At],[m("rfsh"),Ft]])}function Dt(t){o=t||o,o.checks=o.checks||x.slice(0)}function Bt(){v=n("fshNewGuildLog"),g=n("fshOutput")}function _t(){G=Number(F("newGuildLogHistoryPages")),p=G}async function $t(){let t=await d(1);lt(t)}function Ut(t){Dt(t),h(st,w()),Bt(),$(v,St()),E(),_t(),$t()}async function Vt(){if(V())return;let t=q("fsh_guildLog");R(),Ut(await t)}export{Vt as default};
//# sourceMappingURL=newGuildLog-QMBTEZCV.js.map
