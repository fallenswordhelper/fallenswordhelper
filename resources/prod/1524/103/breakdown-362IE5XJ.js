import{a as T}from"./chunk-2G3G7YWE.js";import{a as I}from"./chunk-EJD7CRXC.js";import"./chunk-ED22NKV6.js";import"./chunk-SB7YQA5D.js";import"./chunk-ZZGX6XAG.js";import{a as v}from"./chunk-VVBBCBXF.js";import{a as y}from"./chunk-K6RV6BG4.js";import{a as s}from"./chunk-7WQ5UNSS.js";import"./chunk-4IQVGLAY.js";import{a as B}from"./chunk-5KF2FUKO.js";import{a as w}from"./chunk-RK5HVFU5.js";import{a as P}from"./chunk-KN5AGMFI.js";import"./chunk-5U3MVXXA.js";import"./chunk-RAPV3KZQ.js";import"./chunk-2Y5VLTIC.js";import{a as x}from"./chunk-DSQHKKZ4.js";import"./chunk-IETC7J5T.js";import{d as E}from"./chunk-IHGCI6LD.js";import"./chunk-7M4DEPZS.js";import{b as m}from"./chunk-DLFJWHV6.js";import{a as o}from"./chunk-6SYTCZ5G.js";import"./chunk-EFFTH5LW.js";import"./chunk-CMXQAXF2.js";import"./chunk-APLZF2FC.js";import"./chunk-NIE6URWE.js";import"./chunk-BGM7VCLD.js";import"./chunk-ZOICBMHG.js";import"./chunk-EL33JOKC.js";import"./chunk-EOP2LXLP.js";import{a as C}from"./chunk-MK3UHL4H.js";import"./chunk-PCHFEFT4.js";import"./chunk-CEFYYGFM.js";import{a as f}from"./chunk-ARPRWHND.js";import{a}from"./chunk-3SG23KH5.js";import"./chunk-J3H3UK4G.js";import"./chunk-LAQFFA4M.js";import{a as r}from"./chunk-TTNOFDP6.js";import{c as h}from"./chunk-5D3DZNMD.js";import{T as k,r as b}from"./chunk-B3TUML6P.js";import"./chunk-U2JBD6QP.js";import"./chunk-KXXSC5XL.js";import"./chunk-VVTHM3UH.js";function p(e){return T({data:{cmd:"composing",subcmd:"dobreakdown",item_list:e},dataType:"json"})}var l=0,d=0;function N(e){let t=e.id.replace(`${d}-item-`,"");l[t]&&l[t].craft==="Perfect"&&P(e)}function j(){let e=B("selectable-item",o(`${d}-items`));e.length!==0&&e.forEach(N)}function A(e){l=e.items;let t=w({className:"fshAC"});s(t,'<button class="fshBl">Perfect</button>'),x(m(),t),r(t,j)}async function u(e){if(a())return;d=e;let t=await I();A(t)}var c="disableBreakdownPrompts",i=0,n=[];function D(e){e.hide()}function F(e,t){e.animate({height:0},500,t)}function H(){let e=$("#composingMessageContainer");e.animate({opacity:0},500,f(F,e,f(D,e)))}function O(e,t){return $("<div/>",{id:"composingMessageText"}).css({width:"90%","text-align":"center","background-color":t,color:"rgb(255, 255, 255)",margin:"5px auto 5px auto",padding:"2px"}).html(e)}function M(e,t){$("#composingMessageContainer").remove(),$("#composingMessage").append($("<div/>",{id:"composingMessageContainer",width:"100%"}).append(O(e,t))),setTimeout(H,5e3)}function Q(e){e.error!==0?M(`Error: ${e.msg}`,"rgb(164, 28, 28)"):v(`${k+b}breakdown&m=1`)}async function V(){let e=await p(n);Q(e)}function L(e){if(e.stopPropagation(),n.length===0){M("Error: No items selected.","rgb(164, 28, 28)");return}V()}function R(e){i&&e.target.id==="breakdown-selected-items"&&L(e)}function S(e){if(!y("selectable-item",e.target))return;let t=e.target.id.replace("composing-item-",""),g=n.indexOf(t);g===-1?n.push(t):n.splice(g,1)}function U(){i=!i,C(c,i)}function _(){s(m(),`<table class="fshTblCenter"><tbody>${E(c)}</tbody></table>`)}function q(e){r(e.parentNode,R,!0),r(o("composing-items"),S),r(o(c),U)}function z(){if(a())return;let e=o("breakdown-selected-items");e&&(u("composing"),i=h(c),_(),q(e))}export{z as default};
//# sourceMappingURL=breakdown-362IE5XJ.js.map
