import{a as st}from"./chunk-XYNZCBOJ.js";import{a as y}from"./chunk-6CJCL3Z3.js";import"./chunk-SSPNQIJC.js";import"./chunk-DGKP5S3V.js";import{a as ot}from"./chunk-2XA73QVM.js";import"./chunk-S3GOMWBR.js";import{a as it}from"./chunk-UBMARM2C.js";import"./chunk-NLPE34FY.js";import{$ as T,B as v,F as P,L as x,M as tt,N as F,P as Q,S as w,T as I,Z as B,_ as k,aa as C,ba as et,ca as nt,d as X,q as Y,r as u,s as p,u as $,v as Z,w as M}from"./chunk-Y5BMQBVG.js";import"./chunk-UJIOCJ3O.js";import{a as N}from"./chunk-Q3UMEE4F.js";import"./chunk-RFJ3WNN3.js";import{a as G}from"./chunk-VJYVM6KC.js";import"./chunk-YP55UNC6.js";import"./chunk-G4Y2RVGL.js";import{a as q}from"./chunk-WJGEKWR5.js";import"./chunk-JALJ6QIZ.js";import{a as E}from"./chunk-NGC57R36.js";import"./chunk-PPVAQIV6.js";import{a as W}from"./chunk-I2TTXFDP.js";import"./chunk-NRWJMAHH.js";import"./chunk-K4B7GDYL.js";import{a as K}from"./chunk-KU6X3UZY.js";import"./chunk-WS7NDR34.js";import"./chunk-U23UIQ4J.js";import"./chunk-DIXVNWJK.js";import"./chunk-JOVTQVLX.js";import{b as J}from"./chunk-QC454MFH.js";import{a as R}from"./chunk-R6LOYYKU.js";import"./chunk-NNEMTXQK.js";import"./chunk-EEFLVRLB.js";import{a as g}from"./chunk-BCLTLFAS.js";import"./chunk-BVHFLUJI.js";import"./chunk-TRTGTDIN.js";import{b as U}from"./chunk-S6LVOURD.js";import"./chunk-LXKLJ4E3.js";import"./chunk-VNX4IMNY.js";import"./chunk-KWOXJEE6.js";import"./chunk-GBEPYIIX.js";function pt(t){let e;return{c(){e=Z("Perfect")},m(n,s){u(n,e,s)},d(n){n&&p(e)}}}function dt(t){let e,n,s,r,c,a,h,_,m,l,o,b;function mt(i){t[4](i)}let j={};t[0]!==void 0&&(j.howMany=t[0]),n=new st({props:j}),F.push(()=>B(n,"howMany",mt)),n.$on("select",t[2]);function ut(i){t[5](i)}let z={};return t[1]!==void 0&&(z.inSt=t[1]),a=new ot({props:z}),F.push(()=>B(a,"inSt",ut)),a.$on("toggle",t[6]),l=new it({props:{$$slots:{default:[pt]},$$scope:{ctx:t}}}),l.$on("click",t[3]),{c(){e=$("div"),k(n.$$.fragment),r=M(),c=$("div"),k(a.$$.fragment),_=M(),m=$("div"),o=$("div"),k(l.$$.fragment),v(e,"class","svelte-16r61e8"),v(c,"class","svelte-16r61e8"),P(o,"display","contents"),P(o,"--button-color","blue"),v(m,"class","svelte-16r61e8")},m(i,f){u(i,e,f),T(n,e,null),u(i,r,f),u(i,c,f),T(a,c,null),u(i,_,f),u(i,m,f),Y(m,o),T(l,o,null),b=!0},p(i,[f]){let A={};!s&&f&1&&(s=!0,A.howMany=i[0],Q(()=>s=!1)),n.$set(A);let H={};!h&&f&2&&(h=!0,H.inSt=i[1],Q(()=>h=!1)),a.$set(H);let O={};f&256&&(O.$$scope={dirty:f,ctx:i}),l.$set(O)},i(i){b||(w(n.$$.fragment,i),w(a.$$.fragment,i),w(l.$$.fragment,i),b=!0)},o(i){I(n.$$.fragment,i),I(a.$$.fragment,i),I(l.$$.fragment,i),b=!1},d(i){i&&p(e),C(n),i&&p(r),i&&p(c),C(a),i&&p(_),i&&p(m),C(l)}}}function gt(t,e,n){let s=x(),r="all",c=U("selectST");function a(o){s("select",[o.detail,r,c])}function h(){s("perf",[r,c])}function _(o){r=o,n(0,r)}function m(o){c=o,n(1,c)}function l(o){tt.call(this,t,o)}return[r,c,a,h,_,m,l]}var D=class extends nt{constructor(e){super(),et(this,e,gt,dt,X,{})}},rt=D;async function S(t,e){let n=await Promise.all(t.map(e));return t.filter((s,r)=>n[r])}async function L(t,e){for(let n of t)if(await e(n))return!0;return!1}function d(t){return t.id.split("-")[2]}function ct(t,e){let[n]=e.children[0].children;t.items[d(n)].is_in_st&&(n.style.backgroundColor="rgba(255,0,0,0.3)")}function ht(t,e){e.filter(n=>n.addedNodes?.[0]?.tagName==="DIV").forEach(n=>{ct(t,n.addedNodes[0])})}function V(t){let e=R("auction-items");K(e.children).forEach(g(ct,t)),new MutationObserver(g(ht,t)).observe(e,{childList:!0})}function _t(){return new rt({target:J})}var $t=t=>t.parentNode.parentNode.dataset.tipped,yt=t=>$t(t).split("?")[1],St=t=>G(yt(t),"item_id"),at=t=>W(Number(t))?1/0:Number(t),bt=async t=>(await y()).items[d(t)].type,vt=async t=>await bt(t)===12,wt=async t=>(await y()).items[d(t)].craft,It=async t=>await wt(t)==="Perfect",kt=[t=>t==="-1",(t,e)=>St(e)===t,(t,e)=>t==="-2"&&vt(e)],Tt=async(t,e,n)=>Boolean(await n(t,e)),Ct=(t,e)=>L(kt,g(Tt,t,e)),qt=async(t,e)=>Boolean(await Ct(t,e)),Nt=(t,e)=>S(e,g(qt,t)),Et=async t=>!(await y()).items[d(t)].is_in_st,lt=(t,e)=>t?e:S(e,Et);async function Mt([t,e,n],s){(await Nt(t,await lt(n,s))).slice(0,at(e)).forEach(N)}function ft(t,e){let n=E("#auction-items .selectable-item");n.length&&(E("#auction-items .auction-create-selected div").forEach(N),e(t.detail,n))}function Pt(t){q("ahQuickCreate","Select Filter"),ft(t,Mt)}async function Ft([t,e],n){(await S(await lt(e,n),It)).slice(0,at(t)).forEach(N)}function Qt(t){q("ahQuickCreate","Perfect Filter"),ft(t,Ft)}function Bt(){q("ahQuickCreate","toggleSelectST")}async function Dt(){let t=await y(),e=_t();e.$on("select",Pt),e.$on("perf",Qt),e.$on("toggle",Bt),t.items.fshHasST&&V(t)}export{Dt as default};
//# sourceMappingURL=quickCreate-OB3Y2PRQ.js.map
