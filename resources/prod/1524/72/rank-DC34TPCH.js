import{a as T,b as P}from"./chunk-ZHWOXACC.js";import{a as A}from"./chunk-EXLQ4BGQ.js";import{a as I}from"./chunk-XNS7PUCH.js";import{a as S}from"./chunk-UW5OUWCJ.js";import{b as v}from"./chunk-6RQSBTBG.js";import"./chunk-JDIFASPY.js";import"./chunk-2J33TFHW.js";import"./chunk-CGP6PEOR.js";import"./chunk-TLN2JFU6.js";import{a as E}from"./chunk-BPDYINQT.js";import"./chunk-TL6G3LGF.js";import"./chunk-KN743HJH.js";import{a as p}from"./chunk-COVFZC6T.js";import{a as j}from"./chunk-D5NBLEHA.js";import{a as s}from"./chunk-VTXK2OMK.js";import{a as D}from"./chunk-GPWJ6JMN.js";import{a as y}from"./chunk-TGDLGIAS.js";import"./chunk-V7YJKIIO.js";import"./chunk-PD6SZCQT.js";import"./chunk-B3CGSESQ.js";import{a as w}from"./chunk-4KLZTRYV.js";import"./chunk-AHV2UEZ3.js";import"./chunk-3JDXB3EI.js";import"./chunk-WNCYCVIY.js";import{a as N}from"./chunk-B57QCG7F.js";import{a as C}from"./chunk-W5R4CDPA.js";import"./chunk-3F6JEXZ5.js";import"./chunk-X2CD2FQJ.js";import"./chunk-AX2MQ55Q.js";import"./chunk-XUS25RRF.js";import"./chunk-BBVGLVFU.js";import"./chunk-2U4UTP4T.js";import"./chunk-RJ63T2CH.js";import"./chunk-HGV77SOI.js";import"./chunk-WO4JQIFY.js";import{a as b}from"./chunk-N6BPKERE.js";import"./chunk-JPF23T2W.js";import"./chunk-CWXW6BIP.js";import"./chunk-B4ELP4GT.js";import{a as f}from"./chunk-RYU7Q6YO.js";import"./chunk-YWEOEFMO.js";import"./chunk-3T3NCQXQ.js";import{a as R}from"./chunk-S4QW6F63.js";import{a as B}from"./chunk-RDROC6MQ.js";import{b as m}from"./chunk-JRL4EUGF.js";import"./chunk-EGI62KCW.js";import"./chunk-2CPSGTYM.js";import"./chunk-XFCSBA6U.js";import"./chunk-4L4BW6XC.js";import{a}from"./chunk-6OIRWEPN.js";import"./chunk-GMG2NTG6.js";import"./chunk-VQMOGQ7P.js";import"./chunk-WNDIM2XK.js";import"./chunk-DA7DPQEG.js";import"./chunk-26GFOSBF.js";import{a as c}from"./chunk-EQLDKUD6.js";import{b as k}from"./chunk-WAWYOTCQ.js";import"./chunk-LYEPPGHA.js";import"./chunk-EHGMFAOI.js";import{a as x}from"./chunk-S7INW7PN.js";import"./chunk-J2ILMRN6.js";import"./chunk-ZDQ6OSIO.js";var H=[[2,5],[4,4],[64,5],[256,.1],[512,.2],[4096,.5],[32768,.2],[524288,.1],[65536,5],[4194304,4]],V=(t,[,o])=>t+o-1,_=t=>H.filter(([o])=>A(t,o)).reduce(V,0),L=t=>t>>>0,M=t=>L(t).toString(2),q=t=>M(t).split("").map(Number).reduce(I,0),F=t=>v(_(t)+q(t),1);function G(t,o){let[r]=o.children,i=f(r.firstChild),n=t.find(e=>e&&e.name===i);n&&D(r,`<span class="fshBlue">(${F(n.permissions)}) Tax:(${n.tax||0}%)</span> `)}function O(t,o){p("ranks","fetchRankData"),t.forEach(a(G,o))}function Q(t,o,r){let i=E({className:"custombutton",type:"button",value:"Get Rank Weightings"});c(i,a(O,t,o));let n=r.parentNode.parentNode;s(n,"&nbsp;"),w(n,i)}function u(t,o){let r=C('#pCC a[href*="=ranks&subcmd2=add"]');r&&Q(t,o,r)}function d(t,o){return b({cmd:"guild",subcmd:"ranks",subcmd2:t,rank_id:o}).then(()=>({s:!0}))}function l(t,o){return T({subcmd2:t,rank_id:o})}function h(t,o){return y(l,d,t,o)}var g,Z=t=>["Up","Down"].includes(t.target.value);function z(t,o){return g>=Math.min(t.rowIndex,o)||o<1||o>t.parentNode.rows.length}function J(t){return t==="Up"?-1:2}function K(t){return t==="Up"?-22:22}function X(t,o,r){let i=t.target.getAttribute("onclick").match(/rank_id=(\d+)/);h(B(t.target.value),i[1]);let n=o.parentNode.rows[r];j(o,n);let e=K(t.target.value);window.scrollBy(0,e),t.stopPropagation()}function Y(t){p("ranks","overrideUpDown");let o=t.target.parentNode.parentNode.parentNode,r=o.rowIndex+J(t.target.value);z(o,r)||X(t,o,r)}function tt(t){Z(t)&&Y(t)}function U(){g&&k("ajaxifyRankControls")&&c(m,tt,!0)}function W(t,o){o.includes(N())&&(g=t.rowIndex)}function ot(){let t=m.lastElementChild.previousElementSibling.rows?.[7]?.children[0]?.children[0]?.rows;if(t)return x(t)}function rt(t,o){let r=o.children[0],i=f(r),n=t.find(e=>e.name===i);if(n?.members.length){let e=n.members.map($=>$.name);W(o,e),s(r,` <span class="fshBlue">- ${e.join(", ")}</span>`)}}function nt(t){let o=ot();o&&(S([5,3,o,1,a(rt,t)]),u(o,t),U())}async function et(){if(R())return;let t=await P();t?.s&&nt(t.r)}export{et as default};
//# sourceMappingURL=rank-DC34TPCH.js.map
