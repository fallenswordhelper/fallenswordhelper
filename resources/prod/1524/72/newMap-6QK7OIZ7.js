import{a as Qi,b as Xi}from"./chunk-YVDYT2PC.js";import{a as Ji}from"./chunk-3LY3SZZH.js";import"./chunk-UMRVFFNH.js";import{a as Yi}from"./chunk-43B4Z5AL.js";import{a as qi}from"./chunk-EXLQ4BGQ.js";import{a as bt}from"./chunk-LWOJH3AR.js";import{a as Wi,b as Ui,c as zi}from"./chunk-AR6HP4QU.js";import{a as Ki}from"./chunk-22CN2TPM.js";import{b as $i}from"./chunk-DHAX6Y46.js";import{a as Ri}from"./chunk-MVYYRW6Q.js";import{a as P}from"./chunk-7L63DHQK.js";import{a as Be,b as Et}from"./chunk-6RQSBTBG.js";import"./chunk-KT7YETES.js";import{a as Pi,b as Fi}from"./chunk-KGKZFEEP.js";import{a as T}from"./chunk-2GIEFQ3Z.js";import{a as Ii}from"./chunk-KKKCXIDF.js";import{a as Oi}from"./chunk-QLMXTH2D.js";import{a as _i}from"./chunk-YJUMNTVY.js";import"./chunk-D4XV75RA.js";import{a as Gi}from"./chunk-26ZXOKMI.js";import{a as bi,b as Mi}from"./chunk-VXWE5I2V.js";import{a as Ei}from"./chunk-JDIFASPY.js";import{a as Hi}from"./chunk-HX27FZEN.js";import{a as Lt}from"./chunk-OFYYBK22.js";import{a as St}from"./chunk-YJMONPHD.js";import"./chunk-CGP6PEOR.js";import"./chunk-TLN2JFU6.js";import{a as Li}from"./chunk-QAEC7Q2F.js";import{a as Si}from"./chunk-Z2G7MA2G.js";import{a as hi}from"./chunk-GMZ24FAT.js";import{a as pi}from"./chunk-Q7HUH24W.js";import{a as ui}from"./chunk-JDGRIKWP.js";import"./chunk-P7AJ32G5.js";import{a as kt}from"./chunk-BPDYINQT.js";import{a as g}from"./chunk-5YJHNJI4.js";import"./chunk-T5XGIJJG.js";import{$ as wi,B as Ct,D as xi,T as sr,U as ki,a as wt,aa as Ci,d as vi,e as fr,o as k,p as ae,q as le,r as yi,s as S,t as ke,u as we,v as Di,z as L}from"./chunk-67LC5BTJ.js";import"./chunk-TL6G3LGF.js";import{a as Ai}from"./chunk-RBL5HMUU.js";import{a as Bi}from"./chunk-OQW5JXLO.js";import{a as ur}from"./chunk-6XA5LDBE.js";import"./chunk-6ZCGIPKA.js";import{a as h}from"./chunk-WXZN5FUM.js";import{a as lr}from"./chunk-HLVMUI2I.js";import{a as Bt}from"./chunk-XWYDVHON.js";import{a as Ti,b as Vi,c as Ni}from"./chunk-XFHQTXO2.js";import{a as gi}from"./chunk-BG6J4KBY.js";import"./chunk-RSHL5TEX.js";import{a as Ce}from"./chunk-M3LPAC6D.js";import{a as ci}from"./chunk-DMAR4V7L.js";import"./chunk-SGQ7A427.js";import"./chunk-66N7ZJ75.js";import{a as Tn}from"./chunk-YAC4RJUH.js";import{a as ti}from"./chunk-KN743HJH.js";import"./chunk-45NMSMDA.js";import"./chunk-SZUEAQD6.js";import{a as mi}from"./chunk-RWEKY74O.js";import{a as xe}from"./chunk-COVFZC6T.js";import{a as At}from"./chunk-D5NBLEHA.js";import{a as re}from"./chunk-VTXK2OMK.js";import{a as De}from"./chunk-TGDLGIAS.js";import{a as di}from"./chunk-V7YJKIIO.js";import"./chunk-PD6SZCQT.js";import"./chunk-B3CGSESQ.js";import{a as f}from"./chunk-BWYRR4E3.js";import{a as m}from"./chunk-SJ4JHGNU.js";import{a as i}from"./chunk-4KLZTRYV.js";import"./chunk-AHV2UEZ3.js";import{a as I}from"./chunk-3JDXB3EI.js";import{a as ei}from"./chunk-TQVLXMST.js";import{a as ni}from"./chunk-LEBDWDSW.js";import"./chunk-SJXIBZCO.js";import{f as ie}from"./chunk-K3PJF25C.js";import{a as xt}from"./chunk-B57QCG7F.js";import"./chunk-QUZRJFIC.js";import{a as ye}from"./chunk-W5R4CDPA.js";import{a as gt}from"./chunk-3F6JEXZ5.js";import{a as oi}from"./chunk-X2CD2FQJ.js";import{a as oe}from"./chunk-AX2MQ55Q.js";import{a as ge}from"./chunk-XUS25RRF.js";import"./chunk-GYG5KOQA.js";import{a as li}from"./chunk-5ABG72YM.js";import{a as fi}from"./chunk-BBVGLVFU.js";import"./chunk-2U4UTP4T.js";import{a as si}from"./chunk-YD4Q4HJF.js";import"./chunk-PYVS5VYO.js";import"./chunk-RJ63T2CH.js";import"./chunk-HGV77SOI.js";import{a as z}from"./chunk-WO4JQIFY.js";import{a as ne}from"./chunk-N6BPKERE.js";import{a as pt,b as ar}from"./chunk-JPF23T2W.js";import"./chunk-CWXW6BIP.js";import{a as ii}from"./chunk-B4ELP4GT.js";import{a as ri}from"./chunk-RYU7Q6YO.js";import"./chunk-YWEOEFMO.js";import{a as y}from"./chunk-M3UVKNJS.js";import"./chunk-XSDEDFDV.js";import"./chunk-3T3NCQXQ.js";import{a as Y}from"./chunk-FLDADVNP.js";import{a as Ke}from"./chunk-74DT6TXN.js";import{a as w}from"./chunk-KEMOKZCE.js";import{a}from"./chunk-EGI62KCW.js";import{a as ai}from"./chunk-QS45D4PH.js";import{a as U}from"./chunk-2CPSGTYM.js";import"./chunk-XFCSBA6U.js";import"./chunk-4L4BW6XC.js";import{a as u}from"./chunk-6OIRWEPN.js";import{a as yt,b as Dt}from"./chunk-LR3ZNNXD.js";import"./chunk-GMG2NTG6.js";import{a as dt}from"./chunk-WNDIM2XK.js";import"./chunk-DA7DPQEG.js";import"./chunk-26GFOSBF.js";import{a as vt}from"./chunk-HLPYXISZ.js";import{a as B}from"./chunk-EQLDKUD6.js";import{b as p}from"./chunk-WAWYOTCQ.js";import{a as Zn}from"./chunk-LYEPPGHA.js";import{a as R}from"./chunk-EHGMFAOI.js";import{a as ve}from"./chunk-LAQBU75H.js";import{a as ht}from"./chunk-S7INW7PN.js";import{$ as Rn,Aa as Yn,Ba as Qn,Ca as Xn,Da as Jn,Ea as jn,K as nr,N as Nn,Na as mt,P as ir,X as Gn,Y as he,Z as st,_ as $n,aa as In,b as te,ba as Pn,ca as _n,da as Fn,e as ft,ea as On,fa as Kn,ga as ut,ha as qn,ia as Wn,ja as Un,k as pe,la as zn,ma as W,na as ct,oa as b,p as or,x as Vn}from"./chunk-J2ILMRN6.js";import{a as n}from"./chunk-ZDQ6OSIO.js";var fe;function xl(e){return e}function kl(e){return n.showBuffInfo&&e.some(xl)}function wl(){if(fe)g(fe,!1);else{fe=m({className:"fshActionBox",innerHTML:"<div></div><div></div><div></div><div></div><div></div><div></div>"});let e=a("actionContainer");Si(fe,e.children[2])}return fe}function Cl(){fe&&g(fe,!0)}function cr(e){if(kl(e))return wl();Cl()}var _,mr;function Bl(e){_=e.children[3],_.className="fshBlue",f("CA ",_),mr=h(),i(_,mr),P(_," active")}function Al(e,t){_?g(_,!1):Bl(e),f(t.level,mr)}function Ll(){_&&g(_,!0)}function dr(e,t){t?Al(e,t):Ll()}var F,pr;function Sl(e){F=e.children[4],F.className="fshRed",f("Doubler ",F),pr=h(),i(F,pr),P(F," active")}function El(e,t){F?g(F,!1):Sl(e),f(t.level,pr)}function bl(){F&&g(F,!0)}function hr(e,t){t?El(e,t):bl()}var Q,gr;function Ml(e){Q=e.children[2],f("Damage bonus: ",Q),gr=h(),i(Q,gr),P(Q,"%")}function Hl(e,t){if(e){let r=Math.min(Math.round(Math.floor(t/5)*Number(e.level))*.01,20);return Be(r,2).toString()}return"0"}function Tl(e,t,r){Q?g(Q,!1):Ml(e),f(Hl(t,Number(r)),gr)}function Vl(){Q&&g(Q,!0)}function vr(e,t,r){t?Tl(e,t,r):Vl()}function d(e,t){f(Y(e),t)}var se,yr;function Nl(e){se=e.children[1],f("Kill Streak: ",se),yr=h(),i(se,yr)}function Gl(e,t){se?g(se,!1):Nl(e),d(t,yr)}function $l(){se&&g(se,!0)}function Dr(e,t,r,o){t||r?Gl(e,o):$l()}function Rl(e,t){return t.name===e}function X(e){let{buffs:t}=GameData.player();if(t)return t.find(u(Rl,e))}function xr(){let e=GameData.player().teleportCooldown;return e>1&&e}var Il=["red","orange","yellow"];function kr(){let e=$("#actionlist-shield-imp");e.length===1&&e.css("background-color",Il[e.text()]||"#ad8043")}var V=0,wr=0;function Pl(e){Xi(e)&&GameData.fetch(W)}function _l(){X("Summon Shield Imp")||Qi([xt()],[55]).then(Pl)}function Fl(e){return e?Number(e.stack):0}var Ol=["imp-0","imp-1","imp-1"];function Kl(e){return Ol[e]||"fshGreen"}function ql(e){[V]=e.children,f("Shield Imps Remaining: ",V),wr=h(),i(V,wr),re(V,"&nbsp;");let t=T({className:"xSmallLink",textContent:"Recast"});i(V,t),B(t,_l)}function Wl(e,t){V?g(V,!1):ql(e);let r=Fl(t);V.className=Kl(r),f(r,wr)}function Ul(){V&&g(V,!0)}function Cr(e,t,r){t||r?Wl(e,t):Ul()}function zl(e){return e.type===0}function Br(){let{dynamic:e}=GameData.realm();return I(e)&&e.some(zl)}function x(e){return h({textContent:e})}var ue,Mt,ji;function Yl(e,t){ue=e.children[5],f("Teleport Cooldown: ",ue),Mt=x(t.toString()),i(ue,Mt)}function Ql(e,t){ue?g(ue,!1):Yl(e,t)}function Xl(){ue&&g(ue,!0)}function Zi(){let e=Math.max(Math.ceil((ji-Date.now())/1e3),0);f(e,Mt),e>0&&setTimeout(Zi,500)}function ea(e){Mt&&(ji=Date.now()+e*1e3,Zi())}function ta(e,t){t?Ql(e,t):Xl()}var qe,Ar,Lr,Sr,Er,br,Mr;function Jl(){qe=X("Death Dealer"),Ar=X("Doubler"),Lr=X("Counter Attack"),Sr=X("Summon Shield Imp"),Er=xr(),br=Br(),Mr=GameData.player().killStreak}function Hr(){kr(),Jl();let e=cr([qe,Ar,Lr,Sr,Er,br]);e&&(Cr(e,Sr,qe),Dr(e,qe,br,Mr),vr(e,qe,Mr),dr(e,Lr),hr(e,Ar),ta(e,Er))}function jl(e,t){ea(t.player.teleportCooldown)}function ra(){Hr(),$.subscribe(`${st} ${$n}`,Hr),$.subscribe(Un,jl)}function oa(){n.showBuffInfo=!n.showBuffInfo,y("showBuffInfo",n.showBuffInfo),Hr()}function Zl(){return window.GameController&&GameController.Realm&&!GameController.Realm.footprintTileList}function Tr(){Zl()&&(GameController.Realm.footprintTileList=[])}function na(e,t,r){return pi({className:`fshCurveEle fshCurveLbl fshPoint tip-static ${e}`,dataset:{tipped:t},htmlFor:r})}function Ht(e){let t=m({className:"fshToggle"}),r=kt({checked:e.prefVal,id:e.checkId,type:"checkbox"});i(t,r);let o=na(e.onClass,e.onTip,e.checkId);i(t,o);let l=na(e.offClass,e.offTip,e.checkId);return i(t,l),i(e.worldName,t),r}var J=0,Vt=0,Nt=0,aa=0,la=0,fa=0,sa=0,ua=0,ca=0;function ef(e){Ce(e),GameData.doAction(12,401,{},0)}function tf(){Ai(ci())}function rf(){window.open(`${Nn+or}map`,"fsMap")}function of(){let e=GameData.realm();window.open(`${Gn}realms${or}view&realm_id=${e.id}`,"mapUfsg")}function nf(){y("playNewMessageSound",!p("playNewMessageSound"))}function af(){n.huntingMode=!n.huntingMode,y("huntingMode",n.huntingMode)}function lf(){return m({className:"fshCurveContainer",id:"fshWorldButtonContainer"})}function ma(e){return e?e.toString():"?"}function ff(){let e=m({textContent:"Min Lvl: "});return Vt=x(ma(GameData.realm().minlevel)),i(e,Vt),e}function sf(){let e=m({textContent:"Your Lvl: "});return Nt=x(ma(GameData.player().level)),i(e,Nt),e}function uf(e){let t=m({className:"fshFsty"});i(t,ff()),i(t,sf()),i(e,t)}function Tt(e,t,r){let o=T({className:`fshCurveEle fshCurveBtn fshPoint tip-static ${e}`,dataset:{tipped:t}});return i(r,o),o}function cf(e){uf(e),aa=Tt("fshFormGroup","Quick Create Attack Group",e),la=Tt("fshQuickBuff","Open Quick Buff Popup",e),fa=Tt("fshRealmMap","Open Realm Map",e),sa=Tt("fshTempleOne","Search map in Ultimate FSG",e)}function mf(e){if(p("showSpeakerOnWorld")){let t=p("playNewMessageSound");ua=Ht({prefVal:t,checkId:"fshSoundCheck",onClass:"soundOn",onTip:"Turn Off Sound when you have a new log message",offClass:"soundOff",offTip:"Turn On Sound when you have a new log message",worldName:e})}}function df(e){let t=n.huntingMode;ca=Ht({prefVal:t,checkId:"fshHuntCheck",onClass:"huntOn",onTip:"Hunting mode is ON",offClass:"huntOff",offTip:"Hunting mode is OFF",worldName:e})}function pf(){cf(J),mf(J),df(J)}var hf=[[e=>e===ua,nf],[e=>e===ca,af]],gf=[[e=>e===aa,ef],[e=>e===la,tf],[e=>e===fa,rf],[e=>e===sa,of]];function vf(e,t){let{target:r}=t,o=e.find(([l])=>l(r));o&&(r.blur(),o[1](r))}function ia(e){return u(vf,e)}function yf(){B(J,ia(gf)),R(J,"change",ia(hf))}function Df(){J||(J=lf(),pf(),yf(),At(J,a("worldCoord")))}function xf(e,t){Vt&&t.b.minlevel&&(Tr(),f(t.b.minlevel,Vt))}function kf(e,t){Nt&&f(t.b,Nt)}function Vr(){Df(),$.subscribe(Fn,xf),$.subscribe(Rn,kf)}var wf=["NORMAL","CHAMPION","ELITE","SUPER ELITE","TITAN","LEGENDARY"],Cf=`url("${te}ui/world/icon_action_attack_`,Gt=!1;function Nr(e){return ye(".verb.attack",e)}function Gr(e){let t=wf.indexOf(e.toUpperCase());return gt(`#actionList .actionListItem.creature.creature-${t}`)}function Bf(e){e.classList.remove("attack-1","attack-2","attack-3","attack-4","attack-5","attack-6","attack-7","attack-8"),e.style.backgroundImage=""}function Af(e,t){e!==null&&(e.classList.add(`attack-${t+1}`),e.style.backgroundImage=`${Cf}${t+1}.png")`)}function da(e){let t=["LEGENDARY","NORMAL"].flatMap(Gr),r=Gr("CHAMPION"),[o,l]=e?[t,r]:[r,t];o.map(Nr).filter(s=>s!==null).forEach(Bf),l.slice(0,8).map(Nr).forEach(Af)}function Lf(e){let t=Nr(e);t&&(xe("world","ChampionAttack"),gi(t))}function Sf(e){if(!e.altKey||!e.shiftKey||e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||(Gt||da(!0),Gt=!0,!/(?:Digit|Numpad)[1-8]/.test(e.code)))return;let t=Gr("CHAMPION"),r=parseInt(e.code.slice(-1),10)-1;r<t.length&&Lf(t[r])}function Ef(e){Gt&&(!e.ctrlKey||!e.shiftKey)&&(Gt=!1,da(!1))}function $r(){let{body:e}=document;R(e,"keydown",Sf),R(e,"keyup",Ef)}var bf=["Breaker","Protection","Master Thief","Protect Gold","Disarm","Duelist","Thievery","Master Blacksmith","Master Crafter","Fury Caster","Master Inventor","Sustain"],Rr=[],E;function Mf(e){(e.id===54||e.id===26)&&(E.player.buffs[e.id]=parseInt(e.level,10))}function Hf(e){bf.indexOf(e.name)===-1&&(E.player.enhancements[e.name]=e.value)}function Tf(e){e.player.buffs&&e.player.buffs.forEach(Mf)}function Vf(e){e.player.enhancements&&e.player.enhancements.forEach(Hf)}function Nf(e,t){E={},E.combat=t.response.data,E.combat.inventory_id&&(E.combat.drop=E.combat.item.id),E.player={},E.player.buffs={},E.player.enhancements={},Tf(t),Vf(t),E.time=t.time,Rr.push(E),Dt("fsh_combatLog",Rr)}function Gf(e,t){t.response.response===0&&Nf(e,t)}function $f(e){e&&(Rr=e),$.subscribe(ut,Gf)}function Ir(){p("keepLogs")&&yt("fsh_combatLog").then($f)}function Rf(){i(document.body,Ki(`#actionList .creature-1 {color: green;}
#actionList .creature-2 {color: yellow;}
#actionList .creature-3 {color: red;}`))}function Pr(){p("enableCreatureColoring")&&Rf()}function ce(e){return n.doNotKillList.includes(ge(e))}function If(e){e.classList.toggle("fshBlue",ce(ri(e)))}function Ae(){let e=a("actionList");vt("creature",e).forEach(If)}function Pf(e,t){if(ce(e))return a("actionList").children[t].children[0].children[1].classList.remove("loading"),!0}function _f(e){let t=GameData.actions()[e];if(t)return Pf(t.data.name,e)}function Ff(e){return function(r,o,l,s){_f(l.passback)||e(r,o,l,s)}}var Of={2:Ff};function Kf(e){return Zn(e)||e===0}function qf(e){return e&&dt(e)}function Wf(e){return function(r,o,l,s){let c=Of[r];qf(c)&&Kf(s)?c(e)(r,o,l,s):e(r,o,l,s)}}function _r(){let e=GameData.doAction;GameData.doAction=Wf(e)}function Fr(){$.subscribe(he,Ae),Ae(),_r()}function Uf(e){Ce(e.target)}function Or(){B(a("buffList"),Uf)}function pa(e){e[1]=e[2].r.list}function ha(e,t,r){let o=e.slice();return o[3]=t[r],o[5]=r,o}function zf(e){let t,r=e[6].message+"",o;return{c(){t=S("p"),o=ke(r),xi(t,"color","red")},m(l,s){ae(l,t,s),k(t,o)},p(l,s){s&1&&r!==(r=l[6].message+"")&&Ct(o,r)},d(l){l&&le(t)}}}function Yf(e){pa(e);let t,r,o,l=e[1],s=[];for(let c=0;c<l.length;c+=1)s[c]=va(ha(e,l,c));return{c(){t=S("table"),r=S("tr"),r.innerHTML=`<td class="header"></td> 
      <td class="header"></td> 
      <td class="header">Username</td> 
      <td class="header">Kills</td>`,o=we();for(let c=0;c<s.length;c+=1)s[c].c();L(r,"class","svelte-1p6satm"),L(t,"id","world-event-contrib-table"),L(t,"class","svelte-1p6satm")},m(c,G){ae(c,t,G),k(t,r),k(t,o);for(let D=0;D<s.length;D+=1)s[D].m(t,null)},p(c,G){if(pa(c),G&1){l=c[1];let D;for(D=0;D<l.length;D+=1){let q=ha(c,l,D);s[D]?s[D].p(q,G):(s[D]=va(q),s[D].c(),s[D].m(t,null))}for(;D<s.length;D+=1)s[D].d(1);s.length=l.length}},d(c){c&&le(t),yi(s,c)}}}function ga(e){let t,r,o,l;return{c(){t=S("a"),r=S("img"),fr(r.src,o=te+"guilds/"+e[3].guild.id+"_mini.png")||L(r,"src",o),L(r,"alt","guild logo"),L(r,"class","svelte-1p6satm"),L(t,"href",l=""+(nr+e[3].guild.id))},m(s,c){ae(s,t,c),k(t,r)},p(s,c){c&1&&!fr(r.src,o=te+"guilds/"+s[3].guild.id+"_mini.png")&&L(r,"src",o),c&1&&l!==(l=""+(nr+s[3].guild.id))&&L(t,"href",l)},d(s){s&&le(t)}}}function va(e){let t,r,o=e[5]+1+"",l,s,c,G,D,q,it=e[3].player.name+"",er,at,Mn,tr,lt=e[3].value+"",rr,Hn,C=e[3].guild&&ga(e);return{c(){t=S("tr"),r=S("td"),l=ke(o),s=we(),c=S("td"),C&&C.c(),G=we(),D=S("td"),q=S("a"),er=ke(it),Mn=we(),tr=S("td"),rr=ke(lt),Hn=we(),L(q,"href",at=""+(ir+e[3].player.name)),L(t,"class","svelte-1p6satm")},m(H,de){ae(H,t,de),k(t,r),k(r,l),k(t,s),k(t,c),C&&C.m(c,null),k(t,G),k(t,D),k(D,q),k(q,er),k(t,Mn),k(t,tr),k(tr,rr),k(t,Hn)},p(H,de){H[3].guild?C?C.p(H,de):(C=ga(H),C.c(),C.m(c,null)):C&&(C.d(1),C=null),de&1&&it!==(it=H[3].player.name+"")&&Ct(er,it),de&1&&at!==(at=""+(ir+H[3].player.name))&&L(q,"href",at),de&1&&lt!==(lt=H[3].value+"")&&Ct(rr,lt)},d(H){H&&le(t),C&&C.d()}}}function Qf(e){let t;return{c(){t=ke("Loading...")},m(r,o){ae(r,t,o)},p:wt,d(r){r&&le(t)}}}function Xf(e){let t,r,o={ctx:e,current:null,token:null,hasCatch:!0,pending:Qf,then:Yf,catch:zf,value:2,error:6};return sr(r=e[0],o),{c(){t=Di(),o.block.c()},m(l,s){ae(l,t,s),o.block.m(l,o.anchor=s),o.mount=()=>t.parentNode,o.anchor=t},p(l,[s]){e=l,o.ctx=e,s&1&&r!==(r=e[0])&&sr(r,o)||ki(o,e,s)},i:wt,o:wt,d(l){l&&le(t),o.block.d(l),o.token=null,o=null}}}function Jf(e,t,r){let{promise:o}=t;return e.$$set=l=>{"promise"in l&&r(0,o=l.promise)},[o]}var Kr=class extends Ci{constructor(t){super(),wi(this,t,Jf,Xf,vi,{promise:0})}},ya=Kr;function qr(e){return di({cmd:"toprated",subcmd:e})}var jf=({username:e,value:t})=>({player:{name:e},value:t});async function Wr(e){if(e==="globalquest")return{r:{list:(await mi({cmd:"toprated",subcmd:"eventcontrib"})).map(jf)}}}function Ur(e){return De(Wr,qr,e)}var zr,Da=()=>({promise:Ur("globalquest")});function Zf(e){zr?zr.$set(Da()):zr=new ya({props:Da(),target:e})}function es(){let e=a("world-event-contrib");Zf(e),$(e).dialog({title:"Top 100 Event Contributers",minWidth:300,height:300,zIndex:9999})}function Yr(){let e=$("#world-event-badge");!e.length||(e.off(),B(e[0],es))}function xa(e){$(`#actionList li.creature-${e.toString()} a.create-group`).hide()}function ts(e){$.subscribe(he,u(xa,e))}var rs=["hideChampionsGroup","hideElitesGroup","hideSEGroup","hideTitanGroup","hideLegendaryGroup"];function os(e,t){p(e)&&(ts(t+1),xa(t+1))}function Qr(){rs.forEach(os)}function ns(e){return e.response&&e.response.msg&&e.response.msg.startsWith("Creature did not exist at that location")}function is(e){ns(e)&&GameData.fetch(ct+b)}function as(e){e.remove()}function ls(e,t){is(t),gt(".creature-4 > .quickCombat > .verbs").forEach(as)}function Xr(){$.subscribe(ut,ls)}function O(e){return!e||!e.response||!e.response.data}var ka='<table class="relicT relicS"><thead><tr><th colspan="2">Adjusted defense values</th></tr></thead><tbody><tr><td>DC225:</td><td id="DC225">0</td></tr><tr><td>DC175:</td><td id="DC175">0</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody><thead><tr><th colspan="2">Attacking Group Stats</th></tr></thead><tbody><tr><td>Raw Group Attack:</td><td class="fshGrey" id="GroupAttack"></td></tr><tr><td>Group Attack w/ buffs:</td><td id="GroupAttackBuffed"></td></tr><tr><td>Raw Group Defense:</td><td class="fshGrey" id="GroupDefense"></td></tr><tr><td>Group Defense w/ buffs:</td><td id="GroupDefenseBuffed"></td></tr><tr><td>Raw Group Armor:</td><td class="fshGrey" id="GroupArmor"></td></tr><tr><td>Group Armor w/ buffs:</td><td id="GroupArmorBuffed"></td></tr><tr><td>Raw Group Damage:</td><td class="fshGrey" id="GroupDamage"></td></tr><tr><td>Group Damage w/ buffs:</td><td id="GroupDamageBuffed"></td></tr><tr><td>Raw Group HP:</td><td class="fshGrey" id="GroupHP"></td></tr><tr><td>Group HP w/ buffs:</td><td id="GroupHPBuffed"></td></tr></tbody></table>',wa='<table class="relicT relicS"><thead><tr><th colspan="2">Defending Guild Stats</th></tr></thead><tbody><tr><td>Relic Count:</td><td id="relicCount">0</td></tr><tr><td>Lead Defender Bonus:</td><td id="LDPercentage">0</td></tr><tr><td>Lead Defender Cloaked:</td><td id="LDCloaked">No</td></tr></tbody><thead><tr><th colspan="2">Other Defender Stats</th></tr></thead><tbody><tr><td>Raw Attack:</td><td class="fshGrey" id="attackValue">0</td></tr><tr><td>Attack w/ buffs:</td><td id="attackValueBuffed">0</td></tr><tr><td>Raw Defense:</td><td class="fshGrey" id="defenseValue">0</td></tr><tr><td>Defense w/buffs:</td><td id="defenseValueBuffed">0</td></tr><tr><td>Raw Armor:</td><td class="fshGrey" id="armorValue">0</td></tr><tr><td>Armor w/ buffs:</td><td id="armorValueBuffed">0</td></tr><tr><td>Raw Damage:</td><td class="fshGrey" id="damageValue">0</td></tr><tr><td>Damage w/ buffs:</td><td id="damageValueBuffed">0</td></tr><tr><td>Raw HP:</td><td class="fshGrey" id="hpValue">0</td></tr><tr><td>HP w/ buffs:</td><td id="hpValueBuffed">0</td></tr><tr><td>Cloaked:</td><td id="defendersCloaked">0</td></tr><tr><td>Processed:</td><td id="defendersProcessed">0</td></tr></tbody></table>',Ca='<table class="relicT"><thead><tr><th colspan="2">Processing</th></tr></thead><tbody><tr><td class="fshGreen" colspan="2" id="ProcessingStatus">Parsing defending guild stats ...</td></tr></tbody><thead><tr><th colspan="2">Assumptions</th></tr></thead><tbody><tr><td colspan="2" class="fshGrey">Above calculations include Constitution, Fortitude, Nightmare Visage, Chi Strike, Sanctuary, Terrorize and Flinch bonus calculations (in that order) on both the defending group and attacking group.</td></tr></tbody></table>';var K,Le,Se,Ee;function fs(e){return e.player_name}function ss(e){Ee=e.defenders.map(fs)}function us(){K?w("",K):K=m({className:"body"})}function cs(e){Le=m({className:"fshFloatLeft fshRelicLeftDiv"}),i(K,Le),e.is_owner&&i(Le,Pi(Ee)),Se=T({className:"custombutton",textContent:"Fetch Stats"}),i(Le,Se)}function Ba(e){ss(e),us(),cs(e);let t=a("dialog-relic");i(t,K)}var N,Aa,La,Jr,jr,Zr,eo,$t,to,ro,oo,no,io,ao,lo,fo,so,uo,co,mo,po,ho,go,vo,yo,Do,xo,ko,wo,Co,j,ms=[e=>e!=="lastUpdate",e=>!Ee.includes(e),e=>N[e].last_login,e=>Number(N[e].last_login)<Aa,e=>Number(N[e].last_login)>La,e=>N[e].level<400||N[e].level>421,e=>N[e].level<441||N[e].level>450];function ds(e,t){return t(e)}function ps(e){return ms.every(u(ds,e))}function hs(e){return`<a href="${Vn}${N[e].id}">${e}</a>`}function gs(e){N=e,Aa=ar-120,La=ar-604800;let t=ai(N).filter(ps).map(hs);re(K,`<div class="fshFloatLeft fshRelicLowDiv"><table class="relicT"><thead><tr><th>${t.length.toString()} Offline guild members not at relic:</th></tr></thead><tbody><tr><td>${t.join(" ")}</td></tr></tbody></table></div>`)}function vs(){Jr=a("relicCount"),jr=a("LDPercentage"),Zr=a("LDCloaked"),eo=a("attackValue"),$t=a("attackValueBuffed"),to=a("defenseValue"),ro=a("defenseValueBuffed"),oo=a("armorValue"),no=a("armorValueBuffed"),io=a("damageValue"),ao=a("damageValueBuffed"),lo=a("hpValue"),fo=a("hpValueBuffed"),so=a("defendersCloaked"),uo=a("defendersProcessed")}function ys(){co=a("DC225"),mo=a("DC175"),po=a("GroupAttack"),ho=a("GroupAttackBuffed"),go=a("GroupDefense"),vo=a("GroupDefenseBuffed"),yo=a("GroupArmor"),Do=a("GroupArmorBuffed"),xo=a("GroupDamage"),ko=a("GroupDamageBuffed"),wo=a("GroupHP"),Co=a("GroupHPBuffed")}function Sa(e){Bt(Se);let t=p("hideRelicOffline");e.is_owner&&!t&&Gi(!0).then(gs),re(Le,Ca),j=a("ProcessingStatus");let r=m({className:"fshFloatLeft fshRelicMidDiv",innerHTML:wa});i(K,r),vs();let o=m({className:"fshFloatLeft fshRelicRightDiv",innerHTML:ka});i(K,o),ys()}var Rt;function Ds(e){return e===1?1.5:Be(1-e/10,2)}function Ea(e){let t=z(e),o=oi('#pCC img[src*="/relics/"]',t).length;f(o,Jr),Rt=Ds(o),f(`${String(Rt*100)}%`,jr)}function It(e,t){return e>t*10||e<t?e:t*10}function xs(e){e.attackValue=It(e.attackBonus,e.levelValue),e.defenseValue=It(e.defenseBonus,e.levelValue),e.armorValue=It(e.armorBonus,e.levelValue),e.damageValue=It(e.damageBonus,e.levelValue),e.hpValue=e.hpBonus}var ks=[["levelValue","level"],["attackValue","attack"],["attackBonus","bonus_attack"],["defenseValue","defense"],["defenseBonus","bonus_defense"],["armorValue","armor"],["armorBonus","bonus_armor"],["damageValue","damage"],["damageBonus","bonus_damage"],["hpValue","hp"],["hpBonus","bonus_hp"],["killStreakValue","killstreak"]];function ws(e,t,r){e[r[0]]=Number(t[r[1]])}function Cs(e,t){ks.forEach(u(ws,e,t))}var Bs=[["counterAttackLevel","Counter Attack"],["doublerLevel","Doubler"],["deathDealerLevel","Death Dealer"],["darkCurseLevel","Dark Curse"],["holyFlameLevel","Holy Flame"],["constitutionLevel","Constitution"],["sanctuaryLevel","Sanctuary"],["flinchLevel","Flinch"],["nightmareVisageLevel","Nightmare Visage"],["superEliteSlayerLevel","Super Elite Slayer"],["fortitudeLevel","Fortitude"],["chiStrikeLevel","Chi Strike"],["terrorizeLevel","Terrorize"],["barricadeLevel","Barricade"],["reignOfTerrorLevel","Reign Of Terror"],["anchoredLevel","Anchored"],["severeConditionLevel","Severe Condition"],["entrenchLevel","Entrench"],["cloakLevel","Cloak"]];function As(e,t,r){e[r[0]]=t[r[1]]||0}function Ls(e,t){Bs.forEach(u(As,e,t))}function be(e){if(!e)return;let t=bt(e._skills),r={};return Cs(r,e),Ls(r,t),r.superEliteSlayerMultiplier=Be(.002*r.superEliteSlayerLevel,2),fi(r.armorValue)&&xs(r),r}var He,Pt,Ue,Me,ze,_t,Ye,Ao,Bo,A,v,me;function Ss(){v.attack-=me.attack,v.defense-=me.defense,v.armor-=me.armor,v.damage-=me.damage,v.hp-=me.hp}function We(e){return Math.round(e*Rt)}function Es(){He+=We(A.attackValue),Ue+=We(A.defenseValue),Me+=We(A.armorValue),ze+=We(A.damageValue),Ye+=We(A.hpValue)}function Ma(){d(He,eo),d(Ue,to),d(Me,oo),d(ze,io),d(Ye,lo),f(Ao,so),Bo+=1,f(Bo,uo)}function bs(){d(v.attack,po),d(v.defense,go),d(v.armor,yo),d(v.damage,xo),d(v.hp,wo)}function Ms(e){return Math.ceil(v.attack*(U(e["Nightmare Visage"],0)*.0025))}function Hs(){let e=Math.ceil(v.attack*A.flinchLevel*.001);d(v.attack-e,ho)}function Ts(e){return Math.ceil(v.defense*(1+U(e.Constitution,0)*.001))}function Vs(e,t){d(t+e,vo)}function Ns(e){d(v.armor+Math.floor(v.armor*U(e.Sanctuary,0)*.001),Do)}function Gs(e,t){return Math.ceil(t*U(e.Fortitude,0)*.001)}function $s(e){d(v.hp+e,Co)}function Rs(e,t){let r=Math.ceil((v.hp+t)*U(e["Chi Strike"],0)*.001),o=Math.ceil(v.damage*A.terrorizeLevel*.001);d(v.damage+r-o,ko)}function Is(e){let t=Ms(e);v.attack-=t,Hs();let r=Ts(e);Vs(t,r),Ns(e);let o=Gs(e,r);$s(o),Rs(e,o)}function Ps(e){let t=Math.ceil(Pt*U(e.Flinch,0)*.001);d(Pt-t,$t)}function _s(e){let t=Math.ceil(_t*U(e.Terrorize,0)*.001);d(_t-t,ao)}function Fs(){f("Processing attacking group stats ... ",j),me&&Ss(),bs();let e=bt(GameData.player().buffs);Is(e),Ps(e),_s(e),f("Done.",j)}function Os(){return Math.ceil(He*(A.nightmareVisageLevel*.0025))}function Ks(){return Math.ceil(Ue*(1+A.constitutionLevel*.001))}function qs(e){Pt=He-e,d(Pt,$t)}function ba(e){return 1-e*mt}function Ws(e,t){let r=t+e;d(r,ro),d(Math.ceil(r*ba(225)),co),d(Math.ceil(r*ba(175)),mo)}function Us(){d(Me+Math.floor(Me*A.sanctuaryLevel*.001),no)}function zs(e){return Math.ceil(e*A.fortitudeLevel*.001)}function Ys(e){_t=ze+Math.ceil(e*A.chiStrikeLevel*.001),d(_t)}function Qs(){A.cloakLevel!==0&&f("Yes",Zr)}function Ha(){f("Processing defending guild stats ... ",j),Es(),Ma();let e=Os();qs(e);let t=Ks();Ws(e,t),Us();let r=Ye+zs(t);d(r,fo),Ys(r),Qs(),GameData.player().hasGroup&&v?Fs():f("Done.",j)}function Ta(e){let t=be(e);He+=Math.round(t.attackValue*pe),Ue+=Math.round(t.defenseValue*pe),Me+=Math.round(t.armorValue*pe),ze+=Math.round(t.damageValue*pe),Ye+=Math.round(t.hpValue*pe),t.cloakLevel!==0&&(Ao+=1),Ma()}function Va(e){A=be(e)}function Na(e){v=e}function Ga(e){me=e}function $a(){He=0,Ue=0,Me=0,ze=0,Ye=0,Ao=0,Bo=0}var Qe;function Xs(e){f(e.message,j)}function Js(e){return e.parentNode.parentNode.previousElementSibling.previousElementSibling.innerHTML.indexOf('"#000099"')!==-1}function js(e){let t=e.previousElementSibling.href,r=[Fi(t).then(Na)];return Js(e)&&r.push(Oi().then(Ga)),r}function Zs(e){let t=z(e),r=ye('#pCC a[href*="confirmDisband"]',t);if(!r)return;let o=js(r);return si(o)}function eu(){return ne({cmd:"guild",subcmd:"groups"}).then(Zs)}function tu(){return ne({cmd:"guild",subcmd:"view",guild_id:Qe.controlled_by.guild_id}).then(Ea)}function ru(e,t){return t===0?ur(e).then(Va):ur(e).then(Ta).catch(Xs)}function ou(){return Ee.map(ru)}function nu(){let e=[tu()];return GameData.player().hasGroup&&e.push(eu()),e=e.concat(ou()),e}function iu(){Sa(Qe),$a();let e=nu();St(e,Ha)}function au(e,t){O(t)||(Qe=t.response.data,Qe.defenders.length>0&&(Ba(Qe),Tn(Se,"click",iu)))}function Lo(){$.subscribe(qn,au)}function Xe(e){return ii({cache:!1,url:"fetchdata.php",data:{...e,fshrnd:$i()},dataType:"json"})}var Ra=[];function lu(e){return O(e)||Ra.push(e),e}function fu(e,t){return e===Number(t.response.data.id)}function su(e,t){e(t)}function uu(e){return new Promise(t=>{ti(3,su,[t,e])})}function Je(e,t){let r=Ra.find(u(fu,e));return r?uu(r):Xe({a:1,id:e,passback:t}).then(lu)}var Ft,So,Eo,bo,Mo,Ho;function je(e,t){return li(ve(t,e))}function cu(e){Eo=je(e,Qn),So=je(e,Yn),Mo=je(e,Jn),bo=je(e,Xn),Ho=je(e,jn)}function Ia(){Ft=GameData.player().level,cu(a("statbar-character-tooltip-stats"))}function mu(e){return`<table><tr><td><img src="${te}creatures/${e.image_id}.png" height="200" width="200"></td><td rowspan="2"><table width="400"><tr><td class="header" colspan="4" class="fshCenter">Statistics</td></tr>`}function du(e,t){return`<tr><td>Class:&nbsp;</td><td width="40%">${e.creature_class}</td><td>Level:&nbsp;</td><td width="40%">${e.level} (your level:<span class="${t}">${Ft}</span>)</td></tr>`}function pu(e){return`<tr><td>Attack:&nbsp;</td><td width="40%">${e.attack} (your defense:<span class="fshYellow">${So}</span>)</td><td>Defense:&nbsp;</td><td width="40%">${e.defense} (your attack:<span class="fshYellow">${Eo}</span>)</td></tr>`}function hu(e){return`<tr><td>Armor:&nbsp;</td><td width="40%">${e.armor} (your damage:<span class="fshYellow">${bo}</span>)</td><td>Damage:&nbsp;</td><td width="40%">${e.damage} (your armor:<span class="fshYellow">${Mo}</span>)</td></tr>`}function gu(e,t){return`<tr><td>HP:&nbsp;</td><td width="40%">${e.hp} (your HP:<span class="fshYellow">${Ho}</span>)(1H: <span class="fshRed">${t}</span>)</td><td>Gold:&nbsp;</td><td width="40%">${e.gold}</td></tr>`}var vu='<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Enhancements</td></tr>';function yu(e){return`<tr><td colspan="2">${e.name}:</td><td colspan="2">${e.value}</td></tr>`}function Du(e){return e.enhancements.length===0?'<tr><td colspan="4">[no enhancements]</td></tr>':e.enhancements.map(yu).join("")}function xu(e){return`<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Description</td></tr><tr><td colspan="4">${e.description}</td></tr><tr><td colspan="4" height="5"></td></tr></table></td></tr><tr><td class="fshCenter"><b>${e.name}</b></td></tr></table>`}function ku(e,t,r){return mu(e)+du(e,r)+pu(e)+hu(e)+gu(e,t)+vu+Du(e)+xu(e)}function wu(e){let t=Math.ceil(e.hp*n.hpVariable+e.armor*n.generalVariable),r="fshYellow";return Ia(),Ft>e.level&&(r="fshRed"),ku(e,t,r)}function To(e){if(!O(e))return wu(e.response.data)}var Cu=["verb","view","tip-static"];function Bu(e,t){$(e).qtip({overwrite:!0,show:{event:"mouseover",ready:!0},style:{classes:"qtip-tipsy qtip-custom"},position:{my:"center right",at:"center left",effect:!1,viewport:$(window)},content:{text:t},hide:{effect:!1}})}function Au(e){return ht(e.parentNode.children).indexOf(e)}function Lu(e,t){let r=To(t);e.set("content.text",r)}function Su(e,t,r){return Je(GameData.actions()[e].data.id,e).then(u(Lu,r)),"Loading..."}function Eu(e,t){xe("NewMap","CreatureInfo");let r=Au(t);e.classList.add("fshTip"),Bu(e,u(Su,r))}function bu(e,t){return hi(Cu,e)&&!Ke("fshTip",e)&&Ke("creature",t)}function Mu(e){if(!n.showCreatureInfo)return;let{target:t}=e,r=t.parentNode.parentNode.parentNode;bu(t,r)&&Eu(t,r)}function Vo(){R(a("actionList"),"mouseover",Mu)}function Hu(e,t){t.b[2]&&Li()}function No(){p("useNewGuildLog")&&$.subscribe("notifications.player",Hu)}var M;function Tu(e,t){t.creature_class=e.creature_class,t.image_id=e.image_id,t.level=Number(e.level),t.type=e.type}function Vu(e){M[e.name]?M[e.name].seen&&(M[e.name].seen+=1):(M[e.name]={seen:1},Tu(e,M[e.name]))}function Pa(e,t,r){return t?e(t,r):r}function _a(e,t){let r=e||{};return r.min=Pa(Math.min,r.min,t),r.max=Pa(Math.max,r.max,t),r}var Nu=["attack","armor","damage","defense","hp"];function Gu(e,t){return!e||e.min!==t.min||e.max!==t.max}function $u(e,t,r){let o=_a(t[r],Number(e[r]));Gu(t[r],o)&&(t[r]=o)}function Ru(e,t){Nu.forEach(u($u,e,t))}function Iu(e){return e.enhancements&&e.enhancements.length>0}function Pu(e,t){e[t.name]=_a(e[t.name],Number(t.value))}function _u(e,t){Iu(e)&&(t.enhancements=t.enhancements||{},e.enhancements.forEach(u(Pu,t.enhancements)))}function Fu(e){M||(M={}),Vu(e),Ru(e,M[e.name]),_u(e,M[e.name]),Dt("fsh_monsterLog",M)}function Fa(e){n.showMonsterLog&&Fu(e)}function Ou(e){M=e||{}}function Oa(){yt("fsh_monsterLog").then(Ou)}var Ka=[];function Ku(e){O(e)||(xe("NewMap","MonsterLog"),Fa(e.response.data))}function qu(e,t){return e.id===t.id}function Wu(e){if(Ka.find(u(qu,e.data)))return!0;Ka.push(e.data)}function Uu(e,t){e.type!==6||Wu(e)||Je(e.data.id,t).then(Ku)}function qa(){n.showMonsterLog&&GameData.actions().forEach(Uu)}function Go(){Oa(),$.subscribe("-1-success.action-response 4-success.action-response 5-success.action-response 25-success.action-response",qa),qa()}function $o(){return Ei({subcmd:"scouttower"})}function zu(e){let t=e.split(/[: /[]/);return new Date(Number(t[4]),ft.indexOf(t[3]),Number(t[2]),Number(t[0]),Number(t[1]))}function Yu(e){let t=oe(e[1]);return t==="No active cooldown"?0:Math.ceil((zu(t.slice(16))-pt)/1e3)}function Qu(e){let[t]=e[0].cells[0].children;return{base_id:Number(t.src.split("/").slice(-1)[0].slice(0,-36)),name:t.title}}function Xu(e){return{cooldown:Yu(e),creature:Qu(e),kills:Number(oe(e[0].cells[3]))}}function Ju(e){let t=oe(e[0].cells[1]);if(t!=="n/a"){let r=oe(e[0].cells[2]).split("/");return{realm:t,current_hp:Number(r[0]),max_hp:Number(r[1])}}}function ju(e){let t=e[2].cells[0].children;if(t.length===1)return{contributors:Hi(t[0],3,0).map(o=>({kills:Number(oe(o.cells[1])),player:{name:oe(o.cells[0])}}))}}function Zu(e){return{...Xu(e),...Ju(e),...ju(e)}}function ec(e){let t=z(e),r=ye('table[width="500"]',t);if(!r)return{s:!1};let o=ht(r.rows).filter((s,c,G)=>c!==0&&c<G.length-1&&(c-1)%6<3);return{r:Ii(3,o).map(Zu),s:!0}}function Ro(){return ne({cmd:"guild",subcmd:"scouttower"}).then(ec)}function Io(){return De($o,Ro)}function tc(e,[t,r,o]){let l=e.insertCell(-1);return l.colSpan=t,o&&(l.className="header"),i(l,r),l}function rc(e,t){t.forEach(u(tc,e))}function oc(e,t,r){let o=e.insertRow(-1);return r&&(o.className="fshBlue"),rc(o,t),o}function nc(e,t){oc(e,t[0],t[1])}function Ze(e,t){t.forEach(u(nc,e))}var Po;function Wa(e){Po=e}var _o,Fo,Oo,Ko,qo,Wo,Uo,zo;function ic(){_o=x("Current"),Fo=x("Kills"),Oo=x("Member"),Ko=x("% of Total")}function ac(){qo=x("Status"),Wo=x("Titan HP"),Uo=x("Total"),zo=x("Your Guild")}function Ua(){ic(),ac()}var Te,Ve,Ne,Ge,$e,Re,Ie,Pe,_e;function lc(){Te=h({innerHTML:"&nbsp;"}),Ve=h({innerHTML:"&nbsp;"}),Ne=h(),Ge=h()}function fc(){$e=h(),Re=h(),Ie=h(),Pe=h(),_e=h()}function za(){lc(),fc()}function Ya(){w("&nbsp;",Te),w("&nbsp;",Ve),f("",Ne),f("",Ge),f("",$e),f("",Re),f("",Ie),w("",Pe),w("",_e)}var Z;function Ot(){for(;Z.rows.length>8;)Z.deleteRow(8)}function sc(){let e=h();return i(e,Ne),P(e,"/"),i(e,Ge),e}function Qa(e){let t=h();return i(t,e),P(t,"%"),t}function Xa(){Z=ui({className:"fshCenter"}),Ua(),Ze(Z,[[[[5,Te,!0],[1,Ve,!0]]],[[[2,Wo,!0],[4,zo,!0]]],[[[2,sc()],[4,$e]]],[[[2,_o,!0],[4,Qa(Re)]],!0],[[[2,Uo,!0],[4,Qa(Ie)]],!0],[[[2,qo,!0],[4,Pe]],!0],[[[6,_e]]],[[[2,Oo,!0],[2,Fo,!0],[2,Ko,!0]]]])}var ee,Kt,Yo;function Qo(){Kt=null,ee&&!Ke("fshHide",ee)&&(g(ee,!0),Ya(),Ot())}function Ja(e){return e.type===0?(Kt=e.base_creature_id,Yo=`(${e.x},${e.y})`,!0):!1}function ja(){if(ee)g(ee,!1);else{let e=a("actionContainer");ee=m({className:"fshActionBox titanInfo"}),za(),Xa(),i(ee,Z),i(e,ee)}}function uc(e){let t=new Date(pt+e*1e3);return`${Lt(t.getHours())}:${Lt(t.getMinutes())} ${Lt(t.getDate())}/${ft[t.getMonth()]}/${t.getFullYear()}`}function cc(e){return e<=0?'<span class="fshGreen cooldown">No active cooldown</span>':`<span class="fshMaroon cooldown">Cooldown until: ${uc(e)}</span>`}function mc(e){return Et(Wi(e.max_hp-e.current_hp,e.kills),2)}function dc(e){return Et(e.kills*100/e.max_hp,2)}function pc(e){return Ui(e.kills,e.max_hp,e.current_hp)}function hc(e){e.forEach(([t,r])=>{f(t,r)})}function gc(e){hc([[zi(e.creature.name),Te],[Yo,Ve],[e.current_hp,Ne],[e.max_hp,Ge],[e.kills,$e],[mc(e),Re],[dc(e),Ie]]),w(pc(e),Pe),w(cc(e.cooldown),_e)}function vc(e,t){return[[[2,x(t.player.name)],[2,x(t.kills.toString())],[2,x(`${Et(t.kills*100/e.kills,2)}%`)]]]}function yc(e){if(Ot(),!e.contributors)return;let t=e.contributors.map(u(vc,e));Ze(Z,t)}function Dc(e){return e.realm&&e.creature.base_id===Kt&&e.realm===Po}function Xo(e){let t=e.find(Dc);t&&(gc(t),yc(t))}var qt;function xc(){qt&&(window.clearTimeout(qt),qt=null)}function kc(e){return e&&e.s&&I(e.r)}function Za(e){return n.showTitanInfo&&I(e)&&e.some(Ja)}function wc(e,t){!kc(t)||(Xo(t.r),Za(GameData.realm().dynamic)?qt=window.setTimeout(e,3e4):Qo())}function el(){Io().then(u(wc,el))}function tl(e){xc(),Za(e)?(ja(),el()):Qo()}function rl(e){e.dynamic&&(Wa(e.name),tl(e.dynamic))}function ol(){n.showTitanInfo=!n.showTitanInfo,y("showTitanInfo",n.showTitanInfo),tl(GameData.realm().dynamic)}function Cc(e){return e.realm&&e.realm.name}function nl(e,t){Cc(t)&&rl(t.realm)}function Jo(){window.initialGameData&&nl(null,window.initialGameData),$.subscribe(`${On} ${Wn}`,nl)}function Bc(e,t){t==="ACT_REPAIR"&&GameData.fetch(zn+W+ct+b)}function jo(){$.subscribe(_n,Bc)}var Zo;function il(e){$("#statbar-gold").css("background-color",e)}function al(){$("#HelperSendTotal").html(Y(p("currentGoldSentTotal"))),Number(GameData.player().gold)>Zo?il("red"):il("inherit")}function Ac(){return`<dt class="stat-gold-sendTo">Send To:</dt><dd id="HelperSendTo">${p("goldRecipient")}</dd><dt class="stat-gold-sendAmt">Amount:</dt><dd id="HelperSendAmt">${Y(Zo)}</dd><dt class="stat-gold-sendTo">Send?</dt><dd><input id="HelperSendGold" value="Send!" class="custombutton" type="submit"><input type="hidden" id="xc" value=""</dd><dt class="stat-gold-sendTotal">Total Sent:</dt><dd id="HelperSendTotal">${Y(p("currentGoldSentTotal"))}</dd>`}function Lc(){Zo=p("goldAmount"),$("#statbar-gold-tooltip-general").append(Ac()),$("#HelperSendGold").on("click",Ni),al(),$.subscribe(In,al)}function en(){Vi(),Ti&&Lc()}var et,tt,Wt,Fe,rn,tn,Ut;function Sc(){return Xe({a:14,d:0,id:et.id,item_id:et.itemId})}function Ec(e){let t=e.response.response,r=e.response.msg,o;if(t!==0){let l=r.indexOf("<");l!==-1?o=r.substring(0,l):o=r}else o=`You purchased ${e.response.data.name} for ${Y(e.response.data.cost)} gold.`;re(Ut,`${o}<br>`)}function bc(){GameData.doAction(14,3,{id:et.id,item_id:et.itemId},0),Wt.close()}function Mc(){let e=Ri(rn.value);if(!e)return;let t=[];for(let r=1;r<e;r+=1)t.push(Sc().then(Ec));St(t,bc)}function Hc(){Fe=m({className:"fshClear",textContent:"Select how many to quick-buy:"}),rn=kt({id:"buyAmount",className:"fshNumberInput",min:1,max:99,value:1,type:"number"}),i(Fe,rn),tn=T({textContent:"Quick-buy"}),B(tn,Mc),i(Fe,tn),Ut=m(),i(Fe,Ut),i(tt,Fe)}function Tc(){return tt||a("shopDialogConfirm")}function Vc(){return Wt||$(tt).data("hcsWorldDialogShopConfirm")}function Nc(){Fe?f("",Ut):Hc()}function Gc(e,t){et=t,tt=Tc(),tt&&(Wt=Vc(),Wt&&Nc())}function on(){$.subscribe(Pn,Gc)}function $c(e){let t=z(e),r=_i(t);return{r:{attributes:[{value:r.attack},{value:r.defense},{value:r.armor},{value:r.damage},{value:r.hp}]}}}function nn(e){return ne({cmd:"guild",subcmd:"groups",subcmd2:"viewstats",group_id:e}).then($c)}function an(e){return bi({subcmd2:"viewstats",group_id:e})}function ln(e){return De(an,nn,e)}function ll(e){return e.numberOfCreatureHitsTillDead-e.numberOfHitsRequired<=1?", dies on miss":", survives a miss"}function Rc(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired>e.numberOfCreatureHitsTillDead}function Ic(e){return e.numberOfCreatureHitsTillDead==="-"?e.numberOfHitsRequired:Rc(e)?"-":e.numberOfHitsRequired}function Pc(e){return e.numberOfCreatureHitsTillDead==="-"||e.numberOfCreatureHitsTillDead>e.numberOfHitsRequired}function _c(e){return e.numberOfHitsRequired==="-"?e.numberOfCreatureHitsTillDead:Pc(e)?"-":e.numberOfCreatureHitsTillDead}var Fc=[[e=>e.playerHits==="-"&&e.creatureHits==="-",()=>"Unresolved"],[e=>e.playerHits==="-",()=>"Player dies"],[e=>e.playerHits===1,e=>`Player 1 hits${ll(e)}`],[e=>e.playerHits>1,e=>`Player > 1 hits${ll(e)}`]];function Oc(e,t){return t[0](e)}function Kc(e){let t=Fc.find(u(Oc,e));return t?t[1](e):"Unknown"}function fn(e){e.playerHits=Ic(e),e.creatureHits=_c(e),e.fightStatus=Kc(e)}function qc(e){return e.callback.groupExists?e.callback.groupArmorValue:e.player.armorValue}function Wc(e){let t=qc(e);e.overallArmorValue=t+Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}function Uc(e){e.player.sanctuaryLevel>0&&(e.extraNotes+=`Sanc Bonus Armor = ${Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}<br>`)}function zc(e){e.terrorizeEffect=Math.floor(e.creature.damage*e.player.terrorizeLevel*.001)}function Yc(e){e.player.terrorizeLevel>0&&(e.extraNotes+=`Terrorize Creature Damage Effect = ${e.terrorizeEffect*-1}<br>`)}function Qc(e){e.creatureDamageDone=Math.ceil(e.generalVariable*e.creature.damage-e.overallArmorValue+e.overallHPValue)}function Xc(e){let t=e.generalVariable*e.creature.damage;t<e.overallArmorValue?e.numberOfCreatureHitsTillDead=e.overallHPValue:e.numberOfCreatureHitsTillDead=Math.ceil(e.overallHPValue/(t-e.overallArmorValue))}function Jc(e){e.creatureHitByHowMuch>=0?Xc(e):e.numberOfCreatureHitsTillDead="-"}function sn(e){Wc(e),Uc(e),zc(e),Yc(e),e.creature.damage-=e.terrorizeEffect,Qc(e),Jc(e)}function jc(e){return e.callback.groupExists?e.callback.groupAttackValue:e.player.attackValue}function fl(e){return Math.floor(e.creature.defense*e.player.darkCurseLevel*mt)}function Zc(e){let t=e.creature.defense-fl(e);return e.combatEvaluatorBias===3?e.overallAttackValue-Math.ceil(t)-50:e.overallAttackValue-Math.ceil(e.attackVariable*t)}function un(e){let t=jc(e);e.player.darkCurseLevel>0&&(e.extraNotes+=`DC Bonus Attack = ${fl(e)}<br>`),e.nightmareVisageAttackMovedToDefense=Math.floor((t+e.counterAttackBonusAttack)*e.player.nightmareVisageLevel*.0025),e.player.nightmareVisageLevel>0&&(e.extraNotes+=`NMV Attack moved to Defense = ${e.nightmareVisageAttackMovedToDefense}<br>`),e.overallAttackValue=t+e.counterAttackBonusAttack-e.nightmareVisageAttackMovedToDefense,e.hitByHowMuch=Zc(e)}function em(e){return e.player.counterAttackLevel>0&&e.numberOfHitsRequired===1}function sl(e){e.lowestCALevelToStillHit=Math.max(Math.ceil((e.counterAttackBonusAttack-e.hitByHowMuch+1)/e.player.attackValue/.0025),0),e.lowestCALevelToStillKill=Math.max(Math.ceil((e.counterAttackBonusDamage-e.damageDone+1)/e.player.damageValue/.0025),0)}function tm(e){return e.player.counterAttackLevel>0?Math.ceil((1+e.player.doublerLevel/50)*.0025*e.lowestFeasibleCALevel):0}function rm(e){e.extraAttackAtLowestFeasibleCALevel=Math.floor(e.player.attackValue*.0025*e.lowestFeasibleCALevel),e.extraDamageAtLowestFeasibleCALevel=Math.floor(e.player.damageValue*.0025*e.lowestFeasibleCALevel),e.extraNotes+=`Extra CA Att/Dam at this lowered CA level = ${e.extraAttackAtLowestFeasibleCALevel} / ${e.extraDamageAtLowestFeasibleCALevel}<br>`}function om(e){sl(e),e.lowestFeasibleCALevel=Math.max(e.lowestCALevelToStillHit,e.lowestCALevelToStillKill),e.extraNotes+=`Lowest CA to still 1-hit this creature = ${e.lowestFeasibleCALevel}<br>`,e.lowestFeasibleCALevel!==0&&rm(e),e.extraStaminaPerHitAtLowestFeasibleCALevel=tm(e),e.extraStaminaPerHitAtLowestFeasibleCALevel<e.extraStaminaPerHit?e.extraNotes+=`Extra Stam Used at this lowered CA level = ${e.extraStaminaPerHitAtLowestFeasibleCALevel}<br>`:e.extraNotes+="No reduction of stam used at the lower CA level<br>"}function nm(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired!==1}function im(e){e.lowestCALevelToStillHit>175?e.extraNotes+="Even with CA175 you cannot hit this creature<br>":e.lowestCALevelToStillHit!==0&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillHit} to hit this creature<br>`)}function am(e){e.lowestCALevelToStillKill>175?e.extraNotes+="Even with CA175 you cannot 1-hit kill this creature<br>":e.lowestCALevelToStillKill!==0&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillKill} to 1-hit kill this creature<br>`)}function lm(e){sl(e),im(e),am(e)}function cn(e){em(e)&&om(e),nm(e)&&lm(e)}function fm(e){return e.callback.groupExists?e.callback.groupHPValue:e.player.hpValue}function sm(e){return e.callback.groupExists?e.callback.groupDamageValue:e.player.damageValue}function um(e){let t=fm(e),{fortitudeLevel:r}=e.player;e.fortitudeExtraHPs=Math.floor(t*r*.001),r>0&&(e.extraNotes+=`Fortitude Bonus HP = ${e.fortitudeExtraHPs}<br>`),e.overallHPValue=t+e.fortitudeExtraHPs}function cm(e){let{chiStrikeLevel:t}=e.player;e.chiStrikeExtraDamage=Math.floor(e.overallHPValue*t*.001),t>0&&(e.extraNotes+=`Chi Strike Bonus Damage = ${e.chiStrikeExtraDamage}<br>`)}function mn(e){um(e),cm(e);let t=sm(e);if(e.overallDamageValue=t+e.deathDealerBonusDamage+e.counterAttackBonusDamage+e.holyFlameBonusDamage+e.chiStrikeExtraDamage,e.damageDone=Math.floor(e.overallDamageValue-(e.generalVariable*e.creature.armor+e.hpVariable*e.creature.hp)),e.hitByHowMuch>0){let r=1;e.overallDamageValue>=e.generalVariable*e.creature.armor&&(r=e.overallDamageValue-e.generalVariable*e.creature.armor),e.numberOfHitsRequired=Math.ceil(e.hpVariable*e.creature.hp/r)}else e.numberOfHitsRequired="-"}function dn(e){return e.callback.groupExists?e.callback.groupDefenseValue:e.player.defenseValue}function mm(e){e.player.constitutionLevel>0&&(e.extraNotes+=`Constitution Bonus Defense = ${Math.floor(dn(e)*e.player.constitutionLevel*.001)}<br>`)}function dm(e){e.player.flinchLevel>0&&(e.extraNotes+=`Flinch Bonus Attack Reduction = ${Math.floor(e.creature.attack*e.player.flinchLevel*.001)}<br>`)}function pn(e){e.overallDefenseValue=dn(e)+Math.floor(dn(e)*e.player.constitutionLevel*.001)+e.nightmareVisageAttackMovedToDefense,mm(e),dm(e),e.creatureHitByHowMuch=Math.floor(e.attackVariable*e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue),e.combatEvaluatorBias===3&&(e.creatureHitByHowMuch=Math.floor(e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue-50))}function pm(e){e.player.superEliteSlayerLevel>0&&(e.extraNotes+=`SES Stat Reduction Multiplier = ${e.player.superEliteSlayerMultiplier}<br>`)}function hm(e){e.holyFlameBonusDamage=0,e.creature.class==="Undead"&&(e.holyFlameBonusDamage=Math.max(Math.floor((e.player.damageValue-e.creature.armor)*e.player.holyFlameLevel*.002),0),e.player.holyFlameLevel>0&&(e.extraNotes+=`HF Bonus Damage = ${e.holyFlameBonusDamage}<br>`))}function gm(e){e.deathDealerBonusDamage=Math.floor(e.player.damageValue*(Math.min(Math.floor(e.player.killStreakValue/5)*.01*e.player.deathDealerLevel,20)/100))}function vm(e){e.counterAttackBonusAttack=Math.floor(e.player.attackValue*.0025*e.player.counterAttackLevel),e.counterAttackBonusDamage=Math.floor(e.player.damageValue*.0025*e.player.counterAttackLevel)}function ym(e){e.extraStaminaPerHit=0,e.player.counterAttackLevel>0&&(e.extraStaminaPerHit=Math.ceil((1+e.player.doublerLevel/50)*.0025*e.player.counterAttackLevel))}function Dm(e){e.player.deathDealerLevel>0&&(e.extraNotes+=`DD Bonus Damage = ${e.deathDealerBonusDamage}<br>`)}function xm(e){e.player.counterAttackLevel>0&&(e.extraNotes+=`CA Bonus Attack/Damage = ${e.counterAttackBonusAttack} / ${e.counterAttackBonusDamage}<br>CA Extra Stam Used = ${e.extraStaminaPerHit}<br>`)}function hn(e){e.extraNotes="",pm(e),hm(e),gm(e),vm(e),ym(e),Dm(e),xm(e)}function km(e){return e.callback.groupExists?"Group ":""}function wm(e){return`<tr><td bgcolor="#CD9E4B" colspan="4" align="center">${km(e)}Combat Evaluation</td></tr>`}function Cm(e){return e.hitByHowMuch>0?"Yes":"No"}function Bm(e){return`<tr><td align="right"><span style="color:#333333">Will I hit it? </td><td align="left">${Cm(e)}</td><td align="right"><span style="color:#333333">Extra Attack: </td><td align="left">( ${e.hitByHowMuch} )</td></tr>`}function Am(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill it? </td><td align="left">${e.numberOfHitsRequired}</td><td align="right"><span style="color:#333333">Extra Damage: </td><td align="left">( ${e.damageDone} )</td></tr>`}function Lm(e){return e.creatureHitByHowMuch>=0?"Yes":"No"}function Sm(e){return`<tr><td align="right"><span style="color:#333333">Will I be hit? </td><td align="left">${Lm(e)}</td><td align="right"><span style="color:#333333">Extra Defense: </td><td align="left">( ${-1*e.creatureHitByHowMuch} )</td></tr>`}function Em(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill me? </td><td align="left">${e.numberOfCreatureHitsTillDead}</td><td align="right"><span style="color:#333333">Extra Armor + HP: </td><td align="left">( ${-1*e.creatureDamageDone} )</td></tr>`}function bm(e){return`<tr><td align="right"><span style="color:#333333"># Player Hits? </td><td align="left">${e.playerHits}</td><td align="right"><span style="color:#333333"># Creature Hits? </td><td align="left">${e.creatureHits}</td></tr>`}function Mm(e){return`<tr><td align="right"><span style="color:#333333">Fight Status: </span></td><td align="left" colspan="3"><span>${e.fightStatus}</span></td></tr>`}function Hm(e){return`<tr><td align="right"><span style="color:#333333">Notes: </span></td><td align="left" colspan="3"><span style="font-size:x-small;">${e.extraNotes}</span></td></tr>`}function gn(e){return`<table width="100%"><tbody>${wm(e)}${Bm(e)}${Am(e)}${Sm(e)}${Em(e)}${bm(e)}${Mm(e)}${Hm(e)}</tbody></table>`}var zt,Yt,rt;function Tm(e){if(!zt){let t=ve("body",e);t.length===1&&([zt]=t)}}function ul(){return ce(Yt)?"Remove from do not kill list":"Add to the do not kill list"}function cl(){f(ul(),rt)}function Vm(){let e=n.doNotKillList.indexOf(Yt);e===-1?n.doNotKillList.push(Yt):n.doNotKillList.splice(e,1),cl(),y("doNotKillList",n.doNotKillList.join()),Ae()}function Nm(){rt=T({className:"fshBl",textContent:ul(),type:"button"});let e=m({className:"description",innerHTML:'<span class="ui-helper-hidden-accessible"><input type="text"></span>'});i(e,rt),i(zt,e),B(rt,Vm)}function Gm(){rt?cl():Nm()}function vn(e,t){Tm(t),zt&&(Yt=ge(e),Gm())}var Oe,ot,Qt,Xt;function $m(){Oe||(Oe=a("dialog-viewcreature"))}function Rm(){ot||(ot=m(),i(Oe,ot),i(Oe,m({innerHTML:'<span class="fshFooter">*Does include CA, DD, HF, DC, Flinch, Super Elite Slayer, NMV, Sanctuary, Constitution, Fortitude, Chi Strike and Terrorize (if active) and allow for randomness (1.1053). Constitution, NMV, Fortitude and Chi Strike apply to group stats.</span>'})))}function ml(){Qt||(Rm(),Qt=m(),i(ot,Qt))}function Im(){Xt||(ml(),Xt=m(),i(ot,Xt))}function dl(e){ml(),w(e,Qt)}function pl(e){Im(),w(e,Xt)}function Pm(e,t,r){r===3&&(t.attack-=Math.ceil(t.attack*e),t.defense-=Math.ceil(t.defense*e),t.armor-=Math.ceil(t.armor*e),t.damage-=Math.ceil(t.damage*e),t.hp-=Math.ceil(t.hp*e))}function _m(e,t){let r={name:e.name,class:e.creature_class,attack:Number(e.attack),defense:Number(e.defense),armor:Number(e.armor),damage:Number(e.damage),hp:Number(e.hp)};return Pm(t,r,e.type),r}function Fm(e){e.combatEvaluatorBias=n.combatEvaluatorBias,e.attackVariable=1.1053,e.generalVariable=n.generalVariable,e.hpVariable=n.hpVariable}function Om(e){hn(e),un(e),mn(e),pn(e),sn(e),fn(e),cn(e)}function hl(e,t,r){let o={};o.callback=r,o.player=be(t),Fm(o),o.creature=_m(e.response.data,o.player.superEliteSlayerMultiplier),Om(o),o.evaluatorHTML=gn(o),r.groupExists?pl(o.evaluatorHTML):dl(o.evaluatorHTML)}function Km(e){return e.members[0].name===xt()}function qm(e){if(I(e.r))return e.r.find(Km).id}function Wm(e,t,r){if(!r.r||!r.r.attributes)return;let o=r.r.attributes;hl(e,t,{groupExists:!0,groupAttackValue:o[0].value,groupDefenseValue:o[1].value,groupArmorValue:o[2].value,groupDamageValue:o[3].value,groupHPValue:o[4].value})}function Um(e,t,r){r&&ln(r).then(u(Wm,e,t))}function zm(e,t){Mi().then(qm).then(u(Um,e,t))}function Ym(e,t){e.player.hasGroup&&zm(e,t),hl(e,t,{groupExists:!1})}function Qm(e){return e.response&&e.response.data}function Xm(e,t){$m(),Oe&&(dl(""),pl(""),Qm(t)&&(vn(t.response.data.name,Oe),Bi(!0).then(u(Ym,t))))}function yn(){$.subscribe(Kn,Xm)}var Jt,Dn;function jt(){let e=[null,[n.buffs,n.buffsName],[n.buffs2,n.buffs2Name],[n.buffs3,n.buffs3Name]][n.enabledHuntingMode];I(e)&&([Jt,Dn]=e)}function xn(e){e.target.name==="enabledHuntingMode"&&(n.enabledHuntingMode=e.target.value,y("enabledHuntingMode",n.enabledHuntingMode),jt(),GameData.fetch(W))}var nt;function vl(){nt=!nt,y("hidePlayerActions",nt),GameData.fetch(b)}function Jm(e){let t=ve("verbs",e);t.length===1&&Bt(t[0])}function gl(){if(!nt)return;let e=a("actionList");vt("player",e).forEach(Jm)}function yl(){nt=p("hidePlayerActions"),$.subscribe(he,gl),gl()}function kn(){n.showCreatureInfo=!n.showCreatureInfo,y("showCreatureInfo",n.showCreatureInfo)}function wn(){n.showBuffs=!n.showBuffs,y("showHuntingBuffs",n.showBuffs),GameData.fetch(W)}function Cn(){n.showMonsterLog=!n.showMonsterLog,y("showMonsterLog",n.showMonsterLog)}function Bn(){n.hideSubLvlCreature=!n.hideSubLvlCreature,y("hideSubLvlCreature",n.hideSubLvlCreature),GameData.fetch(b)}function jm(){return m({id:"fshWorldPrefs",innerHTML:`${ie("showCreatureInfo")}&nbsp;&nbsp;${ie("showMonsterLog")}&nbsp;&nbsp;${ie("showTitanInfo")}&nbsp;&nbsp;${ie("showBuffInfo")}<br>${ie("hideSubLvlCreature")}&nbsp;&nbsp;${ie("hidePlayerActions")}&nbsp;&nbsp;${Ji()}`})}var Zm={hideSubLvlCreature:Bn,hidePlayerActions:vl,showCreatureInfo:kn,showHuntingBuffs:wn,showMonsterLog:Cn,showTitanInfo:ol,showBuffInfo:oa};function ed(e){let t=Zm[e.target.name];dt(t)&&(e.target.blur(),t(e))}function An(){let e=m({className:"fshCenter fshFten"}),t=jm();B(t,ed),R(t,"change",xn),i(e,t);let r=m();i(e,r);let o=a("worldContainerBelow").children[0];return At(e,o),r}function td(e,t){return e[t.name]=!0,e}function rd(e,t,r){return e[ge(r)]||t.push(r),t}function od(e,t){w(`You are missing some ${Dn} hunting buffs<br>(${t.join(", ")})`,e)}function Dl(e){w("",e)}function nd(e,t){let r=t.b.reduce(td,{}),o=Jt.reduce(u(rd,r),[]);o.length>0?od(e,o):Dl(e)}function id(e,t,r){n.showBuffs?nd(e,r):Dl(e)}function ad(e,t,r){Jt&&id(e,t,r)}function Ln(e){jt();let t=u(ad,e);$.subscribe(st,t),n.showBuffs&&window.initialGameData&&t(null,{b:window.initialGameData.player.buffs})}var Zt=[{generalVariable:1.1053,hpVariable:1.1},{generalVariable:1.1,hpVariable:1.053},{generalVariable:1.053,hpVariable:1},{generalVariable:1.1053,hpVariable:1}];function ld(e){return Zt[e]?Zt[e].generalVariable:1.1053}function fd(e){return Zt[e]?Zt[e].hpVariable:1.1}function Sn(){n.combatEvaluatorBias=p("combatEvaluatorBias"),n.generalVariable=ld(n.combatEvaluatorBias),n.hpVariable=fd(n.combatEvaluatorBias)}function sd(e){return!e||!e.actions||e.actions.length===0}function ud(e,t){return t.type===6?t.data.creature_type!==0||t.data.level>=e:!0}function cd(e){return e.realm&&e.realm.minlevel||GameData.realm().minlevel}function md(e){let t=ei(e);return sd(t)?e:(t.actions=t.actions.filter(u(ud,cd(t))),ni(t))}function dd(e){return e.data&&e.data.d&&qi(e.data.d,b)}function pd(e,t){n.hideSubLvlCreature&&dd(t)&&(e.dataFilter=md)}function En(){$.ajaxPrefilter("JSON",pd),n.hideSubLvlCreature&&GameData.fetch(b)}function hd(e){n[e[0]]=lr(e[1])}function gd(){[["buffs","huntingBuffs"],["buffs2","huntingBuffs2"],["buffs3","huntingBuffs3"]].forEach(hd)}function vd(e){n[e]=lr(e)}function yd(){["doNotKillList"].forEach(vd)}function Dd(){gd(),yd()}function xd(e){n[e[0]]=p(e[1])}function kd(){[["buffsName","huntingBuffsName"],["buffs2Name","huntingBuffs2Name"],["buffs3Name","huntingBuffs3Name"],["showBuffs","showHuntingBuffs"]].forEach(xd)}function wd(e){n[e]=p(e)}function Cd(){["enabledHuntingMode","hideSubLvlCreature","showTitanInfo","showBuffInfo","showMonsterLog","showCreatureInfo"].forEach(wd)}function Bd(){kd(),Cd()}function Ad(){Dd(),Bd()}function bn(){Sn(),Ad();let e=An();En(),Ln(e),yl()}function Ld(){$("#messageCenter").worldMessageCenter({offset:"0 60"})}function Sd(){Ce("#mapTooltip")}var Ed=[bn,en,yn,Qr,Pr,Fr,Go,jo,Ir,Jo,on,Lo,Ld,Sd,Vr,ra,Or,Vo,$r,Yr,No];function bd(){Yi(Ed),n.userIsDev&&Xr()}export{bd as default};
//# sourceMappingURL=newMap-6QK7OIZ7.js.map
