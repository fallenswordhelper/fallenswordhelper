import{a as G}from"./chunk-IO7WNRTZ.js";import{a as V}from"./chunk-NRM6HY5B.js";import{a as C}from"./chunk-4A4S5E2G.js";import{a as x}from"./chunk-RQWL3XFM.js";import{a as s}from"./chunk-TV6FJZ73.js";import"./chunk-GC3BBNBK.js";import{a as w}from"./chunk-3XMLB65N.js";import{a as j}from"./chunk-4VC66CVI.js";import"./chunk-W2PLL3XP.js";import{c as L}from"./chunk-EKWFPANY.js";import"./chunk-UMMLPLBF.js";import"./chunk-TSB4P6VC.js";import"./chunk-Q7YJZKAM.js";import"./chunk-KWW5TFWI.js";import{b as _}from"./chunk-V2RDFCFO.js";import{a as g}from"./chunk-JXM235FS.js";import{a as b}from"./chunk-ZOM4M5CL.js";import{a as M}from"./chunk-MV4L2PBY.js";import{a as l}from"./chunk-NVUMFPIJ.js";import{a as D}from"./chunk-AOLVAW2H.js";import"./chunk-6BTPDKHX.js";import{a as U}from"./chunk-RBEY7UOL.js";import{a as y}from"./chunk-OUMJ2TZS.js";import"./chunk-TF3NOQ6H.js";import"./chunk-UBFOQ6AM.js";import{a}from"./chunk-KPBHOIFO.js";import{a as Q}from"./chunk-ZG3H6FNG.js";import"./chunk-COFS3IJQ.js";import{a as f}from"./chunk-X4QNMHIE.js";import"./chunk-X7VSJFUB.js";import"./chunk-RDJGNWAB.js";import"./chunk-7IZ75EHU.js";import{a as O,b as I}from"./chunk-BOCJFTCI.js";import"./chunk-3G26KMOE.js";import"./chunk-N2HK4FJC.js";import{a as q}from"./chunk-ZHDD3Y6K.js";import"./chunk-JIDPN5FO.js";import"./chunk-ZXM2QLUQ.js";import{a as H}from"./chunk-CIYKTU6C.js";import{a as R}from"./chunk-XEUJY3TQ.js";import"./chunk-TCL2J57P.js";import"./chunk-2WBVUEHT.js";import{a as d}from"./chunk-FXTQ547Y.js";import{a as n}from"./chunk-P2XVC4S5.js";import"./chunk-JWWQOZPD.js";import"./chunk-ZOQAMPPO.js";import"./chunk-SGC5GHRN.js";import{b as S}from"./chunk-2I26BJ52.js";import"./chunk-QMYGD3GE.js";import"./chunk-X4CA4ODK.js";import{g as E}from"./chunk-6MEG5PHL.js";import"./chunk-Q6PVLDNZ.js";import"./chunk-VVJVMGW6.js";var v=0,J=[];function X(t){return`<div class="rmItem"><img class="tip-dynamic" data-tipped="fetchitem.php?item_id=${t.id}&inv_id=-1&t=2&p=${v}&vcode=${t.verify}" src="${t.img}" height="20px" width="20px"><p>${t.amountPresent}/${t.amountNeeded}</p></div>`}var z=t=>t?t.map(X).join(""):"";function Y(t){return t.target?` <img class="tip-dynamic" data-tipped="fetchitem.php?item_id=${t.target.id}&inv_id=-1&t=2&p=${v}&vcode=${t.target.verify}" src="${t.target.img}" height="30px" width="30px"><br/>`:""}function Z(t){return!J.includes(t.name)}function tt(t){return`<tr class="rmTr"><td class="rmTd"><a href="${t.link}"><img src="${t.img}" height="30px" width="30px"></a></td><td class="rmTd"><a href="${t.link}">${t.name}</a></td><td class="rmTd">${z(t.items)}</td><td class="rmTd">${z(t.components)}</td><td class="rmTd">${Y(t)}</td></tr>`}function et(t,e){v=C();let r='<table width="100%"><tr class="rmTh"><th>Recipe</th><th><span id="sortName" class="fshLink" sortkey="name">Name</span></th><th>Items</th><th>Components</th><th>Target</th></tr>';r+=e.recipe.filter(Z).map(tt).join(""),r+="</table>",g(r,t),I("fsh_recipeBook",e)}function u(t,e){e&&(S("hideRecipes")&&(J=V("hideRecipeNames")),et(t,e))}function h(t){return R('#pCC img[src*="/folder"]',t)}function rt(t){return y("td",b("pCC",t))}function ot(t,e){let r=e.getAttribute("background");return r&&r.includes(t)}function nt(t){let{itemId:e,vcode:r}=U(E,t.dataset.tipped);return{img:t.getAttribute("src"),id:e,verify:r}}function it(t,e){if(e){let r=f(e).split("/");t.amountPresent=parseInt(r[0],10),t.amountNeeded=parseInt(r[1],10)}}function mt(t){let e=t.children[0].children[0],r=nt(e);return it(r,t.parentNode.nextElementSibling),r}function P(t,e){return t.filter(n(ot,e)).map(mt)}function $(t,e,r,o){let i=a(o);s(t,`Parsing blueprint ${r.name}...<br>`);let c=rt(i);r.items=P(c,"/inventory/2x3."),r.components=P(c,"/inventory/1x1mini."),[r.target]=P(c,"/hellforge/2x3."),e.recipe.push(r)}function st(t){return R('#pCC a[href*="=viewrecipe&"]',t)}function at(t){return{img:t.parentNode.previousElementSibling.children[0].getAttribute("src"),link:t.href,name:f(t),id:x(t.search,"recipe_id")}}function pt(t,e,r){s(t,`Found blueprint "${f(r)}".<br>`);let o=at(r);return d(r.href).then(n($,t,e,o))}function A(t,e,r){let o=a(r),i=st(o).map(n(pt,t,e));return l(i)}function ft(t){return/\/folder_on\./.test(t.getAttribute("src"))}function ct(t){return h(t).find(ft).parentNode.href}function dt(t,e){return e!==0}function lt(t){return t.value}function ut(t){return y("option",D("customselect",b("pCC",t))[0]).filter(dt).map(lt)}function gt(t,e,r){return d(`${t}&page=${r}`).then(e)}function ht(t,e,r){return ut(t).map(n(gt,e,r))}function F(t,e,r){let o=a(r),i=ct(o),c=n(A,t,e),B=ht(o,i,c);return B.push(c(r)),l(B)}function bt(t){return x(t.parentNode.search,"folder_id")!=="-1"}function xt(t,e){let r=f(e.parentNode.parentNode.nextElementSibling),o=/quest/i.test(r);return o&&s(t,`Skipping folder "${r}"  as it has the word "quest" in folder name.<br>`),!o}function yt(t,e){return d(e.parentNode.href).then(t)}function It(t,e,r){let o=a(e);return h(o).filter(bt).filter(n(xt,t)).map(n(yt,r))}function T(t,e,r){let o=n(F,t,e),i=It(t,r,o);return i.push(o(r)),l(i)}var m=0,p=0,N=()=>m,K=()=>p;function Rt(){s(p,"Finished parsing ... formatting ..."),I("fsh_recipeBook",m),u(p,m)}function k(){m={},m.recipe=[],g("<br>Parsing inventing screen ...<br>",p),Q({cmd:"inventing"}).then(n(T,p,m)).then(Rt)}function W(t,e){m=e,g('<table class="fshInvFilter"><thead><tr><th width="90%"><b>&nbsp;Recipe Manager</b></th><th width="10%" class="fshBtnBox">[<span id="rfsh" class="fshLink">Refresh</span>]</th></tr></thead></table>',t),p=w(),j(t,p),m?u(p,m):k()}function vt(t){G(t),N().recipe.sort(L),u(K(),N())}var Pt=[["rfsh",k],["sortName",vt]];function $t(t){if(q())return;let e=t||_();O("fsh_recipeBook").then(n(W,e)),H(e,M(Pt))}export{$t as default};
//# sourceMappingURL=recipeMgr-EUXIEPG4.js.map
