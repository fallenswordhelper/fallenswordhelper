import{a as H}from"./chunk-CREA3NBR.js";import{a as S}from"./chunk-RUFZZD4M.js";import{a as N}from"./chunk-VEG3URGJ.js";import{a as R}from"./chunk-MWS2UYJ2.js";import{a as A}from"./chunk-D6AHMXTH.js";import{a as q}from"./chunk-3YHDDTO4.js";import{a as u}from"./chunk-B7KOV5WE.js";import{a as E}from"./chunk-GPS2RLNW.js";import{a as L}from"./chunk-G4JTBCFK.js";import{a as b}from"./chunk-TV6FJZ73.js";import"./chunk-GC3BBNBK.js";import{a as m}from"./chunk-3XMLB65N.js";import{a as n}from"./chunk-4VC66CVI.js";import"./chunk-W2PLL3XP.js";import{a as T}from"./chunk-H3QAM6XU.js";import{b as f}from"./chunk-V2RDFCFO.js";import{a as l}from"./chunk-JXM235FS.js";import{a as g}from"./chunk-ZOM4M5CL.js";import"./chunk-NVUMFPIJ.js";import{a as M}from"./chunk-RBEY7UOL.js";import{a as v}from"./chunk-OUMJ2TZS.js";import"./chunk-TF3NOQ6H.js";import"./chunk-COFS3IJQ.js";import"./chunk-X7VSJFUB.js";import"./chunk-RDJGNWAB.js";import{a as I}from"./chunk-7IZ75EHU.js";import{a as C}from"./chunk-ZHDD3Y6K.js";import"./chunk-JIDPN5FO.js";import"./chunk-ZXM2QLUQ.js";import{a as B}from"./chunk-CIYKTU6C.js";import{a as y}from"./chunk-LZRXEQDU.js";import"./chunk-LB3PYE2H.js";import{a as Q}from"./chunk-HFVVQWWN.js";import"./chunk-2WBVUEHT.js";import"./chunk-FXTQ547Y.js";import"./chunk-7IR54LMC.js";import{a}from"./chunk-P2XVC4S5.js";import"./chunk-JWWQOZPD.js";import"./chunk-ZOQAMPPO.js";import"./chunk-SGC5GHRN.js";import"./chunk-2I26BJ52.js";import"./chunk-QMYGD3GE.js";import"./chunk-X4CA4ODK.js";import{g as x}from"./chunk-6MEG5PHL.js";import"./chunk-Q6PVLDNZ.js";import"./chunk-VVJVMGW6.js";function p(t){return y({cmd:"tempinv",subcmd:"takeitems",item:t})}function G(t){return L({cmd:"tempinv",subcmd:"takeitem",temp_id:t,ajax:1})}function O(t){let e=t.filter(r=>r.r===0),i=t.filter(r=>r.r!==0);return e.length>0?{r:e.map(r=>({id:r.temp_id})),s:!0}:i.length>0?{e:{message:i[0].m},s:!1}:{e:{message:t[0].m},s:!1}}function d(t){return S(t.map(G),O)}function k(t){return q(p,d,t)}function c(t,e){b(e,`<li class="fshNbrList">${t}</li>`)}var D;function _(t){return!t.s&&D!==t.e.message}function h(t,e){if(!t||(_(t)&&(D=t.e.message,c(t.e.message,e)),!t.s))return!0}function F(t,e,i){let r=N({id:t,className:"sendLink",htmlFor:"fshQuickTake",textContent:`Toggle ${e}`});return u(r,i),r}function w(t,e){let i=e.children[0],{tipped:r}=i.dataset,{itemId:o,invId:s}=M(x,r);return!o||!s||(t[o]?t[o].invIds.push(s):t[o]={invIds:[s],tipped:r.replace(/&extra=\d/,""),src:i.src}),t}function z(){return m({id:"quickTake",innerHTML:'<div class="fshCenter"><br><font size="3"><b>Quick Take</b></font><br><br>Select which item to take all similar items from your Mailbox.</div><div></div>'})}function J(){let t=m(),e=A();return n(t,e),{takeContainer:t,takeResult:e}}function P(t,e){let i=e[1],r=m(),o=m({innerHTML:`<img src="${i.src}" class="tip-dynamic" data-tipped="${i.tipped}">`});n(r,o);let s=m({innerHTML:`<button class="fshBl fshBls" data-id="${e[0]}">Take All ${i.invIds.length}</button>`});n(r,s),n(t,r)}function U(t,e){I(e).forEach(a(P,t))}function K(t){let e=$(`#temp-inv-img-${t}`).qtip("api");e&&e.destroy(!0)}function V(t){K(t.id);let e=g(`temp-inv-${t.id}`);e&&l("",e)}function W(t,e){e.r.forEach(V),c(`${e.r.length.toString()} item(s) taken.`,t)}function X(t,e){h(e,t)||T(e.r)&&W(t,e)}function Y(t,e){k(e).then(a(X,t))}function Z(t,e,i){let r=i.dataset.id,{invIds:o}=t[r];l(`taking all ${o.length} items`,i.parentNode),H(40,o).forEach(a(Y,e))}function j(t,e,i){E("fshBls",i.target)&&Z(t,e,i.target)}function tt(t,e,i){let r=m({className:"fshTakeGrid"});U(r,t),n(e,r),B(r,a(j,t,i))}function et(t){let e=z(),{takeContainer:i,takeResult:r}=J();tt(t,e,r),n(e,m()),n(e,i),n(f(),e)}function it(t,e){F("qtOn","Mailbox",e);let i=t.reduce(w,{});et(i)}function rt(t,e){let i=R({id:"fshQuickTake",type:"checkbox"});u(i,e),Q(i,"change",a(it,t,e))}function ot(){if(C()||!f())return;let t=v("a",f());if(t.length===0)return;let e=f().lastElementChild;rt(t,e),F("qtOff","Quick Take",e)}export{ot as default};
//# sourceMappingURL=mailbox-L7ZPPCF4.js.map
