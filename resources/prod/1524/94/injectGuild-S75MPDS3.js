import{a as ie}from"./chunk-TCZY57ZK.js";import{a as te,b as ee}from"./chunk-5OVRYTCY.js";import{a as Kt}from"./chunk-7CH2TK5K.js";import{a as z}from"./chunk-5IZ2PUCX.js";import{a as oe}from"./chunk-3ER4PBLB.js";import{a as re}from"./chunk-HFTTENNW.js";import{a as Jt}from"./chunk-OLQRO2XL.js";import{a as Yt}from"./chunk-H4QG7DVE.js";import{a as V}from"./chunk-CBZPC7T3.js";import{a as Wt}from"./chunk-ZYHOM632.js";import{a as Zt}from"./chunk-BPO3W2MF.js";import"./chunk-QA25LLK2.js";import"./chunk-VEG3URGJ.js";import{a as _}from"./chunk-MWS2UYJ2.js";import{a as _t}from"./chunk-P5OCZIJY.js";import{a as Qt}from"./chunk-5U7DCVQ4.js";import{a as zt}from"./chunk-3K2T5RZS.js";import"./chunk-MN2NVYRQ.js";import{a as Q}from"./chunk-TAVJQJY2.js";import{a as wt}from"./chunk-B6OR3VYQ.js";import{a as Bt}from"./chunk-YYUAOH77.js";import{a as Ot}from"./chunk-D6AHMXTH.js";import"./chunk-B7KOV5WE.js";import{a as Nt}from"./chunk-GPS2RLNW.js";import{a as c}from"./chunk-OF46Z2JM.js";import"./chunk-RQWL3XFM.js";import{a}from"./chunk-TV6FJZ73.js";import"./chunk-GC3BBNBK.js";import{a as n}from"./chunk-3XMLB65N.js";import{a as o}from"./chunk-4VC66CVI.js";import{a as P}from"./chunk-W2PLL3XP.js";import"./chunk-H3QAM6XU.js";import{a as vt}from"./chunk-SP56NTGF.js";import"./chunk-3SVCDYSX.js";import{a as M}from"./chunk-IQPOBH3V.js";import{c as I}from"./chunk-2QEFCZOE.js";import"./chunk-OTAKKOOE.js";import{a as $t}from"./chunk-GMISN3T7.js";import{a as D}from"./chunk-B5C6WAOU.js";import"./chunk-K23D4BZD.js";import{a as Gt}from"./chunk-TSB4P6VC.js";import"./chunk-Q7YJZKAM.js";import"./chunk-EACXRABJ.js";import{a as Ct}from"./chunk-KWW5TFWI.js";import"./chunk-MFCC7QTK.js";import{b as m}from"./chunk-V2RDFCFO.js";import{a as f}from"./chunk-JXM235FS.js";import{a as yt}from"./chunk-ZOM4M5CL.js";import{a as jt,b as Ut,c as qt,d as Ft}from"./chunk-EK5GWY6F.js";import{a as Xt}from"./chunk-VZWTZD3O.js";import"./chunk-NXPWQUXX.js";import"./chunk-YEO2XDY6.js";import"./chunk-AKIWBU23.js";import"./chunk-JMRNX6XH.js";import"./chunk-34BUT5QX.js";import{a as O}from"./chunk-TTKBA2AL.js";import{a as Vt}from"./chunk-LQQVP5PF.js";import"./chunk-AOLVAW2H.js";import"./chunk-ZW6OMKWE.js";import{a as Mt}from"./chunk-RBEY7UOL.js";import{a as x}from"./chunk-OUMJ2TZS.js";import{a as T}from"./chunk-TF3NOQ6H.js";import"./chunk-UBFOQ6AM.js";import{a as p}from"./chunk-CJDIJW63.js";import{a as Dt}from"./chunk-KPBHOIFO.js";import{a as Pt}from"./chunk-ZG3H6FNG.js";import"./chunk-COFS3IJQ.js";import"./chunk-X4QNMHIE.js";import"./chunk-X7VSJFUB.js";import"./chunk-RDJGNWAB.js";import"./chunk-7IZ75EHU.js";import{a as h}from"./chunk-SGZWLSNX.js";import"./chunk-AOINEH4F.js";import{a as At,b as Rt}from"./chunk-BOCJFTCI.js";import"./chunk-3G26KMOE.js";import{a as St}from"./chunk-N2HK4FJC.js";import{a as Ht}from"./chunk-ZHDD3Y6K.js";import"./chunk-JIDPN5FO.js";import"./chunk-ZXM2QLUQ.js";import{a as v}from"./chunk-CIYKTU6C.js";import{a as G}from"./chunk-OKP6A7XT.js";import{a as Et}from"./chunk-FAJS25QJ.js";import{a as X}from"./chunk-HFVVQWWN.js";import{a as N}from"./chunk-HXA7GMHU.js";import{a as $}from"./chunk-XEUJY3TQ.js";import{a as It}from"./chunk-TCL2J57P.js";import"./chunk-UCD3C27V.js";import"./chunk-2WBVUEHT.js";import"./chunk-FXTQ547Y.js";import"./chunk-7IR54LMC.js";import{a as l}from"./chunk-P2XVC4S5.js";import"./chunk-JWWQOZPD.js";import"./chunk-ZOQAMPPO.js";import{a as k}from"./chunk-SGC5GHRN.js";import{b as s}from"./chunk-2I26BJ52.js";import{a as bt}from"./chunk-QMYGD3GE.js";import{a as u}from"./chunk-X4CA4ODK.js";import{G as R,K as Tt,Na as xt,k as A,l as kt,ta as C,wa as L,y as Lt}from"./chunk-6MEG5PHL.js";import"./chunk-Q6PVLDNZ.js";import{a as w}from"./chunk-VVJVMGW6.js";var ne=0,me=1;function Ce(t,e){let{mins:r}=M(e.dataset.tipped);return r<44640&&(t[ne]+=1,t[me]+=Number(k(A,e.dataset.tipped))),t}function Ne(t){return t.reduce(Ce,[0,0])}function W(){let t=x("b",m()).find(D("Members"));if(t){let e=te(),r=Ne(e);t.classList.add("tip-static"),Zt(`Active: ${r[ne]}/${e.length}<br>Stamina: ${G(r[me])}`,t)}}function ae(t,e){let r=k(e,t.replace(/,/g,""));return r?parseInt(r,10):0}function Ee(t,e){let r="";return t>e&&(r="+"),r+G(t-e)}function Be(t){let e=t.dataset.tipped,r=ae(e,/XP Lock: <b>(?<lockXp>\d*)/),i=ae(e,/XP: <b>(?<realXp>\d*)/);a(t.parentNode.nextElementSibling,` (<b>${Ee(i,r)}</b>)`)}function J(){let t=p('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&Be(t)}function Y(){let t=x(L,m()).slice(-2,-1)[0];if(!t)return;let e=t.rows[0].cells[0],r=n({id:"profile-bio",innerHTML:e.innerHTML});f("",e),o(e,r),re()}var Z=0,K=0;function He(t){return Z&&t>=jt()&&t<=Ut()}function Ae(t){return K&&t>=qt()&&t<=Ft()}var Re=t=>[t,M(t.dataset.tipped).days],Pe=([,t])=>t<7,Me=([t])=>[t,Number(k(kt,t.dataset.tipped))],$e=([t,e])=>[t.parentNode.parentNode.rowIndex,He(e),Ae(e)];function Ie(){return $('#pCC a[data-tipped*="<td>VL:</td>"]').map(Re).filter(Pe).map(Me).map($e)}function De(){return Number(wt("guild_id"))!==Vt()&&(Z||K)}var Ge=t=>t.map(([e])=>`.fshHighlight tr:nth-child(${e+1})`).join(",");function se(t,e){if(t.length){let r=`${Ge(t)} {background-color: #${e};}`;o(document.body,V(r))}}function Ve(t,e){if(t.length+e.length){let r=T(L,m());r[r.length-1].classList.add("fshHighlight")}}function je(){let t=Ie(),e=t.filter(([,i])=>i),r=t.filter(([,i,S])=>!i&&S);se(e,"4671C8"),se(r,"FF9900"),Ve(e,r)}function Ue(){De()&&je()}function tt(){Z=s("highlightPlayersNearMyLvl"),K=s("highlightGvGPlayersNearMyLvl"),Ue(),s("enableHistoryCompressor")&&Y()}function qe(t){a(t.parentNode,' <span class="smallLink">[b]</span>')}function Fe(t){t.target.className==="smallLink"&&zt(Qt(t.target.previousElementSibling.href))}function et(){let t=It(`#pCC a[href^="${Lt}"]`);Kt([3,t,0,qe]),v(m(),Fe)}function j(t){return Pt({cmd:"guild",subcmd:"conflicts",page:t})}function ce(t,e){f(e,t.insertCell(-1))}function le(t,e,r){let i=t.insertRow(t.rows.length-2);ce(i,e),ce(i,r)}function Xe(t){le(t,`<a href="${R}conflicts">Active Conflicts</a>`,"Score")}function Oe(t,e){le(t,e.cells[0].innerHTML,`<b>${e.cells[6].innerHTML}</b>`)}function _e(t,e,r){e===1&&Xe(r),Wt(t,7,0).forEach(l(Oe,r))}function Qe(t,e,r){let i=p("#pCC > table > tbody > tr > td > table",t);i&&i.rows.length>3&&_e(i,e,r)}function ze(t){return Number(t.nextSibling.textContent.split("\xA0")[2])}function We(t,e,r){j(t+1).then(l(e,r))}function fe(t,e){let r=Dt(e),i=p('#pCC input[name="page"]',r);if(!i)return;let S=Number(i.value),we=ze(i);Qe(r,S,t.node),we>S&&We(S,fe,t)}function rt(t){let[e]=t.rows[6].cells[0].children;e&&j(1).then(l(fe,{node:e}))}function Je(t){t.target.id===C&&h(C,!s(C))}function ot(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,r=n({className:"fsh-tracker"}),i=n({innerHTML:`${I(C)}&nbsp;<label class="custombutton" for="tracker">Show</label>`});u(i,"change",Je),o(r,t),o(r,i),Bt(e,r)}function it(){return P("br")}function nt(t){return P("th",t)}var mt=0,st="",B=0,at=0,U=0,rr=(t,e)=>`${t}<option value="${e}">${e}</option>`,or=t=>`<select name="member">${t.reduce(rr,"")}</select>`,ir=t=>st!==t;function E(t){return bt(t)?"#DEF":t.toLocaleString()}function nr(t,e,r){return`${e}<tr><td>${Xt(new Date(r[4]*1e3))}</td><td>${t}</td><td class="fshRight">${E(r[2])}</td><td class="fshRight">${E(r[5])}</td><td class="fshRight">${E(r[1])}</td><td class="fshRight">${E(r[3])}</td><td class="fshRight">${Math.floor(r[1]/r[3]*100)}</td><td class="fshRight">${r[0]}</td><td class="fshRight">${E(r[6])}</td></tr>`}function mr(t,e){return ir(e)?t:t+U[e].reduce(l(nr,e),"")}var ar=()=>O(U).reduce(mr,"");function sr(){U&&f(ar(),mt),B.classList.remove("fshSpinner")}function de(){B.classList.add("fshSpinner"),c(3,sr)}function cr(t){st=t.target.value,de()}function q(t){if(t){U=t;let e=O(t).sort(Gt);[st]=e,f(or(e),at),de()}}function lr(){let t=nt({textContent:"Member"});return at=n(),o(t,at),t}function fr(t){let e=t.createTHead().insertRow(-1);a(e,"<th>Date</th>");let r=lr();o(e,r),a(e,"<th>Level</th><th>VL</th><th>Stam</th><th>Max<br>Stam</th><th>Stam<br>%</th><th>Last<br>Activity<br>(Days)</th><th>GXP</th>")}function pr(t){mt=ie(),o(t,mt)}function ge(){let t=Yt({id:"tg"});return fr(t),pr(t),u(t,"change",cr),B=n({className:"tgCont fshSpinner64"}),o(B,t),B}var d=0,he=0,be=0,g=0;function ur(t){d.value=t,g.classList.remove("fshSpinner")}function ke(t){t&&(g.classList.add("fshSpinner"),c(4,ur,[t]))}function dr(){d.value='{"lastUpdate": 0, "members": {}}'}function gr(t){z("Update successful"),q(t.members)}function hr(){let t=vt(d.value);Rt("fsh_guildActivity",t).then(l(gr,t)).catch(z)}function ye(t,e){let r=Jt({className:"custombutton",textContent:t});return v(r,e),r}function br(){d=oe(),d.setAttribute("autocapitalize","off"),d.setAttribute("autocomplete","off"),d.setAttribute("autocorrect","off"),d.setAttribute("spellcheck","false")}function Le(){return g=n({id:"io",className:"fshSpinner64"}),br(),he=ye("Save",hr),be=ye("Reset",dr),o(g,d),o(g,it()),o(g,he),o(g,be),g}var ct=0,b=0,H=0;function Te(){return!b.checked}function yr(){return b.checked}function kr(){b.checked=!1}function Lr(t){yr()&&t.code==="Escape"&&kr()}function Tr(t){Te()&&(t.style.transform=null)}function xr(){return Ot({className:"fshMove ui-tabs-nav ui-widget-header ui-corner-all ui-helper-reset ui-helper-clearfix",innerHTML:'<li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab1">Guild Activity Tracker</label></li><li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab2">Import/Export</label></li><label for="tracker" class="fsh-dialog-close ui-dialog-titlebar-close">&times;</label>'})}function vr(){N("guildTracker","updateRawData"),ct&&ke(ct)}function Sr(){let t=n({className:"fsh-dialog-popup ui-dialog ui-tabs ui-widget ui-widget-content ui-corner-all",innerHTML:'<input id="acttab1" class="fsh-tab-open" name="acttabs" checked type="radio">'}),e=_({className:"fsh-tab-open",id:"acttab2",name:"acttabs",type:"radio"});return X(e,"change",vr),o(t,e),t}function wr(){let t=Sr(),e=xr();return o(t,e),Et(e,t),t}function Cr(){let t=n({className:"fsh-dialog-content"});return o(t,ge()),o(t,Le()),t}function Nr(){let t=wr(),e=Cr();o(t,e),u(b,"change",l(Tr,t)),o(H,t)}function Er(){a(H,'<div class="fsh-dialog-overlay"><label class="fsh-dialog-cancel" for="tracker"></label></div>')}function Br(t){t&&(ct=St(t),q(t.members))}function Hr(){N("guildTracker","openDialog"),At("fsh_guildActivity").then(Br),w.dialogIsClosed=Te,Er(),Nr()}function Ar(){b=_({id:"tracker",className:"fsh-dialog-open",type:"checkbox"}),X(b,"change",Hr),H=n({className:"fsh-dialog"}),o(H,b),u(document.body,"keydown",Lr),o(document.body,H)}function lt(){ot(),Ar()}function ft(t){let e=t.target.dataset.linkto,r=yt(e),i=Nt("fshHide",r);r.classList.toggle("fshHide"),i?h(e,""):h(e,"ON")}function Rr(t){return Q({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function Pr(t){let e=Q({className:"fshNoWrap",innerHTML:"[&nbsp;"});return o(e,t),a(e,"&nbsp;]"),e}function pt(t,e,r){let i=Rr(r);o(t,Pr(i)),e.id=r,s(r)&&_t(e),v(i,ft)}function xe(t){pt(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function ve(t){let e=t.rows[4].cells[1].children[0];f(Ct(e.innerHTML),e),pt(e,t.rows[6].cells[0].children[0],"statisticsControl")}function Se(t){let e=t.rows[15]?.cells[1].children[0];e&&pt(e,t.rows[17].cells[0].children[0],"guildStructureControl")}var ut=0;function Mr(t){let{stam:e,max:r}=Mt(A,t.dataset.tipped);return Math.min(Math.round(Number(e)/Number(r)*100),100)}function $r(t){let e=Mr(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${e}%, transparent ${e+1}%)}`}function Ir(){let t=T(L,m()),e=t[t.length-1];e.classList.add("fshProgressBar");let i=$(xt,e).map($r).join(`
`);ut=o(document.body,V(i)).sheet}function F(t){ut?ut.disabled=!t:Ir()}var dt="enableStamBars",y=0;function Dr(){y=!y,h(dt,y),F(y),N("guildManage","StamBars")}function Gr(){if(!p("#pCC img.guild_openGuildStore"))return;let e=o(m(),n({innerHTML:I(dt),style:{marginLeft:"66%"}}));u(e,"change",Dr)}function gt(){Gr(),y=s(dt),y&&F(y)}function Vr(t){let e=x("b",t).filter(D("Relics"));if(e.length!==1)return;let r=e[0].parentNode.nextElementSibling.children[0];f(`[ <a href="${R}reliclist">Control</a> ]&nbsp;`,r)}function jr(t){let e=T("li",t);if(!e||!e.length)return;let r=e[e.length-1].parentNode;a(r,`<li><a href="${Tt}${$t()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function Ur(){return m().lastElementChild.rows?.[2].cells[0].children[0]}function qr(t,e){c(3,e,[t])}function Fr(t){[xe,ve,Se,Vr,jr].forEach(l(qr,t))}function Xr(t){Ht()||(s("detailedConflictInfo")&&c(3,rt,[t]),c(4,lt))}function ht(){if(!m())return;let t=Ur();t&&(Fr(t),s("showBuffLinks")&&c(3,et),Xr(t),gt())}function Or(){c(3,ee),c(3,J),c(3,W),["-","manage"].includes(w.subcmd)&&ht(),w.subcmd==="view"&&tt()}export{Or as default};
//# sourceMappingURL=injectGuild-S75MPDS3.js.map
