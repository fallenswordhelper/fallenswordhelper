import{a as de}from"./chunk-73G2AU4J.js";import{a as M}from"./chunk-Y7GWXKP5.js";import{a as w}from"./chunk-VIAHY74Q.js";import"./chunk-VIJWFUGH.js";import"./chunk-O2HKBJHO.js";import"./chunk-IJJZ4KIO.js";import{a as fe}from"./chunk-NRLNCZXP.js";import"./chunk-VUEGQZWA.js";import{a as pe}from"./chunk-SRJJLYDL.js";import{a as x}from"./chunk-EPZ5F5RD.js";import"./chunk-UNI23447.js";import"./chunk-UKCKIFDS.js";import{a as re}from"./chunk-PJA5XFNT.js";import{a as Z}from"./chunk-LQ3YN2GG.js";import"./chunk-FWZSNZAY.js";import{a as ee}from"./chunk-4VG4DFKD.js";import"./chunk-EFYYJBIY.js";import"./chunk-DUL3ONJJ.js";import"./chunk-DXTBWQDH.js";import"./chunk-Y25KTRBX.js";import"./chunk-C5OL3C5E.js";import"./chunk-CEGFUXSK.js";import{a as z}from"./chunk-L4B7A6OI.js";import"./chunk-5UHNJGH2.js";import{$ as le,A as P,D as n,E as Y,F as D,G as F,H as oe,_ as I,a as b,aa as ae,ca as se,d as ne,e as ie,f as v,ha as ce,ia as ue,s,t as k,u as B,w as f,x as j,y as g}from"./chunk-ZYLGT2XQ.js";import{a as me}from"./chunk-DEEEN4LX.js";import"./chunk-RYN2ZACS.js";import{a as te}from"./chunk-4QZL53LG.js";import"./chunk-OV3YZUE5.js";import"./chunk-DPQVBB2M.js";import"./chunk-YIUTYHR2.js";import"./chunk-PDKME2CZ.js";import"./chunk-S2QHLOQ6.js";import"./chunk-ZLYAP3OF.js";import"./chunk-W5N63RWR.js";import"./chunk-5P435J5Q.js";import"./chunk-PJBH3ZC7.js";import"./chunk-GHLTWNNP.js";import{b as S}from"./chunk-JLE65JRD.js";import"./chunk-C3WFXZUW.js";import"./chunk-TM6O52J7.js";function N(l,e){return me({cmd:"potionbazaar",subcmd:"buyitem",item_id:l,quantity:e})}async function V(l,e){let t=await ee({cmd:"potionbazaar",subcmd:"buyitem",item_id:l,quantity:e}),r=fe(t);return r==="You purchased the item!"?{r:Array(e),s:!0}:{e:{message:r},s:!1}}function $(l,e){return pe(N,V,l,e)}function _e(l,e,t){let r=l.slice();return r[3]=e[t],r[4]=e,r[5]=t,r}function ye(l){return{c:b,m:b,p:b,d:b}}function ve(l){let e,t,r;return{c(){e=f("button"),e.textContent="Buy",n(e,"type","button"),n(e,"class","custombutton")},m(a,c){k(a,e,c),t||(r=P(e,"click",function(){ne(l[1](l[3]))&&l[1](l[3]).apply(this,arguments)}),t=!0)},p(a,c){l=a},d(a){a&&B(e),t=!1,r()}}}function ke(l){let e;return{c(){e=f("span"),n(e,"class","fshSpinner fshSpinner12")},m(t,r){k(t,e,r)},p:b,d(t){t&&B(e)}}}function he(l,e){let t,r,a,c,i,o,m=z(e[3].price)+"",C,J,d,K,L,p,O,Q,q=z(e[3].price*e[3].count)+"",E,R,_,U,W,A,G,T,X;function ge(){e[2].call(p,e[4],e[5])}let u={ctx:e,current:null,token:null,hasCatch:!1,pending:ke,then:ve,catch:ye};return I(A=e[3].promise,u),{key:l,first:null,c(){t=f("div"),r=f("img"),i=g(),o=f("div"),C=j(m),J=g(),d=f("img"),L=j(`
        x
        `),p=f("input"),O=f("br"),Q=j(`
        = `),E=j(q),R=g(),_=f("img"),W=g(),u.block.c(),G=g(),n(r,"class","potion-img tip-dynamic svelte-12re2j5"),oe(r,"background","url('"+S+"ui/inventory/2x3.png')"),v(r.src,a=e[3].img)||n(r,"src",a),n(r,"alt","Potion"),n(r,"data-tipped",c=e[3].fetch),v(d.src,K=S+"currency/0.png")||n(d,"src",K),n(d,"data-hasqtip","1"),n(d,"oldtitle","Gold"),n(d,"alt","Gold"),n(d,"title",""),n(d,"aria-describedby","qtip-1"),n(d,"class","svelte-12re2j5"),n(p,"type","number"),n(p,"min","1"),n(p,"max","100"),n(p,"class","svelte-12re2j5"),v(_.src,U=S+"currency/0.png")||n(_,"src",U),n(_,"alt","Gold"),n(_,"data-hasqtip","1"),n(_,"oldtitle","Gold"),n(_,"title",""),n(_,"aria-describedby","qtip-1"),n(_,"class","svelte-12re2j5"),n(o,"class","prices svelte-12re2j5"),n(t,"class","potion svelte-12re2j5"),this.first=t},m(y,h){k(y,t,h),s(t,r),s(t,i),s(t,o),s(o,C),s(o,J),s(o,d),s(o,L),s(o,p),F(p,e[3].count),s(o,O),s(o,Q),s(o,E),s(o,R),s(o,_),s(t,W),u.block.m(t,u.anchor=null),u.mount=()=>t,u.anchor=G,s(t,G),T||(X=P(p,"input",ge),T=!0)},p(y,h){e=y,h&1&&!v(r.src,a=e[3].img)&&n(r,"src",a),h&1&&c!==(c=e[3].fetch)&&n(r,"data-tipped",c),h&1&&m!==(m=z(e[3].price)+"")&&D(C,m),h&1&&Y(p.value)!==e[3].count&&F(p,e[3].count),h&1&&q!==(q=z(e[3].price*e[3].count)+"")&&D(E,q),u.ctx=e,h&1&&A!==(A=e[3].promise)&&I(A,u)||le(u,e,h)},d(y){y&&B(t),u.block.d(),u.token=null,u=null,T=!1,X()}}}function Be(l){let e,t=[],r=new Map,a=l[0],c=i=>i[3].id;for(let i=0;i<a.length;i+=1){let o=_e(l,a,i),m=c(o);r.set(m,t[i]=he(m,o))}return{c(){e=f("div");for(let i=0;i<t.length;i+=1)t[i].c();n(e,"id","bazaar"),n(e,"class","svelte-12re2j5")},m(i,o){k(i,e,o);for(let m=0;m<t.length;m+=1)t[m].m(e,null)},p(i,[o]){o&3&&(a=i[0],t=se(t,o,c,1,i,a,r,e,ae,he,null,_e))},i:b,o:b,d(i){i&&B(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function je(l,e,t){let{potions:r=[]}=e;async function a(i){i.promise=$(i.id,i.count);let o=await i.promise;o.s?M(`You successfully purchased ${i.count} "${o.r[0].n}"`):M(o.e.message)}function c(i,o){i[o].count=Y(this.value),t(0,r)}return l.$$set=i=>{"potions"in i&&t(0,r=i.potions)},[r,a,c]}var H=class extends ue{constructor(e){super(),ce(this,e,je,Be,ie,{potions:0})}},be=H;function ze(l,e){return new be({target:e.parentElement,props:{potions:l}})}function qe(){let l=te('a[href*="cmd=buyitem"]'),e=w(w(l[0]).parentElement),t=l.map(r=>({id:Number(de(r)),img:r.children[0].src,fetch:r.firstChild.dataset.tipped,price:re(x(Z('img[src*="/currency/"]',w(r).parentElement).parentElement.previousElementSibling)),count:1,promise:Promise.resolve()}));ze(t,e),e.remove()}export{qe as default};
//# sourceMappingURL=bazaar-HMTPMRZP.js.map
