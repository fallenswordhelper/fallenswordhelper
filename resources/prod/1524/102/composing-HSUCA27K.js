import{a as et}from"./chunk-5MHPLAI6.js";import{a as x,b as Z}from"./chunk-YFKDK5ZZ.js";import{a as tt}from"./chunk-6KCBEGNP.js";import{a as ot}from"./chunk-QZTOKJ5E.js";import{a as Y}from"./chunk-QVFY7PJA.js";import{a as K,b as W}from"./chunk-DEQ2DZ5Z.js";import{a as k}from"./chunk-R4AXN3FK.js";import{a as S}from"./chunk-6D33FFGA.js";import"./chunk-K7XSORZB.js";import{a as z}from"./chunk-DGBEEUA5.js";import{a as g}from"./chunk-GFXI54IF.js";import"./chunk-X6LLQZN7.js";import{a as U}from"./chunk-6PQFRUHW.js";import{a as M}from"./chunk-Q5PEDYJB.js";import"./chunk-VJNUTBRD.js";import"./chunk-BDSEVGHU.js";import{a as X}from"./chunk-PX6NXDG4.js";import{a as b}from"./chunk-WIQ6XRGI.js";import{a as V}from"./chunk-JYBW4OOJ.js";import{a as w}from"./chunk-XFPCR5GW.js";import{a as R}from"./chunk-RRIVYT3O.js";import{a as l}from"./chunk-6QEKDVOV.js";import{a as h}from"./chunk-B2YROL26.js";import"./chunk-UHGSE7LB.js";import"./chunk-K25CWRN6.js";import{a as J}from"./chunk-XNBHIBAQ.js";import"./chunk-AXFN4LBO.js";import"./chunk-6MJKEXGN.js";import"./chunk-YQXIMIAT.js";import{a as c}from"./chunk-4X57LHCN.js";import{a}from"./chunk-6QG6UGYA.js";import{b as r}from"./chunk-JMO45TBP.js";import{a as i}from"./chunk-DYLMNQVQ.js";import{a as L}from"./chunk-JEN6RTKA.js";import{a as _}from"./chunk-3LGJ7KIX.js";import{a as D}from"./chunk-OJG7MNTB.js";import{c as O}from"./chunk-M4CFJGZO.js";import"./chunk-FC2T2RFK.js";import{a as F}from"./chunk-F3LQDOUE.js";import"./chunk-ZRLD7TYA.js";import"./chunk-WJQ3A2NI.js";import{a as G}from"./chunk-EAEJ7O2I.js";import"./chunk-UPYTFADC.js";import{a as d}from"./chunk-F6AV4QWO.js";import"./chunk-C54IMWL7.js";import"./chunk-7XNCVM7C.js";import"./chunk-S5YTVKJ4.js";import"./chunk-7PPLM4HV.js";import{a as p}from"./chunk-SLJOWJGX.js";import"./chunk-QLD5CDI7.js";import"./chunk-ULD7YHXO.js";import{a as m}from"./chunk-ZKTRQIGV.js";import"./chunk-I2K74DRD.js";import"./chunk-YI3QHXMF.js";import"./chunk-NR3OO2TM.js";import"./chunk-RGYUH6OH.js";import{a as H}from"./chunk-J6FMYNIK.js";import"./chunk-YCWZIL7K.js";import"./chunk-CPJOSTWF.js";import{a as s}from"./chunk-A3WPUSVT.js";import{c as j}from"./chunk-O3NTOCCL.js";import{b as P,f as Q,qa as C,ra as $}from"./chunk-RBVLOJQS.js";import"./chunk-G4AQ6G7L.js";import"./chunk-IYSXGPFG.js";import{a as I}from"./chunk-B2AFMQVU.js";import"./chunk-7D7WYX4S.js";function y(t){return G({cache:!1,dataType:"json",data:{cmd:"composing",subcmd:"createajax",template_id:t,fshrnd:Z()}})}function st(){return`url(${P}composing/${x(1,11)}_${x(1,51)}.png)`}function ct(t,o){i("",t.children[0]),t.children[0].classList.add("fshPot"),t.children[0].style.backgroundImage=st(),i(`Creating '<span class="fshBold">${o}</span>' Potion`,t.children[2]),i("",t.children[3])}function mt(){a('[id|="composing-template"]:not(#composing-template-multi)').length===0&&p(C,!1)}function lt(t){let o=t.parentNode;o&&(i('<div class="fshScs">Success</div>',o),ct(o.previousElementSibling.previousElementSibling,t[t.selectedIndex].text),mt())}function at(t,o){let e=t.parentNode;!e||!o||(o.error?i(`<div class="fshScs">${o.error}</div>`,e):lt(t))}async function pt(t){let o=await y(t.value);at(t,o)}function f(t,o){o.id=`proc-${o.id}`,i("",t),t.classList.add("fshSpinner","fshSpinner12","fshComposingSpinner"),pt(o),K("quickcreate")}function nt(t,o){t.classList.add(`left-${o.toString()}`)}function ft(t){let o=a(".quickCreate .sendLink");nt(t,o.length)}function ut(t,o){l("composing","FastComposeButton");let e=a('[id|="composing-template"]:not(#composing-template-multi)');if(!(e.length<t.value))for(let n=0;n<t.value;n+=1)e[n].value=o,f(e[n].nextElementSibling.nextElementSibling,e[n])}function dt(t){let o=t.target,{templateId:e}=o.dataset;e&&ut(o,e)}function gt(t,o){return k({className:"awesome orange",dataset:{templateId:o},type:"button",value:t})}function Ct(t,o,e,n){return n===0&&V(t[1],o.insertCell(-1)),h(o.insertCell(-1),gt((n+1).toString(),t[0])),o}function bt(t,o,e){return t.forEach(m(Ct,e,o.insertRow(-1))),o}function ht(t,o,e){let n=tt({id:"fshFastCompose"});return nt(n,e),t.reduce(m(bt,o),n)}function kt(t){return[t.value,t.text]}function St(t,o,e){let n=c("#composing-template-multi option").map(kt),u=ht(n,o,e);h(t,u),s(r(),dt),W("quickcreate",m(ft,u))}function xt(t){l("composing","FastCompose"),g(t,"<br>");let o=b("composing-potion-time",document),e=o.filter(J("ETA: n/a")).length;e>0?St(t,o,e):g(t,"No open slots!")}function E(){let t=F("#pCC div.centered");g(t,'<span class="fsh-fast-compose">[ <label for="fast-compose"><span class="sendLink">Fast Compose</span></label> ]</span>');let o=w({className:"centered"});S(o,t);let e=k({id:"fast-compose",type:"checkbox"});S(e,t),R(e,"change",m(xt,o))}function yt(t){let o=D(Q,d(t));if(o){let{h:e,m:n,s:u}=o;return(e*3600+n*60+Number(u))*1e3+O()}return 0}function rt(t){p(C,t)}function v(){if(!I.enableComposingAlert)return;let t=b("composing-potion-time",document),o=Math.min(...t.map(yt));o===0?rt(!0):(rt(!1),p($,o))}function N(t){return Y({subcmd:"collect",potion_id:t})}async function T(t){let o=await U({cmd:"composing",subcmd:"collect",potion_id:t}),e=z(o);return e.includes("collected")?{s:!0}:{s:!1,e:{message:e}}}function B(t){return M(N,T,t)}function Et(t){let o=t.getAttribute("onclick").split("&")[2].split("=")[1];et(t.parentNode,`[ <span class="fsh-quick-collect"><button class="fshBl fsh-bli" type="button" value="${o}">Quick Collect</button></span> ]&nbsp;`)}var vt=t=>t.tagName==="BUTTON"&&d(t)==="Quick Collect";function Nt(t){t.nextElementSibling.disabled=!0,t.nextElementSibling.nextElementSibling.disabled=!0,i("",t),t.classList.add("fshSpinner")}function it(t,o,e){i(e,t),t.classList.add(o)}function Tt(t,o){t.classList.remove("fshSpinner"),o.s?it(t,"fshGreen","Collected"):it(t,"fshRed","Error")}async function Bt(t){let o=t.parentNode,e=t.value;Nt(o);let n=await B(e);Tt(o,n)}function At(t){vt(t.target)&&Bt(t.target)}function A(){c('input[value="Collect Potion"]',r()).forEach(Et),s(r(),At)}function qt(t){ot(t,'<span class="quickCreate">[<span class="sendLink">Quick Create</span>]</span>')}var Lt=t=>t.tagName==="SPAN"&&t.className==="quickCreate";function It(t){let o=t.previousElementSibling.previousElementSibling;o&&o.value!=="none"&&(f(t,o),l("composing","QuickCreate"))}function Pt(t){let o=t.target.parentNode;Lt(o)&&It(o)}function q(){c("input[id^=create-]:not(#create-multi)",r()).forEach(qt),s(r(),Pt)}function Qt(){if(!j("moveComposingButtons"))return;let t=L("composing-error-dialog").previousElementSibling;t.setAttribute("style","text-align: right; padding: 0 38px 0 0");let o=_("composing-level",r())[0].parentNode;X(t,o)}function $t(){v(),q(),Qt(),E(),A()}function jt(){H()&&r()&&$t()}export{jt as default};
//# sourceMappingURL=composing-HSUCA27K.js.map
