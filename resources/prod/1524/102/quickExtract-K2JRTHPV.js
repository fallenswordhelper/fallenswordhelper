import{a as Fe}from"./chunk-HE632HJ5.js";import{a as Le}from"./chunk-XT5XONGY.js";import{a as Ie}from"./chunk-ZBYHF7IJ.js";import{a as Be}from"./chunk-VHD346HK.js";import{a as je}from"./chunk-6346UB6L.js";import{a as Ce}from"./chunk-LG6BDR3I.js";import"./chunk-EVJH72OA.js";import"./chunk-DGBEEUA5.js";import"./chunk-6PQFRUHW.js";import"./chunk-Q5PEDYJB.js";import"./chunk-VJNUTBRD.js";import"./chunk-BDSEVGHU.js";import{a as Pe}from"./chunk-OLUKMY6G.js";import{a as Me}from"./chunk-4BJNFP73.js";import{a as qe}from"./chunk-LFI4OITJ.js";import"./chunk-XVEYCRE7.js";import"./chunk-4LUQSMNM.js";import"./chunk-726BYNVI.js";import"./chunk-SOHEEUVK.js";import"./chunk-RRIVYT3O.js";import{$ as Se,A as G,D as b,F as ie,K as se,R as $e,U as ve,V as ne,W as le,X as T,Y as I,_ as ae,a as h,b as be,d as ke,da as ye,ea as J,fa as K,ga as W,ha as Ee,ia as we,s as u,t as z,u as j,v as re,w as _,x as P,y as R,z as ce}from"./chunk-HPOEZKZ4.js";import{a as N}from"./chunk-6QEKDVOV.js";import{a as Te}from"./chunk-3EJ5TA2K.js";import"./chunk-2ETOMIET.js";import"./chunk-4X57LHCN.js";import"./chunk-6QG6UGYA.js";import"./chunk-JEN6RTKA.js";import{a as ze}from"./chunk-SQCHG7QA.js";import"./chunk-ZRLD7TYA.js";import"./chunk-WJQ3A2NI.js";import"./chunk-EAEJ7O2I.js";import"./chunk-UPYTFADC.js";import"./chunk-C54IMWL7.js";import"./chunk-7XNCVM7C.js";import"./chunk-S5YTVKJ4.js";import"./chunk-7PPLM4HV.js";import{a as ue}from"./chunk-SLJOWJGX.js";import"./chunk-QLD5CDI7.js";import"./chunk-ULD7YHXO.js";import"./chunk-ZKTRQIGV.js";import"./chunk-NR3OO2TM.js";import"./chunk-CPJOSTWF.js";import{c as oe}from"./chunk-O3NTOCCL.js";import{Ja as ge,b as he}from"./chunk-RBVLOJQS.js";import"./chunk-G4AQ6G7L.js";import"./chunk-IYSXGPFG.js";import"./chunk-B2AFMQVU.js";import"./chunk-7D7WYX4S.js";function Qe(n){return`${n.amount} x ${ge[n.type]}`}var Ve=[[n=>n.components?.length,n=>`You successfully extracted 1 '${n.components?.[0].n}' component(s) from 1 resource(s).`],[n=>n.frags,n=>`You gained ${n.frags.map(Qe).join(", ")} Fragments by opening the Fragment Stash.`],[n=>n.mailbox_items?.length,n=>`You received 1 x '${n.mailbox_items?.[0].n}' from the container.`],[()=>1,()=>'<span class="fshRed">You failed to extract any components from resource(s).</span>']];function fe(n){return Ve.find(([e])=>e(n))[1](n)}var Ue=(n,e,t)=>`fetchitem.php?item_id=${e}&inv_id=${t}&t=1&p=${n}`,Ze=n=>`background-image: url(${he}items/${n}.gif)`;function pe(n,e){return qe(e,"item_name").map(t=>({...t,count:e.filter(l=>l.item_name===t.item_name).length,delPending:!1,extractIds:e.filter(l=>l.item_name===t.item_name).map(l=>l.inv_id),style:Ze(t.item_id),tip:Ue(n,t.item_id,t.inv_id)}))}function Re(n,e,t){let l=n.slice();return l[28]=e[t].count,l[29]=e[t].delPending,l[30]=e[t].item_name,l[31]=e[t].style,l[32]=e[t].tip,l[34]=t,l}function Ye(n,e,t){let l=n.slice();return l[35]=e[t],l}function Ge(n){let e;return{c(){e=P("Refresh")},m(t,l){z(t,e,l)},d(t){t&&j(e)}}}function xe(n){let e,t=n[35]+"";return{c(){e=_("li"),b(e,"class","svelte-11rzj5c")},m(l,o){z(l,e,o),e.innerHTML=t},p(l,o){o[0]&64&&t!==(t=l[35]+"")&&(e.innerHTML=t)},d(l){l&&j(e)}}}function Je(n){return{c:h,m:h,p:h,i:h,o:h,d:h}}function Ke(n){let e,t,l=n[5],o=[];for(let c=0;c<l.length;c+=1)o[c]=De(Re(n,l,c));let i=c=>I(o[c],1,1,()=>{o[c]=null});return{c(){for(let c=0;c<o.length;c+=1)o[c].c();e=ce()},m(c,a){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(c,a);z(c,e,a),t=!0},p(c,a){if(a[0]&4128){l=c[5];let r;for(r=0;r<l.length;r+=1){let f=Re(c,l,r);o[r]?(o[r].p(f,a),T(o[r],1)):(o[r]=De(f),o[r].c(),T(o[r],1),o[r].m(e.parentNode,e))}for(ne(),r=l.length;r<o.length;r+=1)i(r);le()}},i(c){if(!t){for(let a=0;a<l.length;a+=1)T(o[a]);t=!0}},o(c){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)I(o[a]);t=!1},d(c){re(o,c),c&&j(e)}}}function We(n){let e;return{c(){e=P("Done")},m(t,l){z(t,e,l)},p:h,i:h,o:h,d(t){t&&j(e)}}}function Xe(n){let e,t,l,o,i=[tt,et],c=[];function a(r,f){return r[29]?0:1}return e=a(n,[-1,-1]),t=c[e]=i[e](n),{c(){t.c(),l=ce()},m(r,f){c[e].m(r,f),z(r,l,f),o=!0},p(r,f){let g=e;e=a(r,f),e===g?c[e].p(r,f):(ne(),I(c[g],1,1,()=>{c[g]=null}),le(),t=c[e],t?t.p(r,f):(t=c[e]=i[e](r),t.c()),T(t,1),t.m(l.parentNode,l))},i(r){o||(T(t),o=!0)},o(r){I(t),o=!1},d(r){c[e].d(r),r&&j(l)}}}function et(n){let e,t;function l(){return n[16](n[34])}return e=new Ce({props:{$$slots:{default:[nt]},$$scope:{ctx:n}}}),e.$on("click",l),{c(){J(e.$$.fragment)},m(o,i){K(e,o,i),t=!0},p(o,i){n=o;let c={};i[0]&32|i[1]&128&&(c.$$scope={dirty:i,ctx:n}),e.$set(c)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){I(e.$$.fragment,o),t=!1},d(o){W(e,o)}}}function tt(n){let e;return{c(){e=_("span"),b(e,"class","fshSpinner fshSpinner12")},m(t,l){z(t,e,l)},p:h,i:h,o:h,d(t){t&&j(e)}}}function nt(n){let e,t=n[28]+"",l;return{c(){e=P("Extract "),l=P(t)},m(o,i){z(o,e,i),z(o,l,i)},p(o,i){i[0]&32&&t!==(t=o[28]+"")&&ie(l,t)},d(o){o&&j(e),o&&j(l)}}}function De(n){let e,t,l,o,i,c,a,r,f,g,S,C=n[30]+"",y,Y,w,M=[Xe,We],k=[];function x(m,d){return m[28]?0:1}return l=x(n,[-1,-1]),o=k[l]=M[l](n),{c(){e=_("tr"),t=_("td"),o.c(),i=R(),c=_("td"),a=_("span"),g=R(),S=_("td"),y=P(C),Y=R(),b(t,"class","svelte-11rzj5c"),se(t,"delPending",n[29]),b(a,"class","imgSpan tip-dynamic svelte-11rzj5c"),b(a,"data-tipped",r=n[32]),b(a,"style",f=n[31]),b(c,"class","imgCol svelte-11rzj5c")},m(m,d){z(m,e,d),u(e,t),k[l].m(t,null),u(e,i),u(e,c),u(c,a),u(e,g),u(e,S),u(S,y),u(e,Y),w=!0},p(m,d){let F=l;l=x(m,d),l===F?k[l].p(m,d):(ne(),I(k[F],1,1,()=>{k[F]=null}),le(),o=k[l],o?o.p(m,d):(o=k[l]=M[l](m),o.c()),T(o,1),o.m(t,null)),(!w||d[0]&32)&&se(t,"delPending",m[29]),(!w||d[0]&32&&r!==(r=m[32]))&&b(a,"data-tipped",r),(!w||d[0]&32&&f!==(f=m[31]))&&b(a,"style",f),(!w||d[0]&32)&&C!==(C=m[30]+"")&&ie(y,C)},i(m){w||(T(o),w=!0)},o(m){I(o),w=!1},d(m){m&&j(e),k[l].d()}}}function lt(n){return{c:h,m:h,p:h,i:h,o:h,d:h}}function ot(n){let e,t,l,o,i,c,a,r,f,g,S,C,y,Y,w,M,k,x,m,d,F,X,L,U,A,D,ee,O,Q,Z,s;function H(p){n[13](p)}let te={};n[2]!==void 0&&(te.inSt=n[2]),i=new Le({props:te}),$e.push(()=>ye(i,"inSt",H)),i.$on("toggle",n[8]),M=new Fe({props:{$$slots:{default:[Ge]},$$scope:{ctx:n}}}),M.$on("click",n[11]);let V=n[6],$=[];for(let p=0;p<V.length;p+=1)$[p]=xe(Ye(n,V,p));let E={ctx:n,current:null,token:null,hasCatch:!1,pending:lt,then:Ke,catch:Je,blocks:[,,,]};return ae(O=n[1],E),{c(){e=_("div"),t=P(`Select which type of plants you wish to extract all of. Only select extractable resources.
    `),l=_("br"),o=R(),J(i.$$.fragment),a=P(`\xA0
    `),r=_("label"),f=_("input"),g=P(`
      Main Folder Only`),S=P(`\xA0
    `),C=_("label"),y=_("input"),Y=P(`
      Disable Prompts`),w=P(`\xA0
    `),J(M.$$.fragment),k=R(),x=_("br"),m=R(),d=_("table"),F=_("thead"),F.innerHTML=`<tr><th class="actionCol svelte-11rzj5c">Actions</th> 
          <th colspan="2">Items</th></tr>`,X=R(),L=_("tbody"),U=_("tr"),A=_("td"),D=_("ol");for(let p=0;p<$.length;p+=1)$[p].c();ee=R(),E.block.c(),b(f,"type","checkbox"),b(f,"class","svelte-11rzj5c"),b(y,"type","checkbox"),b(y,"class","svelte-11rzj5c"),b(A,"colspan","3"),b(d,"class","svelte-11rzj5c"),b(e,"class","svelte-11rzj5c")},m(p,v){z(p,e,v),u(e,t),u(e,l),u(e,o),K(i,e,null),u(e,a),u(e,r),u(r,f),f.checked=n[3],u(r,g),u(e,S),u(e,C),u(C,y),y.checked=n[4],u(C,Y),u(e,w),K(M,e,null),u(e,k),u(e,x),u(e,m),u(e,d),u(d,F),u(d,X),u(d,L),u(L,U),u(U,A),u(A,D);for(let B=0;B<$.length;B+=1)$[B]&&$[B].m(D,null);u(L,ee),E.block.m(L,E.anchor=null),E.mount=()=>L,E.anchor=null,Q=!0,Z||(s=[G(f,"change",n[14]),G(f,"change",n[9]),G(y,"change",n[15]),G(y,"change",n[10])],Z=!0)},p(p,v){n=p;let B={};!c&&v[0]&4&&(c=!0,B.inSt=n[2],ve(()=>c=!1)),i.$set(B),v[0]&8&&(f.checked=n[3]),v[0]&16&&(y.checked=n[4]);let _e={};if(v[1]&128&&(_e.$$scope={dirty:v,ctx:n}),M.$set(_e),v[0]&64){V=n[6];let q;for(q=0;q<V.length;q+=1){let de=Ye(n,V,q);$[q]?$[q].p(de,v):($[q]=xe(de),$[q].c(),$[q].m(D,null))}for(;q<$.length;q+=1)$[q].d(1);$.length=V.length}E.ctx=n,v[0]&2&&O!==(O=n[1])&&ae(O,E)||Se(E,n,v)},i(p){Q||(T(i.$$.fragment,p),T(M.$$.fragment,p),T(E.block),Q=!0)},o(p){I(i.$$.fragment,p),I(M.$$.fragment,p);for(let v=0;v<3;v+=1){let B=E.blocks[v];I(B)}Q=!1},d(p){p&&j(e),W(i),W(M),re($,p),E.block.d(),E.token=null,E=null,Z=!1,be(s)}}}function rt(n){let e;return{c(){e=P("Quick Extract")},m(t,l){z(t,e,l)},d(t){t&&j(e)}}}function ct(n){let e,t;return e=new Pe({props:{visible:n[0],$$slots:{title:[rt],default:[ot]},$$scope:{ctx:n}}}),e.$on("close",n[7]),{c(){J(e.$$.fragment)},m(l,o){K(e,l,o),t=!0},p(l,o){let i={};o[0]&1&&(i.visible=l[0]),o[0]&126|o[1]&128&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}var it="Are you sure you want to extract all similar items?",He="selectMain",Ne="disableQuickExtractPrompts";function st(n,e,t){let{visible:l=!0}=e,o=null,i=null,c=null,a=oe(He),r=oe(Ne),f=null,g=null,S=[],C=s=>s.item_name==="Zombie Coffin"||s.type===12||s.type===16,y=(s,H)=>Te(s.item_name,H.item_name),Y=s=>c||!s.is_in_st,w=s=>!a||s.folder_id===-1;function M(){N("quickExtract","close"),t(0,l=!1)}function k(){t(5,g=pe(i,f.filter(Y).filter(w)))}function x(){N("quickExtract","toggleSelectST"),k()}function m(){N("quickExtract","toggleSelectMain"),ue(He,a),k()}function d(){N("quickExtract","togglePrompts"),ue(Ne,r)}async function F(){let s=await Ie();i=s.player_id,f=s.items.filter(C).sort(y),k()}function X(){N("quickExtract","refresh"),t(6,S=[]),t(1,o=F())}let L;function U(s){return!s.s&&L!==s.e.message&&(L=s.e.message,t(6,S=[...S,s.e.message])),s.s}async function A(s){let H=await je(s);U(H)&&(t(6,S=[...S,fe(H.r)]),f=f.filter(te=>te.inv_id!==s))}async function D(s){N("quickExtract","extract",r),(r?!0:await Be(it))&&(t(5,g[s].delPending=!0,g),await ze(g[s].extractIds.map(A)),t(5,g[s].count=0,g))}function ee(s){c=s,t(2,c)}function O(){a=this.checked,t(3,a)}function Q(){r=this.checked,t(4,r)}let Z=s=>D(s);return n.$$set=s=>{"visible"in s&&t(0,l=s.visible)},n.$$.update=()=>{if(n.$$.dirty[0]&1)e:l&&(t(6,S=[]),t(1,o=F()))},[l,o,c,a,r,g,S,M,x,m,d,X,D,ee,O,Q,Z]}var me=class extends we{constructor(e){super(),Ee(this,e,st,ct,ke,{visible:0},null,[-1,-1])}},Ae=me;var at={visible:!0},Oe=0;function ut(){Oe=Me(at,Oe,Ae)}export{ut as default};
//# sourceMappingURL=quickExtract-K2JRTHPV.js.map
