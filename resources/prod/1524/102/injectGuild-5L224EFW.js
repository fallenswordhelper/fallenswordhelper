import{a as St,b as vt}from"./chunk-I62TDI7P.js";import{a as Nt}from"./chunk-ET6FWZFA.js";import{a as kt}from"./chunk-TD7GA6DQ.js";import{a as xt}from"./chunk-M6ZX56DL.js";import{a as H}from"./chunk-KT35GFEE.js";import{a as Tt}from"./chunk-42NIMN3Q.js";import{a as Lt}from"./chunk-KRLBN6UN.js";import{a as Ct}from"./chunk-4P26A7FY.js";import{a as G}from"./chunk-GIB7COBK.js";import{a as yt}from"./chunk-5XH6FIQI.js";import"./chunk-K6EFG3N7.js";import{a as P}from"./chunk-ZVXMCR44.js";import"./chunk-B5X3MDZM.js";import"./chunk-R4AXN3FK.js";import{a as bt}from"./chunk-EMNIXF4U.js";import{a as ct}from"./chunk-FETHGKOU.js";import"./chunk-F4CYJEVV.js";import{a as ot}from"./chunk-UXIFFV52.js";import{a as nt}from"./chunk-O5EDBO4Q.js";import{a as l}from"./chunk-K7XSORZB.js";import"./chunk-QEARPC7F.js";import{a as c}from"./chunk-GFXI54IF.js";import"./chunk-X6LLQZN7.js";import"./chunk-PX6NXDG4.js";import{a as b}from"./chunk-XFPCR5GW.js";import{a as C}from"./chunk-6QEKDVOV.js";import{a as n}from"./chunk-B2YROL26.js";import"./chunk-UHGSE7LB.js";import"./chunk-K25CWRN6.js";import"./chunk-I2B5RZC7.js";import{a as w}from"./chunk-CKRNG6MA.js";import{c as B}from"./chunk-PITZNAX3.js";import{a as Y}from"./chunk-6BZX7ZN7.js";import{a as E}from"./chunk-XNBHIBAQ.js";import"./chunk-AXFN4LBO.js";import"./chunk-6MJKEXGN.js";import{a as it}from"./chunk-YQXIMIAT.js";import{a as N}from"./chunk-4X57LHCN.js";import{a as st}from"./chunk-6QG6UGYA.js";import"./chunk-3IXFG5SH.js";import{b as i}from"./chunk-JMO45TBP.js";import{a as f}from"./chunk-DYLMNQVQ.js";import{a as K}from"./chunk-JEN6RTKA.js";import{a as ut,b as gt,c as dt,d as ht}from"./chunk-R5RZELWE.js";import"./chunk-EZPDMVNO.js";import"./chunk-AFNNYWGE.js";import"./chunk-3LGJ7KIX.js";import{a as lt}from"./chunk-7TJHGKXN.js";import"./chunk-HEAZTX7Q.js";import{a as at}from"./chunk-OJG7MNTB.js";import"./chunk-M4CFJGZO.js";import"./chunk-FC2T2RFK.js";import{a as s}from"./chunk-F3LQDOUE.js";import{a as pt}from"./chunk-ZRLD7TYA.js";import{a as ft}from"./chunk-WJQ3A2NI.js";import"./chunk-EAEJ7O2I.js";import"./chunk-UPYTFADC.js";import{a as h}from"./chunk-UERPKMG4.js";import{a as d}from"./chunk-FUB7QZZI.js";import"./chunk-F6AV4QWO.js";import"./chunk-C54IMWL7.js";import"./chunk-7XNCVM7C.js";import"./chunk-S5YTVKJ4.js";import"./chunk-7PPLM4HV.js";import{a}from"./chunk-SLJOWJGX.js";import"./chunk-QLD5CDI7.js";import"./chunk-ULD7YHXO.js";import{a as v}from"./chunk-ZKTRQIGV.js";import"./chunk-I2K74DRD.js";import"./chunk-YI3QHXMF.js";import"./chunk-NR3OO2TM.js";import"./chunk-RGYUH6OH.js";import{a as mt}from"./chunk-DPMNQ3O4.js";import"./chunk-J6FMYNIK.js";import"./chunk-YCWZIL7K.js";import{a as u}from"./chunk-CPJOSTWF.js";import{a as y}from"./chunk-A3WPUSVT.js";import{c as m}from"./chunk-O3NTOCCL.js";import{G as T,K as et,Na as rt,k as x,l as Z,ta as k,wa as g,y as tt}from"./chunk-RBVLOJQS.js";import"./chunk-G4AQ6G7L.js";import{a as S}from"./chunk-IYSXGPFG.js";import{a as M}from"./chunk-B2AFMQVU.js";import"./chunk-7D7WYX4S.js";var wt=0,Bt=1;function Rt(t,e){let{mins:r}=w(e.dataset.tipped);return r<44640&&(t[wt]+=1,t[Bt]+=Number(u(x,e.dataset.tipped))),t}function jt(t){return t.reduce(Rt,[0,0])}function $(){let t=h("b",i()).find(E("Members"));if(t){let e=St(),r=jt(e);t.classList.add("tip-static"),Tt(`Active: ${r[wt]}/${e.length}<br>Stamina: ${P(r[Bt])}`,t)}}function Et(t,e){let r=u(e,t.replace(/,/g,""));return r?parseInt(r,10):0}function Dt(t,e){let r="";return t>e&&(r="+"),r+P(t-e)}function Ft(t){let e=t.dataset.tipped,r=Et(e,/XP Lock: <b>(?<lockXp>\d*)/),o=Et(e,/XP: <b>(?<realXp>\d*)/);c(t.parentNode.nextElementSibling,` (<b>${Dt(o,r)}</b>)`)}function V(){let t=s('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&Ft(t)}function R(){let t=h(g,i()).slice(-2,-1)[0];if(!t)return;let e=t.rows[0].cells[0],r=b({id:"profile-bio",innerHTML:e.innerHTML});f("",e),n(e,r),Nt()}var j=0,D=0;function Ut(t){return j&&t>=ut()&&t<=gt()}function Xt(t){return D&&t>=dt()&&t<=ht()}var qt=t=>[t,w(t.dataset.tipped).days],Qt=([,t])=>t<7,_t=([t])=>[t,Number(u(Z,t.dataset.tipped))],zt=([t,e])=>[t.parentNode.parentNode.rowIndex,Ut(e),Xt(e)];function Ot(){return N('#pCC a[data-tipped*="<td>VL:</td>"]').map(qt).filter(Qt).map(_t).map(zt)}function Wt(){return Number(ot("guild_id"))!==lt()&&(j||D)}var Jt=t=>t.map(([e])=>`.fshHighlight tr:nth-child(${e+1})`).join(",");function Pt(t,e){if(t.length){let r=`${Jt(t)} {background-color: #${e};}`;n(document.body,H(r))}}function Kt(t,e){if(t.length+e.length){let r=d(g,i());r[r.length-1].classList.add("fshHighlight")}}function Yt(){let t=Ot(),e=t.filter(([,o])=>o),r=t.filter(([,o,L])=>!o&&L);Pt(e,"4671C8"),Pt(r,"FF9900"),Kt(e,r)}function Zt(){Wt()&&Yt()}function F(){j=m("highlightPlayersNearMyLvl"),D=m("highlightGvGPlayersNearMyLvl"),Zt(),m("enableHistoryCompressor")&&R()}function te(t){c(t.parentNode,' <span class="smallLink">[b]</span>')}function ee(t){t.target.className==="smallLink"&&Ct(Lt(t.target.previousElementSibling.href))}function U(){let t=st(`#pCC a[href^="${tt}"]`);kt([3,t,0,te]),y(i(),ee)}function I(t){return ft({cmd:"guild",subcmd:"conflicts",page:t})}function Ht(t,e){f(e,t.insertCell(-1))}function It(t,e,r){let o=t.insertRow(t.rows.length-2);Ht(o,e),Ht(o,r)}function re(t){It(t,`<a href="${T}conflicts">Active Conflicts</a>`,"Score")}function oe(t,e){It(t,e.cells[0].innerHTML,`<b>${e.cells[6].innerHTML}</b>`)}function ie(t,e,r){e===1&&re(r),bt(t,7,0).forEach(v(oe,r))}function ne(t,e,r){let o=s("#pCC > table > tbody > tr > td > table",t);o&&o.rows.length>3&&ie(o,e,r)}function me(t){return Number(t.nextSibling.textContent.split("\xA0")[2])}async function se(t,e,r){let o=await I(t+1);e(r,o)}function At(t,e){let r=pt(e),o=s('#pCC input[name="page"]',r);if(!o)return;let L=Number(o.value),Vt=me(o);ne(r,L,t.node),Vt>L&&se(L,At,t)}async function X(t){let[e]=t.rows[6].cells[0].children;if(e){let r=await I(1);At({node:e},r)}}function q(t){let e=t.target.dataset.linkto,r=K(e);if(!r)return;let o=nt("fshHide",r);r.classList.toggle("fshHide"),o?a(e,""):a(e,"ON")}function le(t){return G({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function ce(t){let e=G({className:"fshNoWrap",innerHTML:"[&nbsp;"});return n(e,t),c(e,"&nbsp;]"),e}function Q(t,e,r){let o=le(r);n(t,ce(o)),e.id=r,m(r)&&yt(e),y(o,q)}function Mt(t){Q(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function Gt(t){let e=t.rows[4].cells[1].children[0];f(it(e.innerHTML),e),Q(e,t.rows[6].cells[0].children[0],"statisticsControl")}function $t(t){let e=t.rows[15]?.cells[1].children[0];e&&Q(e,t.rows[17].cells[0].children[0],"guildStructureControl")}var _=0;function fe(t){let{stam:e,max:r}=at(x,t.dataset.tipped);return Math.min(Math.round(Number(e)/Number(r)*100),100)}function ae(t){let e=fe(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${e}%, transparent ${e+1}%)}`}function pe(){let t=d(g,i()),e=t[t.length-1];e.classList.add("fshProgressBar");let o=N(rt,e).map(ae).join(`
`);_=n(document.body,H(o)).sheet}function A(t){_?_.disabled=!t:pe()}var z="enableStamBars",p=0;function ue(){p=!p,a(z,p),A(p),C("guildManage","StamBars")}function ge(){if(!s("#pCC img.guild_openGuildStore"))return;let e=n(i(),b({innerHTML:B(z),style:{marginLeft:"66%"}}));S(e,"change",ue)}function O(){ge(),p=m(z),p&&A(p)}function de(t){t.target.id===k&&(C("guildTracker","togglePref"),a(k,t.target.checked))}function he(){C("guildTracker","showTracker"),ct()}function W(){let t=s("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode;e.classList.add("fshRelative");let r=b({className:"fsh-tracker",innerHTML:`${B(k)}&nbsp;`});S(r,"change",de);let o=xt({textContent:"Show",type:"button"});y(o,he),n(r,o),n(e,r)}function be(t){let e=h("b",t).filter(E("Relics"));if(e.length!==1)return;let r=e[0].parentNode.nextElementSibling.children[0];f(`[ <a href="${T}reliclist">Control</a> ]&nbsp;`,r)}function ye(t){let e=d("li",t);if(!e||!e.length)return;let r=e[e.length-1].parentNode;c(r,`<li><a href="${et}${Y()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function Le(){return i().lastElementChild.rows?.[2]?.cells[0].children[0]}function Ce(t,e){l(3,e,[t])}function xe(t){[Mt,Gt,$t,be,ye].forEach(v(Ce,t))}function Te(t){mt()||(m("detailedConflictInfo")&&l(3,X,[t]),l(4,W))}function J(){if(!i())return;let t=Le();t&&(xe(t),m("showBuffLinks")&&l(3,U),Te(t),O())}function ke(){l(3,vt),l(3,V),l(3,$),["-","manage"].includes(M.subcmd)&&J(),M.subcmd==="view"&&F()}export{ke as default};
//# sourceMappingURL=injectGuild-5L224EFW.js.map
