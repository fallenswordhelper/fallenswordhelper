import{a as V,b as D}from"./chunk-TYSHHHQD.js";import"./chunk-T2TDP6V6.js";import"./chunk-S2OEGYC3.js";import{a as E,b as H}from"./chunk-VBDJCIMJ.js";import{a as _}from"./chunk-5U7JSTFS.js";import{a as q}from"./chunk-FDOAGP6J.js";import"./chunk-CUYHYJME.js";import"./chunk-A4755RIR.js";import{a as T}from"./chunk-N7MDWAJF.js";import"./chunk-AUFUTFTX.js";import{a as d}from"./chunk-64C7AUA6.js";import{a as p}from"./chunk-UACVLVJZ.js";import"./chunk-UCL5WC26.js";import"./chunk-ZUUQECWA.js";import"./chunk-2ZEFTA6B.js";import{a as I}from"./chunk-47BUGNNO.js";import"./chunk-4XBIOIJL.js";import{a as m}from"./chunk-JSOCZFF7.js";import"./chunk-XCW5GYL4.js";import"./chunk-YSVAFZPB.js";import"./chunk-ULCOJYQQ.js";import"./chunk-5JKG2KXO.js";import"./chunk-TJDS7E3Q.js";import{a}from"./chunk-JBCK4LKH.js";import"./chunk-YMYO7RVQ.js";import"./chunk-KYIDEWAX.js";import{a as O}from"./chunk-QC67ERFU.js";import{a as N}from"./chunk-ETNUW3XB.js";import{a as w}from"./chunk-ZFTPD3JX.js";import"./chunk-JUUMQFPG.js";import"./chunk-OPXVQRDJ.js";import{a as s}from"./chunk-KQGQROK7.js";import{a as C,b as k}from"./chunk-ZGNC6ELN.js";import"./chunk-RBDNRJUJ.js";import"./chunk-3JJXNX5O.js";import"./chunk-4G6P2W32.js";import"./chunk-HSKCJVE7.js";import"./chunk-WT2NGKU2.js";import{a as R}from"./chunk-CH6H745H.js";import{a as u,b as i}from"./chunk-ET6NKS7B.js";import"./chunk-QMAERS6H.js";import{a as M}from"./chunk-AJ22QQIT.js";import{j as x}from"./chunk-I6XFTTZH.js";import"./chunk-6IFYCYYR.js";function F(e,t){let n=$("<div/>").append(e[t][0]);return $("img",n).addClass("fshImgCntr"),[n.html(),e[t][1],e[t][2],e[t][3]*100+e[t][4]+1]}function v(e){return N(e).map(s(F,e))}var j,S;function J(e){let t=e.match(x);if(t)return Number(t[1])}var K=[()=>j,e=>J(e[0])!==T(),e=>p(e[2])>=V(),e=>p(e[2])<=D()];function X(e){return K.every(t=>t(e))}function Y(e,t){X(t)&&$("td",e).eq(2).addClass("lvlHighlight")}function Z(e){return{columns:[{title:"Guild",class:"dt-center",orderable:!1},{title:"Name",class:"dt-center"},{title:"Level",class:"dt-center"},{title:"Page/Index",class:"dt-center"}],createdRow:Y,data:e,deferRender:!0,lengthMenu:[[30,60,-1],[30,60,"All"]],order:[3,"desc"],pageLength:30,stateDuration:0,stateSave:!0}}function B(e,t){j=i("highlightPlayersNearMyLvl"),S=$("#fshInv",e).DataTable(Z(t))}function h(){S.draw()}function g(e){(e.target.id==="fshMinLvl"||e.target.id==="fshMaxLvl")&&h()}function y(){let e=i("lastOnlineCheck");return m-e>3e5?'<span> (takes a while to refresh so only do it if you really need to) </span><span id="fshRefresh" class="fshLink">[Refresh]</span>':`<span>[ Wait ${Math.round(300-(m-e)/1e3)}s ]</span>`}function G(e,t){return parseInt($(e,t).val(),10)}function A(e,t){q(t)||a(e,t)}function ee(e,t,n){let o=G("#fshMinLvl",e),f=G("#fshMaxLvl",e);A("onlinePlayerMinLvl",o),A("onlinePlayerMaxLvl",f);let z=w(p(n[2]),0);return H(E,z,o,f)}function P(e){$.fn.dataTable.ext.search.push(s(ee,e)),$("#fshOutput",e).html(`<div align=right>Min lvl:<input value="${i("onlinePlayerMinLvl")}" class="fshNumberInput" type="number" id="fshMinLvl" /> Max lvl:<input value="${i("onlinePlayerMaxLvl")}" class="fshNumberInput" type="number" id="fshMaxLvl" /> <input id="fshReset" type="button" value="Reset"/></div><table id="fshInv" class="allow stripe hover"></table>`)}function L(e){a("onlinePlayerMinLvl",u.onlinePlayerMinLvl),a("onlinePlayerMaxLvl",u.onlinePlayerMaxLvl),$("#fshMinLvl",e).val(u.onlinePlayerMinLvl),$("#fshMaxLvl",e).val(u.onlinePlayerMaxLvl),h()}var r=0,l=0,c=0,b=0;function Q(e){l=e||{},P(r),B(r,v(l))}function te(){c===b&&(k("fsh_onlinePlayers",l),Q(l))}function ne(e,t){return l[e]&&l[e][3]>t}function re(e,t,n){return[n.eq(0).html(),n.eq(1).html(),n.eq(2).text(),e,t]}function le(e,t,n){let o=$("td",$(n)),f=o.eq(1).text();ne(f,e)||(l[f]=re(e,t,o))}function ie(e,t){let n=t.attr("value");$('#pCC img[src$="/world/icon_action_view.png',e).parent().parent().parent().each(s(le,n))}function ae(e){let t=e.parent().text().match(/(?<page>\d+)/);return parseInt(t.groups.page,10)}function oe(e,t){b=ae(t);for(let n=2;n<=b;n+=1)d(n).then(e)}function U(e){$("#fshOutput",r).append(e)}function W(e){U(` ${c+1}`);let t=I(e),n=$("#pCC input.custominput",t).first();ie(t,n),c+=1,c===1&&oe(W,n),te()}function se(){$("#fshRefresh",r).hide(),c=0,l={},d(1).then(W),a("lastOnlineCheck",m),U("Parsing online players...")}function fe(e){e.target.id==="fshRefresh"&&se(),e.target.id==="fshReset"&&L(r)}function ue(){r.html(`<span><b>Online Players</b></span>${y()}<div id="fshOutput"></div>`),C("fsh_onlinePlayers").then(Q),R(r[0],fe),M(r[0],"keyup",g)}function me(e){O()||(r=e?$(e):$("#pCC"),_().then(ue))}export{me as default};
//# sourceMappingURL=injectOnlinePlayers-AZQFRWKE.js.map
