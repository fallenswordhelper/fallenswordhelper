import{a as e,$ as t,S as s,L as a,M as l,bj as n,bk as i,be as c,bh as r,bl as u,ai as o,O as h,Q as d,T as f,a0 as v,a3 as p,bu as m,cZ as _,ae as z,_ as g,N as b,dR as k,P as w,W as x,cg as y,b8 as $,aP as S,b5 as C,U as q,X as M,a4 as Q,b6 as P,a1 as L,aN as N,Z as j,a5 as U,c_ as H}from"./calfSystem-CUgWHLtG.js"
import{h as T,u as A}from"./await_block-DpKGh93y.js"
import{M as G}from"./ModalTitled-DwG8wP1C.js"
import"./Modal-BIzCdrcz.js"
function W(){return t={subcmd:"view"},e({cmd:"questbook",...t})
var t}function B(e,t,s){const a=e.slice()
return a[35]=t[s],a}function F(e,t,s){const a=e.slice()
return a[38]=t[s],a[40]=s,a}function R(e){return{c:g,m:g,p:g,d:g}}function Z(e){let t,s,a,l,n,i,c,r,u,o,m,z,g,N,j,U,H,T,A,G,W,F,R,Z,O,X,D,I,J,K,V,Y,ee,te,se,ae,le,ne,ie,ce,re,ue,oe,he,de,fe,ve,pe,me,_e,ze,ge,be,ke,we,xe,ye,$e,Se,Ce,qe,Me,Qe,Pe,Le,Ne,je,Ue,He,Te,Ae,Ge,We,Be,Fe,Re,Ze,Oe=e[0]?"Seasonal":"Normal",Xe=b(e[8]),De=[]
for(let t=0;t<Xe.length;t+=1)De[t]=E(B(e,Xe,t))
return Be=k(e[19][0]),Fe=k(e[19][1]),{c(){t=h("h1"),t.textContent="Quest Book",s=w(),a=h("p"),l=p("[\n        "),n=h("label"),i=h("input"),c=p("\n          Normal"),r=p("\n        |\n        "),u=h("label"),o=h("input"),m=p("\n          Seasonal"),z=p("\n        ]"),g=w(),N=h("p"),j=p("Total "),U=p(Oe),H=p(" Quest Progress:"),T=w(),A=h("div"),G=h("img"),R=w(),Z=h("p"),O=p("[\n        "),X=h("label"),D=h("input"),I=p("\n          Active"),J=p("\n        |\n        "),K=h("label"),V=h("input"),Y=p("\n          Complete"),ee=p("\n        |\n        "),te=h("label"),se=h("input"),ae=p("\n          Not Started"),le=p("\n        |\n        "),ne=h("label"),ie=h("input"),ce=p("\n          Hidden"),re=p("\n        ]"),ue=w(),oe=h("table"),he=h("thead"),de=h("tr"),fe=h("td"),ve=h("input"),pe=w(),me=h("td"),_e=p("Min lvl - Max lvl"),ze=h("br"),ge=w(),be=h("input"),ke=p("\n              -\n              "),we=h("input"),xe=w(),ye=h("td"),$e=h("input"),Se=w(),Ce=h("tr"),qe=h("th"),qe.textContent="Quest Name",Me=w(),Qe=h("th"),Qe.textContent="Level",Pe=w(),Le=h("th"),Le.textContent="Starting Realm",Ne=w(),je=h("th"),je.textContent="Status",Ue=w(),He=h("th"),He.textContent="Guides",Te=w(),Ae=h("th"),Ae.textContent="Hide",Ge=w(),We=h("tbody")
for(let e=0;e<De.length;e+=1)De[e].c()
d(t,"class","svelte-zfz61h"),d(i,"type","radio"),d(i,"name","seasonal"),i.__value=!1,x(i,i.__value),d(i,"class","svelte-zfz61h"),d(n,"class","asLink svelte-zfz61h"),y(n,"active",!e[0]),d(o,"type","radio"),d(o,"name","seasonal"),o.__value=!0,x(o,o.__value),d(o,"class","svelte-zfz61h"),d(u,"class","asLink svelte-zfz61h"),y(u,"active",e[0]),d(a,"class","svelte-zfz61h"),d(N,"class","svelte-zfz61h"),$(G.src,W=S+"ui/misc/progress_purple.png")||d(G,"src",W),C(G,"width",100*e[9]+"%"),d(G,"height","10"),d(G,"class","tip-static"),d(G,"alt","Progress"),d(G,"data-tipped",F="<span class='fshHelpTitle'>Quests Completed</span><br>"+e[7].filter(e[13].completed).length+" / "+e[7].length),d(A,"id","fshQuestProgress"),d(A,"class","svelte-zfz61h"),d(D,"type","radio"),D.__value="active",x(D,D.__value),d(D,"class","svelte-zfz61h"),d(X,"class","asLink svelte-zfz61h"),y(X,"active","active"===e[1]),d(V,"type","radio"),V.__value="completed",x(V,V.__value),d(V,"class","svelte-zfz61h"),d(K,"class","asLink svelte-zfz61h"),y(K,"active","completed"===e[1]),d(se,"type","radio"),se.__value="notStarted",x(se,se.__value),d(se,"class","svelte-zfz61h"),d(te,"class","asLink svelte-zfz61h"),y(te,"active","notStarted"===e[1]),d(ie,"type","radio"),ie.__value="hidden",x(ie,ie.__value),d(ie,"class","svelte-zfz61h"),d(ne,"class","asLink svelte-zfz61h"),y(ne,"active","hidden"===e[1]),d(Z,"class","svelte-zfz61h"),d(ve,"type","text"),d(ve,"placeholder","Search quest name"),d(fe,"class","svelte-zfz61h"),d(be,"type","number"),d(be,"placeholder","Min lvl"),d(be,"class","svelte-zfz61h"),d(we,"type","number"),d(we,"placeholder","Max lvl"),d(we,"class","svelte-zfz61h"),d(me,"class","svelte-zfz61h"),d($e,"type","text"),d($e,"placeholder","Search realm name"),d(ye,"class","svelte-zfz61h"),d(de,"class","svelte-zfz61h"),d(qe,"width","20%"),d(qe,"class","fshPointer svelte-zfz61h"),d(Qe,"width","20%"),d(Qe,"class","fshPointer svelte-zfz61h"),d(Le,"width","25%"),d(Le,"class","fshPointer svelte-zfz61h"),d(je,"width","10%"),d(je,"class","fshPointer svelte-zfz61h"),d(He,"width","10%"),d(He,"class","svelte-zfz61h"),d(Ae,"width","10%"),d(Ae,"class","svelte-zfz61h"),d(Ce,"class","svelte-zfz61h"),d(oe,"class","svelte-zfz61h"),Be.p(D,V,se,ie),Fe.p(i,o)},m(h,d){f(h,t,d),f(h,s,d),f(h,a,d),q(a,l),q(a,n),q(n,i),i.checked=i.__value===e[0],q(n,c),q(a,r),q(a,u),q(u,o),o.checked=o.__value===e[0],q(u,m),q(a,z),f(h,g,d),f(h,N,d),q(N,j),q(N,U),q(N,H),f(h,T,d),f(h,A,d),q(A,G),f(h,R,d),f(h,Z,d),q(Z,O),q(Z,X),q(X,D),D.checked=D.__value===e[1],q(X,I),q(Z,J),q(Z,K),q(K,V),V.checked=V.__value===e[1],q(K,Y),q(Z,ee),q(Z,te),q(te,se),se.checked=se.__value===e[1],q(te,ae),q(Z,le),q(Z,ne),q(ne,ie),ie.checked=ie.__value===e[1],q(ne,ce),q(Z,re),f(h,ue,d),f(h,oe,d),q(oe,he),q(he,de),q(de,fe),q(fe,ve),x(ve,e[3]),q(de,pe),q(de,me),q(me,_e),q(me,ze),q(me,ge),q(me,be),x(be,e[5]),q(me,ke),q(me,we),x(we,e[6]),q(de,xe),q(de,ye),q(ye,$e),x($e,e[4]),q(he,Se),q(he,Ce),q(Ce,qe),q(Ce,Me),q(Ce,Qe),q(Ce,Pe),q(Ce,Le),q(Ce,Ne),q(Ce,je),q(Ce,Ue),q(Ce,He),q(Ce,Te),q(Ce,Ae),q(oe,Ge),q(oe,We)
for(let e=0;e<De.length;e+=1)De[e]&&De[e].m(We,null)
Re||(Ze=[M(i,"change",e[18]),M(o,"change",e[20]),M(D,"change",e[21]),M(V,"change",e[22]),M(se,"change",e[23]),M(ie,"change",e[24]),M(ve,"input",e[25]),M(be,"input",e[26]),M(we,"input",e[27]),M($e,"input",e[28]),M(qe,"click",e[29]),M(Qe,"click",e[30]),M(Le,"click",e[31]),M(je,"click",e[32])],Re=!0)},p(e,t){if(1&t[0]&&(i.checked=i.__value===e[0]),1&t[0]&&y(n,"active",!e[0]),1&t[0]&&(o.checked=o.__value===e[0]),1&t[0]&&y(u,"active",e[0]),1&t[0]&&Oe!==(Oe=e[0]?"Seasonal":"Normal")&&Q(U,Oe),512&t[0]&&C(G,"width",100*e[9]+"%"),128&t[0]&&F!==(F="<span class='fshHelpTitle'>Quests Completed</span><br>"+e[7].filter(e[13].completed).length+" / "+e[7].length)&&d(G,"data-tipped",F),2&t[0]&&(D.checked=D.__value===e[1]),2&t[0]&&y(X,"active","active"===e[1]),2&t[0]&&(V.checked=V.__value===e[1]),2&t[0]&&y(K,"active","completed"===e[1]),2&t[0]&&(se.checked=se.__value===e[1]),2&t[0]&&y(te,"active","notStarted"===e[1]),2&t[0]&&(ie.checked=ie.__value===e[1]),2&t[0]&&y(ne,"active","hidden"===e[1]),8&t[0]&&ve.value!==e[3]&&x(ve,e[3]),32&t[0]&&_(be.value)!==e[5]&&x(be,e[5]),64&t[0]&&_(we.value)!==e[6]&&x(we,e[6]),16&t[0]&&$e.value!==e[4]&&x($e,e[4]),3330&t[0]){let s
for(Xe=b(e[8]),s=0;s<Xe.length;s+=1){const a=B(e,Xe,s)
De[s]?De[s].p(a,t):(De[s]=E(a),De[s].c(),De[s].m(We,null))}for(;s<De.length;s+=1)De[s].d(1)
De.length=Xe.length}},d(e){e&&(v(t),v(s),v(a),v(g),v(N),v(T),v(A),v(R),v(Z),v(ue),v(oe)),P(De,e),Be.r(),Fe.r(),Re=!1,L(Ze)}}}function O(e,t){let s
return{key:e,first:null,c(){s=h("div"),d(s,"class","fshStage svelte-zfz61h"),y(s,"incomplete",t[40]>=t[35].current_stage),this.first=s},m(e,t){f(e,s,t)},p(e,a){t=e,256&a[0]&&y(s,"incomplete",t[40]>=t[35].current_stage)},d(e){e&&v(s)}}}function X(e){let t,s,a
return{c(){t=h("button"),t.textContent="Hide",d(t,"type","button")},m(l,n){f(l,t,n),s||(a=M(t,"click",(function(){H(e[10](e[35]))&&e[10](e[35]).apply(this,arguments)})),s=!0)},p(t,s){e=t},d(e){e&&v(t),s=!1,a()}}}function D(e){let t,s,a
return{c(){t=h("button"),t.textContent="Unhide",d(t,"type","button")},m(l,n){f(l,t,n),s||(a=M(t,"click",(function(){H(e[11](e[35]))&&e[11](e[35]).apply(this,arguments)})),s=!0)},p(t,s){e=t},d(e){e&&v(t),s=!1,a()}}}function E(e){let t,s,a,l,n,i,c,r,u,o,m,_,z,g,k,x,C,M,P,L,H,T,A,G,W,B,R,Z,E,I,J,K,V,Y,ee=e[35].name+"",te=e[35].min_level+"",se=e[35].realm.name+"",ae=[],le=new Map,ne=Math.round(e[35].current_stage/e[35].max_stage*100)+"",ie=b(Array(e[35].max_stage))
const ce=e=>e[40]
for(let t=0;t<ie.length;t+=1){let s=F(e,ie,t),a=ce(s)
le.set(a,ae[t]=O(a,s))}function re(e,t){return"hidden"===e[1]?D:X}let ue=re(e),oe=ue(e)
return{c(){t=h("tr"),s=h("td"),a=h("a"),l=p(ee),i=w(),c=h("td"),r=p(te),u=w(),o=h("td"),m=h("a"),_=p(se),g=w(),k=h("td"),x=h("div")
for(let e=0;e<ae.length;e+=1)ae[e].c()
C=w(),M=h("div"),P=p(ne),L=p("%"),H=w(),T=h("td"),A=h("a"),G=h("img"),R=w(),Z=h("a"),E=h("img"),K=w(),V=h("td"),oe.c(),Y=w(),d(a,"href",n="https://fallensword.com/index.php?cmd=questbook&subcmd=viewquest&quest_id="+e[35].id),d(s,"class","svelte-zfz61h"),d(c,"class","svelte-zfz61h"),d(m,"href",z=N+"realms&subcmd=view&realm_id="+e[35].realm.id),d(m,"target","_blank"),d(m,"rel","noreferrer"),d(o,"class","svelte-zfz61h"),d(M,"class","percentbar-value"),d(x,"class","fshPercentbar svelte-zfz61h"),y(x,"complete",e[35].current_stage===e[35].max_stage),d(k,"class","svelte-zfz61h"),$(G.src,W="https://fallensword.com/favicon.ico")||d(G,"src","https://fallensword.com/favicon.ico"),d(G,"alt","UFSG"),d(G,"width","16"),d(G,"hieght","16"),d(G,"class","tip-static svelte-zfz61h"),d(G,"data-tipped","Search for this quest on the Ultimate Fallen Sword Guide"),d(A,"href",B=N+"quests&subcmd=view&quest_id="+e[35].id),d(A,"target","_blank"),d(A,"rel","noreferrer"),$(E.src,I=S+"ui/misc/wiki.png")||d(E,"src",I),d(E,"alt","Wiki"),d(E,"width","16"),d(E,"height","16"),d(E,"class","tip-static svelte-zfz61h"),d(E,"data-tipped","Search for this quest on the Wiki"),d(Z,"href",J="https://wiki.fallensword.com/index.php?title="+e[35].name.replace(/ /g,"_")),d(Z,"target","_blank"),d(Z,"rel","noreferrer"),d(T,"class","svelte-zfz61h"),d(V,"class","svelte-zfz61h"),d(t,"class","svelte-zfz61h")},m(e,n){f(e,t,n),q(t,s),q(s,a),q(a,l),q(t,i),q(t,c),q(c,r),q(t,u),q(t,o),q(o,m),q(m,_),q(t,g),q(t,k),q(k,x)
for(let e=0;e<ae.length;e+=1)ae[e]&&ae[e].m(x,null)
q(x,C),q(x,M),q(M,P),q(M,L),q(t,H),q(t,T),q(T,A),q(A,G),q(T,R),q(T,Z),q(Z,E),q(t,K),q(t,V),oe.m(V,null),q(t,Y)},p(e,t){256&t[0]&&ee!==(ee=e[35].name+"")&&Q(l,ee),256&t[0]&&n!==(n="https://fallensword.com/index.php?cmd=questbook&subcmd=viewquest&quest_id="+e[35].id)&&d(a,"href",n),256&t[0]&&te!==(te=e[35].min_level+"")&&Q(r,te),256&t[0]&&se!==(se=e[35].realm.name+"")&&Q(_,se),256&t[0]&&z!==(z=N+"realms&subcmd=view&realm_id="+e[35].realm.id)&&d(m,"href",z),256&t[0]&&(ie=b(Array(e[35].max_stage)),ae=j(ae,t,ce,1,e,ie,le,x,U,O,C,F)),256&t[0]&&ne!==(ne=Math.round(e[35].current_stage/e[35].max_stage*100)+"")&&Q(P,ne),256&t[0]&&y(x,"complete",e[35].current_stage===e[35].max_stage),256&t[0]&&B!==(B=N+"quests&subcmd=view&quest_id="+e[35].id)&&d(A,"href",B),256&t[0]&&J!==(J="https://wiki.fallensword.com/index.php?title="+e[35].name.replace(/ /g,"_"))&&d(Z,"href",J),ue===(ue=re(e))&&oe?oe.p(e,t):(oe.d(1),oe=ue(e),oe&&(oe.c(),oe.m(V,null)))},d(e){e&&v(t)
for(let e=0;e<ae.length;e+=1)ae[e].d()
oe.d()}}}function I(e){let t
return{c(){t=p("Loading...")},m(e,s){f(e,t,s)},p:g,d(e){e&&v(t)}}}function J(e){let t,s={ctx:e,current:null,token:null,hasCatch:!1,pending:I,then:Z,catch:R}
return T(e[12](),s),{c(){t=h("div"),s.block.c(),d(t,"id","fshQuestContainer"),d(t,"class","svelte-zfz61h")},m(e,a){f(e,t,a),s.block.m(t,s.anchor=null),s.mount=()=>t,s.anchor=null},p(t,a){A(s,e=t,a)},d(e){e&&v(t),s.block.d(),s.token=null,s=null}}}function K(e){let t
return{c(){t=p("Quest Book")},m(e,s){f(e,t,s)},d(e){e&&v(t)}}}function V(e){let t,s
return t=new G({props:{visible:e[2],$$slots:{title:[K],default:[J]},$$scope:{ctx:e}}}),t.$on("close",e[15]),{c(){n(t.$$.fragment)},m(e,a){i(t,e,a),s=!0},p(e,s){const a={}
4&s[0]&&(a.visible=e[2]),1019&s[0]|1024&s[1]&&(a.$$scope={dirty:s,ctx:e}),t.$set(a)},i(e){s||(c(t.$$.fragment,e),s=!0)},o(e){r(t.$$.fragment,e),s=!1},d(e){u(t,e)}}}function Y(e,t){return e.toUpperCase().includes(t.toUpperCase())}function ee(e,s,a){let l,n,i,{seasonal:c=!1}=s,{status:r="active"}=s,{visible:u=!0}=s,h=o("hideQuestNames").split(",")
function d(){z("hideQuestNames",h.join(","))}let f="",v="",p=0,g=6e3,b=[]
const k={active:e=>e.current_stage>0&&e.max_stage>e.current_stage,notStarted:e=>0===e.current_stage,completed:e=>e.current_stage===e.max_stage,hidden:e=>h.includes(e.name)}
let w=""
function x(e){w===e?b.reverse():"string"==typeof b[0][e]?b.sort(((t,s)=>m(t[e],s[e]))):b.sort(((t,s)=>t[e]-s[e])),a(17,b),w=e}return e.$$set=e=>{"seasonal"in e&&a(0,c=e.seasonal),"status"in e&&a(1,r=e.status),"visible"in e&&a(2,u=e.visible)},e.$$.update=()=>{var t,s,u,o
131073&e.$$.dirty[0]&&a(7,l=b.filter((e=>e.seasonal===c))),128&e.$$.dirty[0]&&a(9,n=l.filter(k.completed).length/l.length),65786&e.$$.dirty[0]&&a(8,i=l.filter(k[r]).filter((e=>h.includes(e.name)===("hidden"===r))).filter((t=f,s=v,u=p,o=g,e=>e.min_level>=u&&e.min_level<=o&&Y(e.realm_name,s)&&Y(e.name,t))))},[c,r,u,f,v,p,g,l,i,n,function(e){a(16,h=[...h,e.name]),d()},function(e){a(16,h=h.filter((t=>t!==e.name))),d()},async function(){const e=await t(W)
a(17,b=e.r.map((e=>({...e,realm_name:e.realm.name}))))},k,x,function(){a(2,u=!1)},h,b,function(){c=this.__value,a(0,c)},[[],[]],function(){c=this.__value,a(0,c)},function(){r=this.__value,a(1,r)},function(){r=this.__value,a(1,r)},function(){r=this.__value,a(1,r)},function(){r=this.__value,a(1,r)},function(){f=this.value,a(3,f)},function(){p=_(this.value),a(5,p)},function(){g=_(this.value),a(6,g)},function(){v=this.value,a(4,v)},()=>x("name"),()=>x("min_level"),()=>x("realm_name"),()=>x("current_stage")]}class te extends s{constructor(e){super(),a(this,e,ee,V,l,{seasonal:0,status:1,visible:2},null,[-1,-1])}}let se
function ae(){return se?se.$set({visible:!0}):se=new te({target:document.body}),se}export{ae as default}
//# sourceMappingURL=questbook-q8fNFjuO.js.map
