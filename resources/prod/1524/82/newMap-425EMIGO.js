import{a as cs}from"./chunk-G7K6NANX.js";import{a as Xl,b as Jl}from"./chunk-OP22X7HV.js";import{a as ns}from"./chunk-576EZCCH.js";import"./chunk-B2YJV2RH.js";import"./chunk-4IPTWCUH.js";import"./chunk-VCKYDMWL.js";import{a as Ql}from"./chunk-IIZXX5PJ.js";import{a as ms}from"./chunk-BX4PJZFJ.js";import{a as so}from"./chunk-67OAUYWH.js";import{a as ts,b as rs,c as os}from"./chunk-OMNJ52OG.js";import{a as fo}from"./chunk-2WGPWPZ6.js";import{a as is,b as ls}from"./chunk-QY2EV63C.js";import{b as as}from"./chunk-6CUDI3ND.js";import{a as te,b as V}from"./chunk-7F2ZKIZY.js";import{a as tt}from"./chunk-V5KAIKP5.js";import{b as Zl}from"./chunk-RCPM3H3Y.js";import{a as us}from"./chunk-332JUH5V.js";import{a as et}from"./chunk-GECH5JSW.js";import{a as Ie,b as lo}from"./chunk-FIASRSUQ.js";import"./chunk-N646L25C.js";import{a as ve}from"./chunk-HTWAEHYQ.js";import{a as jl}from"./chunk-KP7ZLXCF.js";import{a as es}from"./chunk-CZJTP566.js";import{a as ss}from"./chunk-O6Z3CRY7.js";import{a as Yl}from"./chunk-XWKOBO5M.js";import{a as fs}from"./chunk-SSQF7EFV.js";import{a as M}from"./chunk-XVFSFFWR.js";import{a as ao}from"./chunk-4FGCPPHQ.js";import"./chunk-JY4A3DSP.js";import{a as zl}from"./chunk-A336Z3P3.js";import"./chunk-FWL2OWGY.js";import{a as ge}from"./chunk-V2MYCZVJ.js";import{a as El}from"./chunk-QETZHUR5.js";import{a as no}from"./chunk-IHUUDZVT.js";import{a as Fl}from"./chunk-PWX7G5HE.js";import{a as Pl}from"./chunk-KEJZ5X4V.js";import{a as $l}from"./chunk-6TJF7A2N.js";import{a as Ul}from"./chunk-NKE5QU2Q.js";import{a as Wl}from"./chunk-RK46SY6J.js";import{a as Ol}from"./chunk-OAZI2S4Y.js";import{a as Kl}from"./chunk-QIMPD6HQ.js";import{a as R}from"./chunk-WRGSYYRV.js";import{a as En}from"./chunk-H4XSFZRO.js";import{a as Rl,b as Il,c as Gl}from"./chunk-TYGRFNLP.js";import{a as Nl}from"./chunk-BWEZMYH4.js";import{a as Re}from"./chunk-HEJJ5HCN.js";import"./chunk-X2QJ4F75.js";import{a as Ua}from"./chunk-A4YLCKLL.js";import{a as io}from"./chunk-CCTXQSLN.js";import{a as be}from"./chunk-7MQGPJ76.js";import{a as gl}from"./chunk-SKLB3FCL.js";import"./chunk-6BVGCO3I.js";import{a as ql}from"./chunk-BRCSGVHL.js";import{a as Xr}from"./chunk-MF3BFDWL.js";import{a as Fr}from"./chunk-YVPYZHJW.js";import"./chunk-SRSFKD6I.js";import{a as Ll}from"./chunk-OBWJ36PR.js";import"./chunk-4ZEXHVHC.js";import"./chunk-FYGIUDI3.js";import{C as s,E as y,G as kl,M as Cl,N as yl,S as Qe,T as Xe,U as O,V as X,X as Mn,Y as Dl,a as W,ba as Je,ca as Ze,d as pe,da as je,e as Hn,ea as de,fa as he,h as fe,r as i,s as x,t as b,u as Ne,v as f,w as k,x as h,y as vl,z as wl}from"./chunk-BG5LHYCF.js";import"./chunk-M6VFYVGZ.js";import"./chunk-XMGFOEO6.js";import"./chunk-A36TPL52.js";import{a as Sl}from"./chunk-3FUR4CWU.js";import{a as se}from"./chunk-VKNAZHSW.js";import{a as Jr}from"./chunk-3KOSRNPL.js";import{a as bl}from"./chunk-SGIZTIIQ.js";import"./chunk-WHTJ2U55.js";import{a as _}from"./chunk-6LDE5WBM.js";import{a as H}from"./chunk-QGV7XG72.js";import{a as g}from"./chunk-QPQYH7ZQ.js";import"./chunk-NDSZEOFH.js";import{a as le}from"./chunk-UFHHOZKJ.js";import{a as hl}from"./chunk-OTNBZGCN.js";import{a as _l}from"./chunk-F44TQQMJ.js";import"./chunk-BBPBUFOP.js";import{d as Se}from"./chunk-TJH5A7W4.js";import{a as ro}from"./chunk-VAQJPTXA.js";import"./chunk-G6PO2JVP.js";import{a as xe}from"./chunk-C7PIQX7O.js";import{a as Me}from"./chunk-H6PS5VCQ.js";import{a as Al}from"./chunk-CSUFNHAY.js";import"./chunk-P7MQW4MV.js";import{a as Zr}from"./chunk-6ZR46QZG.js";import"./chunk-3VMUJXQR.js";import"./chunk-ACRGE6WG.js";import{a as F}from"./chunk-C4VXH3KO.js";import{a as T}from"./chunk-5E32VBFN.js";import{a as oo}from"./chunk-XJD27S6H.js";import{a as Hl}from"./chunk-UJGSIJLY.js";import{a as Ml}from"./chunk-6DMKKUYZ.js";import{a as Ee}from"./chunk-FIUIIBOQ.js";import{a as Bl}from"./chunk-PD56GEXW.js";import"./chunk-7HLQ4YMN.js";import{a as to,e as Tl,g as Vl}from"./chunk-N47W3DMT.js";import{a as Vn}from"./chunk-XLAUK3YC.js";import{a as Yr}from"./chunk-ZDEOOWYD.js";import{a as Ka}from"./chunk-MFXNKIYL.js";import{a as Qr}from"./chunk-2XKKIH7K.js";import"./chunk-JZI3CAHX.js";import"./chunk-L5KUFFVQ.js";import"./chunk-UYGGJ3YF.js";import{a as xl}from"./chunk-EE5B6X24.js";import"./chunk-CCHDXXIW.js";import"./chunk-LWLVQTKS.js";import"./chunk-WBTHTD34.js";import{a as J}from"./chunk-FPGEPPZC.js";import"./chunk-IRBVAK7D.js";import"./chunk-PF3P35LS.js";import{a as w}from"./chunk-G34A357Q.js";import{a as jr,b as eo}from"./chunk-QL5YK4M4.js";import"./chunk-6YD7W4E5.js";import{a as zr}from"./chunk-IEAPP6FH.js";import"./chunk-FEFVGSP2.js";import"./chunk-EJENCRJV.js";import"./chunk-IWCA3B2P.js";import{a as P}from"./chunk-HMPLMOXP.js";import{b as N}from"./chunk-EEF6C5L4.js";import{a as Wa}from"./chunk-SVYRHE6Z.js";import{a as ae}from"./chunk-OIO6LGXZ.js";import{$ as Za,Ba as ul,Ca as cl,Da as ml,Ea as pl,Fa as dl,L as _n,O as Qa,Oa as Ur,Q as Tn,S as Xa,Y as Ja,Z as He,_ as Or,aa as ja,b as De,ba as el,ca as tl,d as za,da as rl,e as $r,ea as ol,fa as nl,ga as il,ha as Wr,ia as al,ja as ll,ka as sl,m as Ya,ma as fl,na as me,oa as Kr,pa as Q,r as An,y as Ln}from"./chunk-KWAUBU52.js";import{a as p}from"./chunk-TISVYXYU.js";import"./chunk-S3EM322F.js";function I(e){return R({textContent:e})}var Be=0,uo=0,ps=0;function _u(e,t){Be=e.children[5],_("Teleport Cooldown: ",Be),uo=I(t.toString()),g(Be,uo)}function Tu(e,t){Be?M(Be,!1):_u(e,t)}function Vu(){Be&&M(Be,!0)}function ds(){let e=Math.max(Math.ceil((ps-Date.now())/1e3),0);_(e,uo),e>0&&setTimeout(ds,500)}function hs(e){uo&&(ps=Date.now()+e*1e3,ds())}function gs(e,t){t?Tu(e,t):Vu()}var Ae=0;function Hu(e){return e}function Mu(e){return p.showBuffInfo&&e.some(Hu)}function Eu(){if(Ae)M(Ae,!1);else{Ae=H({className:"fshActionBox",innerHTML:"<div></div><div></div><div></div><div></div><div></div><div></div>"});let e=T("actionContainer");Pl(Ae,e.children[2])}return Ae}function Nu(){Ae&&M(Ae,!0)}function Nn(e){if(Mu(e))return Eu();Nu()}function ue(e,t,r,o){t&&(e.className=t),_(r,e);let n=R();return g(e,n),et(e,o),n}var Ge=0,vs=0;function Ru(e){Ge=e.children[3],vs=ue(Ge,"fshBlue","CA "," active")}function Iu(e,t){Ge?M(Ge,!1):Ru(e),_(t.level,vs)}function Gu(){Ge&&M(Ge,!0)}function Rn(e,t){t?Iu(e,t):Gu()}var qe=0,ws=0;function qu(e){qe=e.children[4],ws=ue(qe,"fshRed","Doubler "," active")}function Pu(e,t){qe?M(qe,!1):qu(e),_(t.level,ws)}function Fu(){qe&&M(qe,!0)}function In(e,t){t?Pu(e,t):Fu()}var Pe=0,ks=0;function $u(e){Pe=e.children[2],ks=ue(Pe,"","Damage bonus: ","%")}function Ou(e,t){if(e){let r=Math.min(Math.round(Math.floor(t/5)*Number(e.level))*.01,20);return Ie(r,2).toString()}return"0"}function Wu(e,t,r){Pe?M(Pe,!1):$u(e),_(Ou(t,Number(r)),ks)}function Ku(){Pe&&M(Pe,!0)}function Gn(e,t,r){t?Wu(e,t,r):Ku()}function qn(e,t){_(ge(e),t)}var Fe=0,Cs=0;function Uu(e){Fe=e.children[1],Cs=ue(Fe,"","Kill Streak: ","")}function zu(e,t){Fe?M(Fe,!1):Uu(e),qn(t,Cs)}function Yu(){Fe&&M(Fe,!0)}function Pn(e,t,r,o){t||r?zu(e,o):Yu()}function Qu(e,t){return t.name===e}function we(e){let{buffs:t}=GameData.player();if(t)return t.find(w(Qu,e))}function Fn(){let e=GameData.player().teleportCooldown;return e>1&&e}var Xu=["red","orange","yellow"];function $n(){let e=$("#actionlist-shield-imp");e.length===1&&e.css("background-color",Xu[e.text()]||"#ad8043")}var re=0,On=0;function Ju(e){Jl(e)&&GameData.fetch(me)}function Zu(){we("Summon Shield Imp")||Xl([ro()],[55]).then(Ju)}function ju(e){return e?Number(e.stack):0}var ec=["imp-0","imp-1","imp-1"];function tc(e){return ec[e]||"fshGreen"}function rc(e){[re]=e.children,_("Shield Imps Remaining: ",re),On=R(),g(re,On),Fr(re,"&nbsp;");let t=ve({className:"xSmallLink",textContent:"Recast"});g(re,t),P(t,Zu)}function oc(e,t){re?M(re,!1):rc(e);let r=ju(t);re.className=tc(r),_(r,On)}function nc(){re&&M(re,!0)}function Wn(e,t,r){t||r?oc(e,t):nc()}function ic(e){return e.type===0}function Kn(){let{dynamic:e}=GameData.realm();return le(e)&&e.some(ic)}var rt=0,Un=0,zn=0,Yn=0,Qn=0,Xn=0,Jn=0;function ac(){rt=we("Death Dealer"),Un=we("Doubler"),zn=we("Counter Attack"),Yn=we("Summon Shield Imp"),Qn=Fn(),Xn=Kn(),Jn=GameData.player().killStreak}function $e(){$n(),ac();let e=Nn([rt,Un,zn,Yn,Qn,Xn]);e&&(Wn(e,Yn,rt),Pn(e,rt,Xn,Jn),Gn(e,rt,Jn),Rn(e,zn),In(e,Un),gs(e,Qn))}function lc(e,t){hs(t.player.teleportCooldown)}function Zn(){$e(),$.subscribe(`${Or} ${Za}`,$e),$.subscribe(sl,lc)}function sc(){return window.GameController&&GameController.Realm&&!GameController.Realm.footprintTileList}function jn(){sc()&&(GameController.Realm.footprintTileList=[])}function ys(e,t,r){return El({className:`fshCurveEle fshCurveLbl fshPoint tip-static ${e}`,dataset:{tipped:t},htmlFor:r})}function co(e){let t=H({className:"fshToggle"}),r=no({checked:e.prefVal,id:e.checkId,type:"checkbox"});g(t,r);let o=ys(e.onClass,e.onTip,e.checkId);g(t,o);let n=ys(e.offClass,e.offTip,e.checkId);return g(t,n),g(e.worldName,t),r}var ke=0,po=0,ho=0,Ss=0,Bs=0,As=0,Ls=0,_s=0,Ts=0;function fc(e){Re(e),GameData.doAction(12,401,{},0)}function uc(){Ul(Ua())}function cc(){window.open(`${Qa+An}map`,"fsMap")}function mc(){let e=GameData.realm();window.open(`${Ja}realms${An}view&realm_id=${e.id}`,"mapUfsg")}function pc(){J("playNewMessageSound",!N("playNewMessageSound"))}function dc(){p.huntingMode=!p.huntingMode,J("huntingMode",p.huntingMode)}function hc(){return H({className:"fshCurveContainer",id:"fshWorldButtonContainer"})}var Ds=e=>I(e?e.toString():"?");function xs(e,t,r){let o=H({textContent:`${t} Lvl: `});g(o,r),g(e,o)}function gc(e){let t=H({className:"fshFsty"});po=Ds(GameData.realm().minlevel),xs(t,"Min",po),ho=Ds(GameData.player().level),xs(t,"Your",ho),g(e,t)}function mo(e,t,r){let o=ve({className:`fshCurveEle fshCurveBtn fshPoint tip-static ${e}`,dataset:{tipped:t}});return g(r,o),o}function vc(e){gc(e),Ss=mo("fshFormGroup","Quick Create Attack Group",e),Bs=mo("fshQuickBuff","Open Quick Buff Popup",e),As=mo("fshRealmMap","Open Realm Map",e),Ls=mo("fshTempleOne","Search map in Ultimate FSG",e)}function wc(e){if(N("showSpeakerOnWorld")){let t=N("playNewMessageSound");_s=co({prefVal:t,checkId:"fshSoundCheck",onClass:"soundOn",onTip:"Turn Off Sound when you have a new log message",offClass:"soundOff",offTip:"Turn On Sound when you have a new log message",worldName:e})}}function kc(e){let t=p.huntingMode;Ts=co({prefVal:t,checkId:"fshHuntCheck",onClass:"huntOn",onTip:"Hunting mode is ON",offClass:"huntOff",offTip:"Hunting mode is OFF",worldName:e})}function Cc(){vc(ke),wc(ke),kc(ke)}var yc=[[()=>_s,pc],[()=>Ts,dc]],Dc=[[()=>Ss,fc],[()=>Bs,uc],[()=>As,cc],[()=>Ls,mc]];function xc(e,t){let{target:r}=t,[,o]=e.find(([n])=>n()===r)??[];o&&(r.blur(),o(r))}function bs(e){return w(xc,e)}function bc(){P(ke,bs(Dc)),ae(ke,"change",bs(yc))}function Sc(){ke||(ke=hc(),Cc(),bc(),io(ke,T("worldCoord")))}function Bc(e,t){po&&t.b.minlevel&&(jn(),_(t.b.minlevel,po))}function Ac(e,t){ho&&_(t.b,ho)}function ei(){Sc(),$.subscribe(ol,Bc),$.subscribe(ja,Ac)}var Lc=["NORMAL","CHAMPION","ELITE","SUPER ELITE","TITAN","LEGENDARY"],_c=`url("${De}ui/world/icon_action_attack_`,go=!1;function ti(e){return Yr(".verb.attack",e)}function ri(e){let t=Lc.indexOf(e.toUpperCase());return Zr(`#actionList .actionListItem.creature.creature-${t}`)}function Tc(e){e.classList.remove("attack-1","attack-2","attack-3","attack-4","attack-5","attack-6","attack-7","attack-8"),e.style.backgroundImage=""}function Vc(e,t){e!==null&&(e.classList.add(`attack-${t+1}`),e.style.backgroundImage=`${_c}${t+1}.png")`)}function Vs(e){let t=["LEGENDARY","NORMAL"].flatMap(ri),r=ri("CHAMPION"),[o,n]=e?[t,r]:[r,t];o.map(ti).filter(l=>l!==null).forEach(Tc),n.slice(0,8).map(ti).forEach(Vc)}function Hc(e){let t=ti(e);t&&(se("world","ChampionAttack"),Nl(t))}function Mc(e){if(!e.altKey||!e.shiftKey||e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||(go||Vs(!0),go=!0,!/(?:Digit|Numpad)[1-8]/.test(e.code)))return;let t=ri("CHAMPION"),r=parseInt(e.code.slice(-1),10)-1;r<t.length&&Hc(t[r])}function Ec(e){go&&(!e.ctrlKey||!e.shiftKey)&&(go=!1,Vs(!1))}function oi(){let{body:e}=document;ae(e,"keydown",Mc),ae(e,"keyup",Ec)}var Nc=["Breaker","Protection","Master Thief","Protect Gold","Disarm","Duelist","Thievery","Master Blacksmith","Master Crafter","Fury Caster","Master Inventor","Sustain"],ni=[],K=0;function Rc(e){(e.id===54||e.id===26)&&(K.player.buffs[e.id]=parseInt(e.level,10))}function Ic(e){Nc.indexOf(e.name)===-1&&(K.player.enhancements[e.name]=e.value)}function Gc(e){e.player.buffs&&e.player.buffs.forEach(Rc)}function qc(e){e.player.enhancements&&e.player.enhancements.forEach(Ic)}function Pc(e){K={},K.combat=e.response.data,K.combat.inventory_id&&(K.combat.drop=K.combat.item.id),K.player={},K.player.buffs={},K.player.enhancements={},Gc(e),qc(e),K.time=e.time,ni.push(K),eo("fsh_combatLog",ni)}function Fc(e,t){t.response.response===0&&Pc(t)}function $c(e){e&&(ni=e),$.subscribe(Wr,Fc)}function ii(){N("keepLogs")&&jr("fsh_combatLog").then($c)}function ai(e,t){return e.every(r=>be(r,t))}function ot(e){return xl({cache:!1,url:"fetchdata.php",data:{...e,fshrnd:Zl()},dataType:"json"})}function Le(e){return!e||!e.response||!e.response.data}var Hs=[];function Oc(e){return Le(e)||Hs.push(e),e}function Wc(e,t){return e===Number(t.response.data.id)}function Kc(e,t){e(t)}function Uc(e){return new Promise(t=>{gl(3,Kc,[t,e])})}function nt(e,t){let r=Hs.find(w(Wc,e));return r?Uc(r):ot({a:1,id:e,passback:t}).then(Oc)}var Ms=0,Es=0,Ns=0,Rs=0,Is=0,Gs=0,li=()=>Ms,qs=()=>Es,Ps=()=>Ns,Fs=()=>Rs,$s=()=>Is,Os=()=>Gs;function it(e,t){return Hl(Ee(t,e))}function zc(e){Ns=it(e,cl),Es=it(e,ul),Is=it(e,pl),Rs=it(e,ml),Gs=it(e,dl)}function Ws(){Ms=GameData.player().level,zc(T("statbar-character-tooltip-stats"))}function Yc(e){return`<table><tr><td><img src="${De}creatures/${e.image_id}.png" height="200" width="200"></td><td rowspan="2"><table width="400"><tr><td class="header" colspan="4" class="fshCenter">Statistics</td></tr>`}var vo=e=>`<td>${e}:&nbsp;</td>`,wo=e=>`<td width="40%">${e}</td>`;function si([e,t,r,o,n]){return[vo(e),wo(`${t} (your ${r}:<span class="${o}">${n()}</span>)`)]}function fi(e){return["<tr>",...e,"</tr>"].join("")}function Qc(e,t){return fi([vo("Class"),wo(e.creature_class),...si(["Level",e.level,"level",t,li])])}function Ks(e,t){return fi([...si(e),...si(t)])}function Xc(e){return Ks(["Attack",e.attack,"defense","fshYellow",qs],["Defense",e.defense,"attack","fshYellow",Ps])}function Jc(e){return Ks(["Armor",e.armor,"damage","fshYellow",Fs],["Damage",e.damage,"armor","fshYellow",$s])}function Zc(e,t){return fi([vo("HP"),wo(`${e.hp} (your HP:<span class="fshYellow">${Os()}</span>)(1H: <span class="fshRed">${t}</span>)`),vo("Gold"),wo(e.gold)])}var jc='<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Enhancements</td></tr>';function em(e){return`<tr><td colspan="2">${e.name}:</td><td colspan="2">${e.value}</td></tr>`}function tm(e){return e.enhancements.length===0?'<tr><td colspan="4">[no enhancements]</td></tr>':e.enhancements.map(em).join("")}function rm(e){return`<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Description</td></tr><tr><td colspan="4">${e.description}</td></tr><tr><td colspan="4" height="5"></td></tr></table></td></tr><tr><td class="fshCenter"><b>${e.name}</b></td></tr></table>`}function om(e,t,r){return Yc(e)+Qc(e,r)+Xc(e)+Jc(e)+Zc(e,t)+jc+tm(e)+rm(e)}function nm(e){let t=Math.ceil(e.hp*p.hpVariable+e.armor*p.generalVariable),r="fshYellow";return Ws(),li()>e.level&&(r="fshRed"),om(e,t,r)}function ui(e){if(!Le(e))return nm(e.response.data)}var im=["verb","view","tip-static"];function am(e,t){$(e).qtip({overwrite:!0,show:{event:"mouseover",ready:!0},style:{classes:"qtip-tipsy qtip-custom"},position:{my:"center right",at:"center left",effect:!1,viewport:$(window)},content:{text:t},hide:{effect:!1}})}function lm(e){return Qr(e.parentNode.children).indexOf(e)}function sm(e,t){let r=ui(t);e.set("content.text",r)}function fm(e,t,r){return nt(GameData.actions()[e].data.id,e).then(w(sm,r)),"Loading..."}function um(e,t){se("NewMap","CreatureInfo");let r=lm(t);e.classList.add("fshTip"),am(e,w(fm,r))}function cm(e,t){return ai(im,e)&&!be("fshTip",e)&&be("creature",t)}function mm(e){if(!p.showCreatureInfo)return;let{target:t}=e,r=t.parentNode.parentNode.parentNode;cm(t,r)&&um(t,r)}function ci(){ae(T("actionList"),"mouseover",mm)}function pm(){g(document.body,jl(`#actionList .creature-1 {color: green;}
#actionList .creature-2 {color: yellow;}
#actionList .creature-3 {color: red;}`))}function mi(){N("enableCreatureColoring")&&pm()}function _e(e){return p.doNotKillList.includes(Me(e))}function dm(e){e.classList.toggle("fshBlue",_e(Ka(e)))}function Oe(){let e=T("actionList");Xr("creature",e).forEach(dm)}function hm(e,t){if(_e(e))return T("actionList").children[t].children[0].children[1].classList.remove("loading"),!0}function gm(e){let t=GameData.actions()[e];if(t)return hm(t.data.name,e)}function vm(e){return function(r,o,n,l){gm(n.passback)||e(r,o,n,l)}}var wm={2:vm};function km(e){return Wa(e)||e===0}function Cm(e){return e&&zr(e)}function ym(e){return function(r,o,n,l){let a=wm[r];Cm(a)&&km(l)?a(e)(r,o,n,l):e(r,o,n,l)}}function pi(){let e=GameData.doAction;GameData.doAction=ym(e)}function di(){$.subscribe(He,Oe),Oe(),pi()}function Dm(e){Re(e.target)}function hi(){P(T("buffList"),Dm)}function gi(e){return bl({cmd:"globalquests",...e})}function vi(){return gi({subcmd:"contrib"})}var xm=({username:e,value:t})=>({player:{name:e},value:t});async function wi(){return{r:(await Sl({cmd:"toprated",subcmd:"eventcontrib"})).map(xm)}}function ki(){return Jr(vi,wi)}function Us(e){e[1]=e[2].r}function zs(e,t,r){let o=e.slice();return o[3]=t[r].player,o[2]=t[r].value,o[5]=r,o}function bm(e){let t,r=e[6].message+"",o;return{c(){t=f("p"),o=k(r),kl(t,"color","red")},m(n,l){x(n,t,l),i(t,o)},p(n,l){l&1&&r!==(r=n[6].message+"")&&y(o,r)},d(n){n&&b(t)}}}function Sm(e){Us(e);let t,r,o,n=e[1],l=[];for(let a=0;a<n.length;a+=1)l[a]=Qs(zs(e,n,a));return{c(){t=f("table"),r=f("tr"),r.innerHTML=`<td class="header"></td> 
      <td class="header"></td> 
      <td class="header">Username</td> 
      <td class="header">Kills</td>`,o=h();for(let a=0;a<l.length;a+=1)l[a].c();s(r,"class","svelte-1p6satm"),s(t,"id","world-event-contrib-table"),s(t,"class","svelte-1p6satm")},m(a,m){x(a,t,m),i(t,r),i(t,o);for(let c=0;c<l.length;c+=1)l[c].m(t,null)},p(a,m){if(Us(a),m&1){n=a[1];let c;for(c=0;c<n.length;c+=1){let u=zs(a,n,c);l[c]?l[c].p(u,m):(l[c]=Qs(u),l[c].c(),l[c].m(t,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(a){a&&b(t),Ne(l,a)}}}function Ys(e){let t,r,o,n;return{c(){t=f("a"),r=f("img"),Hn(r.src,o=De+"guilds/"+e[3].guild_id+"_mini.png")||s(r,"src",o),s(r,"alt","guild logo"),s(r,"class","svelte-1p6satm"),s(t,"href",n=""+(_n+e[3].guild_id))},m(l,a){x(l,t,a),i(t,r)},p(l,a){a&1&&!Hn(r.src,o=De+"guilds/"+l[3].guild_id+"_mini.png")&&s(r,"src",o),a&1&&n!==(n=""+(_n+l[3].guild_id))&&s(t,"href",n)},d(l){l&&b(t)}}}function Qs(e){let t,r,o=e[5]+1+"",n,l,a,m,c,u,d=e[3].name+"",B,E,j,ce,z=e[2]+"",A,Te,G=e[3].guild_id&&Ys(e);return{c(){t=f("tr"),r=f("td"),n=k(o),l=h(),a=f("td"),G&&G.c(),m=h(),c=f("td"),u=f("a"),B=k(d),j=h(),ce=f("td"),A=k(z),Te=h(),s(u,"href",E=""+(Tn+e[3].name)),s(t,"class","svelte-1p6satm")},m(q,ie){x(q,t,ie),i(t,r),i(r,n),i(t,l),i(t,a),G&&G.m(a,null),i(t,m),i(t,c),i(c,u),i(u,B),i(t,j),i(t,ce),i(ce,A),i(t,Te)},p(q,ie){q[3].guild_id?G?G.p(q,ie):(G=Ys(q),G.c(),G.m(a,null)):G&&(G.d(1),G=null),ie&1&&d!==(d=q[3].name+"")&&y(B,d),ie&1&&E!==(E=""+(Tn+q[3].name))&&s(u,"href",E),ie&1&&z!==(z=q[2]+"")&&y(A,z)},d(q){q&&b(t),G&&G.d()}}}function Bm(e){let t;return{c(){t=k("Loading...")},m(r,o){x(r,t,o)},p:W,d(r){r&&b(t)}}}function Am(e){let t,r,o={ctx:e,current:null,token:null,hasCatch:!0,pending:Bm,then:Sm,catch:bm,value:2,error:6};return Mn(r=e[0],o),{c(){t=vl(),o.block.c()},m(n,l){x(n,t,l),o.block.m(n,o.anchor=l),o.mount=()=>t.parentNode,o.anchor=t},p(n,[l]){e=n,o.ctx=e,l&1&&r!==(r=e[0])&&Mn(r,o)||Dl(o,e,l)},i:W,o:W,d(n){n&&b(t),o.block.d(n),o.token=null,o=null}}}function Lm(e,t,r){let{promise:o}=t;return e.$$set=n=>{"promise"in n&&r(0,o=n.promise)},[o]}var Ci=class extends he{constructor(t){super(),de(this,t,Lm,Am,pe,{promise:0})}},Xs=Ci;var yi=0,Js=()=>({promise:ki()});function _m(e){yi?yi.$set(Js()):yi=new Xs({props:Js(),target:e})}function Tm(){let e=T("world-event-contrib");_m(e),$(e).dialog({title:"Top 100 Event Contributers",minWidth:300,height:300,zIndex:9999})}function Di(){let e=$("#world-event-badge");!e.length||(e.off(),P(e[0],Tm))}function Zs(e){$(`#actionList li.creature-${e.toString()} a.create-group`).hide()}function Vm(e){$.subscribe(He,w(Zs,e))}var Hm=["hideChampionsGroup","hideElitesGroup","hideSEGroup","hideTitanGroup","hideLegendaryGroup"];function Mm(e,t){N(e)&&(Vm(t+1),Zs(t+1))}function xi(){Hm.forEach(Mm)}function Em(e){return e.response&&e.response.msg&&e.response.msg.startsWith("Creature did not exist at that location")}function Nm(e){Em(e)&&GameData.fetch(Kr+Q)}function Rm(e){e.remove()}function Im(e,t){Nm(t),Zr(".creature-4 > .quickCombat > .verbs").forEach(Rm)}function bi(){$.subscribe(Wr,Im)}var Z=0;function Gm(e,t){t.creature_class=e.creature_class,t.image_id=e.image_id,t.level=Number(e.level),t.type=e.type}function qm(e){Z[e.name]?Z[e.name].seen&&(Z[e.name].seen+=1):(Z[e.name]={seen:1},Gm(e,Z[e.name]))}function js(e,t,r){return t?e(t,r):r}function ef(e,t){let r=e||{};return r.min=js(Math.min,r.min,t),r.max=js(Math.max,r.max,t),r}var Pm=["attack","armor","damage","defense","hp"];function Fm(e,t){return!e||e.min!==t.min||e.max!==t.max}function $m(e,t,r){let o=ef(t[r],Number(e[r]));Fm(t[r],o)&&(t[r]=o)}function Om(e,t){Pm.forEach(w($m,e,t))}function Wm(e){return e.enhancements&&e.enhancements.length>0}function Km(e,t){e[t.name]=ef(e[t.name],Number(t.value))}function Um(e,t){Wm(e)&&(t.enhancements=t.enhancements||{},e.enhancements.forEach(w(Km,t.enhancements)))}function zm(e){Z||(Z={}),qm(e),Om(e,Z[e.name]),Um(e,Z[e.name]),eo("fsh_monsterLog",Z)}function tf(e){p.showMonsterLog&&zm(e)}function Ym(e){Z=e||{}}function rf(){jr("fsh_monsterLog").then(Ym)}var of=[];function Qm(e){Le(e)||(se("NewMap","MonsterLog"),tf(e.response.data))}function Xm(e,t){return e.id===t.id}function Jm(e){if(of.find(w(Xm,e.data)))return!0;of.push(e.data)}function Zm(e,t){e.type!==6||Jm(e)||nt(e.data.id,t).then(Qm)}function nf(){p.showMonsterLog&&GameData.actions().forEach(Zm)}function Si(){rf(),$.subscribe("-1-success.action-response 4-success.action-response 5-success.action-response 25-success.action-response",nf),nf()}var af="",lf=()=>af;function sf(e){af=e}function Bi(){return zl({subcmd:"scouttower"})}function jm(e){let t=e.split(/[: /[]/);return new Date(Number(t[4]),$r.indexOf(t[3]),Number(t[2]),Number(t[0]),Number(t[1]))}function ep(e){let t=xe(e[1]);return t==="No active cooldown"?0:Math.ceil((jm(t.slice(16))-to())/1e3)}function tp(e){let[t]=e[0].cells[0].children;return{base_id:Number(t.src.split("/").slice(-1)[0].slice(0,-36)),name:t.title}}function rp(e){return{cooldown:ep(e),creature:tp(e),kills:Number(xe(e[0].cells[3]))}}function op(e){let t=xe(e[0].cells[1]);if(t!=="n/a"){let r=xe(e[0].cells[2]).split("/");return{realm:t,current_hp:Number(r[0]),max_hp:Number(r[1])}}}function np(e){let t=e[2].cells[0].children;if(t.length===1)return{contributors:Yl(t[0],3,0).map(o=>({kills:Number(xe(o.cells[1])),player:{name:xe(o.cells[0])}}))}}function ip(e){return{...rp(e),...op(e),...np(e)}}var ap=(e,t,r)=>t!==0&&t<r.length-1&&(t-1)%6<3;function lp(e){let t=Yr('table[width="500"]',e);if(!t)return{s:!1};let r=Qr(t.rows).filter(ap);return{r:tt(3,r).map(ip),s:!0}}async function Ai(){return lp(await ql({cmd:"guild",subcmd:"scouttower"}))}function Li(){return Jr(Bi,Ai)}function sp(e,[t,r,o]){let n=e.insertCell(-1);return n.colSpan=t,o&&(n.className="header"),g(n,r()),n}function fp(e,t){t.forEach(w(sp,e))}function up(e,t,r){let o=e.insertRow(-1);return r&&(o.className="fshBlue"),fp(o,t),o}function cp(e,t){up(e,t[0],t[1])}function at(e,t){t.forEach(w(cp,e))}var ff=0,uf=0,cf=0,mf=0,pf=0,df=0,hf=0,gf=0,vf=()=>ff,wf=()=>uf,kf=()=>cf,Cf=()=>mf,yf=()=>pf,Df=()=>df,xf=()=>hf,bf=()=>gf;function mp(){ff=I("Current"),uf=I("Kills"),cf=I("Member"),mf=I("% of Total")}function pp(){pf=I("Status"),df=I("Titan HP"),hf=I("Total"),gf=I("Your Guild")}function Sf(){mp(),pp()}var _i=0,Ti=0,Vi=0,Hi=0,Mi=0,Ei=0,Ni=0,Ri=0,Ii=0,ko=()=>_i,Co=()=>Ti,yo=()=>Vi,Do=()=>Hi,xo=()=>Mi,bo=()=>Ei,So=()=>Ni,Bo=()=>Ri,Ao=()=>Ii;function dp(){_i=R({innerHTML:"&nbsp;"}),Ti=R({innerHTML:"&nbsp;"}),Vi=R(),Hi=R()}function hp(){Mi=R(),Ei=R(),Ni=R(),Ri=R(),Ii=R()}function Bf(){dp(),hp()}function Af(){F("&nbsp;",_i),F("&nbsp;",Ti),_("",Vi),_("",Hi),_("",Mi),_("",Ei),_("",Ni),F("",Ri),F("",Ii)}var lt=0,Lo=()=>lt;function _o(){for(;lt.rows.length>8;)lt.deleteRow(8)}function gp(){let e=R();return g(e,yo()),et(e,"/"),g(e,Do()),e}function Lf(e){let t=R();return g(t,e),et(t,"%"),t}function _f(){lt=es({className:"fshCenter"}),Sf(),at(lt,[[[[5,ko,!0],[1,Co,!0]]],[[[2,Df,!0],[4,bf,!0]]],[[[2,gp],[4,xo]]],[[[2,vf,!0],[4,w(Lf,bo())]],!0],[[[2,xf,!0],[4,w(Lf,So())]],!0],[[[2,yf,!0],[4,Bo]],!0],[[[6,Ao]]],[[[2,kf,!0],[2,wf,!0],[2,Cf,!0]]]])}var Ce=0,Gi=0,Tf="";var Vf=()=>Gi,Hf=()=>Tf;function qi(){Gi=null,Ce&&!be("fshHide",Ce)&&(M(Ce,!0),Af(),_o())}function Mf(e){return e.type===0?(Gi=e.base_creature_id,Tf=`(${e.x},${e.y})`,!0):!1}function Ef(){if(Ce)M(Ce,!1);else{let e=T("actionContainer");Ce=H({className:"fshActionBox titanInfo"}),Bf(),_f(),g(Ce,Lo()),g(e,Ce)}}function vp(e){let t=new Date(to()+e*1e3);return`${oo(t.getHours())}:${oo(t.getMinutes())} ${oo(t.getDate())}/${$r[t.getMonth()]}/${t.getFullYear()}`}function wp(e){return e<=0?'<span class="fshGreen cooldown">No active cooldown</span>':`<span class="fshMaroon cooldown">Cooldown until: ${vp(e)}</span>`}function kp(e){return lo(rs(e.max_hp-e.current_hp,e.kills),2)}function Cp(e){return lo(e.kills*100/e.max_hp,2)}function yp(e){return os(e.kills,e.max_hp,e.current_hp)}function Dp(e){[[ts(e.creature.name),ko],[Hf(),Co],[e.current_hp,yo],[e.max_hp,Do],[e.kills,xo],[kp(e),bo],[Cp(e),So]].forEach(([t,r])=>_(t,r()))}function xp(e){Dp(e),F(yp(e),Bo()),F(wp(e.cooldown),Ao())}function bp(e,t){return[[[2,()=>I(t.player.name)],[2,()=>I(t.kills.toString())],[2,()=>I(`${lo(t.kills*100/e.kills,2)}%`)]]]}function Sp(e){if(_o(),!e.contributors)return;let t=e.contributors.map(w(bp,e));at(Lo(),t)}function Bp(e){return e.realm&&e.creature.base_id===Vf()&&e.realm===lf()}function Pi(e){let t=e.find(Bp);t&&(xp(t),Sp(t))}var To=null;function Ap(){To&&(window.clearTimeout(To),To=null)}var Lp=e=>e&&e.s&&le(e.r),Nf=e=>p.showTitanInfo&&le(e)&&e.some(Mf);function _p(e,t){!Lp(t)||(Pi(t.r),Nf(GameData.realm().dynamic)?To=window.setTimeout(e,3e4):qi())}function Rf(){Li().then(w(_p,Rf))}function st(e){Ap(),Nf(e)?(Ef(),Rf()):qi()}function Fi(e){e.dynamic&&(sf(e.name),st(e.dynamic))}function Tp(e){return e.realm&&e.realm.name}function If(e,t){Tp(t)&&Fi(t.realm)}function $i(){window.initialGameData&&If(null,window.initialGameData),$.subscribe(`${nl} ${ll}`,If)}function Gf(e,t,r){let o=e.slice();return o[5]=t[r],o[7]=r,o}function Vp(e){let t=e[1](e[7])+"",r;return{c(){r=k(t)},m(o,n){x(o,r,n)},p:W,d(o){o&&b(r)}}}function qf(e){let t,r,o,n;function l(...a){return e[3](e[5],e[7],...a)}return r=new Ll({props:{$$slots:{default:[Vp]},$$scope:{ctx:e}}}),r.$on("click",l),{c(){t=f("li"),Je(r.$$.fragment),o=h()},m(a,m){x(a,t,m),Ze(r,t,null),i(t,o),n=!0},p(a,m){e=a;let c={};m&256&&(c.$$scope={dirty:m,ctx:e}),r.$set(c)},i(a){n||(O(r.$$.fragment,a),n=!0)},o(a){X(r.$$.fragment,a),n=!1},d(a){a&&b(t),je(r)}}}function Hp(e){let t,r,o=tt(16,e[0]),n=[];for(let a=0;a<o.length;a+=1)n[a]=qf(Gf(e,o,a));let l=a=>X(n[a],1,1,()=>{n[a]=null});return{c(){t=f("ul");for(let a=0;a<n.length;a+=1)n[a].c();s(t,"class","svelte-1k3xw12")},m(a,m){x(a,t,m);for(let c=0;c<n.length;c+=1)n[c].m(t,null);r=!0},p(a,[m]){if(m&7){o=tt(16,a[0]);let c;for(c=0;c<o.length;c+=1){let u=Gf(a,o,c);n[c]?(n[c].p(u,m),O(n[c],1)):(n[c]=qf(u),n[c].c(),O(n[c],1),n[c].m(t,null))}for(Qe(),c=o.length;c<n.length;c+=1)l(c);Xe()}},i(a){if(!r){for(let m=0;m<o.length;m+=1)O(n[m]);r=!0}},o(a){n=n.filter(Boolean);for(let m=0;m<n.length;m+=1)X(n[m]);r=!1},d(a){a&&b(t),Ne(n,a)}}}function Mp(e,t,r){let o=yl(),{members:n=[]}=t,l=c=>`Buff ${za[c]} 16`;function a(c,u,d){d.target.blur(),Kl(`${Xa}&players=${c.join(",")}`,"fsQuickBuff",618,1e3,",scrollbars"),o("buffBatch",l(u))}let m=(c,u,d)=>a(c,u,d);return e.$$set=c=>{"members"in c&&r(0,n=c.members)},[n,l,a,m]}var Oi=class extends he{constructor(t){super(),de(this,t,Mp,Hp,pe,{members:0})}},Pf=Oi;function Vo(e,t){return e>t*10||e<t?e:t*10}function Ep(e){e.attackValue=Vo(e.attackBonus,e.levelValue),e.defenseValue=Vo(e.defenseBonus,e.levelValue),e.armorValue=Vo(e.armorBonus,e.levelValue),e.damageValue=Vo(e.damageBonus,e.levelValue),e.hpValue=e.hpBonus}var Np=[["levelValue","level"],["attackValue","attack"],["attackBonus","bonus_attack"],["defenseValue","defense"],["defenseBonus","bonus_defense"],["armorValue","armor"],["armorBonus","bonus_armor"],["damageValue","damage"],["damageBonus","bonus_damage"],["hpValue","hp"],["hpBonus","bonus_hp"],["killStreakValue","killstreak"]];function Rp(e,t,r){e[r[0]]=Number(t[r[1]])}function Ip(e,t){Np.forEach(w(Rp,e,t))}var Gp=[["counterAttackLevel","Counter Attack"],["doublerLevel","Doubler"],["deathDealerLevel","Death Dealer"],["darkCurseLevel","Dark Curse"],["holyFlameLevel","Holy Flame"],["constitutionLevel","Constitution"],["sanctuaryLevel","Sanctuary"],["flinchLevel","Flinch"],["nightmareVisageLevel","Nightmare Visage"],["superEliteSlayerLevel","Super Elite Slayer"],["fortitudeLevel","Fortitude"],["chiStrikeLevel","Chi Strike"],["terrorizeLevel","Terrorize"],["barricadeLevel","Barricade"],["reignOfTerrorLevel","Reign Of Terror"],["anchoredLevel","Anchored"],["severeConditionLevel","Severe Condition"],["entrenchLevel","Entrench"],["cloakLevel","Cloak"]];function qp(e,t,r){e[r[0]]=t[r[1]]||0}function Pp(e,t){Gp.forEach(w(qp,e,t))}function ft(e){if(!e)return;let t=so(e._skills),r={};return Ip(r,e),Pp(r,t),r.superEliteSlayerMultiplier=Ie(.002*r.superEliteSlayerLevel,2),Ml(r.armorValue)&&Ep(r),r}var oe=te(["statusStore","Done."]),Ho=[],Ff=V(oe,(e,t)=>{let r=Ho.find(([n])=>n===e[0]);r?[,r[1]]=e:Ho=[...Ho,e];let o=Ho.find(([,n])=>n!=="Done.");t(o?.[1]??"Done.")});var We=te(0);async function Fp(e,t){if(!e)return;oe.set(["relicStore","Processing defending guild relics ... "]);let o=(await ns(e)).r.relics.length,n=o===1?1.5:Ie(1-o/10,2),l=`${String(n*100)}%`;t({noOfRelics:o,relicMultiplier:n,leadDefenderBonus:l}),oe.set(["relicStore","Done."])}var Mo=V(We,(e,t)=>{Fp(e,t)});var Eo=te([]);async function $p(e,t){if(!e.length)return;oe.set(["defendersStore","Processing defending group stats ... "]);let r=[];await Bl(e.map(async(o,n)=>{let l=await Ol(o);r.push([n,ft(l)]),t(r)})),oe.set(["defendersStore","Done."])}var No=V(Eo,(e,t)=>{$p(e,t)}),Ke=V(No,(e,t)=>{let r=e?.find(([o])=>o===0);r&&t(r[1])}),ut=(e,t,r)=>Math.ceil(r*(t===0?e:Ya));function Op(e,t,[r,o]){return{armorValue:t.armorValue+ut(e,r,o.armorValue),attackValue:t.attackValue+ut(e,r,o.attackValue),damageValue:t.damageValue+ut(e,r,o.damageValue),cloaked:t.cloaked+(o.cloakLevel?1:0),defenseValue:t.defenseValue+ut(e,r,o.defenseValue),hpValue:t.hpValue+ut(e,r,o.hpValue)}}var Wp=([e,t],r)=>{if(!e?.relicMultiplier||!t?.length)return;let o=t?.reduce(w(Op,e.relicMultiplier),{armorValue:0,attackValue:0,damageValue:0,cloaked:0,defenseValue:0,hpValue:0});r(o)},ct=V([Mo,No],Wp);var Ro=te(0),Kp=e=>e.members[0].name===GameData.player().username;async function Up(){return(await ao())?.r?.find(Kp)?.id}async function zp(e){let t=await fo(e);return as(t?.r?.attributes)}async function Yp(e){let t=await is(),r=ls(t);return e?.map((o,n)=>o-r[n])}async function Qp(e,t){if(!e)return;oe.set(["groupStore","Processing attacking group stats ... "]);let r=await Up(),o=r&&await zp(r),n=o&&await Yp(o);n&&t({attack:n[0],defense:n[1],armor:n[2],hp:n[3],damage:n[4]}),oe.set(["groupStore","Done."])}var mt=V(Ro,(e,t)=>{Qp(e,t)});var $f=(e,t,r)=>Math.ceil(e*Vn(t,0)*r),Io=(e,t)=>$f(e,t,.0025),pt=(e,t)=>$f(e,t,.001),Go=pt,qo=pt,Po=pt,Fo=pt,$o=pt,Oo=(e,t)=>Math.ceil(e*(1+Vn(t,0)*.001)),Xp=e=>1-e*Ur,Wi=(e,t)=>Math.ceil(e*Xp(t));var Wo=te([]),Ki=V(Wo,(e,t)=>{!e||t(so(e))}),Jp=V([Ki,mt],([e,t],r)=>{if(!e||!t)return;let o=Oo(t.defense,e.Constitution),n=Go(o,e.Fortitude),l=t.hp+n,a=qo(l,e["Chi Strike"]);r({dmgWithChiStrike:t.damage+a,defWithConst:o,hpWithFortitude:l,nmv:Io(t.attack,e["Nightmare Visage"]),sanctuary:Po(t.armor,e.Sanctuary)})});function Zp([e,t,r],o){if(!e||!t||!r)return;let n=r.attack-e.nmv,l=Fo(n,t.flinchLevel),a=$o(e.dmgWithChiStrike,t.terrorizeLevel);o({attack:n-l,defense:e.defWithConst+e.nmv,armor:r.armor+e.sanctuary,hp:e.hpWithFortitude,damage:e.dmgWithChiStrike-a})}var Of=V([Jp,Ke,mt],Zp);var jp=V([Ke,ct],([e,t],r)=>{if(!e||!t)return;let o=Io(t.attackValue,e.nightmareVisageLevel),n=Oo(t.defenseValue,e.constitutionLevel),l=Go(n,e.fortitudeLevel),a=t.hpValue+l,m=qo(a,e.chiStrikeLevel),c=t.damageValue+m;r({attackWithNmv:t.attackValue-o,chiStrike:e.chiStrikeLevel,cloak:e.cloakLevel?"Yes":"No",dmgWithChiStrike:c,defWithConst:n,hpWithFortitude:a,nmv:o,sanctuary:Po(t.armorValue,e.sanctuaryLevel)})});function ed([e,t,r],o){if(!e||!t||!r)return;let n=Fo(t.attackWithNmv,e.Flinch),l=t.defWithConst+t.nmv,a=$o(t.dmgWithChiStrike,e.Terrorize);o({attack:t.attackWithNmv-n,dc225:Wi(l,225),dc175:Wi(l,175),defense:l,armor:r.armorValue+t.sanctuary,hp:t.hpWithFortitude,damage:t.dmgWithChiStrike-a})}var Wf=V([Ki,jp,ct],ed);var Kf=V(Mo,(e,t)=>{t({noOfRelics:e?.noOfRelics??"",leadDefenderBonus:e?.leadDefenderBonus??""})}),Uf=V(Ke,(e,t)=>{if(!e)return t("");e.cloakLevel?t("Yes"):t("No")}),zf=V(ct,(e,t)=>{t({armorValue:e?.armorValue??"",attackValue:e?.attackValue??"",damageValue:e?.damageValue??"",cloaked:e?.cloaked??"",defenseValue:e?.defenseValue??"",hpValue:e?.hpValue??""})}),Yf=V(No,(e,t)=>{t(e?.length??"")}),Qf=V(Wf,(e,t)=>{t({attack:e?.attack??"",dc225:e?.dc225??"",dc175:e?.dc175??"",defense:e?.defense??"",armor:e?.armor??"",hp:e?.hp??"",damage:e?.damage??""})}),Xf=e=>({attack:e?.attack??"",defense:e?.defense??"",armor:e?.armor??"",hp:e?.hp??"",damage:e?.damage??""}),Jf=V(mt,(e,t)=>{t(Xf(e))}),Zf=V(Of,(e,t)=>{t(Xf(e))});function jf(e,t,r){let o=e.slice();return o[6]=t[r].id,o[7]=t[r].username,o}function eu(e){let t,r=e[7]+"",o,n,l=" ",a;return{c(){t=f("a"),o=k(r),a=k(l),s(t,"href",n=""+(Ln+e[6])),s(t,"class","svelte-3priew")},m(m,c){x(m,t,c),i(t,o),x(m,a,c)},p(m,c){c&1&&r!==(r=m[7]+"")&&y(o,r),c&1&&n!==(n=""+(Ln+m[6]))&&s(t,"href",n)},d(m){m&&b(t),m&&b(a)}}}function td(e){let t=(e[0].length||"")+"",r,o,n,l=e[0],a=[];for(let m=0;m<l.length;m+=1)a[m]=eu(jf(e,l,m));return{c(){r=k(t),o=k(` Offline guild members not at relic:
`),n=f("div");for(let m=0;m<a.length;m+=1)a[m].c();s(n,"class","missing svelte-3priew")},m(m,c){x(m,r,c),x(m,o,c),x(m,n,c);for(let u=0;u<a.length;u+=1)a[u].m(n,null)},p(m,[c]){if(c&1&&t!==(t=(m[0].length||"")+"")&&y(r,t),c&1){l=m[0];let u;for(u=0;u<l.length;u+=1){let d=jf(m,l,u);a[u]?a[u].p(d,c):(a[u]=eu(d),a[u].c(),a[u].m(n,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=l.length}},i:W,o:W,d(m){m&&b(r),m&&b(o),m&&b(n),Ne(a,m)}}}function rd(e,t,r){let{members:o=[]}=t,n=[],l=[({username:u})=>!o.includes(u),({last_login:u})=>u,({last_login:u})=>u<Tl(),({last_login:u})=>u>Vl(),({level:u})=>u<400||u>421,({level:u})=>u<441||u>450],a=u=>l.every(d=>d(u)),m=({username:u},{username:d})=>Al(u,d);async function c(u){let d=await ss(u);r(0,n=d.filter(a).sort(m))}return We.subscribe(u=>{c(u)}),e.$$set=u=>{"members"in u&&r(1,o=u.members)},[n,o]}var Ui=class extends he{constructor(t){super(),de(this,t,rd,td,pe,{members:1})}},tu=Ui;function ru(e){let t,r,o;return r=new Pf({props:{members:e[10]}}),r.$on("buffBatch",e[11]),{c(){t=f("div"),Je(r.$$.fragment),s(t,"class","buff-links svelte-1qul0wc")},m(n,l){x(n,t,l),Ze(r,t,null),o=!0},p:W,i(n){o||(O(r.$$.fragment,n),o=!0)},o(n){X(r.$$.fragment,n),o=!1},d(n){n&&b(t),je(r)}}}function od(e){let t,r,o,n,l,a,m,c;return{c(){t=f("div"),t.textContent="Processing",r=h(),o=f("div"),n=k(e[2]),l=h(),a=f("div"),a.textContent="Assumptions",m=h(),c=f("div"),c.textContent="Above calculations include Constitution, Fortitude, Nightmare Visage, Chi Strike, Sanctuary, Terrorize and Flinch bonus calculations (in that order) on both the defending group and attacking group.",s(t,"class","b-top svelte-1qul0wc"),s(o,"class","proc-stat svelte-1qul0wc"),s(a,"class","b-top svelte-1qul0wc"),s(c,"class","assume svelte-1qul0wc")},m(u,d){x(u,t,d),x(u,r,d),x(u,o,d),i(o,n),x(u,l,d),x(u,a,d),x(u,m,d),x(u,c,d)},p(u,d){d&4&&y(n,u[2])},d(u){u&&b(t),u&&b(r),u&&b(o),u&&b(l),u&&b(a),u&&b(m),u&&b(c)}}}function nd(e){let t,r,o;return{c(){t=f("button"),t.textContent="Fetch Stats",s(t,"class","custombutton"),s(t,"type","button")},m(n,l){x(n,t,l),r||(o=wl(t,"click",e[12]),r=!0)},p:W,d(n){n&&b(t),r=!1,o()}}}function ou(e){let t,r,o,n,l,a,m=e[3].noOfRelics+"",c,u,d,B,E=e[3].leadDefenderBonus+"",j,ce,z,A,Te,G,q,ie,C,yt,Dt,xt=e[5].attackValue+"",en,ka,bt,St,Bt=e[6].attack+"",tn,Ca,At,Lt,_t=e[5].defenseValue+"",rn,ya,Tt,Vt,Ht=e[6].defense+"",on,Da,Mt,Et,Nt=e[5].armorValue+"",nn,xa,Rt,It,Gt=e[6].armor+"",an,ba,qt,Pt,Ft=e[5].damageValue+"",ln,Sa,$t,Ot,Wt=e[6].damage+"",sn,Ba,Kt,Ut,zt=e[5].hpValue+"",fn,Aa,Yt,Qt,Xt=e[6].hp+"",un,La,Jt,Zt,jt=e[5].cloaked+"",cn,_a,er,tr,mn,pn,Y,rr,Ta,ee,or,nr,ir=e[6].dc225+"",dn,Va,ar,lr,sr=e[6].dc175+"",hn,Ha,fr,Ma,ur,Ea,S,cr,mr,pr=e[8].attack+"",gn,Na,dr,hr,gr=e[9].attack+"",vn,Ra,vr,wr,kr=e[8].defense+"",wn,Ia,Cr,yr,Dr=e[9].defense+"",kn,Ga,xr,br,Sr=e[8].armor+"",Cn,qa,Br,Ar,Lr=e[9].armor+"",yn,Pa,_r,Tr,Vr=e[8].damage+"",Dn,Fa,Hr,Mr,Er=e[9].damage+"",xn,$a,Nr,Rr,Ir=e[8].hp+"",bn,Oa,Gr,qr,Pr=e[9].hp+"",Sn,Bn,Ye,Ve,L;return Ve=new tu({props:{members:e[10]}}),{c(){t=f("div"),r=f("div"),r.textContent="Defending Guild Stats",o=h(),n=f("div"),l=f("div"),l.textContent="Relic Count:",a=f("div"),c=k(m),u=h(),d=f("div"),d.textContent="Lead Defender Bonus:",B=f("div"),j=k(E),ce=h(),z=f("div"),z.textContent="Lead Defender Cloaked:",A=f("div"),Te=k(e[4]),G=h(),q=f("div"),q.textContent="Other Defender Stats",ie=h(),C=f("div"),yt=f("div"),yt.textContent="Raw Attack:",Dt=f("div"),en=k(xt),ka=h(),bt=f("div"),bt.textContent="Attack w/ buffs:",St=f("div"),tn=k(Bt),Ca=h(),At=f("div"),At.textContent="Raw Defense:",Lt=f("div"),rn=k(_t),ya=h(),Tt=f("div"),Tt.textContent="Defense w/buffs:",Vt=f("div"),on=k(Ht),Da=h(),Mt=f("div"),Mt.textContent="Raw Armor:",Et=f("div"),nn=k(Nt),xa=h(),Rt=f("div"),Rt.textContent="Armor w/ buffs:",It=f("div"),an=k(Gt),ba=h(),qt=f("div"),qt.textContent="Raw Damage:",Pt=f("div"),ln=k(Ft),Sa=h(),$t=f("div"),$t.textContent="Damage w/ buffs:",Ot=f("div"),sn=k(Wt),Ba=h(),Kt=f("div"),Kt.textContent="Raw HP:",Ut=f("div"),fn=k(zt),Aa=h(),Yt=f("div"),Yt.textContent="HP w/ buffs:",Qt=f("div"),un=k(Xt),La=h(),Jt=f("div"),Jt.textContent="Cloaked:",Zt=f("div"),cn=k(jt),_a=h(),er=f("div"),er.textContent="Processed:",tr=f("div"),mn=k(e[7]),pn=h(),Y=f("div"),rr=f("div"),rr.textContent="Adjusted Defense Values",Ta=h(),ee=f("div"),or=f("div"),or.textContent="DC225:",nr=f("div"),dn=k(ir),Va=h(),ar=f("div"),ar.textContent="DC175:",lr=f("div"),hn=k(sr),Ha=h(),fr=f("div"),fr.textContent="\xA0",Ma=h(),ur=f("div"),ur.textContent="Attacking Group Stats",Ea=h(),S=f("div"),cr=f("div"),cr.textContent="Raw Group Attack:",mr=f("div"),gn=k(pr),Na=h(),dr=f("div"),dr.textContent="Group Attack w/ buffs:",hr=f("div"),vn=k(gr),Ra=h(),vr=f("div"),vr.textContent="Raw Group Defense:",wr=f("div"),wn=k(kr),Ia=h(),Cr=f("div"),Cr.textContent="Group Defense w/ buffs:",yr=f("div"),kn=k(Dr),Ga=h(),xr=f("div"),xr.textContent="Raw Group Armor:",br=f("div"),Cn=k(Sr),qa=h(),Br=f("div"),Br.textContent="Group Armor w/ buffs:",Ar=f("div"),yn=k(Lr),Pa=h(),_r=f("div"),_r.textContent="Raw Group Damage:",Tr=f("div"),Dn=k(Vr),Fa=h(),Hr=f("div"),Hr.textContent="Group Damage w/ buffs:",Mr=f("div"),xn=k(Er),$a=h(),Nr=f("div"),Nr.textContent="Raw Group HP:",Rr=f("div"),bn=k(Ir),Oa=h(),Gr=f("div"),Gr.textContent="Group HP w/ buffs:",qr=f("div"),Sn=k(Pr),Bn=h(),Ye=f("div"),Je(Ve.$$.fragment),s(r,"class","b-top svelte-1qul0wc"),s(l,"class","svelte-1qul0wc"),s(a,"class","svelte-1qul0wc"),s(d,"class","svelte-1qul0wc"),s(B,"class","svelte-1qul0wc"),s(z,"class","svelte-1qul0wc"),s(A,"class","svelte-1qul0wc"),s(n,"class","stat-grid svelte-1qul0wc"),s(q,"class","b-top svelte-1qul0wc"),s(yt,"class","svelte-1qul0wc"),s(Dt,"class","svelte-1qul0wc"),s(bt,"class","svelte-1qul0wc"),s(St,"class","svelte-1qul0wc"),s(At,"class","svelte-1qul0wc"),s(Lt,"class","svelte-1qul0wc"),s(Tt,"class","svelte-1qul0wc"),s(Vt,"class","svelte-1qul0wc"),s(Mt,"class","svelte-1qul0wc"),s(Et,"class","svelte-1qul0wc"),s(Rt,"class","svelte-1qul0wc"),s(It,"class","svelte-1qul0wc"),s(qt,"class","svelte-1qul0wc"),s(Pt,"class","svelte-1qul0wc"),s($t,"class","svelte-1qul0wc"),s(Ot,"class","svelte-1qul0wc"),s(Kt,"class","svelte-1qul0wc"),s(Ut,"class","svelte-1qul0wc"),s(Yt,"class","svelte-1qul0wc"),s(Qt,"class","svelte-1qul0wc"),s(Jt,"class","svelte-1qul0wc"),s(Zt,"class","svelte-1qul0wc"),s(er,"class","svelte-1qul0wc"),s(tr,"class","svelte-1qul0wc"),s(C,"class","stat-grid svelte-1qul0wc"),s(t,"class","middle svelte-1qul0wc"),s(rr,"class","b-top svelte-1qul0wc"),s(or,"class","svelte-1qul0wc"),s(nr,"class","svelte-1qul0wc"),s(ar,"class","svelte-1qul0wc"),s(lr,"class","svelte-1qul0wc"),s(fr,"class","svelte-1qul0wc"),s(ee,"class","stat-grid svelte-1qul0wc"),s(ur,"class","b-top svelte-1qul0wc"),s(cr,"class","svelte-1qul0wc"),s(mr,"class","svelte-1qul0wc"),s(dr,"class","svelte-1qul0wc"),s(hr,"class","svelte-1qul0wc"),s(vr,"class","svelte-1qul0wc"),s(wr,"class","svelte-1qul0wc"),s(Cr,"class","svelte-1qul0wc"),s(yr,"class","svelte-1qul0wc"),s(xr,"class","svelte-1qul0wc"),s(br,"class","svelte-1qul0wc"),s(Br,"class","svelte-1qul0wc"),s(Ar,"class","svelte-1qul0wc"),s(_r,"class","svelte-1qul0wc"),s(Tr,"class","svelte-1qul0wc"),s(Hr,"class","svelte-1qul0wc"),s(Mr,"class","svelte-1qul0wc"),s(Nr,"class","svelte-1qul0wc"),s(Rr,"class","svelte-1qul0wc"),s(Gr,"class","svelte-1qul0wc"),s(qr,"class","svelte-1qul0wc"),s(S,"class","stat-grid svelte-1qul0wc"),s(Y,"class","right svelte-1qul0wc"),s(Ye,"class","bottom b-top svelte-1qul0wc")},m(v,D){x(v,t,D),i(t,r),i(t,o),i(t,n),i(n,l),i(n,a),i(a,c),i(n,u),i(n,d),i(n,B),i(B,j),i(n,ce),i(n,z),i(n,A),i(A,Te),i(t,G),i(t,q),i(t,ie),i(t,C),i(C,yt),i(C,Dt),i(Dt,en),i(C,ka),i(C,bt),i(C,St),i(St,tn),i(C,Ca),i(C,At),i(C,Lt),i(Lt,rn),i(C,ya),i(C,Tt),i(C,Vt),i(Vt,on),i(C,Da),i(C,Mt),i(C,Et),i(Et,nn),i(C,xa),i(C,Rt),i(C,It),i(It,an),i(C,ba),i(C,qt),i(C,Pt),i(Pt,ln),i(C,Sa),i(C,$t),i(C,Ot),i(Ot,sn),i(C,Ba),i(C,Kt),i(C,Ut),i(Ut,fn),i(C,Aa),i(C,Yt),i(C,Qt),i(Qt,un),i(C,La),i(C,Jt),i(C,Zt),i(Zt,cn),i(C,_a),i(C,er),i(C,tr),i(tr,mn),x(v,pn,D),x(v,Y,D),i(Y,rr),i(Y,Ta),i(Y,ee),i(ee,or),i(ee,nr),i(nr,dn),i(ee,Va),i(ee,ar),i(ee,lr),i(lr,hn),i(ee,Ha),i(ee,fr),i(Y,Ma),i(Y,ur),i(Y,Ea),i(Y,S),i(S,cr),i(S,mr),i(mr,gn),i(S,Na),i(S,dr),i(S,hr),i(hr,vn),i(S,Ra),i(S,vr),i(S,wr),i(wr,wn),i(S,Ia),i(S,Cr),i(S,yr),i(yr,kn),i(S,Ga),i(S,xr),i(S,br),i(br,Cn),i(S,qa),i(S,Br),i(S,Ar),i(Ar,yn),i(S,Pa),i(S,_r),i(S,Tr),i(Tr,Dn),i(S,Fa),i(S,Hr),i(S,Mr),i(Mr,xn),i(S,$a),i(S,Nr),i(S,Rr),i(Rr,bn),i(S,Oa),i(S,Gr),i(S,qr),i(qr,Sn),x(v,Bn,D),x(v,Ye,D),Ze(Ve,Ye,null),L=!0},p(v,D){(!L||D&8)&&m!==(m=v[3].noOfRelics+"")&&y(c,m),(!L||D&8)&&E!==(E=v[3].leadDefenderBonus+"")&&y(j,E),(!L||D&16)&&y(Te,v[4]),(!L||D&32)&&xt!==(xt=v[5].attackValue+"")&&y(en,xt),(!L||D&64)&&Bt!==(Bt=v[6].attack+"")&&y(tn,Bt),(!L||D&32)&&_t!==(_t=v[5].defenseValue+"")&&y(rn,_t),(!L||D&64)&&Ht!==(Ht=v[6].defense+"")&&y(on,Ht),(!L||D&32)&&Nt!==(Nt=v[5].armorValue+"")&&y(nn,Nt),(!L||D&64)&&Gt!==(Gt=v[6].armor+"")&&y(an,Gt),(!L||D&32)&&Ft!==(Ft=v[5].damageValue+"")&&y(ln,Ft),(!L||D&64)&&Wt!==(Wt=v[6].damage+"")&&y(sn,Wt),(!L||D&32)&&zt!==(zt=v[5].hpValue+"")&&y(fn,zt),(!L||D&64)&&Xt!==(Xt=v[6].hp+"")&&y(un,Xt),(!L||D&32)&&jt!==(jt=v[5].cloaked+"")&&y(cn,jt),(!L||D&128)&&y(mn,v[7]),(!L||D&64)&&ir!==(ir=v[6].dc225+"")&&y(dn,ir),(!L||D&64)&&sr!==(sr=v[6].dc175+"")&&y(hn,sr),(!L||D&256)&&pr!==(pr=v[8].attack+"")&&y(gn,pr),(!L||D&512)&&gr!==(gr=v[9].attack+"")&&y(vn,gr),(!L||D&256)&&kr!==(kr=v[8].defense+"")&&y(wn,kr),(!L||D&512)&&Dr!==(Dr=v[9].defense+"")&&y(kn,Dr),(!L||D&256)&&Sr!==(Sr=v[8].armor+"")&&y(Cn,Sr),(!L||D&512)&&Lr!==(Lr=v[9].armor+"")&&y(yn,Lr),(!L||D&256)&&Vr!==(Vr=v[8].damage+"")&&y(Dn,Vr),(!L||D&512)&&Er!==(Er=v[9].damage+"")&&y(xn,Er),(!L||D&256)&&Ir!==(Ir=v[8].hp+"")&&y(bn,Ir),(!L||D&512)&&Pr!==(Pr=v[9].hp+"")&&y(Sn,Pr)},i(v){L||(O(Ve.$$.fragment,v),L=!0)},o(v){X(Ve.$$.fragment,v),L=!1},d(v){v&&b(t),v&&b(pn),v&&b(Y),v&&b(Bn),v&&b(Ye),je(Ve)}}}function id(e){let t,r,o,n,l,a=e[0].is_owner&&ru(e);function m(B,E){return B[1]?od:nd}let c=m(e,-1),u=c(e),d=e[1]&&ou(e);return{c(){t=f("div"),r=f("div"),a&&a.c(),o=h(),u.c(),n=h(),d&&d.c(),s(r,"class","left svelte-1qul0wc"),s(t,"class","body svelte-1qul0wc")},m(B,E){x(B,t,E),i(t,r),a&&a.m(r,null),i(r,o),u.m(r,null),i(t,n),d&&d.m(t,null),l=!0},p(B,[E]){B[0].is_owner?a?(a.p(B,E),E&1&&O(a,1)):(a=ru(B),a.c(),O(a,1),a.m(r,o)):a&&(Qe(),X(a,1,1,()=>{a=null}),Xe()),c===(c=m(B,E))&&u?u.p(B,E):(u.d(1),u=c(B),u&&(u.c(),u.m(r,null))),B[1]?d?(d.p(B,E),E&2&&O(d,1)):(d=ou(B),d.c(),O(d,1),d.m(t,null)):d&&(Qe(),X(d,1,1,()=>{d=null}),Xe())},i(B){l||(O(a),O(d),l=!0)},o(B){X(a),X(d),l=!1},d(B){B&&b(t),a&&a.d(),u.d(),d&&d.d()}}}function ad(e,t,r){let o,n,l,a,m,c,u,d;fe(e,Ff,A=>r(2,o=A)),fe(e,Kf,A=>r(3,n=A)),fe(e,Uf,A=>r(4,l=A)),fe(e,zf,A=>r(5,a=A)),fe(e,Qf,A=>r(6,m=A)),fe(e,Yf,A=>r(7,c=A)),fe(e,Jf,A=>r(8,u=A)),fe(e,Zf,A=>r(9,d=A));let{relicData:B={}}=t,E=B.defenders.map(A=>A.player_name),j=!1;function ce(A){se("relic",A.detail)}function z(){se("relic","fetchStats"),r(1,j=!0),We.set(B.controlled_by.guild_id),Eo.set(E),Ro.set(GameData.player().hasGroup),Wo.set(GameData.player().buffs)}return Cl(()=>{r(1,j=!1),We.set(0),Eo.set([]),Ro.set(0),Wo.set([])}),e.$$set=A=>{"relicData"in A&&r(0,B=A.relicData)},[B,j,o,n,l,a,m,c,u,d,E,ce,z]}var zi=class extends he{constructor(t){super(),de(this,t,ad,id,pe,{relicData:0})}},nu=zi;var Yi=0;function ld(e,t){Yi&&Yi.$destroy(),Yi=new nu({props:{relicData:t},target:e})}function sd(e,t){t?.response?.data?.defenders?.length>0&&ld(T("dialog-relic"),t.response.data)}function Qi(){$.subscribe(al,sd)}function fd(e,t){t==="ACT_REPAIR"&&GameData.fetch(fl+me+Kr+Q)}function Xi(){$.subscribe(rl,fd)}var Ji=0;function iu(e){$("#statbar-gold").css("background-color",e)}function au(){$("#HelperSendTotal").html(ge(N("currentGoldSentTotal"))),Number(GameData.player().gold)>Ji?iu("red"):iu("inherit")}function ud(){return`<dt class="stat-gold-sendTo">Send To:</dt><dd id="HelperSendTo">${N("goldRecipient")}</dd><dt class="stat-gold-sendAmt">Amount:</dt><dd id="HelperSendAmt">${ge(Ji)}</dd><dt class="stat-gold-sendTo">Send?</dt><dd><input id="HelperSendGold" value="Send!" class="custombutton" type="submit"><input type="hidden" id="xc" value=""</dd><dt class="stat-gold-sendTotal">Total Sent:</dt><dd id="HelperSendTotal">${ge(N("currentGoldSentTotal"))}</dd>`}function cd(){Ji=N("goldAmount"),$("#statbar-gold-tooltip-general").append(ud()),$("#HelperSendGold").on("click",Gl),au(),$.subscribe(el,au)}function Zi(){Il(),Rl()&&cd()}var dt=0,ht=0,Ko=0,Ue=0,ji=0,Uo=0;function md(){return ot({a:14,d:0,id:dt.id,item_id:dt.itemId})}function pd(e){let t=e.response.response,r=e.response.msg,o=r;if(t!==0){let n=r.indexOf("<");n!==-1&&(o=r.substring(0,n))}else o=`You purchased ${e.response.data.name} for ${ge(e.response.data.cost)} gold.`;Fr(Uo,`${o}<br>`)}function dd(){GameData.doAction(14,3,{id:dt.id,item_id:dt.itemId},0),Ko.close()}function hd(){let e=us(ji.value);if(!e)return;let t=[];for(let r=1;r<e;r+=1)t.push(md().then(pd));fs(t,dd)}function gd(){Ue=H({className:"fshClear",textContent:"Select how many to quick-buy:"}),ji=no({id:"buyAmount",className:"fshNumberInput",min:1,max:99,value:1,type:"number"}),g(Ue,ji);let e=ve({textContent:"Quick-buy"});P(e,hd),g(Ue,e),Uo=H(),g(Ue,Uo),g(ht,Ue)}function vd(){return ht||T("shopDialogConfirm")}function wd(){return Ko||$(ht).data("hcsWorldDialogShopConfirm")}function kd(){Ue?_("",Uo):gd()}function Cd(e,t){dt=t,ht=vd(),ht&&(Ko=wd(),Ko&&kd())}function ea(){$.subscribe(tl,Cd)}function lu(e){return e.numberOfCreatureHitsTillDead-e.numberOfHitsRequired<=1?", dies on miss":", survives a miss"}function su(e,t){return t==="-"?e:e==="-"||e>t?"-":e}var yd=[[e=>e.playerHits==="-"&&e.creatureHits==="-",()=>"Unresolved"],[e=>e.playerHits==="-",()=>"Player dies"],[e=>e.playerHits===1,e=>`Player 1 hits${lu(e)}`],[e=>e.playerHits>1,e=>`Player > 1 hits${lu(e)}`]];function Dd(e,t){return t[0](e)}function xd(e){let t=yd.find(w(Dd,e));return t?t[1](e):"Unknown"}function ta(e){e.playerHits=su(e.numberOfHitsRequired,e.numberOfCreatureHitsTillDead),e.creatureHits=su(e.numberOfCreatureHitsTillDead,e.numberOfHitsRequired),e.fightStatus=xd(e)}function ne(e,t,r){return e.callback.groupExists?t:r}function gt(e,t,r,o){t>0&&(e.extraNotes+=`${r} = ${Math.floor(o*t*.001)}<br>`)}var bd=e=>ne(e,e.callback.groupArmorValue,e.player.armorValue);function Sd(e){let t=bd(e);e.overallArmorValue=t+Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}function Bd(e){gt(e,e.player.sanctuaryLevel,"Sanc Bonus Armor",e.player.armorValue)}function Ad(e){e.terrorizeEffect=Math.floor(e.creature.damage*e.player.terrorizeLevel*.001)}function Ld(e){e.player.terrorizeLevel>0&&(e.extraNotes+=`Terrorize Creature Damage Effect = ${e.terrorizeEffect*-1}<br>`)}function _d(e){e.creatureDamageDone=Math.ceil(e.generalVariable*e.creature.damage-e.overallArmorValue+e.overallHPValue)}function Td(e){let t=e.generalVariable*e.creature.damage;t<e.overallArmorValue?e.numberOfCreatureHitsTillDead=e.overallHPValue:e.numberOfCreatureHitsTillDead=Math.ceil(e.overallHPValue/(t-e.overallArmorValue))}function Vd(e){e.creatureHitByHowMuch>=0?Td(e):e.numberOfCreatureHitsTillDead="-"}function ra(e){Sd(e),Bd(e),Ad(e),Ld(e),e.creature.damage-=e.terrorizeEffect,_d(e),Vd(e)}var Hd=e=>ne(e,e.callback.groupAttackValue,e.player.attackValue);function fu(e){return Math.floor(e.creature.defense*e.player.darkCurseLevel*Ur)}function Md(e){let t=e.creature.defense-fu(e);return e.combatEvaluatorBias===3?e.overallAttackValue-Math.ceil(t)-50:e.overallAttackValue-Math.ceil(e.attackVariable*t)}function oa(e){let t=Hd(e);e.player.darkCurseLevel>0&&(e.extraNotes+=`DC Bonus Attack = ${fu(e)}<br>`),e.nightmareVisageAttackMovedToDefense=Math.floor((t+e.counterAttackBonusAttack)*e.player.nightmareVisageLevel*.0025),e.player.nightmareVisageLevel>0&&(e.extraNotes+=`NMV Attack moved to Defense = ${e.nightmareVisageAttackMovedToDefense}<br>`),e.overallAttackValue=t+e.counterAttackBonusAttack-e.nightmareVisageAttackMovedToDefense,e.hitByHowMuch=Md(e)}function Ed(e){return e.player.counterAttackLevel>0&&e.numberOfHitsRequired===1}var uu=(e,t,r)=>Math.max(Math.ceil((e-t+1)/r/.0025),0);function mu(e){e.lowestCALevelToStillHit=uu(e.counterAttackBonusAttack,e.hitByHowMuch,e.player.attackValue),e.lowestCALevelToStillKill=uu(e.counterAttackBonusDamage,e.damageDone,e.player.damageValue)}function Nd(e){return e.player.counterAttackLevel>0?Math.ceil((1+e.player.doublerLevel/50)*.0025*e.lowestFeasibleCALevel):0}function Rd(e){e.extraAttackAtLowestFeasibleCALevel=Math.floor(e.player.attackValue*.0025*e.lowestFeasibleCALevel),e.extraDamageAtLowestFeasibleCALevel=Math.floor(e.player.damageValue*.0025*e.lowestFeasibleCALevel),e.extraNotes+=`Extra CA Att/Dam at this lowered CA level = ${e.extraAttackAtLowestFeasibleCALevel} / ${e.extraDamageAtLowestFeasibleCALevel}<br>`}function Id(e){mu(e),e.lowestFeasibleCALevel=Math.max(e.lowestCALevelToStillHit,e.lowestCALevelToStillKill),e.extraNotes+=`Lowest CA to still 1-hit this creature = ${e.lowestFeasibleCALevel}<br>`,e.lowestFeasibleCALevel!==0&&Rd(e),e.extraStaminaPerHitAtLowestFeasibleCALevel=Nd(e),e.extraStaminaPerHitAtLowestFeasibleCALevel<e.extraStaminaPerHit?e.extraNotes+=`Extra Stam Used at this lowered CA level = ${e.extraStaminaPerHitAtLowestFeasibleCALevel}<br>`:e.extraNotes+="No reduction of stam used at the lower CA level<br>"}function Gd(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired!==1}function cu(e,t,r){e[t]>203?e.extraNotes+=`Even with CA203 you cannot ${r} this creature<br>`:e[t]!==0&&(e.extraNotes+=`You need a minimum of CA${e[t]} to ${r} this creature<br>`)}function qd(e){mu(e),cu(e,"lowestCALevelToStillHit","hit"),cu(e,"lowestCALevelToStillKill","1-hit kill")}function na(e){Ed(e)&&Id(e),Gd(e)&&qd(e)}var Pd=e=>ne(e,e.callback.groupHPValue,e.player.hpValue),Fd=e=>ne(e,e.callback.groupDamageValue,e.player.damageValue);function $d(e){let t=Pd(e),{fortitudeLevel:r}=e.player;e.fortitudeExtraHPs=Math.floor(t*r*.001),r>0&&(e.extraNotes+=`Fortitude Bonus HP = ${e.fortitudeExtraHPs}<br>`),e.overallHPValue=t+e.fortitudeExtraHPs}function Od(e){let{chiStrikeLevel:t}=e.player;e.chiStrikeExtraDamage=Math.floor(e.overallHPValue*t*.001),t>0&&(e.extraNotes+=`Chi Strike Bonus Damage = ${e.chiStrikeExtraDamage}<br>`)}function ia(e){if($d(e),Od(e),e.overallDamageValue=Fd(e)+e.deathDealerBonusDamage+e.counterAttackBonusDamage+e.holyFlameBonusDamage+e.chiStrikeExtraDamage,e.damageDone=Math.floor(e.overallDamageValue-(e.generalVariable*e.creature.armor+e.hpVariable*e.creature.hp)),e.hitByHowMuch>0){let t=1;e.overallDamageValue>=e.generalVariable*e.creature.armor&&(t=e.overallDamageValue-e.generalVariable*e.creature.armor),e.numberOfHitsRequired=Math.ceil(e.hpVariable*e.creature.hp/t)}else e.numberOfHitsRequired="-"}var du=e=>ne(e,e.callback.groupDefenseValue,e.player.defenseValue),hu=e=>Math.floor(du(e)*e.player.constitutionLevel*.001);function Wd(e){e.player.constitutionLevel>0&&(e.extraNotes+=`Constitution Bonus Defense = ${hu(e)}<br>`)}function Kd(e){gt(e,e.player.flinchLevel,"Flinch Bonus Attack Reduction",e.creature.attack)}var pu=e=>e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue;function aa(e){e.overallDefenseValue=du(e)+hu(e)+e.nightmareVisageAttackMovedToDefense,Wd(e),Kd(e),e.creatureHitByHowMuch=Math.floor(e.attackVariable*pu(e)),e.combatEvaluatorBias===3&&(e.creatureHitByHowMuch=Math.floor(pu(e)-50))}function Ud(e){e.player.superEliteSlayerLevel>0&&(e.extraNotes+=`SES Stat Reduction Multiplier = ${e.player.superEliteSlayerMultiplier}<br>`)}function zd(e){e.holyFlameBonusDamage=0,e.creature.class==="Undead"&&(e.holyFlameBonusDamage=Math.max(Math.floor((e.player.damageValue-e.creature.armor)*e.player.holyFlameLevel*.002),0),e.player.holyFlameLevel>0&&(e.extraNotes+=`HF Bonus Damage = ${e.holyFlameBonusDamage}<br>`))}function Yd(e){e.deathDealerBonusDamage=Math.floor(e.player.damageValue*(Math.min(Math.floor(e.player.killStreakValue/5)*.01*e.player.deathDealerLevel,20)/100))}function Qd(e){e.counterAttackBonusAttack=Math.floor(e.player.attackValue*.0025*e.player.counterAttackLevel),e.counterAttackBonusDamage=Math.floor(e.player.damageValue*.0025*e.player.counterAttackLevel)}function Xd(e){e.extraStaminaPerHit=0,e.player.counterAttackLevel>0&&(e.extraStaminaPerHit=Math.ceil((1+e.player.doublerLevel/50)*.0025*e.player.counterAttackLevel))}function Jd(e){e.player.deathDealerLevel>0&&(e.extraNotes+=`DD Bonus Damage = ${e.deathDealerBonusDamage}<br>`)}function Zd(e){e.player.counterAttackLevel>0&&(e.extraNotes+=`CA Bonus Attack/Damage = ${e.counterAttackBonusAttack} / ${e.counterAttackBonusDamage}<br>CA Extra Stam Used = ${e.extraStaminaPerHit}<br>`)}function la(e){e.extraNotes="",Ud(e),zd(e),Yd(e),Qd(e),Xd(e),Jd(e),Zd(e)}var jd=e=>e.creatureHitByHowMuch>=0?"Yes":"No",eh=e=>e.hitByHowMuch>0?"Yes":"No",th=e=>e.callback.groupExists?"Group ":"",U=e=>`<span style="color:#333333">${e}</span>`,zo=e=>`<tr>${e}</tr>`,sa=(e,t)=>`<td${t%2?"":' class="fshRight"'}>${e}</td>`,vt=e=>zo(e.map(sa).join("")),rh=e=>zo(`<td bgcolor="#CD9E4B" colspan="4" align="center">${th(e)}Combat Evaluation</td>`),oh=e=>vt([U("Will I hit it?"),eh(e),U("Extra Attack:"),`( ${e.hitByHowMuch} )`]),nh=e=>vt([U("# Hits to kill it?"),e.numberOfHitsRequired,U("Extra Damage:"),`( ${e.damageDone} )`]),ih=e=>vt([U("Will I be hit?"),jd(e),U("Extra Defense:"),`( ${-1*e.creatureHitByHowMuch} )`]),ah=e=>vt([U("# Hits to kill me?"),e.numberOfCreatureHitsTillDead,U("Extra Armor + HP:"),`( ${-1*e.creatureDamageDone} )`]),lh=e=>vt([U("# Player Hits?"),e.playerHits,U("# Creature Hits?"),e.creatureHits]),sh=e=>zo(`${sa(U("Fight Status:"),0)}<td colspan="3"><span>${e.fightStatus}</span></td>`),fh=e=>zo(`${sa(U("Notes:"),0)}<td colspan="3"><span style="font-size:x-small;">${e.extraNotes}</span></td>`);function fa(e){return`<table width="100%"><tbody>${rh(e)}${oh(e)}${nh(e)}${ih(e)}${ah(e)}${lh(e)}${sh(e)}${fh(e)}</tbody></table>`}var Yo=0,Qo=0,wt=0;function uh(e){if(!Yo){let t=Ee("body",e);t.length===1&&([Yo]=t)}}function gu(){return _e(Qo)?"Remove from do not kill list":"Add to the do not kill list"}function vu(){_(gu(),wt)}function ch(){let e=p.doNotKillList.indexOf(Qo);e===-1?p.doNotKillList.push(Qo):p.doNotKillList.splice(e,1),vu(),J("doNotKillList",p.doNotKillList.join()),Oe()}function mh(){wt=ve({className:"fshBl",textContent:gu(),type:"button"});let e=H({className:"description",innerHTML:'<span class="ui-helper-hidden-accessible"><input type="text"></span>'});g(e,wt),g(Yo,e),P(wt,ch)}function ph(){wt?vu():mh()}function ua(e,t){uh(t),Yo&&(Qo=Me(e),ph())}var ze=0,kt=0,Xo=0,Jo=0;function dh(){ze||(ze=T("dialog-viewcreature"))}function hh(){kt||(kt=H(),g(ze,kt),g(ze,H({innerHTML:'<span class="fshFooter">*Does include CA, DD, HF, DC, Flinch, Super Elite Slayer, NMV, Sanctuary, Constitution, Fortitude, Chi Strike and Terrorize (if active) and allow for randomness (1.1053). Constitution, NMV, Fortitude and Chi Strike apply to group stats.</span>'})))}function wu(){Xo||(hh(),Xo=H(),g(kt,Xo))}function gh(){Jo||(wu(),Jo=H(),g(kt,Jo))}function ku(e){wu(),F(e,Xo)}function Cu(e){gh(),F(e,Jo)}function vh(e,t,r){r===3&&(t.attack-=Math.ceil(t.attack*e),t.defense-=Math.ceil(t.defense*e),t.armor-=Math.ceil(t.armor*e),t.damage-=Math.ceil(t.damage*e),t.hp-=Math.ceil(t.hp*e))}function wh(e,t){let r={name:e.name,class:e.creature_class,attack:Number(e.attack),defense:Number(e.defense),armor:Number(e.armor),damage:Number(e.damage),hp:Number(e.hp)};return vh(t,r,e.type),r}function kh(e){e.combatEvaluatorBias=p.combatEvaluatorBias,e.attackVariable=1.1053,e.generalVariable=p.generalVariable,e.hpVariable=p.hpVariable}function Ch(e){Fl([la,oa,ia,aa,ra,ta,na],e)}function yu(e,t,r){let o={};o.callback=r,o.player=ft(t),kh(o),o.creature=wh(e.response.data,o.player.superEliteSlayerMultiplier),Ch(o),o.evaluatorHTML=fa(o),r.groupExists?Cu(o.evaluatorHTML):ku(o.evaluatorHTML)}function yh(e){return e.members[0].name===ro()}function Dh(e){if(le(e.r))return e.r.find(yh).id}function xh(e,t,r){if(!r.r||!r.r.attributes)return;let o=r.r.attributes;yu(e,t,{groupExists:!0,groupAttackValue:o[0].value,groupDefenseValue:o[1].value,groupArmorValue:o[2].value,groupDamageValue:o[3].value,groupHPValue:o[4].value})}function bh(e,t,r){r&&fo(r).then(w(xh,e,t))}function Sh(e,t){ao().then(Dh).then(w(bh,e,t))}function Bh(e,t){e.player.hasGroup&&Sh(e,t),yu(e,t,{groupExists:!1})}function Ah(e){return e.response&&e.response.data}function Lh(e,t){dh(),ze&&(ku(""),Cu(""),Ah(t)&&(ua(t.response.data.name,ze),Wl(!0).then(w(Bh,t))))}function ca(){$.subscribe(il,Lh)}var Ct=0;function xu(){Ct=!Ct,J("hidePlayerActions",Ct),GameData.fetch(Q)}function _h(e){let t=Ee("verbs",e);t.length===1&&$l(t[0])}function Du(){if(!Ct)return;let e=T("actionList");Xr("player",e).forEach(_h)}function bu(){Ct=N("hidePlayerActions"),$.subscribe(He,Du),Du()}var Su=0,Bu="",ma=()=>Su,Au=()=>Bu;function Zo(){let e=[null,[p.buffs,p.buffsName],[p.buffs2,p.buffs2Name],[p.buffs3,p.buffs3Name]][p.enabledHuntingMode];le(e)&&([Su,Bu]=e)}function pa(e){e.target.name==="enabledHuntingMode"&&(p.enabledHuntingMode=e.target.value,J("enabledHuntingMode",p.enabledHuntingMode),Zo(),GameData.fetch(me))}function ye(e){p[e]=!p[e],J(e,p[e])}function Th(){return H({id:"fshWorldPrefs",innerHTML:`${Se("showCreatureInfo")}&nbsp;&nbsp;${Se("showMonsterLog")}&nbsp;&nbsp;${Se("showTitanInfo")}&nbsp;&nbsp;${Se("showBuffInfo")}<br>${Se("hideSubLvlCreature")}&nbsp;&nbsp;${Se("hidePlayerActions")}&nbsp;&nbsp;${cs()}`})}function Vh(){ye("showHuntingBuffs"),GameData.fetch(me)}function Hh(){ye("hideSubLvlCreature"),GameData.fetch(Q)}function Mh(){ye("showTitanInfo"),st(GameData.realm().dynamic)}function Eh(){ye("showBuffInfo"),$e()}var Nh={hideSubLvlCreature:Hh,hidePlayerActions:xu,showCreatureInfo:()=>ye("showCreatureInfo"),showHuntingBuffs:Vh,showMonsterLog:()=>ye("showMonsterLog"),showTitanInfo:Mh,showBuffInfo:Eh};function Rh(e){let t=Nh[e.target.name];zr(t)&&(e.target.blur(),t(e))}function da(){let e=H({className:"fshCenter fshFten"}),t=Th();P(t,Rh),ae(t,"change",pa),g(e,t);let r=H();g(e,r);let o=T("worldContainerBelow").children[0];return io(e,o),r}var jo=[{generalVariable:1.1053,hpVariable:1.1},{generalVariable:1.1,hpVariable:1.053},{generalVariable:1.053,hpVariable:1},{generalVariable:1.1053,hpVariable:1}];function Ih(e){return jo[e]?jo[e].generalVariable:1.1053}function Gh(e){return jo[e]?jo[e].hpVariable:1.1}function ha(){p.combatEvaluatorBias=N("combatEvaluatorBias"),p.generalVariable=Ih(p.combatEvaluatorBias),p.hpVariable=Gh(p.combatEvaluatorBias)}function qh(e,t){return e[t.name]=!0,e}function Ph(e,t,r){return e[Me(r)]||t.push(r),t}function Fh(e,t){F(`You are missing some ${Au()} hunting buffs<br>(${t.join(", ")})`,e)}function Lu(e){F("",e)}function $h(e,t){let r=t.b.reduce(qh,{}),o=ma().reduce(w(Ph,r),[]);o.length>0?Fh(e,o):Lu(e)}function Oh(e,t){p.showHuntingBuffs?$h(e,t):Lu(e)}function Wh(e,t,r){ma()&&Oh(e,r)}function ga(e){Zo();let t=w(Wh,e);$.subscribe(Or,t),p.showHuntingBuffs&&window.initialGameData&&t(null,{b:window.initialGameData.player.buffs})}function Kh(e){return!e||!e.actions||e.actions.length===0}function Uh(e,t){return t.type===6?t.data.creature_type!==0||t.data.level>=e:!0}function zh(e){return e.realm&&e.realm.minlevel||GameData.realm().minlevel}function Yh(e){let t=hl(e);return Kh(t)?e:(t.actions=t.actions.filter(w(Uh,zh(t))),_l(t))}function Qh(e){return e.data&&e.data.d&&ms(e.data.d,Q)}function Xh(e,t){p.hideSubLvlCreature&&Qh(t)&&(e.dataFilter=Yh)}function va(){$.ajaxPrefilter("JSON",Xh),p.hideSubLvlCreature&&GameData.fetch(Q)}function Jh(e){p[e[0]]=En(e[1])}function Zh(){[["buffs","huntingBuffs"],["buffs2","huntingBuffs2"],["buffs3","huntingBuffs3"]].forEach(Jh)}function jh(e){p[e]=En(e)}function eg(){["doNotKillList"].forEach(jh)}function tg(){Zh(),eg()}function rg(e){p[e[0]]=N(e[1])}function og(){[["buffsName","huntingBuffsName"],["buffs2Name","huntingBuffs2Name"],["buffs3Name","huntingBuffs3Name"],["showHuntingBuffs","showHuntingBuffs"]].forEach(rg)}function ng(e){p[e]=N(e)}function ig(){["enabledHuntingMode","hideSubLvlCreature","showTitanInfo","showBuffInfo","showMonsterLog","showCreatureInfo"].forEach(ng)}function ag(){og(),ig()}function lg(){tg(),ag()}function wa(){ha(),lg();let e=da();va(),ga(e),bu()}function sg(){$("#messageCenter").worldMessageCenter({offset:"0 60"})}function fg(){Re("#mapTooltip")}var ug=[wa,Zi,ca,xi,mi,di,Si,Xi,ii,$i,ea,Qi,sg,fg,ei,Zn,hi,ci,oi,Di];function cg(){Ql(ug),p.userIsDev&&bi()}export{cg as default};
//# sourceMappingURL=newMap-425EMIGO.js.map
