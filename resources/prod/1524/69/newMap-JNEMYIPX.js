import{a as Qi,b as Xi}from"./chunk-3K2NCG6L.js";import{a as Ji}from"./chunk-HOWCEW7J.js";import"./chunk-XHYHZR6E.js";import{a as Yi}from"./chunk-6ATEHWJZ.js";import{a as Wi}from"./chunk-GOQWMTPK.js";import{a as bt}from"./chunk-4BE5THUB.js";import{a as Ui,b as zi}from"./chunk-2Y5CJSAT.js";import{a as qi}from"./chunk-KSCETRVW.js";import{b as Ri}from"./chunk-XU7SSMER.js";import{a as Ii}from"./chunk-CCGHIX5P.js";import{a as P}from"./chunk-2ALY46IR.js";import{a as Be,b as Et}from"./chunk-HTCGNTZJ.js";import"./chunk-L2UAYTMI.js";import{a as _i,b as Oi}from"./chunk-RTNKLEHK.js";import{a as T}from"./chunk-XA7ZPIXG.js";import{a as Pi}from"./chunk-LS7UJEBQ.js";import{a as Ki}from"./chunk-LW5BZZO6.js";import{a as Fi}from"./chunk-U46S5HPW.js";import"./chunk-CNPMTL5D.js";import{a as $i}from"./chunk-R6Q3OCUV.js";import{a as Mi,b as Hi}from"./chunk-DXFF3OQP.js";import{a as bi}from"./chunk-UPKL3X32.js";import{a as Ti}from"./chunk-5NJDX2ON.js";import{a as Lt}from"./chunk-ZVOFOXV3.js";import{a as St}from"./chunk-NJ6B7L4B.js";import"./chunk-CBKI7QWO.js";import"./chunk-KU3UKZKC.js";import{a as Si}from"./chunk-GK4HLSIZ.js";import{a as Ei}from"./chunk-UPDLZD7K.js";import{a as gi}from"./chunk-DJOCKKYE.js";import{a as hi}from"./chunk-574CI3BG.js";import{a as ci}from"./chunk-5JFSU5VO.js";import"./chunk-AVBWNGJ5.js";import{a as kt}from"./chunk-7OHAXAZU.js";import{a as g}from"./chunk-3COOR432.js";import"./chunk-IKE7Z3II.js";import{B as Ct,D as ki,R as ur,S as wi,Y as Ci,Z as Bi,a as wt,d as yi,e as sr,o as k,p as ae,q as le,r as Di,s as S,t as ke,u as we,v as xi,z as L}from"./chunk-DKYBLBZ2.js";import"./chunk-DCNREWNM.js";import{a as Li}from"./chunk-TI2LOJSA.js";import{a as Ai}from"./chunk-NADIMMJD.js";import{a as cr}from"./chunk-S4HULN5N.js";import"./chunk-R64DT3SU.js";import{a as h}from"./chunk-F7ALTOEX.js";import{a as fr}from"./chunk-RN22GH7E.js";import{a as Bt}from"./chunk-5NSOWRID.js";import{a as Vi,b as Ni,c as Gi}from"./chunk-WXF4ULNU.js";import{a as vi}from"./chunk-TGOUID7L.js";import"./chunk-XZAUBGUX.js";import{a as Ce}from"./chunk-MEQ6SWGH.js";import{a as Vn}from"./chunk-5MCV6P2Z.js";import{a as mi}from"./chunk-WSDBGBT5.js";import"./chunk-42WWGHNG.js";import"./chunk-H2BBQWQ3.js";import{a as ri}from"./chunk-AZ65ZFUR.js";import"./chunk-736UJAHD.js";import"./chunk-AHEBITCH.js";import{a as di}from"./chunk-DT7VHJIG.js";import{a as xe}from"./chunk-UMJF22Y4.js";import{a as At}from"./chunk-YCWFRS2T.js";import{a as re}from"./chunk-EC54LTKY.js";import{a as De}from"./chunk-ZM4ZI6T7.js";import{a as pi}from"./chunk-ZX43UBSI.js";import"./chunk-CXVCNN2I.js";import"./chunk-QLTDWVXW.js";import{a as f}from"./chunk-HZG26YKX.js";import{a as m}from"./chunk-OX54JKUE.js";import{a as i}from"./chunk-DIPZYR4B.js";import"./chunk-R5RY2C2T.js";import{a as lr}from"./chunk-GYAWSJG5.js";import"./chunk-YR5YTDXN.js";import{a as I}from"./chunk-ZNCQG5ZF.js";import{a as ti}from"./chunk-4DHVQHJT.js";import{a as ii}from"./chunk-AWT2A54P.js";import"./chunk-QVS2JTSD.js";import{f as ie}from"./chunk-L2AFCFBJ.js";import{a as xt}from"./chunk-GJ3T2WL7.js";import"./chunk-NFJTDZQR.js";import{a as ye}from"./chunk-HNUCXATC.js";import{a as gt}from"./chunk-4RYOLX4Q.js";import{a as ni}from"./chunk-REF22G3S.js";import{a as oe}from"./chunk-R6RBH5KQ.js";import{a as ge}from"./chunk-KOBTSSSS.js";import"./chunk-T7NYCLKF.js";import{a as fi}from"./chunk-YBFTTM4L.js";import{a as si}from"./chunk-V7HQRWBP.js";import"./chunk-ZS4UMFEX.js";import{a as ui}from"./chunk-343V7Q36.js";import"./chunk-NALZIN2F.js";import"./chunk-I6BQR2GZ.js";import"./chunk-C2EU36VT.js";import{a as z}from"./chunk-NMJUS4XE.js";import{a as ne}from"./chunk-W4QLHFVR.js";import{a as pt,b as ar}from"./chunk-2XKHMDYT.js";import"./chunk-B3OVUKAM.js";import{a as ai}from"./chunk-P2FYCUOG.js";import{a as oi}from"./chunk-R2V5M2SX.js";import"./chunk-VUJR46HY.js";import{a as y}from"./chunk-GZKSMROH.js";import"./chunk-2S53WZYG.js";import"./chunk-YFAGS6ZD.js";import{a as Y}from"./chunk-MQKWHXHK.js";import{a as Ke}from"./chunk-3RC57HRE.js";import{a as w}from"./chunk-NWZ7NAGE.js";import{a}from"./chunk-QXMVYJN6.js";import{a as li}from"./chunk-BCLJ7VQ3.js";import{a as U}from"./chunk-C2PRBDAE.js";import"./chunk-C6PSWFF5.js";import"./chunk-KD4PPF2P.js";import{a as u}from"./chunk-L4MPHVE4.js";import{a as yt,b as Dt}from"./chunk-Z7YJKURW.js";import"./chunk-JGGUTXQ5.js";import{a as dt}from"./chunk-REHXFZMP.js";import"./chunk-WYX2VQXF.js";import"./chunk-KYNUAHCU.js";import{a as vt}from"./chunk-OMYF6YAB.js";import{a as B}from"./chunk-QLI6SQ7D.js";import{b as p}from"./chunk-X53ITBGR.js";import{a as ei}from"./chunk-VB2T76EA.js";import{a as R}from"./chunk-B6YTNR7S.js";import{a as ve}from"./chunk-HJTXNVMV.js";import{a as ht}from"./chunk-2PDPTZUM.js";import{$ as In,Aa as Qn,Ba as Xn,Ca as Jn,Da as jn,Ea as Zn,K as nr,N as Gn,Na as mt,P as ir,X as $n,Y as he,Z as st,_ as Rn,aa as Pn,b as te,ba as _n,ca as Fn,da as On,e as ft,ea as Kn,fa as qn,ga as ut,ha as Wn,ia as Un,ja as zn,k as pe,la as Yn,ma as W,na as ct,oa as b,p as or,x as Nn}from"./chunk-RRAQGRWM.js";import{a as n}from"./chunk-UMFA3PXI.js";var fe;function Dl(e){return e}function xl(e){return n.showBuffInfo&&e.some(Dl)}function kl(){if(fe)g(fe,!1);else{fe=m({className:"fshActionBox",innerHTML:"<div></div><div></div><div></div><div></div><div></div><div></div>"});let e=a("actionContainer");Ei(fe,e.children[2])}return fe}function wl(){fe&&g(fe,!0)}function mr(e){if(xl(e))return kl();wl()}var _,dr;function Cl(e){_=e.children[3],_.className="fshBlue",f("CA ",_),dr=h(),i(_,dr),P(_," active")}function Bl(e,t){_?g(_,!1):Cl(e),f(t.level,dr)}function Al(){_&&g(_,!0)}function pr(e,t){t?Bl(e,t):Al()}var F,hr;function Ll(e){F=e.children[4],F.className="fshRed",f("Doubler ",F),hr=h(),i(F,hr),P(F," active")}function Sl(e,t){F?g(F,!1):Ll(e),f(t.level,hr)}function El(){F&&g(F,!0)}function gr(e,t){t?Sl(e,t):El()}var Q,vr;function bl(e){Q=e.children[2],f("Damage bonus: ",Q),vr=h(),i(Q,vr),P(Q,"%")}function Ml(e,t){if(e){let r=Math.min(Math.round(Math.floor(t/5)*Number(e.level))*.01,20);return Be(r,2).toString()}return"0"}function Hl(e,t,r){Q?g(Q,!1):bl(e),f(Ml(t,Number(r)),vr)}function Tl(){Q&&g(Q,!0)}function yr(e,t,r){t?Hl(e,t,r):Tl()}function d(e,t){f(Y(e),t)}var se,Dr;function Vl(e){se=e.children[1],f("Kill Streak: ",se),Dr=h(),i(se,Dr)}function Nl(e,t){se?g(se,!1):Vl(e),d(t,Dr)}function Gl(){se&&g(se,!0)}function xr(e,t,r,o){t||r?Nl(e,o):Gl()}function $l(e,t){return t.name===e}function X(e){let{buffs:t}=GameData.player();if(t)return t.find(u($l,e))}function kr(){let e=GameData.player().teleportCooldown;return e>1&&e}var Rl=["red","orange","yellow"];function wr(){let e=$("#actionlist-shield-imp");e.length===1&&e.css("background-color",Rl[e.text()]||"#ad8043")}var V=0,Cr=0;function Il(e){Xi(e)&&GameData.fetch(W)}function Pl(){X("Summon Shield Imp")||Qi([xt()],[55]).then(Il)}function _l(e){return e?Number(e.stack):0}var Fl=["imp-0","imp-1","imp-1"];function Ol(e){return Fl[e]||"fshGreen"}function Kl(e){[V]=e.children,f("Shield Imps Remaining: ",V),Cr=h(),i(V,Cr),re(V,"&nbsp;");let t=T({className:"xSmallLink",textContent:"Recast"});i(V,t),B(t,Pl)}function ql(e,t){V?g(V,!1):Kl(e);let r=_l(t);V.className=Ol(r),f(r,Cr)}function Wl(){V&&g(V,!0)}function Br(e,t,r){t||r?ql(e,t):Wl()}function Ul(e){return e.type===0}function Ar(){let{dynamic:e}=GameData.realm();return I(e)&&e.some(Ul)}function x(e){return h({textContent:e})}var ue,Mt,ji;function zl(e,t){ue=e.children[5],f("Teleport Cooldown: ",ue),Mt=x(t.toString()),i(ue,Mt)}function Yl(e,t){ue?g(ue,!1):zl(e,t)}function Ql(){ue&&g(ue,!0)}function Zi(){let e=Math.max(Math.ceil((ji-Date.now())/1e3),0);f(e,Mt),e>0&&setTimeout(Zi,500)}function ea(e){Mt&&(ji=Date.now()+e*1e3,Zi())}function ta(e,t){t?Yl(e,t):Ql()}var qe,Lr,Sr,Er,br,Mr,Hr;function Xl(){qe=X("Death Dealer"),Lr=X("Doubler"),Sr=X("Counter Attack"),Er=X("Summon Shield Imp"),br=kr(),Mr=Ar(),Hr=GameData.player().killStreak}function Tr(){wr(),Xl();let e=mr([qe,Lr,Sr,Er,br,Mr]);e&&(Br(e,Er,qe),xr(e,qe,Mr,Hr),yr(e,qe,Hr),pr(e,Sr),gr(e,Lr),ta(e,br))}function Jl(e,t){ea(t.player.teleportCooldown)}function ra(){Tr(),$.subscribe(`${st} ${Rn}`,Tr),$.subscribe(zn,Jl)}function oa(){n.showBuffInfo=!n.showBuffInfo,y("showBuffInfo",n.showBuffInfo),Tr()}function jl(){return window.GameController&&GameController.Realm&&!GameController.Realm.footprintTileList}function Vr(){jl()&&(GameController.Realm.footprintTileList=[])}function na(e,t,r){return hi({className:`fshCurveEle fshCurveLbl fshPoint tip-static ${e}`,dataset:{tipped:t},htmlFor:r})}function Ht(e){let t=m({className:"fshToggle"}),r=kt({checked:e.prefVal,id:e.checkId,type:"checkbox"});i(t,r);let o=na(e.onClass,e.onTip,e.checkId);i(t,o);let l=na(e.offClass,e.offTip,e.checkId);return i(t,l),i(e.worldName,t),r}var J,Vt,Nt,ia,aa,la,fa,sa,ua;function Zl(e){Ce(e),GameData.doAction(12,401,{},0)}function ef(){Li(mi())}function tf(){window.open(`${Gn+or}map`,"fsMap")}function rf(){let e=GameData.realm();window.open(`${$n}realms${or}view&realm_id=${e.id}`,"mapUfsg")}function of(){y("playNewMessageSound",!p("playNewMessageSound"))}function nf(){n.huntingMode=!n.huntingMode,y("huntingMode",n.huntingMode)}function af(){return m({className:"fshCurveContainer",id:"fshWorldButtonContainer"})}function ca(e){return e?e.toString():"?"}function lf(){let e=m({textContent:"Min Lvl: "});return Vt=x(ca(GameData.realm().minlevel)),i(e,Vt),e}function ff(){let e=m({textContent:"Your Lvl: "});return Nt=x(ca(GameData.player().level)),i(e,Nt),e}function sf(e){let t=m({className:"fshFsty"});i(t,lf()),i(t,ff()),i(e,t)}function Tt(e,t,r){let o=T({className:`fshCurveEle fshCurveBtn fshPoint tip-static ${e}`,dataset:{tipped:t}});return i(r,o),o}function uf(e){sf(e),ia=Tt("fshFormGroup","Quick Create Attack Group",e),aa=Tt("fshQuickBuff","Open Quick Buff Popup",e),la=Tt("fshRealmMap","Open Realm Map",e),fa=Tt("fshTempleOne","Search map in Ultimate FSG",e)}function cf(e){if(p("showSpeakerOnWorld")){let t=p("playNewMessageSound");sa=Ht({prefVal:t,checkId:"fshSoundCheck",onClass:"soundOn",onTip:"Turn Off Sound when you have a new log message",offClass:"soundOff",offTip:"Turn On Sound when you have a new log message",worldName:e})}}function mf(e){let t=n.huntingMode;ua=Ht({prefVal:t,checkId:"fshHuntCheck",onClass:"huntOn",onTip:"Hunting mode is ON",offClass:"huntOff",offTip:"Hunting mode is OFF",worldName:e})}function df(){uf(J),cf(J),mf(J)}var pf=[[e=>e===sa,of],[e=>e===ua,nf]],hf=[[e=>e===ia,Zl],[e=>e===aa,ef],[e=>e===la,tf],[e=>e===fa,rf]];function gf(){B(J,lr(hf)),R(J,"change",lr(pf))}function vf(){J||(J=af(),df(),gf(),At(J,a("worldCoord")))}function yf(e,t){Vt&&t.b.minlevel&&(Vr(),f(t.b.minlevel,Vt))}function Df(e,t){Nt&&f(t.b,Nt)}function Nr(){vf(),$.subscribe(On,yf),$.subscribe(In,Df)}var xf=["NORMAL","CHAMPION","ELITE","SUPER ELITE","TITAN","LEGENDARY"],kf=`url("${te}ui/world/icon_action_attack_`,Gt=!1;function Gr(e){return ye(".verb.attack",e)}function $r(e){let t=xf.indexOf(e.toUpperCase());return gt(`#actionList .actionListItem.creature.creature-${t}`)}function wf(e){e.classList.remove("attack-1","attack-2","attack-3","attack-4","attack-5","attack-6","attack-7","attack-8"),e.style.backgroundImage=""}function Cf(e,t){e!==null&&(e.classList.add(`attack-${t+1}`),e.style.backgroundImage=`${kf}${t+1}.png")`)}function ma(e){let t=["LEGENDARY","NORMAL"].flatMap($r),r=$r("CHAMPION"),[o,l]=e?[t,r]:[r,t];o.map(Gr).filter(s=>s!==null).forEach(wf),l.slice(0,8).map(Gr).forEach(Cf)}function Bf(e){let t=Gr(e);t&&(xe("world","ChampionAttack"),vi(t))}function Af(e){if(!e.altKey||!e.shiftKey||e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||(Gt||ma(!0),Gt=!0,!/(?:Digit|Numpad)[1-8]/.test(e.code)))return;let t=$r("CHAMPION"),r=parseInt(e.code.slice(-1),10)-1;r<t.length&&Bf(t[r])}function Lf(e){Gt&&(!e.ctrlKey||!e.shiftKey)&&(Gt=!1,ma(!1))}function Rr(){let{body:e}=document;R(e,"keydown",Af),R(e,"keyup",Lf)}var Sf=["Breaker","Protection","Master Thief","Protect Gold","Disarm","Duelist","Thievery","Master Blacksmith","Master Crafter","Fury Caster","Master Inventor","Sustain"],Ir=[],E;function Ef(e){(e.id===54||e.id===26)&&(E.player.buffs[e.id]=parseInt(e.level,10))}function bf(e){Sf.indexOf(e.name)===-1&&(E.player.enhancements[e.name]=e.value)}function Mf(e){e.player.buffs&&e.player.buffs.forEach(Ef)}function Hf(e){e.player.enhancements&&e.player.enhancements.forEach(bf)}function Tf(e,t){E={},E.combat=t.response.data,E.combat.inventory_id&&(E.combat.drop=E.combat.item.id),E.player={},E.player.buffs={},E.player.enhancements={},Mf(t),Hf(t),E.time=t.time,Ir.push(E),Dt("fsh_combatLog",Ir)}function Vf(e,t){t.response.response===0&&Tf(e,t)}function Nf(e){e&&(Ir=e),$.subscribe(ut,Vf)}function Pr(){p("keepLogs")&&yt("fsh_combatLog").then(Nf)}function Gf(){i(document.body,qi(`#actionList .creature-1 {color: green;}
#actionList .creature-2 {color: yellow;}
#actionList .creature-3 {color: red;}`))}function _r(){p("enableCreatureColoring")&&Gf()}function ce(e){return n.doNotKillList.includes(ge(e))}function $f(e){e.classList.toggle("fshBlue",ce(oi(e)))}function Ae(){let e=a("actionList");vt("creature",e).forEach($f)}function Rf(e,t){if(ce(e))return a("actionList").children[t].children[0].children[1].classList.remove("loading"),!0}function If(e){let t=GameData.actions()[e];if(t)return Rf(t.data.name,e)}function Pf(e){return function(r,o,l,s){If(l.passback)||e(r,o,l,s)}}var _f={2:Pf};function Ff(e){return ei(e)||e===0}function Of(e){return e&&dt(e)}function Kf(e){return function(r,o,l,s){let c=_f[r];Of(c)&&Ff(s)?c(e)(r,o,l,s):e(r,o,l,s)}}function Fr(){let e=GameData.doAction;GameData.doAction=Kf(e)}function Or(){$.subscribe(he,Ae),Ae(),Fr()}function qf(e){Ce(e.target)}function Kr(){B(a("buffList"),qf)}function da(e){e[1]=e[2].r.list}function pa(e,t,r){let o=e.slice();return o[3]=t[r],o[5]=r,o}function Wf(e){let t,r=e[6].message+"",o;return{c(){t=S("p"),o=ke(r),ki(t,"color","red")},m(l,s){ae(l,t,s),k(t,o)},p(l,s){s&1&&r!==(r=l[6].message+"")&&Ct(o,r)},d(l){l&&le(t)}}}function Uf(e){da(e);let t,r,o,l=e[1],s=[];for(let c=0;c<l.length;c+=1)s[c]=ga(pa(e,l,c));return{c(){t=S("table"),r=S("tr"),r.innerHTML=`<td class="header"></td> 
      <td class="header"></td> 
      <td class="header">Username</td> 
      <td class="header">Kills</td>`,o=we();for(let c=0;c<s.length;c+=1)s[c].c();L(r,"class","svelte-1p6satm"),L(t,"id","world-event-contrib-table"),L(t,"class","svelte-1p6satm")},m(c,G){ae(c,t,G),k(t,r),k(t,o);for(let D=0;D<s.length;D+=1)s[D].m(t,null)},p(c,G){if(da(c),G&1){l=c[1];let D;for(D=0;D<l.length;D+=1){let q=pa(c,l,D);s[D]?s[D].p(q,G):(s[D]=ga(q),s[D].c(),s[D].m(t,null))}for(;D<s.length;D+=1)s[D].d(1);s.length=l.length}},d(c){c&&le(t),Di(s,c)}}}function ha(e){let t,r,o,l;return{c(){t=S("a"),r=S("img"),sr(r.src,o=te+"guilds/"+e[3].guild.id+"_mini.png")||L(r,"src",o),L(r,"alt","guild logo"),L(r,"class","svelte-1p6satm"),L(t,"href",l=""+(nr+e[3].guild.id))},m(s,c){ae(s,t,c),k(t,r)},p(s,c){c&1&&!sr(r.src,o=te+"guilds/"+s[3].guild.id+"_mini.png")&&L(r,"src",o),c&1&&l!==(l=""+(nr+s[3].guild.id))&&L(t,"href",l)},d(s){s&&le(t)}}}function ga(e){let t,r,o=e[5]+1+"",l,s,c,G,D,q,it=e[3].player.name+"",er,at,Hn,tr,lt=e[3].value+"",rr,Tn,C=e[3].guild&&ha(e);return{c(){t=S("tr"),r=S("td"),l=ke(o),s=we(),c=S("td"),C&&C.c(),G=we(),D=S("td"),q=S("a"),er=ke(it),Hn=we(),tr=S("td"),rr=ke(lt),Tn=we(),L(q,"href",at=""+(ir+e[3].player.name)),L(t,"class","svelte-1p6satm")},m(H,de){ae(H,t,de),k(t,r),k(r,l),k(t,s),k(t,c),C&&C.m(c,null),k(t,G),k(t,D),k(D,q),k(q,er),k(t,Hn),k(t,tr),k(tr,rr),k(t,Tn)},p(H,de){H[3].guild?C?C.p(H,de):(C=ha(H),C.c(),C.m(c,null)):C&&(C.d(1),C=null),de&1&&it!==(it=H[3].player.name+"")&&Ct(er,it),de&1&&at!==(at=""+(ir+H[3].player.name))&&L(q,"href",at),de&1&&lt!==(lt=H[3].value+"")&&Ct(rr,lt)},d(H){H&&le(t),C&&C.d()}}}function zf(e){let t;return{c(){t=ke("Loading...")},m(r,o){ae(r,t,o)},p:wt,d(r){r&&le(t)}}}function Yf(e){let t,r,o={ctx:e,current:null,token:null,hasCatch:!0,pending:zf,then:Uf,catch:Wf,value:2,error:6};return ur(r=e[0],o),{c(){t=xi(),o.block.c()},m(l,s){ae(l,t,s),o.block.m(l,o.anchor=s),o.mount=()=>t.parentNode,o.anchor=t},p(l,[s]){e=l,o.ctx=e,s&1&&r!==(r=e[0])&&ur(r,o)||wi(o,e,s)},i:wt,o:wt,d(l){l&&le(t),o.block.d(l),o.token=null,o=null}}}function Qf(e,t,r){let{promise:o}=t;return e.$$set=l=>{"promise"in l&&r(0,o=l.promise)},[o]}var qr=class extends Bi{constructor(t){super(),Ci(this,t,Qf,Yf,yi,{promise:0})}},va=qr;function Wr(e){return pi({cmd:"toprated",subcmd:e})}var Xf=({username:e,value:t})=>({player:{name:e},value:t});async function Ur(e){if(e==="globalquest")return{r:{list:(await di({cmd:"toprated",subcmd:"eventcontrib"})).map(Xf)}}}function zr(e){return De(Ur,Wr,e)}var Yr,ya=()=>({promise:zr("globalquest")});function Jf(e){Yr?Yr.$set(ya()):Yr=new va({props:ya(),target:e})}function jf(){let e=a("world-event-contrib");Jf(e),$(e).dialog({title:"Top 100 Event Contributers",minWidth:300,height:300,zIndex:9999})}function Qr(){let e=$("#world-event-badge");!e.length||(e.off(),B(e[0],jf))}function Da(e){$(`#actionList li.creature-${e.toString()} a.create-group`).hide()}function Zf(e){$.subscribe(he,u(Da,e))}var es=["hideChampionsGroup","hideElitesGroup","hideSEGroup","hideTitanGroup","hideLegendaryGroup"];function ts(e,t){p(e)&&(Zf(t+1),Da(t+1))}function Xr(){es.forEach(ts)}function rs(e){return e.response&&e.response.msg&&e.response.msg.startsWith("Creature did not exist at that location")}function os(e){rs(e)&&GameData.fetch(ct+b)}function ns(e){e.remove()}function is(e,t){os(t),gt(".creature-4 > .quickCombat > .verbs").forEach(ns)}function Jr(){$.subscribe(ut,is)}function O(e){return!e||!e.response||!e.response.data}var xa='<table class="relicT relicS"><thead><tr><th colspan="2">Adjusted defense values</th></tr></thead><tbody><tr><td>DC225:</td><td id="DC225">0</td></tr><tr><td>DC175:</td><td id="DC175">0</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody><thead><tr><th colspan="2">Attacking Group Stats</th></tr></thead><tbody><tr><td>Raw Group Attack:</td><td class="fshGrey" id="GroupAttack"></td></tr><tr><td>Group Attack w/ buffs:</td><td id="GroupAttackBuffed"></td></tr><tr><td>Raw Group Defense:</td><td class="fshGrey" id="GroupDefense"></td></tr><tr><td>Group Defense w/ buffs:</td><td id="GroupDefenseBuffed"></td></tr><tr><td>Raw Group Armor:</td><td class="fshGrey" id="GroupArmor"></td></tr><tr><td>Group Armor w/ buffs:</td><td id="GroupArmorBuffed"></td></tr><tr><td>Raw Group Damage:</td><td class="fshGrey" id="GroupDamage"></td></tr><tr><td>Group Damage w/ buffs:</td><td id="GroupDamageBuffed"></td></tr><tr><td>Raw Group HP:</td><td class="fshGrey" id="GroupHP"></td></tr><tr><td>Group HP w/ buffs:</td><td id="GroupHPBuffed"></td></tr></tbody></table>',ka='<table class="relicT relicS"><thead><tr><th colspan="2">Defending Guild Stats</th></tr></thead><tbody><tr><td>Relic Count:</td><td id="relicCount">0</td></tr><tr><td>Lead Defender Bonus:</td><td id="LDPercentage">0</td></tr><tr><td>Lead Defender Cloaked:</td><td id="LDCloaked">No</td></tr></tbody><thead><tr><th colspan="2">Other Defender Stats</th></tr></thead><tbody><tr><td>Raw Attack:</td><td class="fshGrey" id="attackValue">0</td></tr><tr><td>Attack w/ buffs:</td><td id="attackValueBuffed">0</td></tr><tr><td>Raw Defense:</td><td class="fshGrey" id="defenseValue">0</td></tr><tr><td>Defense w/buffs:</td><td id="defenseValueBuffed">0</td></tr><tr><td>Raw Armor:</td><td class="fshGrey" id="armorValue">0</td></tr><tr><td>Armor w/ buffs:</td><td id="armorValueBuffed">0</td></tr><tr><td>Raw Damage:</td><td class="fshGrey" id="damageValue">0</td></tr><tr><td>Damage w/ buffs:</td><td id="damageValueBuffed">0</td></tr><tr><td>Raw HP:</td><td class="fshGrey" id="hpValue">0</td></tr><tr><td>HP w/ buffs:</td><td id="hpValueBuffed">0</td></tr><tr><td>Cloaked:</td><td id="defendersCloaked">0</td></tr><tr><td>Processed:</td><td id="defendersProcessed">0</td></tr></tbody></table>',wa='<table class="relicT"><thead><tr><th colspan="2">Processing</th></tr></thead><tbody><tr><td class="fshGreen" colspan="2" id="ProcessingStatus">Parsing defending guild stats ...</td></tr></tbody><thead><tr><th colspan="2">Assumptions</th></tr></thead><tbody><tr><td colspan="2" class="fshGrey">Above calculations include Constitution, Fortitude, Nightmare Visage, Chi Strike, Sanctuary, Terrorize and Flinch bonus calculations (in that order) on both the defending group and attacking group.</td></tr></tbody></table>';var K,Le,Se,Ee;function as(e){return e.player_name}function ls(e){Ee=e.defenders.map(as)}function fs(){K?w("",K):K=m({className:"body"})}function ss(e){Le=m({className:"fshFloatLeft fshRelicLeftDiv"}),i(K,Le),e.is_owner&&i(Le,_i(Ee)),Se=T({className:"custombutton",textContent:"Fetch Stats"}),i(Le,Se)}function Ca(e){ls(e),fs(),ss(e);let t=a("dialog-relic");i(t,K)}var N,Ba,Aa,jr,Zr,eo,to,$t,ro,oo,no,io,ao,lo,fo,so,uo,co,mo,po,ho,go,vo,yo,Do,xo,ko,wo,Co,Bo,j,us=[e=>e!=="lastUpdate",e=>!Ee.includes(e),e=>N[e].last_login,e=>Number(N[e].last_login)<Ba,e=>Number(N[e].last_login)>Aa,e=>N[e].level<400||N[e].level>421,e=>N[e].level<441||N[e].level>450];function cs(e,t){return t(e)}function ms(e){return us.every(u(cs,e))}function ds(e){return`<a href="${Nn}${N[e].id}">${e}</a>`}function ps(e){N=e,Ba=ar-120,Aa=ar-604800;let t=li(N).filter(ms).map(ds);re(K,`<div class="fshFloatLeft fshRelicLowDiv"><table class="relicT"><thead><tr><th>${t.length.toString()} Offline guild members not at relic:</th></tr></thead><tbody><tr><td>${t.join(" ")}</td></tr></tbody></table></div>`)}function hs(){jr=a("relicCount"),Zr=a("LDPercentage"),eo=a("LDCloaked"),to=a("attackValue"),$t=a("attackValueBuffed"),ro=a("defenseValue"),oo=a("defenseValueBuffed"),no=a("armorValue"),io=a("armorValueBuffed"),ao=a("damageValue"),lo=a("damageValueBuffed"),fo=a("hpValue"),so=a("hpValueBuffed"),uo=a("defendersCloaked"),co=a("defendersProcessed")}function gs(){mo=a("DC225"),po=a("DC175"),ho=a("GroupAttack"),go=a("GroupAttackBuffed"),vo=a("GroupDefense"),yo=a("GroupDefenseBuffed"),Do=a("GroupArmor"),xo=a("GroupArmorBuffed"),ko=a("GroupDamage"),wo=a("GroupDamageBuffed"),Co=a("GroupHP"),Bo=a("GroupHPBuffed")}function La(e){Bt(Se);let t=p("hideRelicOffline");e.is_owner&&!t&&$i(!0).then(ps),re(Le,wa),j=a("ProcessingStatus");let r=m({className:"fshFloatLeft fshRelicMidDiv",innerHTML:ka});i(K,r),hs();let o=m({className:"fshFloatLeft fshRelicRightDiv",innerHTML:xa});i(K,o),gs()}var Rt;function vs(e){return e===1?1.5:Be(1-e/10,2)}function Sa(e){let t=z(e),o=ni('#pCC img[src*="/relics/"]',t).length;f(o,jr),Rt=vs(o),f(`${String(Rt*100)}%`,Zr)}function It(e,t){return e>t*10||e<t?e:t*10}function ys(e){e.attackValue=It(e.attackBonus,e.levelValue),e.defenseValue=It(e.defenseBonus,e.levelValue),e.armorValue=It(e.armorBonus,e.levelValue),e.damageValue=It(e.damageBonus,e.levelValue),e.hpValue=e.hpBonus}var Ds=[["levelValue","level"],["attackValue","attack"],["attackBonus","bonus_attack"],["defenseValue","defense"],["defenseBonus","bonus_defense"],["armorValue","armor"],["armorBonus","bonus_armor"],["damageValue","damage"],["damageBonus","bonus_damage"],["hpValue","hp"],["hpBonus","bonus_hp"],["killStreakValue","killstreak"]];function xs(e,t,r){e[r[0]]=Number(t[r[1]])}function ks(e,t){Ds.forEach(u(xs,e,t))}var ws=[["counterAttackLevel","Counter Attack"],["doublerLevel","Doubler"],["deathDealerLevel","Death Dealer"],["darkCurseLevel","Dark Curse"],["holyFlameLevel","Holy Flame"],["constitutionLevel","Constitution"],["sanctuaryLevel","Sanctuary"],["flinchLevel","Flinch"],["nightmareVisageLevel","Nightmare Visage"],["superEliteSlayerLevel","Super Elite Slayer"],["fortitudeLevel","Fortitude"],["chiStrikeLevel","Chi Strike"],["terrorizeLevel","Terrorize"],["barricadeLevel","Barricade"],["reignOfTerrorLevel","Reign Of Terror"],["anchoredLevel","Anchored"],["severeConditionLevel","Severe Condition"],["entrenchLevel","Entrench"],["cloakLevel","Cloak"]];function Cs(e,t,r){e[r[0]]=t[r[1]]||0}function Bs(e,t){ws.forEach(u(Cs,e,t))}function be(e){if(!e)return;let t=bt(e._skills),r={};return ks(r,e),Bs(r,t),r.superEliteSlayerMultiplier=Be(.002*r.superEliteSlayerLevel,2),si(r.armorValue)&&ys(r),r}var He,Pt,Ue,Me,ze,_t,Ye,Lo,Ao,A,v,me;function As(){v.attack-=me.attack,v.defense-=me.defense,v.armor-=me.armor,v.damage-=me.damage,v.hp-=me.hp}function We(e){return Math.round(e*Rt)}function Ls(){He+=We(A.attackValue),Ue+=We(A.defenseValue),Me+=We(A.armorValue),ze+=We(A.damageValue),Ye+=We(A.hpValue)}function ba(){d(He,to),d(Ue,ro),d(Me,no),d(ze,ao),d(Ye,fo),f(Lo,uo),Ao+=1,f(Ao,co)}function Ss(){d(v.attack,ho),d(v.defense,vo),d(v.armor,Do),d(v.damage,ko),d(v.hp,Co)}function Es(e){return Math.ceil(v.attack*(U(e["Nightmare Visage"],0)*.0025))}function bs(){let e=Math.ceil(v.attack*A.flinchLevel*.001);d(v.attack-e,go)}function Ms(e){return Math.ceil(v.defense*(1+U(e.Constitution,0)*.001))}function Hs(e,t){d(t+e,yo)}function Ts(e){d(v.armor+Math.floor(v.armor*U(e.Sanctuary,0)*.001),xo)}function Vs(e,t){return Math.ceil(t*U(e.Fortitude,0)*.001)}function Ns(e){d(v.hp+e,Bo)}function Gs(e,t){let r=Math.ceil((v.hp+t)*U(e["Chi Strike"],0)*.001),o=Math.ceil(v.damage*A.terrorizeLevel*.001);d(v.damage+r-o,wo)}function $s(e){let t=Es(e);v.attack-=t,bs();let r=Ms(e);Hs(t,r),Ts(e);let o=Vs(e,r);Ns(o),Gs(e,o)}function Rs(e){let t=Math.ceil(Pt*U(e.Flinch,0)*.001);d(Pt-t,$t)}function Is(e){let t=Math.ceil(_t*U(e.Terrorize,0)*.001);d(_t-t,lo)}function Ps(){f("Processing attacking group stats ... ",j),me&&As(),Ss();let e=bt(GameData.player().buffs);$s(e),Rs(e),Is(e),f("Done.",j)}function _s(){return Math.ceil(He*(A.nightmareVisageLevel*.0025))}function Fs(){return Math.ceil(Ue*(1+A.constitutionLevel*.001))}function Os(e){Pt=He-e,d(Pt,$t)}function Ea(e){return 1-e*mt}function Ks(e,t){let r=t+e;d(r,oo),d(Math.ceil(r*Ea(225)),mo),d(Math.ceil(r*Ea(175)),po)}function qs(){d(Me+Math.floor(Me*A.sanctuaryLevel*.001),io)}function Ws(e){return Math.ceil(e*A.fortitudeLevel*.001)}function Us(e){_t=ze+Math.ceil(e*A.chiStrikeLevel*.001),d(_t)}function zs(){A.cloakLevel!==0&&f("Yes",eo)}function Ma(){f("Processing defending guild stats ... ",j),Ls(),ba();let e=_s();Os(e);let t=Fs();Ks(e,t),qs();let r=Ye+Ws(t);d(r,so),Us(r),zs(),GameData.player().hasGroup&&v?Ps():f("Done.",j)}function Ha(e){let t=be(e);He+=Math.round(t.attackValue*pe),Ue+=Math.round(t.defenseValue*pe),Me+=Math.round(t.armorValue*pe),ze+=Math.round(t.damageValue*pe),Ye+=Math.round(t.hpValue*pe),t.cloakLevel!==0&&(Lo+=1),ba()}function Ta(e){A=be(e)}function Va(e){v=e}function Na(e){me=e}function Ga(){He=0,Ue=0,Me=0,ze=0,Ye=0,Lo=0,Ao=0}var Qe;function Ys(e){f(e.message,j)}function Qs(e){return e.parentNode.parentNode.previousElementSibling.previousElementSibling.innerHTML.indexOf('"#000099"')!==-1}function Xs(e){let t=e.previousElementSibling.href,r=[Oi(t).then(Va)];return Qs(e)&&r.push(Ki().then(Na)),r}function Js(e){let t=z(e),r=ye('#pCC a[href*="confirmDisband"]',t);if(!r)return;let o=Xs(r);return ui(o)}function js(){return ne({cmd:"guild",subcmd:"groups"}).then(Js)}function Zs(){return ne({cmd:"guild",subcmd:"view",guild_id:Qe.controlled_by.guild_id}).then(Sa)}function eu(e,t){return t===0?cr(e).then(Ta):cr(e).then(Ha).catch(Ys)}function tu(){return Ee.map(eu)}function ru(){let e=[Zs()];return GameData.player().hasGroup&&e.push(js()),e=e.concat(tu()),e}function ou(){La(Qe),Ga();let e=ru();St(e,Ma)}function nu(e,t){O(t)||(Qe=t.response.data,Qe.defenders.length>0&&(Ca(Qe),Vn(Se,"click",ou)))}function So(){$.subscribe(Wn,nu)}function Xe(e){return ai({cache:!1,url:"fetchdata.php",data:{...e,fshrnd:Ri()},dataType:"json"})}var $a=[];function iu(e){return O(e)||$a.push(e),e}function au(e,t){return e===Number(t.response.data.id)}function lu(e,t){e(t)}function fu(e){return new Promise(t=>{ri(3,lu,[t,e])})}function Je(e,t){let r=$a.find(u(au,e));return r?fu(r):Xe({a:1,id:e,passback:t}).then(iu)}var Ft,Eo,bo,Mo,Ho,To;function je(e,t){return fi(ve(t,e))}function su(e){bo=je(e,Xn),Eo=je(e,Qn),Ho=je(e,jn),Mo=je(e,Jn),To=je(e,Zn)}function Ra(){Ft=GameData.player().level,su(a("statbar-character-tooltip-stats"))}function uu(e){return`<table><tr><td><img src="${te}creatures/${e.image_id}.png" height="200" width="200"></td><td rowspan="2"><table width="400"><tr><td class="header" colspan="4" class="fshCenter">Statistics</td></tr>`}function cu(e,t){return`<tr><td>Class:&nbsp;</td><td width="40%">${e.creature_class}</td><td>Level:&nbsp;</td><td width="40%">${e.level} (your level:<span class="${t}">${Ft}</span>)</td></tr>`}function mu(e){return`<tr><td>Attack:&nbsp;</td><td width="40%">${e.attack} (your defense:<span class="fshYellow">${Eo}</span>)</td><td>Defense:&nbsp;</td><td width="40%">${e.defense} (your attack:<span class="fshYellow">${bo}</span>)</td></tr>`}function du(e){return`<tr><td>Armor:&nbsp;</td><td width="40%">${e.armor} (your damage:<span class="fshYellow">${Mo}</span>)</td><td>Damage:&nbsp;</td><td width="40%">${e.damage} (your armor:<span class="fshYellow">${Ho}</span>)</td></tr>`}function pu(e,t){return`<tr><td>HP:&nbsp;</td><td width="40%">${e.hp} (your HP:<span class="fshYellow">${To}</span>)(1H: <span class="fshRed">${t}</span>)</td><td>Gold:&nbsp;</td><td width="40%">${e.gold}</td></tr>`}var hu='<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Enhancements</td></tr>';function gu(e){return`<tr><td colspan="2">${e.name}:</td><td colspan="2">${e.value}</td></tr>`}function vu(e){return e.enhancements.length===0?'<tr><td colspan="4">[no enhancements]</td></tr>':e.enhancements.map(gu).join("")}function yu(e){return`<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Description</td></tr><tr><td colspan="4">${e.description}</td></tr><tr><td colspan="4" height="5"></td></tr></table></td></tr><tr><td class="fshCenter"><b>${e.name}</b></td></tr></table>`}function Du(e,t,r){return uu(e)+cu(e,r)+mu(e)+du(e)+pu(e,t)+hu+vu(e)+yu(e)}function xu(e){let t=Math.ceil(e.hp*n.hpVariable+e.armor*n.generalVariable),r="fshYellow";return Ra(),Ft>e.level&&(r="fshRed"),Du(e,t,r)}function Vo(e){if(!O(e))return xu(e.response.data)}var ku=["verb","view","tip-static"];function wu(e,t){$(e).qtip({overwrite:!0,show:{event:"mouseover",ready:!0},style:{classes:"qtip-tipsy qtip-custom"},position:{my:"center right",at:"center left",effect:!1,viewport:$(window)},content:{text:t},hide:{effect:!1}})}function Cu(e){return ht(e.parentNode.children).indexOf(e)}function Bu(e,t){let r=Vo(t);e.set("content.text",r)}function Au(e,t,r){return Je(GameData.actions()[e].data.id,e).then(u(Bu,r)),"Loading..."}function Lu(e,t){xe("NewMap","CreatureInfo");let r=Cu(t);e.classList.add("fshTip"),wu(e,u(Au,r))}function Su(e,t){return gi(ku,e)&&!Ke("fshTip",e)&&Ke("creature",t)}function Eu(e){if(!n.showCreatureInfo)return;let{target:t}=e,r=t.parentNode.parentNode.parentNode;Su(t,r)&&Lu(t,r)}function No(){R(a("actionList"),"mouseover",Eu)}function bu(e,t){t.b[2]&&Si()}function Go(){p("useNewGuildLog")&&$.subscribe("notifications.player",bu)}var M;function Mu(e,t){t.creature_class=e.creature_class,t.image_id=e.image_id,t.level=Number(e.level),t.type=e.type}function Hu(e){M[e.name]?M[e.name].seen&&(M[e.name].seen+=1):(M[e.name]={seen:1},Mu(e,M[e.name]))}function Ia(e,t,r){return t?e(t,r):r}function Pa(e,t){let r=e||{};return r.min=Ia(Math.min,r.min,t),r.max=Ia(Math.max,r.max,t),r}var Tu=["attack","armor","damage","defense","hp"];function Vu(e,t){return!e||e.min!==t.min||e.max!==t.max}function Nu(e,t,r){let o=Pa(t[r],Number(e[r]));Vu(t[r],o)&&(t[r]=o)}function Gu(e,t){Tu.forEach(u(Nu,e,t))}function $u(e){return e.enhancements&&e.enhancements.length>0}function Ru(e,t){e[t.name]=Pa(e[t.name],Number(t.value))}function Iu(e,t){$u(e)&&(t.enhancements=t.enhancements||{},e.enhancements.forEach(u(Ru,t.enhancements)))}function Pu(e){M||(M={}),Hu(e),Gu(e,M[e.name]),Iu(e,M[e.name]),Dt("fsh_monsterLog",M)}function _a(e){n.showMonsterLog&&Pu(e)}function _u(e){M=e||{}}function Fa(){yt("fsh_monsterLog").then(_u)}var Oa=[];function Fu(e){O(e)||(xe("NewMap","MonsterLog"),_a(e.response.data))}function Ou(e,t){return e.id===t.id}function Ku(e){if(Oa.find(u(Ou,e.data)))return!0;Oa.push(e.data)}function qu(e,t){e.type!==6||Ku(e)||Je(e.data.id,t).then(Fu)}function Ka(){n.showMonsterLog&&GameData.actions().forEach(qu)}function $o(){Fa(),$.subscribe("-1-success.action-response 4-success.action-response 5-success.action-response 25-success.action-response",Ka),Ka()}function Ro(){return bi({subcmd:"scouttower"})}function Wu(e){let t=e.split(/[: /[]/);return new Date(Number(t[4]),ft.indexOf(t[3]),Number(t[2]),Number(t[0]),Number(t[1]))}function Uu(e){let t=oe(e[1]);return t==="No active cooldown"?0:Math.ceil((Wu(t.slice(16))-pt)/1e3)}function zu(e){let t=e[0].cells[0].children[0];return{base_id:Number(t.src.match(/s\/(\w+)\.p/)[1].slice(0,-32)),name:t.title}}function Yu(e){return{cooldown:Uu(e),creature:zu(e),kills:Number(oe(e[0].cells[3]))}}function Qu(e){let t=oe(e[0].cells[1]);if(t!=="n/a"){let r=oe(e[0].cells[2]).split("/");return{realm:t,current_hp:Number(r[0]),max_hp:Number(r[1])}}}function Xu(e){let t=e[2].cells[0].children;if(t.length===1)return{contributors:Ti(t[0].rows,3,0).map(o=>({kills:Number(oe(o.cells[1])),player:{name:oe(o.cells[0])}}))}}function Ju(e){return{...Yu(e),...Qu(e),...Xu(e)}}function ju(e){let t=z(e),r=ye('table[width="500"]',t);if(!r)return{s:!1};let o=ht(r.rows).filter((s,c,G)=>c!==0&&c<G.length-1&&(c-1)%6<3);return{r:Pi(3,o).map(Ju),s:!0}}function Io(){return ne({cmd:"guild",subcmd:"scouttower"}).then(ju)}function Po(){return De(Ro,Io)}function Zu(e,[t,r,o]){let l=e.insertCell(-1);return l.colSpan=t,o&&(l.className="header"),i(l,r),l}function ec(e,t){t.forEach(u(Zu,e))}function tc(e,t,r){let o=e.insertRow(-1);return r&&(o.className="fshBlue"),ec(o,t),o}function rc(e,t){tc(e,t[0],t[1])}function Ze(e,t){t.forEach(u(rc,e))}var _o;function qa(e){_o=e}var Fo,Oo,Ko,qo,Wo,Uo,zo,Yo;function oc(){Fo=x("Current"),Oo=x("Kills"),Ko=x("Member"),qo=x("% of Total")}function nc(){Wo=x("Status"),Uo=x("Titan HP"),zo=x("Total"),Yo=x("Your Guild")}function Wa(){oc(),nc()}var Te,Ve,Ne,Ge,$e,Re,Ie,Pe,_e;function ic(){Te=h({innerHTML:"&nbsp;"}),Ve=h({innerHTML:"&nbsp;"}),Ne=h(),Ge=h()}function ac(){$e=h(),Re=h(),Ie=h(),Pe=h(),_e=h()}function Ua(){ic(),ac()}function za(){w("&nbsp;",Te),w("&nbsp;",Ve),f("",Ne),f("",Ge),f("",$e),f("",Re),f("",Ie),w("",Pe),w("",_e)}var Z;function Ot(){for(;Z.rows.length>8;)Z.deleteRow(8)}function lc(){let e=h();return i(e,Ne),P(e,"/"),i(e,Ge),e}function Ya(e){let t=h();return i(t,e),P(t,"%"),t}function Qa(){Z=ci({className:"fshCenter"}),Wa(),Ze(Z,[[[[5,Te,!0],[1,Ve,!0]]],[[[2,Uo,!0],[4,Yo,!0]]],[[[2,lc()],[4,$e]]],[[[2,Fo,!0],[4,Ya(Re)]],!0],[[[2,zo,!0],[4,Ya(Ie)]],!0],[[[2,Wo,!0],[4,Pe]],!0],[[[6,_e]]],[[[2,Ko,!0],[2,Oo,!0],[2,qo,!0]]]])}var ee,Kt,Qo;function Xo(){Kt=null,ee&&!Ke("fshHide",ee)&&(g(ee,!0),za(),Ot())}function Xa(e){return e.type===0?(Kt=e.base_creature_id,Qo=`(${e.x},${e.y})`,!0):!1}function Ja(){if(ee)g(ee,!1);else{let e=a("actionContainer");ee=m({className:"fshActionBox titanInfo"}),Ua(),Qa(),i(ee,Z),i(e,ee)}}function fc(e){let t=new Date(pt+e*1e3);return`${Lt(t.getHours())}:${Lt(t.getMinutes())} ${Lt(t.getDate())}/${ft[t.getMonth()]}/${t.getFullYear()}`}function sc(e){return e<=0?'<span class="fshGreen cooldown">No active cooldown</span>':`<span class="fshMaroon cooldown">Cooldown until: ${fc(e)}</span>`}function uc(e){return Et(Ui(e.max_hp-e.current_hp,e.kills),2)}function cc(e){return Et(e.kills*100/e.max_hp,2)}function mc(e){return zi(e.kills,e.max_hp,e.current_hp)}function dc(e){e.forEach(([t,r])=>{f(t,r)})}function pc(e){dc([[e.creature.name.replace(" (Titan)",""),Te],[Qo,Ve],[e.current_hp,Ne],[e.max_hp,Ge],[e.kills,$e],[uc(e),Re],[cc(e),Ie]]),w(mc(e),Pe),w(sc(e.cooldown),_e)}function hc(e,t){return[[[2,x(t.player.name)],[2,x(t.kills.toString())],[2,x(`${Et(t.kills*100/e.kills,2)}%`)]]]}function gc(e){if(Ot(),!e.contributors)return;let t=e.contributors.map(u(hc,e));Ze(Z,t)}function vc(e){return e.realm&&e.creature.base_id===Kt&&e.realm===_o}function Jo(e){let t=e.find(vc);t&&(pc(t),gc(t))}var qt;function yc(){qt&&(window.clearTimeout(qt),qt=null)}function Dc(e){return e&&e.s&&I(e.r)}function ja(e){return n.showTitanInfo&&I(e)&&e.some(Xa)}function xc(e,t){!Dc(t)||(Jo(t.r),ja(GameData.realm().dynamic)?qt=window.setTimeout(e,3e4):Xo())}function Za(){Po().then(u(xc,Za))}function el(e){yc(),ja(e)?(Ja(),Za()):Xo()}function tl(e){e.dynamic&&(qa(e.name),el(e.dynamic))}function rl(){n.showTitanInfo=!n.showTitanInfo,y("showTitanInfo",n.showTitanInfo),el(GameData.realm().dynamic)}function kc(e){return e.realm&&e.realm.name}function ol(e,t){kc(t)&&tl(t.realm)}function jo(){window.initialGameData&&ol(null,window.initialGameData),$.subscribe(`${Kn} ${Un}`,ol)}function wc(e,t){t==="ACT_REPAIR"&&GameData.fetch(Yn+W+ct+b)}function Zo(){$.subscribe(Fn,wc)}var en;function nl(e){$("#statbar-gold").css("background-color",e)}function il(){$("#HelperSendTotal").html(Y(p("currentGoldSentTotal"))),Number(GameData.player().gold)>en?nl("red"):nl("inherit")}function Cc(){return`<dt class="stat-gold-sendTo">Send To:</dt><dd id="HelperSendTo">${p("goldRecipient")}</dd><dt class="stat-gold-sendAmt">Amount:</dt><dd id="HelperSendAmt">${Y(en)}</dd><dt class="stat-gold-sendTo">Send?</dt><dd><input id="HelperSendGold" value="Send!" class="custombutton" type="submit"><input type="hidden" id="xc" value=""</dd><dt class="stat-gold-sendTotal">Total Sent:</dt><dd id="HelperSendTotal">${Y(p("currentGoldSentTotal"))}</dd>`}function Bc(){en=p("goldAmount"),$("#statbar-gold-tooltip-general").append(Cc()),$("#HelperSendGold").on("click",Gi),il(),$.subscribe(Pn,il)}function tn(){Ni(),Vi&&Bc()}var et,tt,Wt,Fe,on,rn,Ut;function Ac(){return Xe({a:14,d:0,id:et.id,item_id:et.itemId})}function Lc(e){let t=e.response.response,r=e.response.msg,o;if(t!==0){let l=r.indexOf("<");l!==-1?o=r.substring(0,l):o=r}else o=`You purchased ${e.response.data.name} for ${Y(e.response.data.cost)} gold.`;re(Ut,`${o}<br>`)}function Sc(){GameData.doAction(14,3,{id:et.id,item_id:et.itemId},0),Wt.close()}function Ec(){let e=Ii(on.value);if(!e)return;let t=[];for(let r=1;r<e;r+=1)t.push(Ac().then(Lc));St(t,Sc)}function bc(){Fe=m({className:"fshClear",textContent:"Select how many to quick-buy:"}),on=kt({id:"buyAmount",className:"fshNumberInput",min:1,max:99,value:1,type:"number"}),i(Fe,on),rn=T({textContent:"Quick-buy"}),B(rn,Ec),i(Fe,rn),Ut=m(),i(Fe,Ut),i(tt,Fe)}function Mc(){return tt||a("shopDialogConfirm")}function Hc(){return Wt||$(tt).data("hcsWorldDialogShopConfirm")}function Tc(){Fe?f("",Ut):bc()}function Vc(e,t){et=t,tt=Mc(),tt&&(Wt=Hc(),Wt&&Tc())}function nn(){$.subscribe(_n,Vc)}function Nc(e){let t=z(e),r=Fi(t);return{r:{attributes:[{value:r.attack},{value:r.defense},{value:r.armor},{value:r.damage},{value:r.hp}]}}}function an(e){return ne({cmd:"guild",subcmd:"groups",subcmd2:"viewstats",group_id:e}).then(Nc)}function ln(e){return Mi({subcmd2:"viewstats",group_id:e})}function fn(e){return De(ln,an,e)}function al(e){return e.numberOfCreatureHitsTillDead-e.numberOfHitsRequired<=1?", dies on miss":", survives a miss"}function Gc(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired>e.numberOfCreatureHitsTillDead}function $c(e){return e.numberOfCreatureHitsTillDead==="-"?e.numberOfHitsRequired:Gc(e)?"-":e.numberOfHitsRequired}function Rc(e){return e.numberOfCreatureHitsTillDead==="-"||e.numberOfCreatureHitsTillDead>e.numberOfHitsRequired}function Ic(e){return e.numberOfHitsRequired==="-"?e.numberOfCreatureHitsTillDead:Rc(e)?"-":e.numberOfCreatureHitsTillDead}var Pc=[[e=>e.playerHits==="-"&&e.creatureHits==="-",()=>"Unresolved"],[e=>e.playerHits==="-",()=>"Player dies"],[e=>e.playerHits===1,e=>`Player 1 hits${al(e)}`],[e=>e.playerHits>1,e=>`Player > 1 hits${al(e)}`]];function _c(e,t){return t[0](e)}function Fc(e){let t=Pc.find(u(_c,e));return t?t[1](e):"Unknown"}function sn(e){e.playerHits=$c(e),e.creatureHits=Ic(e),e.fightStatus=Fc(e)}function Oc(e){return e.callback.groupExists?e.callback.groupArmorValue:e.player.armorValue}function Kc(e){let t=Oc(e);e.overallArmorValue=t+Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}function qc(e){e.player.sanctuaryLevel>0&&(e.extraNotes+=`Sanc Bonus Armor = ${Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}<br>`)}function Wc(e){e.terrorizeEffect=Math.floor(e.creature.damage*e.player.terrorizeLevel*.001)}function Uc(e){e.player.terrorizeLevel>0&&(e.extraNotes+=`Terrorize Creature Damage Effect = ${e.terrorizeEffect*-1}<br>`)}function zc(e){e.creatureDamageDone=Math.ceil(e.generalVariable*e.creature.damage-e.overallArmorValue+e.overallHPValue)}function Yc(e){let t=e.generalVariable*e.creature.damage;t<e.overallArmorValue?e.numberOfCreatureHitsTillDead=e.overallHPValue:e.numberOfCreatureHitsTillDead=Math.ceil(e.overallHPValue/(t-e.overallArmorValue))}function Qc(e){e.creatureHitByHowMuch>=0?Yc(e):e.numberOfCreatureHitsTillDead="-"}function un(e){Kc(e),qc(e),Wc(e),Uc(e),e.creature.damage-=e.terrorizeEffect,zc(e),Qc(e)}function Xc(e){return e.callback.groupExists?e.callback.groupAttackValue:e.player.attackValue}function ll(e){return Math.floor(e.creature.defense*e.player.darkCurseLevel*mt)}function Jc(e){let t=e.creature.defense-ll(e);return e.combatEvaluatorBias===3?e.overallAttackValue-Math.ceil(t)-50:e.overallAttackValue-Math.ceil(e.attackVariable*t)}function cn(e){let t=Xc(e);e.player.darkCurseLevel>0&&(e.extraNotes+=`DC Bonus Attack = ${ll(e)}<br>`),e.nightmareVisageAttackMovedToDefense=Math.floor((t+e.counterAttackBonusAttack)*e.player.nightmareVisageLevel*.0025),e.player.nightmareVisageLevel>0&&(e.extraNotes+=`NMV Attack moved to Defense = ${e.nightmareVisageAttackMovedToDefense}<br>`),e.overallAttackValue=t+e.counterAttackBonusAttack-e.nightmareVisageAttackMovedToDefense,e.hitByHowMuch=Jc(e)}function jc(e){return e.player.counterAttackLevel>0&&e.numberOfHitsRequired===1}function fl(e){e.lowestCALevelToStillHit=Math.max(Math.ceil((e.counterAttackBonusAttack-e.hitByHowMuch+1)/e.player.attackValue/.0025),0),e.lowestCALevelToStillKill=Math.max(Math.ceil((e.counterAttackBonusDamage-e.damageDone+1)/e.player.damageValue/.0025),0)}function Zc(e){return e.player.counterAttackLevel>0?Math.ceil((1+e.player.doublerLevel/50)*.0025*e.lowestFeasibleCALevel):0}function em(e){e.extraAttackAtLowestFeasibleCALevel=Math.floor(e.player.attackValue*.0025*e.lowestFeasibleCALevel),e.extraDamageAtLowestFeasibleCALevel=Math.floor(e.player.damageValue*.0025*e.lowestFeasibleCALevel),e.extraNotes+=`Extra CA Att/Dam at this lowered CA level = ${e.extraAttackAtLowestFeasibleCALevel} / ${e.extraDamageAtLowestFeasibleCALevel}<br>`}function tm(e){fl(e),e.lowestFeasibleCALevel=Math.max(e.lowestCALevelToStillHit,e.lowestCALevelToStillKill),e.extraNotes+=`Lowest CA to still 1-hit this creature = ${e.lowestFeasibleCALevel}<br>`,e.lowestFeasibleCALevel!==0&&em(e),e.extraStaminaPerHitAtLowestFeasibleCALevel=Zc(e),e.extraStaminaPerHitAtLowestFeasibleCALevel<e.extraStaminaPerHit?e.extraNotes+=`Extra Stam Used at this lowered CA level = ${e.extraStaminaPerHitAtLowestFeasibleCALevel}<br>`:e.extraNotes+="No reduction of stam used at the lower CA level<br>"}function rm(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired!==1}function om(e){e.lowestCALevelToStillHit>175?e.extraNotes+="Even with CA175 you cannot hit this creature<br>":e.lowestCALevelToStillHit!==0&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillHit} to hit this creature<br>`)}function nm(e){e.lowestCALevelToStillKill>175?e.extraNotes+="Even with CA175 you cannot 1-hit kill this creature<br>":e.lowestCALevelToStillKill!==0&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillKill} to 1-hit kill this creature<br>`)}function im(e){fl(e),om(e),nm(e)}function mn(e){jc(e)&&tm(e),rm(e)&&im(e)}function am(e){return e.callback.groupExists?e.callback.groupHPValue:e.player.hpValue}function lm(e){return e.callback.groupExists?e.callback.groupDamageValue:e.player.damageValue}function fm(e){let t=am(e),{fortitudeLevel:r}=e.player;e.fortitudeExtraHPs=Math.floor(t*r*.001),r>0&&(e.extraNotes+=`Fortitude Bonus HP = ${e.fortitudeExtraHPs}<br>`),e.overallHPValue=t+e.fortitudeExtraHPs}function sm(e){let{chiStrikeLevel:t}=e.player;e.chiStrikeExtraDamage=Math.floor(e.overallHPValue*t*.001),t>0&&(e.extraNotes+=`Chi Strike Bonus Damage = ${e.chiStrikeExtraDamage}<br>`)}function dn(e){fm(e),sm(e);let t=lm(e);if(e.overallDamageValue=t+e.deathDealerBonusDamage+e.counterAttackBonusDamage+e.holyFlameBonusDamage+e.chiStrikeExtraDamage,e.damageDone=Math.floor(e.overallDamageValue-(e.generalVariable*e.creature.armor+e.hpVariable*e.creature.hp)),e.hitByHowMuch>0){let r=1;e.overallDamageValue>=e.generalVariable*e.creature.armor&&(r=e.overallDamageValue-e.generalVariable*e.creature.armor),e.numberOfHitsRequired=Math.ceil(e.hpVariable*e.creature.hp/r)}else e.numberOfHitsRequired="-"}function pn(e){return e.callback.groupExists?e.callback.groupDefenseValue:e.player.defenseValue}function um(e){e.player.constitutionLevel>0&&(e.extraNotes+=`Constitution Bonus Defense = ${Math.floor(pn(e)*e.player.constitutionLevel*.001)}<br>`)}function cm(e){e.player.flinchLevel>0&&(e.extraNotes+=`Flinch Bonus Attack Reduction = ${Math.floor(e.creature.attack*e.player.flinchLevel*.001)}<br>`)}function hn(e){e.overallDefenseValue=pn(e)+Math.floor(pn(e)*e.player.constitutionLevel*.001)+e.nightmareVisageAttackMovedToDefense,um(e),cm(e),e.creatureHitByHowMuch=Math.floor(e.attackVariable*e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue),e.combatEvaluatorBias===3&&(e.creatureHitByHowMuch=Math.floor(e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue-50))}function mm(e){e.player.superEliteSlayerLevel>0&&(e.extraNotes+=`SES Stat Reduction Multiplier = ${e.player.superEliteSlayerMultiplier}<br>`)}function dm(e){e.holyFlameBonusDamage=0,e.creature.class==="Undead"&&(e.holyFlameBonusDamage=Math.max(Math.floor((e.player.damageValue-e.creature.armor)*e.player.holyFlameLevel*.002),0),e.player.holyFlameLevel>0&&(e.extraNotes+=`HF Bonus Damage = ${e.holyFlameBonusDamage}<br>`))}function pm(e){e.deathDealerBonusDamage=Math.floor(e.player.damageValue*(Math.min(Math.floor(e.player.killStreakValue/5)*.01*e.player.deathDealerLevel,20)/100))}function hm(e){e.counterAttackBonusAttack=Math.floor(e.player.attackValue*.0025*e.player.counterAttackLevel),e.counterAttackBonusDamage=Math.floor(e.player.damageValue*.0025*e.player.counterAttackLevel)}function gm(e){e.extraStaminaPerHit=0,e.player.counterAttackLevel>0&&(e.extraStaminaPerHit=Math.ceil((1+e.player.doublerLevel/50)*.0025*e.player.counterAttackLevel))}function vm(e){e.player.deathDealerLevel>0&&(e.extraNotes+=`DD Bonus Damage = ${e.deathDealerBonusDamage}<br>`)}function ym(e){e.player.counterAttackLevel>0&&(e.extraNotes+=`CA Bonus Attack/Damage = ${e.counterAttackBonusAttack} / ${e.counterAttackBonusDamage}<br>CA Extra Stam Used = ${e.extraStaminaPerHit}<br>`)}function gn(e){e.extraNotes="",mm(e),dm(e),pm(e),hm(e),gm(e),vm(e),ym(e)}function Dm(e){return e.callback.groupExists?"Group ":""}function xm(e){return`<tr><td bgcolor="#CD9E4B" colspan="4" align="center">${Dm(e)}Combat Evaluation</td></tr>`}function km(e){return e.hitByHowMuch>0?"Yes":"No"}function wm(e){return`<tr><td align="right"><span style="color:#333333">Will I hit it? </td><td align="left">${km(e)}</td><td align="right"><span style="color:#333333">Extra Attack: </td><td align="left">( ${e.hitByHowMuch} )</td></tr>`}function Cm(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill it? </td><td align="left">${e.numberOfHitsRequired}</td><td align="right"><span style="color:#333333">Extra Damage: </td><td align="left">( ${e.damageDone} )</td></tr>`}function Bm(e){return e.creatureHitByHowMuch>=0?"Yes":"No"}function Am(e){return`<tr><td align="right"><span style="color:#333333">Will I be hit? </td><td align="left">${Bm(e)}</td><td align="right"><span style="color:#333333">Extra Defense: </td><td align="left">( ${-1*e.creatureHitByHowMuch} )</td></tr>`}function Lm(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill me? </td><td align="left">${e.numberOfCreatureHitsTillDead}</td><td align="right"><span style="color:#333333">Extra Armor + HP: </td><td align="left">( ${-1*e.creatureDamageDone} )</td></tr>`}function Sm(e){return`<tr><td align="right"><span style="color:#333333"># Player Hits? </td><td align="left">${e.playerHits}</td><td align="right"><span style="color:#333333"># Creature Hits? </td><td align="left">${e.creatureHits}</td></tr>`}function Em(e){return`<tr><td align="right"><span style="color:#333333">Fight Status: </span></td><td align="left" colspan="3"><span>${e.fightStatus}</span></td></tr>`}function bm(e){return`<tr><td align="right"><span style="color:#333333">Notes: </span></td><td align="left" colspan="3"><span style="font-size:x-small;">${e.extraNotes}</span></td></tr>`}function vn(e){return`<table width="100%"><tbody>${xm(e)}${wm(e)}${Cm(e)}${Am(e)}${Lm(e)}${Sm(e)}${Em(e)}${bm(e)}</tbody></table>`}var zt,Yt,rt;function Mm(e){if(!zt){let t=ve("body",e);t.length===1&&([zt]=t)}}function sl(){return ce(Yt)?"Remove from do not kill list":"Add to the do not kill list"}function ul(){f(sl(),rt)}function Hm(){let e=n.doNotKillList.indexOf(Yt);e===-1?n.doNotKillList.push(Yt):n.doNotKillList.splice(e,1),ul(),y("doNotKillList",n.doNotKillList.join()),Ae()}function Tm(){rt=T({className:"fshBl",textContent:sl(),type:"button"});let e=m({className:"description",innerHTML:'<span class="ui-helper-hidden-accessible"><input type="text"></span>'});i(e,rt),i(zt,e),B(rt,Hm)}function Vm(){rt?ul():Tm()}function yn(e,t){Mm(t),zt&&(Yt=ge(e),Vm())}var Oe,ot,Qt,Xt;function Nm(){Oe||(Oe=a("dialog-viewcreature"))}function Gm(){ot||(ot=m(),i(Oe,ot),i(Oe,m({innerHTML:'<span class="fshFooter">*Does include CA, DD, HF, DC, Flinch, Super Elite Slayer, NMV, Sanctuary, Constitution, Fortitude, Chi Strike and Terrorize (if active) and allow for randomness (1.1053). Constitution, NMV, Fortitude and Chi Strike apply to group stats.</span>'})))}function cl(){Qt||(Gm(),Qt=m(),i(ot,Qt))}function $m(){Xt||(cl(),Xt=m(),i(ot,Xt))}function ml(e){cl(),w(e,Qt)}function dl(e){$m(),w(e,Xt)}function Rm(e,t,r){r===3&&(t.attack-=Math.ceil(t.attack*e),t.defense-=Math.ceil(t.defense*e),t.armor-=Math.ceil(t.armor*e),t.damage-=Math.ceil(t.damage*e),t.hp-=Math.ceil(t.hp*e))}function Im(e,t){let r={name:e.name,class:e.creature_class,attack:Number(e.attack),defense:Number(e.defense),armor:Number(e.armor),damage:Number(e.damage),hp:Number(e.hp)};return Rm(t,r,e.type),r}function Pm(e){e.combatEvaluatorBias=n.combatEvaluatorBias,e.attackVariable=1.1053,e.generalVariable=n.generalVariable,e.hpVariable=n.hpVariable}function _m(e){gn(e),cn(e),dn(e),hn(e),un(e),sn(e),mn(e)}function pl(e,t,r){let o={};o.callback=r,o.player=be(t),Pm(o),o.creature=Im(e.response.data,o.player.superEliteSlayerMultiplier),_m(o),o.evaluatorHTML=vn(o),r.groupExists?dl(o.evaluatorHTML):ml(o.evaluatorHTML)}function Fm(e){return e.members[0].name===xt()}function Om(e){if(I(e.r))return e.r.find(Fm).id}function Km(e,t,r){if(!r.r||!r.r.attributes)return;let o=r.r.attributes;pl(e,t,{groupExists:!0,groupAttackValue:o[0].value,groupDefenseValue:o[1].value,groupArmorValue:o[2].value,groupDamageValue:o[3].value,groupHPValue:o[4].value})}function qm(e,t,r){r&&fn(r).then(u(Km,e,t))}function Wm(e,t){Hi().then(Om).then(u(qm,e,t))}function Um(e,t){e.player.hasGroup&&Wm(e,t),pl(e,t,{groupExists:!1})}function zm(e){return e.response&&e.response.data}function Ym(e,t){Nm(),Oe&&(ml(""),dl(""),zm(t)&&(yn(t.response.data.name,Oe),Ai(!0).then(u(Um,t))))}function Dn(){$.subscribe(qn,Ym)}var Jt,xn;function jt(){let e=[null,[n.buffs,n.buffsName],[n.buffs2,n.buffs2Name],[n.buffs3,n.buffs3Name]][n.enabledHuntingMode];I(e)&&([Jt,xn]=e)}function kn(e){e.target.name==="enabledHuntingMode"&&(n.enabledHuntingMode=e.target.value,y("enabledHuntingMode",n.enabledHuntingMode),jt(),GameData.fetch(W))}var nt;function gl(){nt=!nt,y("hidePlayerActions",nt),GameData.fetch(b)}function Qm(e){let t=ve("verbs",e);t.length===1&&Bt(t[0])}function hl(){if(!nt)return;let e=a("actionList");vt("player",e).forEach(Qm)}function vl(){nt=p("hidePlayerActions"),$.subscribe(he,hl),hl()}function wn(){n.showCreatureInfo=!n.showCreatureInfo,y("showCreatureInfo",n.showCreatureInfo)}function Cn(){n.showBuffs=!n.showBuffs,y("showHuntingBuffs",n.showBuffs),GameData.fetch(W)}function Bn(){n.showMonsterLog=!n.showMonsterLog,y("showMonsterLog",n.showMonsterLog)}function An(){n.hideSubLvlCreature=!n.hideSubLvlCreature,y("hideSubLvlCreature",n.hideSubLvlCreature),GameData.fetch(b)}function Xm(){return m({id:"fshWorldPrefs",innerHTML:`${ie("showCreatureInfo")}&nbsp;&nbsp;${ie("showMonsterLog")}&nbsp;&nbsp;${ie("showTitanInfo")}&nbsp;&nbsp;${ie("showBuffInfo")}<br>${ie("hideSubLvlCreature")}&nbsp;&nbsp;${ie("hidePlayerActions")}&nbsp;&nbsp;${Ji()}`})}var Jm={hideSubLvlCreature:An,hidePlayerActions:gl,showCreatureInfo:wn,showHuntingBuffs:Cn,showMonsterLog:Bn,showTitanInfo:rl,showBuffInfo:oa};function jm(e){let t=Jm[e.target.name];dt(t)&&(e.target.blur(),t(e))}function Ln(){let e=m({className:"fshCenter fshFten"}),t=Xm();B(t,jm),R(t,"change",kn),i(e,t);let r=m();i(e,r);let o=a("worldContainerBelow").children[0];return At(e,o),r}function Zm(e,t){return e[t.name]=!0,e}function ed(e,t,r){return e[ge(r)]||t.push(r),t}function td(e,t){w(`You are missing some ${xn} hunting buffs<br>(${t.join(", ")})`,e)}function yl(e){w("",e)}function rd(e,t){let r=t.b.reduce(Zm,{}),o=Jt.reduce(u(ed,r),[]);o.length>0?td(e,o):yl(e)}function od(e,t,r){n.showBuffs?rd(e,r):yl(e)}function nd(e,t,r){Jt&&od(e,t,r)}function Sn(e){jt();let t=u(nd,e);$.subscribe(st,t),n.showBuffs&&window.initialGameData&&t(null,{b:window.initialGameData.player.buffs})}var Zt=[{generalVariable:1.1053,hpVariable:1.1},{generalVariable:1.1,hpVariable:1.053},{generalVariable:1.053,hpVariable:1},{generalVariable:1.1053,hpVariable:1}];function id(e){return Zt[e]?Zt[e].generalVariable:1.1053}function ad(e){return Zt[e]?Zt[e].hpVariable:1.1}function En(){n.combatEvaluatorBias=p("combatEvaluatorBias"),n.generalVariable=id(n.combatEvaluatorBias),n.hpVariable=ad(n.combatEvaluatorBias)}function ld(e){return!e||!e.actions||e.actions.length===0}function fd(e,t){return t.type===6?t.data.creature_type!==0||t.data.level>=e:!0}function sd(e){return e.realm&&e.realm.minlevel||GameData.realm().minlevel}function ud(e){let t=ti(e);return ld(t)?e:(t.actions=t.actions.filter(u(fd,sd(t))),ii(t))}function cd(e){return e.data&&e.data.d&&Wi(e.data.d,b)}function md(e,t){n.hideSubLvlCreature&&cd(t)&&(e.dataFilter=ud)}function bn(){$.ajaxPrefilter("JSON",md),n.hideSubLvlCreature&&GameData.fetch(b)}function dd(e){n[e[0]]=fr(e[1])}function pd(){[["buffs","huntingBuffs"],["buffs2","huntingBuffs2"],["buffs3","huntingBuffs3"]].forEach(dd)}function hd(e){n[e]=fr(e)}function gd(){["doNotKillList"].forEach(hd)}function vd(){pd(),gd()}function yd(e){n[e[0]]=p(e[1])}function Dd(){[["buffsName","huntingBuffsName"],["buffs2Name","huntingBuffs2Name"],["buffs3Name","huntingBuffs3Name"],["showBuffs","showHuntingBuffs"]].forEach(yd)}function xd(e){n[e]=p(e)}function kd(){["enabledHuntingMode","hideSubLvlCreature","showTitanInfo","showBuffInfo","showMonsterLog","showCreatureInfo"].forEach(xd)}function wd(){Dd(),kd()}function Cd(){vd(),wd()}function Mn(){En(),Cd();let e=Ln();bn(),Sn(e),vl()}function Bd(){$("#messageCenter").worldMessageCenter({offset:"0 60"})}function Ad(){Ce("#mapTooltip")}var Ld=[Mn,tn,Dn,Xr,_r,Or,$o,Zo,Pr,jo,nn,So,Bd,Ad,Nr,ra,Kr,No,Rr,Qr,Go];function Sd(){Yi(Ld),n.userIsDev&&Jr()}export{Sd as default};
//# sourceMappingURL=newMap-JNEMYIPX.js.map
