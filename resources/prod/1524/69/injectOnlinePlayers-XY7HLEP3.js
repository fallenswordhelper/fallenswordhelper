import{a as D,b as E}from"./chunk-BXDVFGZC.js";import"./chunk-YZKYXQ6I.js";import"./chunk-YBFTTM4L.js";import{a as H,b as _}from"./chunk-ZGORUKJK.js";import{a as j}from"./chunk-CUX5IHHK.js";import{a as q}from"./chunk-V7HQRWBP.js";import{a as V}from"./chunk-ZS4UMFEX.js";import"./chunk-343V7Q36.js";import"./chunk-2RDTH7U3.js";import{a as d}from"./chunk-IC2XAH4D.js";import{a as p}from"./chunk-NALZIN2F.js";import"./chunk-I6BQR2GZ.js";import"./chunk-C2EU36VT.js";import{a as I}from"./chunk-NMJUS4XE.js";import"./chunk-W4QLHFVR.js";import{a as m}from"./chunk-2XKHMDYT.js";import"./chunk-B3OVUKAM.js";import"./chunk-P2FYCUOG.js";import"./chunk-R2V5M2SX.js";import"./chunk-VUJR46HY.js";import{a}from"./chunk-GZKSMROH.js";import"./chunk-2S53WZYG.js";import"./chunk-YFAGS6ZD.js";import{a as R}from"./chunk-VHX5BADE.js";import{a as T}from"./chunk-BCLJ7VQ3.js";import{a as w}from"./chunk-C2PRBDAE.js";import"./chunk-C6PSWFF5.js";import"./chunk-KD4PPF2P.js";import{a as s}from"./chunk-L4MPHVE4.js";import{a as N,b as k}from"./chunk-Z7YJKURW.js";import"./chunk-JGGUTXQ5.js";import"./chunk-C3DMTIKU.js";import"./chunk-REHXFZMP.js";import"./chunk-WYX2VQXF.js";import"./chunk-KYNUAHCU.js";import{a as O}from"./chunk-OMYF6YAB.js";import{a as C}from"./chunk-QLI6SQ7D.js";import{a as u,b as i}from"./chunk-X53ITBGR.js";import"./chunk-VB2T76EA.js";import{a as M}from"./chunk-B6YTNR7S.js";import"./chunk-HJTXNVMV.js";import"./chunk-2PDPTZUM.js";import{j as x}from"./chunk-RRAQGRWM.js";import"./chunk-UMFA3PXI.js";function J(e,t){let r=$("<div/>").append(e[t][0]);return $("img",r).addClass("fshImgCntr"),[r.html(),e[t][1],e[t][2],e[t][3]*100+e[t][4]+1]}function v(e){return T(e).map(s(J,e))}var B,S;function K(e){let t=e.match(x);if(t)return Number(t[1])}var X=[()=>B,e=>K(e[0])!==V(),e=>p(e[2])>=D(),e=>p(e[2])<=E()];function Y(e){return X.every(t=>t(e))}function Z(e,t){Y(t)&&$("td",e).eq(2).addClass("lvlHighlight")}function ee(e){return{columns:[{title:"Guild",class:"dt-center",orderable:!1},{title:"Name",class:"dt-center"},{title:"Level",class:"dt-center"},{title:"Page/Index",class:"dt-center"}],createdRow:Z,data:e,deferRender:!0,lengthMenu:[[30,60,-1],[30,60,"All"]],order:[3,"desc"],pageLength:30,stateDuration:0,stateSave:!0}}function A(e,t){B=i("highlightPlayersNearMyLvl"),S=$("#fshInv",e).DataTable(ee(t))}function h(){S.draw()}function g(e){(e.target.id==="fshMinLvl"||e.target.id==="fshMaxLvl")&&h()}function y(){let e=i("lastOnlineCheck");return m-e>3e5?'<span> (takes a while to refresh so only do it if you really need to) </span><span id="fshRefresh" class="fshLink">[Refresh]</span>':`<span>[ Wait ${Math.round(300-(m-e)/1e3)}s ]</span>`}function G(e,t){return parseInt($(e,t).val(),10)}function Q(e,t){q(t)||a(e,t)}function te(e,t,r){let o=G("#fshMinLvl",e),f=G("#fshMaxLvl",e);Q("onlinePlayerMinLvl",o),Q("onlinePlayerMaxLvl",f);let F=w(p(r[2]),0);return _(H,F,o,f)}function P(e){$.fn.dataTable.ext.search.push(s(te,e)),$("#fshOutput",e).html(`<div align=right>Min lvl:<input value="${i("onlinePlayerMinLvl")}" class="fshNumberInput" type="number" id="fshMinLvl" /> Max lvl:<input value="${i("onlinePlayerMaxLvl")}" class="fshNumberInput" type="number" id="fshMaxLvl" /> <input id="fshReset" type="button" value="Reset"/></div><table id="fshInv" class="allow stripe hover"></table>`)}function L(e){a("onlinePlayerMinLvl",u.onlinePlayerMinLvl),a("onlinePlayerMaxLvl",u.onlinePlayerMaxLvl),$("#fshMinLvl",e).val(u.onlinePlayerMinLvl),$("#fshMaxLvl",e).val(u.onlinePlayerMaxLvl),h()}var n,l,c,b;function U(e){l=e||{},P(n),A(n,v(l))}function re(){c===b&&(k("fsh_onlinePlayers",l),U(l))}function ne(e,t){return l[e]&&l[e][3]>t}function le(e,t,r){return[r.eq(0).html(),r.eq(1).html(),r.eq(2).text(),e,t]}function ie(e,t,r){let o=$("td",$(r)),f=o.eq(1).text();ne(f,e)||(l[f]=le(e,t,o))}function ae(e,t){let r=t.attr("value");$('#pCC img[src$="/world/icon_action_view.png',e).parent().parent().parent().each(s(ie,r))}function oe(e){return parseInt(e.parent().text().match(/(\d+)/g)[0],10)}function se(e,t){b=oe(t);for(let r=2;r<=b;r+=1)d(r).then(e)}function W(e){$("#fshOutput",n).append(e)}function z(e){W(` ${c+1}`);let t=I(e),r=$("#pCC input.custominput",t).first();ae(t,r),c+=1,c===1&&se(z,r),re()}function fe(){$("#fshRefresh",n).hide(),c=0,l={},d(1).then(z),a("lastOnlineCheck",m),W("Parsing online players...")}function ue(e){e.target.id==="fshRefresh"&&fe(),e.target.id==="fshReset"&&L(n)}function me(){n.html(`<span><b>Online Players</b></span>${y()}<div id="fshOutput"></div>`),N("fsh_onlinePlayers").then(U),C(n[0],ue),M(n[0],"keyup",g)}function pe(e){R()||(e?n=$(e):n=$("#pCC"),j().then(me),O("ui-dialog-titlebar-close").forEach(t=>t.blur()))}export{pe as default};
//# sourceMappingURL=injectOnlinePlayers-XY7HLEP3.js.map
