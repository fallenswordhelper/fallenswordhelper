import{a as Tt,b as St}from"./chunk-6XJOADTT.js";import{a as wt}from"./chunk-DPC5FAOK.js";import{a as vt}from"./chunk-RO7HDNZ5.js";import{a as H}from"./chunk-D6GLMLM7.js";import{a as Ct}from"./chunk-73ZTPL6Z.js";import{a as kt}from"./chunk-N3SHMGZC.js";import{a as Lt}from"./chunk-5XXWOW37.js";import{a as xt}from"./chunk-LXYEJJWX.js";import"./chunk-LJRMEKGW.js";import{a as M}from"./chunk-TQWSWCCK.js";import{a as yt}from"./chunk-KFLR42PG.js";import{a as ut,b as gt,c as dt,d as ht}from"./chunk-BIMXRRM2.js";import"./chunk-MDICPLKG.js";import"./chunk-R6E6ZT6M.js";import"./chunk-FEGGAFE5.js";import"./chunk-WECAB7BZ.js";import{a as bt}from"./chunk-RISXYIY6.js";import{a as st}from"./chunk-JIL2P32G.js";import{a as ot}from"./chunk-HVTF56GH.js";import"./chunk-YTQRLILB.js";import"./chunk-FGUABTB2.js";import{a as nt}from"./chunk-EDDILQHZ.js";import{a as s}from"./chunk-HT2E4BH5.js";import"./chunk-MC5MD6GH.js";import{a as c}from"./chunk-3OTERK3T.js";import"./chunk-ZWF3BA7K.js";import{a as N}from"./chunk-KKZ6YNXE.js";import"./chunk-JD6SFYTB.js";import{a as b}from"./chunk-5CREU7DW.js";import{a as lt}from"./chunk-K3XM2YMD.js";import{a as n}from"./chunk-2FWCZQ2C.js";import"./chunk-PQQEDEVZ.js";import{a as x}from"./chunk-HRU4Z4QT.js";import"./chunk-3M4BGLDY.js";import"./chunk-ZHNBOA2F.js";import"./chunk-XWM4YOEC.js";import"./chunk-VYBTCWLD.js";import"./chunk-CA4APEYC.js";import"./chunk-J7FI7RN5.js";import{a as B}from"./chunk-CQCU44WW.js";import"./chunk-X75KV2D3.js";import{c as E}from"./chunk-2ABCLOD4.js";import{a as ft}from"./chunk-IKLQU6YP.js";import"./chunk-CIKNJBXV.js";import{a as Y}from"./chunk-VRA7M2VL.js";import{a as P}from"./chunk-2UUQ3JZJ.js";import"./chunk-3N7IQHYA.js";import{a as at}from"./chunk-RIMALT5Z.js";import"./chunk-VZP2JUPU.js";import"./chunk-MG45P7RB.js";import"./chunk-CQKCIFA5.js";import{a as pt}from"./chunk-GEQ6SBFU.js";import{a as ct}from"./chunk-5JOFCACO.js";import"./chunk-NFXVO5QH.js";import{a as l}from"./chunk-HZVS66QI.js";import{a as it}from"./chunk-E546N3MN.js";import{a as h}from"./chunk-NPERBP7A.js";import{a as d}from"./chunk-SPFEL7UW.js";import"./chunk-327LTRO2.js";import"./chunk-27TM5UBE.js";import"./chunk-MUNFS2PQ.js";import"./chunk-SY4GQ6JX.js";import"./chunk-THRA3S6L.js";import"./chunk-TM7HV6I4.js";import{a as w}from"./chunk-R4VVRPE7.js";import{a as mt}from"./chunk-D4CTFWTI.js";import"./chunk-ZS2ZYLXC.js";import{a as u}from"./chunk-ACU3ECUK.js";import"./chunk-PPNXLBJ3.js";import{b as i}from"./chunk-OHGKEFPZ.js";import{a}from"./chunk-KGBQEEPA.js";import{a as y}from"./chunk-MO5YK3AA.js";import{a as K}from"./chunk-KWZPRQOD.js";import{a as f}from"./chunk-BMEPSGPW.js";import"./chunk-X2HBFA4R.js";import"./chunk-2FN2TMEO.js";import{c as m}from"./chunk-7CIGM6WR.js";import{G as C,K as rt,Na as et,k,l as Z,ta as v,wa as g,y as tt}from"./chunk-S2DS6Q2Q.js";import{a as T}from"./chunk-DPOGJLEK.js";import"./chunk-MHZN7LER.js";import{a as S}from"./chunk-JVNW5U7Y.js";import{a as G}from"./chunk-IWZ3GP32.js";import"./chunk-57NIVQFE.js";var Nt=0,Bt=1;function Rt(t,r){let{mins:e}=B(r.dataset.tipped);return e<44640&&(t[Nt]+=1,t[Bt]+=Number(u(k,r.dataset.tipped))),t}function jt(t){return t.reduce(Rt,[0,0])}function $(){let t=h("b",i()).find(P("Members"));if(t){let r=Tt(),e=jt(r);t.classList.add("tip-static"),Ct(`Active: ${e[Nt]}/${r.length}<br>Stamina: ${N(e[Bt])}`,t)}}function Et(t,r){let e=u(r,t.replace(/,/g,""));return e?parseInt(e,10):0}function Dt(t,r){let e="";return t>r&&(e="+"),e+N(t-r)}function Ft(t){let r=t.dataset.tipped,e=Et(r,/XP Lock: <b>(?<lockXp>\d*)/),o=Et(r,/XP: <b>(?<realXp>\d*)/);c(t.parentNode.nextElementSibling,` (<b>${Dt(o,e)}</b>)`)}function V(){let t=l('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&Ft(t)}function R(){let t=h(g,i()).slice(-2,-1)[0];if(!t)return;let r=t.rows[0].cells[0],e=b({id:"profile-bio",innerHTML:r.innerHTML});a("",r),n(r,e),wt()}var j=0,D=0;function Ut(t){return j&&t>=ut()&&t<=gt()}function Xt(t){return D&&t>=dt()&&t<=ht()}var qt=t=>[t,B(t.dataset.tipped).days],_t=([,t])=>t<7,Qt=([t])=>[t,Number(u(Z,t.dataset.tipped))],zt=([t,r])=>[t.parentNode.parentNode.rowIndex,Ut(r),Xt(r)];function Ot(){return w('#pCC a[data-tipped*="<td>VL:</td>"]').map(qt).filter(_t).map(Qt).map(zt)}function Wt(){return Number(ot("guild_id"))!==lt()&&(j||D)}var Jt=t=>t.map(([r])=>`.fshHighlight tr:nth-child(${r+1})`).join(",");function Pt(t,r){if(t.length){let e=`${Jt(t)} {background-color: #${r};}`;n(document.body,H(e))}}function Kt(t,r){if(t.length+r.length){let e=d(g,i());e[e.length-1].classList.add("fshHighlight")}}function Yt(){let t=Ot(),r=t.filter(([,o])=>o),e=t.filter(([,o,L])=>!o&&L);Pt(r,"4671C8"),Pt(e,"FF9900"),Kt(r,e)}function Zt(){Wt()&&Yt()}function F(){j=m("highlightPlayersNearMyLvl"),D=m("highlightGvGPlayersNearMyLvl"),Zt(),m("enableHistoryCompressor")&&R()}function tr(t){c(t.parentNode,' <span class="smallLink">[b]</span>')}function rr(t){t.target.className==="smallLink"&&xt(Lt(t.target.previousElementSibling.href))}function U(){let t=mt(`#pCC a[href^="${tt}"]`);vt([3,t,0,tr]),y(i(),rr)}function I(t){return ct({cmd:"guild",subcmd:"conflicts",page:t})}function Ht(t,r){a(r,t.insertCell(-1))}function It(t,r,e){let o=t.insertRow(t.rows.length-2);Ht(o,r),Ht(o,e)}function er(t){It(t,`<a href="${C}conflicts">Active Conflicts</a>`,"Score")}function or(t,r){It(t,r.cells[0].innerHTML,`<b>${r.cells[6].innerHTML}</b>`)}function ir(t,r,e){r===1&&er(e),bt(t,7,0).forEach(S(or,e))}function nr(t,r,e){let o=l("#pCC > table > tbody > tr > td > table",t);o&&o.rows.length>3&&ir(o,r,e)}function mr(t){return Number(t.nextSibling.textContent.split("\xA0")[2])}async function lr(t,r,e){let o=await I(t+1);r(e,o)}function At(t,r){let e=pt(r),o=l('#pCC input[name="page"]',e);if(!o)return;let L=Number(o.value),Vt=mr(o);nr(e,L,t.node),Vt>L&&lr(L,At,t)}async function X(t){let[r]=t.rows[6].cells[0].children;if(r){let e=await I(1);At({node:r},e)}}function q(t){let r=t.target.dataset.linkto,e=K(r);if(!e)return;let o=nt("fshHide",e);e.classList.toggle("fshHide"),o?f(r,""):f(r,"ON")}function sr(t){return M({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function cr(t){let r=M({className:"fshNoWrap",innerHTML:"[&nbsp;"});return n(r,t),c(r,"&nbsp;]"),r}function _(t,r,e){let o=sr(e);n(t,cr(o)),r.id=e,m(e)&&yt(r),y(o,q)}function Gt(t){_(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function Mt(t){let r=t.rows[4].cells[1].children[0];a(it(r.innerHTML),r),_(r,t.rows[6].cells[0].children[0],"statisticsControl")}function $t(t){let r=t.rows[15]?.cells[1].children[0];r&&_(r,t.rows[17].cells[0].children[0],"guildStructureControl")}var Q=0;function ar(t){let{stam:r,max:e}=ft(k,t.dataset.tipped);return Math.min(Math.round(Number(r)/Number(e)*100),100)}function fr(t){let r=ar(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${r}%, transparent ${r+1}%)}`}function pr(){let t=d(g,i()),r=t[t.length-1];r.classList.add("fshProgressBar");let o=w(et,r).map(fr).join(`
`);Q=n(document.body,H(o)).sheet}function A(t){Q?Q.disabled=!t:pr()}var z="enableStamBars",p=0;function ur(){p=!p,f(z,p),A(p),x("guildManage","StamBars")}function gr(){if(!l("#pCC img.guild_openGuildStore"))return;let r=n(i(),b({innerHTML:E(z),style:{marginLeft:"66%"}}));T(r,"change",ur)}function O(){gr(),p=m(z),p&&A(p)}function dr(t){t.target.id===v&&(x("Guild Tracker","togglePref"),f(v,t.target.checked))}function hr(){x("Guild Tracker","showTracker"),st()}function W(){let t=l("#pCC img.guild_openGuildStore");if(!t)return;let r=t.parentNode;r.classList.add("fshRelative");let e=b({className:"fsh-tracker",innerHTML:`${E(v)}&nbsp;`});T(e,"change",dr);let o=kt({textContent:"Show"});y(o,hr),n(e,o),n(r,e)}function br(t){let r=h("b",t).filter(P("Relics"));if(r.length!==1)return;let e=r[0].parentNode.nextElementSibling.children[0];a(`[ <a href="${C}reliclist">Control</a> ]&nbsp;`,e)}function yr(t){let r=d("li",t);if(!r||!r.length)return;let e=r[r.length-1].parentNode;c(e,`<li><a href="${rt}${Y()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function Lr(){return i().lastElementChild.rows?.[2]?.cells[0].children[0]}function xr(t,r){s(3,r,[t])}function kr(t){[Gt,Mt,$t,br,yr].forEach(S(xr,t))}function Cr(t){at()||(m("detailedConflictInfo")&&s(3,X,[t]),s(4,W))}function J(){if(!i())return;let t=Lr();t&&(kr(t),m("showBuffLinks")&&s(3,U),Cr(t),O())}function vr(){s(3,St),s(3,V),s(3,$),["-","manage"].includes(G.subcmd)&&J(),G.subcmd==="view"&&F()}export{vr as default};
//# sourceMappingURL=injectGuild-3DERMWQ7.js.map
