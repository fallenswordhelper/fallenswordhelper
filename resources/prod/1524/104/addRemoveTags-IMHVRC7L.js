import{a as K}from"./chunk-54NNAJUW.js";import{a as f,b as X}from"./chunk-2NU22J4C.js";import"./chunk-2SHJUXGK.js";import"./chunk-X3Y5T3W7.js";import{a as J}from"./chunk-MF7H32SH.js";import{a as L}from"./chunk-RRMRN6AB.js";import{a as W}from"./chunk-NKI4UEHE.js";import"./chunk-UE5LUBTX.js";import{a as m}from"./chunk-U4PTS6TH.js";import{a as x}from"./chunk-TQWSWCCK.js";import"./chunk-CBRFJXMQ.js";import{a as P}from"./chunk-RX4C5245.js";import{a as j}from"./chunk-BOHFWP5X.js";import{a as F}from"./chunk-EHR57YJJ.js";import{a as v}from"./chunk-5I23UAD2.js";import"./chunk-FGUABTB2.js";import{a as z}from"./chunk-TJPZYDQS.js";import"./chunk-VYP6NXID.js";import"./chunk-EDDILQHZ.js";import"./chunk-CKN7HU5O.js";import{a as b}from"./chunk-3OTERK3T.js";import"./chunk-ZWF3BA7K.js";import"./chunk-XXZOONC5.js";import"./chunk-GY3JG5AQ.js";import{a as p}from"./chunk-A4SVD2MS.js";import"./chunk-XSBXLWG4.js";import"./chunk-AF6X2EPJ.js";import{a as h}from"./chunk-HYRNIGZC.js";import"./chunk-S5FVRE4H.js";import"./chunk-PQQEDEVZ.js";import"./chunk-ECN5M6TA.js";import"./chunk-5THSM4BA.js";import{a as H}from"./chunk-HRU4Z4QT.js";import"./chunk-NEOIIKPE.js";import"./chunk-XWM4YOEC.js";import"./chunk-TLD65X3G.js";import"./chunk-Z7UI4YWM.js";import"./chunk-GEQ6SBFU.js";import{a as _}from"./chunk-5JOFCACO.js";import{a as q}from"./chunk-NFXVO5QH.js";import{a as s}from"./chunk-HZVS66QI.js";import"./chunk-E546N3MN.js";import"./chunk-327LTRO2.js";import"./chunk-27TM5UBE.js";import{a as D}from"./chunk-5SCNACF3.js";import"./chunk-MUNFS2PQ.js";import"./chunk-SY4GQ6JX.js";import"./chunk-THRA3S6L.js";import"./chunk-TM7HV6I4.js";import{a as i}from"./chunk-R4VVRPE7.js";import"./chunk-D4CTFWTI.js";import"./chunk-ZS2ZYLXC.js";import"./chunk-ACU3ECUK.js";import{b as l}from"./chunk-OHGKEFPZ.js";import{a as G}from"./chunk-MO5YK3AA.js";import{a as g}from"./chunk-KWZPRQOD.js";import"./chunk-X2HBFA4R.js";import"./chunk-S2DS6Q2Q.js";import{a as N}from"./chunk-DPOGJLEK.js";import"./chunk-MHZN7LER.js";import{a}from"./chunk-JVNW5U7Y.js";import{a as B}from"./chunk-IWZ3GP32.js";import"./chunk-57NIVQFE.js";function T(t){return f({subcmd2:"takeitem",guildstore_id:t})}function U(t){return t.r===0?{s:!0}:{e:{message:t.m},s:!1}}async function k(t){let e=await X(t);return U(e)}function y(t){return p(T,k,t)}function I(t,e){return f({subcmd2:t,tagIndex:e})}async function A(t,e){let o=await _({cmd:"guild",subcmd:"inventory",subcmd2:t,tagIndex:e});return W(o)}function c(t,e){return p(I,A,t,e)}function d(){return s('[name="subcmd2"]').value}var V=t=>s("input",m(t)),O=t=>v("div",t).dataset.invId;function Y(){i('#pCC input[name="tagIndex[]"]').forEach(h)}function Z(t,e){let o=O(e),[,,n,u]=t.find(([,r])=>r===o);t.filter(([,,r,R])=>r===n&&R===u).filter(([r])=>document.body.contains(r)).map(([r])=>r).forEach(h)}function tt(t){let e=x({className:t.className.replace("-btn","")});t.replaceWith(e)}function et(t){i("button:not(.tag-bp-btn)",t).forEach(tt)}function ot(t,e){let o=x({className:`tag-${t} fshSpinner fshSpinner12`});return e.replaceWith(o),et(v("div",o)),o}async function w(t,e,o,n){let u=O(n);V(n)?.remove();let r=ot(t,n);(await e(u)).s&&(r.classList.remove("fshSpinner"),F(o,r))}function M(t){return c(d(),[t])}function nt(t){return[["tag-all-custom",Y],["tag-bp-btn",a(w,"bp",y,"Taken")],["tag-all-btn",a(Z,t)],["tag-add-btn",a(w,"add",M,"Tagged")],["tag-remove-btn",a(w,"remove",M,"Removed")]]}function S(t){G(l(),z(nt(t)))}var rt=()=>i('[name="tagIndex[]"]:checked');async function at(t,e){let o=await c(t,e.map(n=>n.value));o.s?e.forEach(K):j(o.e.message)}function it(t){t.preventDefault(),L(25,rt()).forEach(a(at,d())),H("addRemoveTags","Tag by AJAX")}function $(){N(document.forms[0],"submit",it)}var C=()=>B.subcmd2==="addtags",mt=t=>s("img",m(t)).src.split("/").at(-1).split(".")[0],st=t=>q(m(t).cells[2]),Q=(t,e)=>`<button class="${t}" type="button">${e}</button>`,ct=t=>D(t).split(" ").at(-1),dt=t=>`tag-${ct(t)}-btn`,E=t=>`[${Q(dt(t),t)}]`,lt=t=>t>1?`${E("Check All")}&nbsp;`:"",pt=()=>C()?"Add":"Remove",ft=()=>E(`Fast ${pt()}`),ut=()=>E("Fast BP"),gt=(t,e)=>`<div class="btn-div" data-inv-id="${t}">${e}</div>`,bt=(t,e)=>gt(t,`&nbsp;${lt(e)}${ft()}&nbsp;${ut()}`);function ht([t,e,,,o]){let n=m(t).cells[2];b(n,bt(e,o))}function vt(t){return[t,t.value,mt(t),st(t)]}function xt(t){return t.map(e=>[...e,t.filter(([,,o,n])=>o===e[2]&&n===e[3]).length])}function Tt(){let e=i('input[name="tagIndex[]"]',l()).map(vt);return xt(e)}function kt(t){let e=t.parentNode;C()&&(e=m(t).insertCell(-1)),b(e,Q("tag-all-custom custombutton","Check&nbsp;All"))}function yt(t){if(!C())return;let e=J(t);e.className="add-remove-tags"}function It(){let t=Tt();if(!t.length)return;let e=g("tagging_cost");yt(e),kt(e),t.forEach(ht),S(t),$()}function At(){g("tagging_cost")?It():P()}export{At as default};
//# sourceMappingURL=addRemoveTags-IMHVRC7L.js.map
