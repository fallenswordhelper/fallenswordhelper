import{a as y}from"./chunk-7FOOSKJC.js";import{a as z,b as j}from"./chunk-AZQTZUTR.js";import"./chunk-ECSTVKIH.js";import"./chunk-YUARS2NO.js";import{a as G}from"./chunk-FWW5DXEL.js";import{a as U}from"./chunk-73ZTPL6Z.js";import{a as k}from"./chunk-7CJVFSHW.js";import{a as b}from"./chunk-WKIH54NU.js";import{a as M}from"./chunk-R7T4ZQAY.js";import{a as q}from"./chunk-LZJ5BIMW.js";import"./chunk-BLQUXFLH.js";import"./chunk-3SL5WG7I.js";import{a as h}from"./chunk-TQWSWCCK.js";import{a as m}from"./chunk-HVTF56GH.js";import"./chunk-YTQRLILB.js";import"./chunk-ZWF3BA7K.js";import"./chunk-WEN7JPPW.js";import"./chunk-A4SVD2MS.js";import"./chunk-XSBXLWG4.js";import"./chunk-AF6X2EPJ.js";import"./chunk-JD6SFYTB.js";import"./chunk-W2XMDHBV.js";import{a as F}from"./chunk-HYRNIGZC.js";import"./chunk-B2HZSNN4.js";import"./chunk-S5FVRE4H.js";import"./chunk-2FWCZQ2C.js";import"./chunk-PQQEDEVZ.js";import{a as R}from"./chunk-HRU4Z4QT.js";import"./chunk-XWM4YOEC.js";import"./chunk-Z7UI4YWM.js";import"./chunk-4SPTP2EM.js";import{a as d}from"./chunk-LDVCHSP7.js";import"./chunk-CIKNJBXV.js";import{a as _}from"./chunk-RIMALT5Z.js";import"./chunk-MG45P7RB.js";import"./chunk-CQKCIFA5.js";import"./chunk-GEQ6SBFU.js";import"./chunk-5JOFCACO.js";import"./chunk-NFXVO5QH.js";import{a as n}from"./chunk-HZVS66QI.js";import"./chunk-E546N3MN.js";import{a as p}from"./chunk-SPFEL7UW.js";import"./chunk-327LTRO2.js";import"./chunk-27TM5UBE.js";import{a as u}from"./chunk-MUNFS2PQ.js";import"./chunk-SY4GQ6JX.js";import"./chunk-THRA3S6L.js";import"./chunk-TM7HV6I4.js";import{a as s}from"./chunk-R4VVRPE7.js";import{a as O}from"./chunk-D4CTFWTI.js";import"./chunk-ZS2ZYLXC.js";import"./chunk-ACU3ECUK.js";import{a as i}from"./chunk-KGBQEEPA.js";import{a as g}from"./chunk-MO5YK3AA.js";import{a as o}from"./chunk-KWZPRQOD.js";import{a as Q}from"./chunk-BMEPSGPW.js";import"./chunk-X2HBFA4R.js";import"./chunk-2FN2TMEO.js";import{c as w}from"./chunk-7CIGM6WR.js";import"./chunk-S2DS6Q2Q.js";import{a as I}from"./chunk-DPOGJLEK.js";import"./chunk-MHZN7LER.js";import{a as x}from"./chunk-JVNW5U7Y.js";import"./chunk-IWZ3GP32.js";import"./chunk-57NIVQFE.js";function ft(t){let e=n("span.fshLastActivity",t);if(!e){e=h({className:"fshLastActivity"});let r=p("h1",t)[0];b(e,r)}return e}function S(t){if(!t)return;let e=n(`div.player[data-username="${t.username}"]`),r=ft(e);i(`Last Activity: ${M(t.last_login)}<br>Stamina: ${t.current_stamina} / ${t.stamina} ( ${Math.floor(t.current_stamina/t.stamina*100)}% )`,r)}function c(t){return Number(u(t).replace(/[[\]]/g,""))}function ot(t,e){if(!e){let r=h({className:"fshPlayer"});return b(r,t.nextElementSibling),r}return e}function it(t,e){return t>e?"fshRed":"fshGreen"}function nt(t,e,r){if(!e){i("",r);return}let f=t.nextElementSibling.children[0].children[0],a=c(f),et=ot(t,r),rt=it(a,e);i(` <span class="${rt}">[${e}]</span>`,et)}function at(t,e){return e[0]===t}function st(t,e){let r=e.getAttribute("data-name"),f=t.find(x(at,r));if(f)return f[1]}function ut(t,e){let r=st(t,e),f=e.nextElementSibling.nextElementSibling;(r||f)&&nt(e,r,f)}function ct(t){return t.split(/ \[|]/)}function lt(t){return d(u(t.parentNode.lastElementChild)).map(ct)}async function v(t){let e=t.target;if(e.tagName!=="H1")return;let r=y(u(e)),f=lt(e);s("#buff-outer input[name]").forEach(x(ut,f)),S(await r)}var V='<div id="helperQBheader"><table class="quickbuffTable"><thead><tr><th class="quickbuffTableHeader">Sustain</th><th class="quickbuffTableHeader">Fury Caster</th><th class="quickbuffTableHeader">Guild Buffer</th><th class="quickbuffTableHeader">Buff Master</th><th class="quickbuffTableHeader">Extend</th><th class="quickbuffTableHeader">Reinforce</th></tr></thead><tbody><tr><td id="fshSus" class="quickbuffTableDetail">&nbsp;</td><td id="fshFur" class="quickbuffTableDetail">&nbsp;</td><td id="fshGB"  class="quickbuffTableDetail">&nbsp;</td><td id="fshBM"  class="quickbuffTableDetail">&nbsp;</td><td id="fshExt" class="quickbuffTableDetail">&nbsp;</td><td id="fshRI"  class="quickbuffTableDetail">&nbsp;</td></tr></tbody></table></div>',J=[50,54,55,56,60,61,98,101,179,181],K='<p class="quickbuffSortCheckboxContainer"><input id="quickbuffSortCheckbox" class="quickbuffSortCheckbox" type="checkbox"><label for="quickbuffSortCheckbox">Sort buffs alphabetically</label></p>',T="qbSortBuffsAlphabetically";function mt(t,e){let r=e.dataset.tipped,{cost:f}=t.previousElementSibling.dataset;U(r.replace("</center>",`<br>Stamina Cost: ${f}$&`),e)}function pt(t,e){return!J.includes(Number(t.htmlFor.slice(6)))&&c(e.children[0])<125}function dt(t,e){pt(t,e)&&t.classList.add("fshDim")}function bt(t){let e=t.children[0];mt(t,e),dt(t,e)}function E(){s('#buff-outer label[for^="skill-"]').forEach(bt)}function ht(t,e){return!t&&e}function W(t){let e=p("h1",o("players"))[0];if(ht(e,t)){setTimeout(W,100,t-1);return}e&&F(e)}function l(){o("targetPlayers").value&&W(9)}function kt(t){let e=Math.floor(t/60),r=t%60,f=q(e,"m");return e>0&&r>0&&(f+=" "),f+=q(r,"s"),f}function yt(t){return`<span class="fshLime">On</span>&nbsp;<span class="fshBuffOn">(${kt(t)})</span>`}function Bt(t){let e=n(`#buff-outer input[data-name="${t}"]`);return e?`<span class="quickbuffActivate" data-buffid="${e.value}">Activate</span>`:'<span class="fshRed;">Off</span>'}function xt(t,e){let r=t[e]??0;return r?yt(r):Bt(e)}function B(t,e,r){i(xt(t,e),r)}function gt(t,e){return t[e.name]=e.duration,t}function A(t){if(!t?._skills)return;let e=t._skills.reduce(gt,{});B(e,"Guild Buffer",o("fshGB")),B(e,"Buff Master",o("fshBM")),B(e,"Extend",o("fshExt")),B(e,"Reinforce",o("fshRI"))}var qt=t=>e=>e.name===t;function St(t,e){return t.find(qt(e))?.value??0}function X(t,e,r){let f=St(t,e),a="fshLime";f<100&&(a="fshRed"),i(`<span class="${a}">${f}%</span>`,r)}function C(t){if(!t?._enhancements)return;let e=t._enhancements;X(e,"Sustain",o("fshSus")),X(e,"Fury Caster",o("fshFur"))}function $(t){C(t),A(t)}function vt(t){let e=o(`skill-${t}`);e&&(e.checked=!0)}function Tt(t){t.split(";").forEach(vt)}function L(){let t=m("blist");t&&Tt(t)}var H=0;function Y(){H.length?(window.addPlayers([H.shift()]),setTimeout(Y,200)):setTimeout(l,200)}function P(){let t=m("players");t&&(H=d(t),Y())}function Et(t,e){j(e)&&(t.className="fshLime",i("On",t))}async function D(t){let e=t.target;if(e.className!=="quickbuffActivate")return;R("quickbuff","quickActivate");let r=await z([window.self],[e.dataset.buffid]);Et(e,r)}var Z=[];function At(t){let e=s(`#${t} > p`);e.sort((f,a)=>f.children[0].dataset.name>a.children[0].dataset.name?1:-1);let r=n(`#${t}`);for(let f of e)r.appendChild(f)}function Ct(t){let e=n(`#block${t}`);for(let r of Z[t])e.appendChild(r)}function tt(t){for(let e=1;e<=3;e++)t?At(`block${e}`):Ct(e)}function $t(t){Q(T,t.target.checked),tt(t.target.checked)}function Lt(){for(let t=1;t<=3;t++){let e=`block${t}`;Z[t]=O(`#${e} > p`)}}function N(){Lt();let t=o("check-all");k(t,K);let e=n(".quickbuffSortCheckbox"),r=w(T);e.checked=r,r&&tt(r),I(e,"change",$t)}function Ht(){g(o("helperQBheader"),D),g(o("players"),v)}async function Pt(){if(_())return;let t=o("quickbuff");if(!t)return;let e=y(window.self);k(t.children[0],V),G([E,L,P,Ht,l,N]),$(await e)}export{Pt as default};
//# sourceMappingURL=quickBuff-SWRV5QUV.js.map
