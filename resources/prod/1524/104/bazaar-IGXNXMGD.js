import{a as Ce}from"./chunk-PT6PVZSN.js";import{a as Z}from"./chunk-MF7H32SH.js";import{a as L}from"./chunk-BOHFWP5X.js";import"./chunk-5I23UAD2.js";import{a as pe}from"./chunk-CKN7HU5O.js";import"./chunk-XXZOONC5.js";import"./chunk-GY3JG5AQ.js";import{a as be}from"./chunk-WEN7JPPW.js";import{a as oe}from"./chunk-A4SVD2MS.js";import{a as ue}from"./chunk-XSBXLWG4.js";import"./chunk-AF6X2EPJ.js";import{a as x}from"./chunk-KKZ6YNXE.js";import"./chunk-ECN5M6TA.js";import"./chunk-5THSM4BA.js";import{$ as ce,A as U,D as c,E as V,F as w,G as J,H as ie,_ as j,a as d,aa as k,ba as le,c as ee,d as te,da as ne,e as G,ia as ge,ja as ae,s as r,t as X,u as f,w as b,x as h,y as A}from"./chunk-NEOIIKPE.js";import"./chunk-Z7UI4YWM.js";import{a as Ie}from"./chunk-X75KV2D3.js";import"./chunk-GEQ6SBFU.js";import"./chunk-5JOFCACO.js";import{a as re}from"./chunk-NFXVO5QH.js";import{a as $}from"./chunk-HZVS66QI.js";import"./chunk-E546N3MN.js";import"./chunk-327LTRO2.js";import"./chunk-27TM5UBE.js";import"./chunk-MUNFS2PQ.js";import"./chunk-SY4GQ6JX.js";import"./chunk-THRA3S6L.js";import"./chunk-TM7HV6I4.js";import{a as se}from"./chunk-R4VVRPE7.js";import"./chunk-D4CTFWTI.js";import"./chunk-ZS2ZYLXC.js";import"./chunk-KWZPRQOD.js";import"./chunk-X2HBFA4R.js";import{b as W}from"./chunk-S2DS6Q2Q.js";import"./chunk-DPOGJLEK.js";import"./chunk-JVNW5U7Y.js";function R(i,e){return ue({cmd:"potionbazaar",subcmd:"buyitem",item_id:i,quantity:e})}async function _(i,e){let t=await be({cmd:"potionbazaar",subcmd:"buyitem",item_id:i,quantity:e}),l=pe(t);return l==="You purchased the item!"?{r:Array(e),s:!0}:{e:{message:l},s:!1}}function S(i,e){return oe(R,_,i,e)}function me(i,e,t){let l=i.slice();return l[3]=e[t],l[4]=e,l[5]=t,l}function Ge(i){return{c:d,m:d,p:d,d}}function Xe(i){let e,t,l;return{c(){e=b("button"),e.textContent="Buy",c(e,"type","button"),c(e,"class","custombutton")},m(a,s){X(a,e,s),t||(l=U(e,"click",function(){ee(i[1](i[3]))&&i[1](i[3]).apply(this,arguments)}),t=!0)},p(a,s){i=a},d(a){a&&f(e),t=!1,l()}}}function fe(i){let e;return{c(){e=b("span"),c(e,"class","fshSpinner fshSpinner12")},m(t,l){X(t,e,l)},p:d,d(t){t&&f(e)}}}function de(i,e){let t,l,a,s,n,g,I=x(e[3].price)+"",v,z,p,E,P,o,D,M,y=x(e[3].price*e[3].count)+"",N,O,C,T,q,Q,F,Y,K;function Be(){e[2].call(o,e[4],e[5])}let u={ctx:e,current:null,token:null,hasCatch:!1,pending:fe,then:Xe,catch:Ge};return j(Q=e[3].promise,u),{key:i,first:null,c(){t=b("div"),l=b("img"),n=A(),g=b("div"),v=h(I),z=A(),p=b("img"),P=h(`
        x
        `),o=b("input"),D=b("br"),M=h(`
        = `),N=h(y),O=A(),C=b("img"),q=A(),u.block.c(),F=A(),c(l,"class","potion-img tip-dynamic svelte-12re2j5"),ie(l,"background","url('"+W+"ui/inventory/2x3.png')"),G(l.src,a=e[3].img)||c(l,"src",a),c(l,"alt","Potion"),c(l,"data-tipped",s=e[3].fetch),G(p.src,E=W+"currency/0.png")||c(p,"src",E),c(p,"data-hasqtip","1"),c(p,"oldtitle","Gold"),c(p,"alt","Gold"),c(p,"title",""),c(p,"aria-describedby","qtip-1"),c(p,"class","svelte-12re2j5"),c(o,"type","number"),c(o,"min","1"),c(o,"max","100"),c(o,"class","svelte-12re2j5"),G(C.src,T=W+"currency/0.png")||c(C,"src",T),c(C,"alt","Gold"),c(C,"data-hasqtip","1"),c(C,"oldtitle","Gold"),c(C,"title",""),c(C,"aria-describedby","qtip-1"),c(C,"class","svelte-12re2j5"),c(g,"class","prices svelte-12re2j5"),c(t,"class","potion svelte-12re2j5"),this.first=t},m(B,m){X(B,t,m),r(t,l),r(t,n),r(t,g),r(g,v),r(g,z),r(g,p),r(g,P),r(g,o),J(o,e[3].count),r(g,D),r(g,M),r(g,N),r(g,O),r(g,C),r(t,q),u.block.m(t,u.anchor=null),u.mount=()=>t,u.anchor=F,r(t,F),Y||(K=U(o,"input",Be),Y=!0)},p(B,m){e=B,m&1&&!G(l.src,a=e[3].img)&&c(l,"src",a),m&1&&s!==(s=e[3].fetch)&&c(l,"data-tipped",s),m&1&&I!==(I=x(e[3].price)+"")&&w(v,I),m&1&&V(o.value)!==e[3].count&&J(o,e[3].count),m&1&&y!==(y=x(e[3].price*e[3].count)+"")&&w(N,y),u.ctx=e,m&1&&Q!==(Q=e[3].promise)&&j(Q,u)||ce(u,e,m)},d(B){B&&f(t),u.block.d(),u.token=null,u=null,Y=!1,K()}}}function he(i){let e,t=[],l=new Map,a=k(i[0]),s=n=>n[3].id;for(let n=0;n<a.length;n+=1){let g=me(i,a,n),I=s(g);l.set(I,t[n]=de(I,g))}return{c(){e=b("div");for(let n=0;n<t.length;n+=1)t[n].c();c(e,"id","bazaar"),c(e,"class","svelte-12re2j5")},m(n,g){X(n,e,g);for(let I=0;I<t.length;I+=1)t[I]&&t[I].m(e,null)},p(n,[g]){g&3&&(a=k(n[0]),t=ne(t,g,s,1,n,a,l,e,le,de,null,me))},i:d,o:d,d(n){n&&f(e);for(let g=0;g<t.length;g+=1)t[g].d()}}}function xe(i,e,t){let{potions:l=[]}=e;async function a(n){n.promise=S(n.id,n.count);let g=await n.promise;g.s?L(`You successfully purchased ${n.count} "${g.r[0].n}"`):L(g.e.message)}function s(n,g){n[g].count=V(this.value),t(0,l)}return i.$$set=n=>{"potions"in n&&t(0,l=n.potions)},[l,a,s]}var H=class extends ae{constructor(e){super(),ge(this,e,xe,he,te,{potions:0})}},Ae=H;function ye(i,e){return new Ae({target:e.parentElement,props:{potions:i}})}var Qe=i=>({id:Number(Ce(i)),img:i.children[0].src,fetch:i.firstChild.dataset.tipped,price:Ie(re($('img[src*="/currency/"]',Z(i).parentElement).parentElement.previousElementSibling)),count:1,promise:Promise.resolve()});function We(){let i=se('a[href*="cmd=buyitem"]');if(!i.length)return;let e=Z(Z(i[0]).parentElement);ye(i.map(Qe),e),e.remove()}export{We as default};
//# sourceMappingURL=bazaar-IGXNXMGD.js.map
