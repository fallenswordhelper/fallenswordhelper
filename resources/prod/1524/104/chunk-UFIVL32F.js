import{a as w}from"./chunk-R3OD4O6G.js";import{a as x}from"./chunk-MN23NMMM.js";import{a as g}from"./chunk-X6FEZLDJ.js";import{a as d}from"./chunk-4BR3KQG3.js";import{a as u}from"./chunk-PXJZZGPY.js";import{a as U}from"./chunk-B6CSHUIO.js";import{a as v}from"./chunk-K3XM2YMD.js";import{a as p}from"./chunk-4VNGVSFE.js";import{a as l,b as c}from"./chunk-VGSTDDXU.js";import{a as f}from"./chunk-EKF7ZDTL.js";import{a}from"./chunk-TM7HV6I4.js";var n="fsh_guildActivity";async function s(){return await l(n)??{lastUpdate:0,members:{}}}var b=t=>d(new Date(t*1e3)),S=t=>[t[0],t[1],t[2],t[3],b(t[4]),t[5],t[6]],T=t=>([e,o])=>o.map(S).map(r=>[t,e,...r].join(",")),B=`Last Update,Member,Last Activity,Stam,Level,Max Stam,Date,VL,GXP
`;function O(t){let{lastUpdate:e,members:o}=t,r=a(o).flatMap(T(b(e))).join(`
`);return`${B}${r}`}var F=t=>`${t[0]}${t[1]}${t[2]}${t[3]}${t[4]}${t[5]}`,j=[t=>t.getFullYear().toString(),t=>t.getMonth()+1,t=>t.getDate(),t=>t.getHours(),t=>t.getMinutes(),t=>t.getSeconds()],k=t=>e=>e(t);function A(){return F(j.map(k(new Date)).map(u))}async function Q(t,e){let o=await s();if(!o.lastUpdate||!o.members)return;let r=t(o),m=new Blob([r],{type:e}),i=`${A()}_GuildTracker.${e.split("/")[1]}`;U(m,i)}async function R(t){let e=await s(),o={lastUpdate:e.lastUpdate,members:p(a(e.members).filter(([r])=>r!==t))};c(n,o)}async function W(t){let e=await s(),o={lastUpdate:e.lastUpdate,members:p(a(e.members).map(([r,m])=>[r,m.filter(i=>i[4]>t)]))};c(n,o)}var _=t=>e=>!t.find(o=>o===e);async function P(){let[t,e]=await g([s(),w(v())]),o=e.map(({username:r})=>r);return x(t.members).filter(_(o)).sort(f)}export{n as a,s as b,O as c,Q as d,R as e,W as f,P as g};
//# sourceMappingURL=chunk-UFIVL32F.js.map
