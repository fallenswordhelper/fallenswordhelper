import{a as Bt,b as Ht,c as Rt}from"./chunk-AH7FQ4V7.js";import{a as Nt}from"./chunk-WC5HSD7D.js";import{a as At}from"./chunk-BWLJUEWY.js";import{a as Qt}from"./chunk-WHHWRFWP.js";import{a as v}from"./chunk-WJH4P4OJ.js";import{a as $}from"./chunk-NGYEAITL.js";import{a as St}from"./chunk-XNLIWDUA.js";import{a as q}from"./chunk-M7IBCQNQ.js";import{B as E,D as x,E as X,F as Et,I as F,L as Tt,O as T,P as y,V as M,W as P,X as V,Y as G,Z as j,a as K,b as Ct,d as U,o as g,p,q as d,r as Dt,s as h,t as b,u as O,v as It,w as W,z as I}from"./chunk-TMCYCG7Z.js";import{a as yt}from"./chunk-635HH3IV.js";import{a as R}from"./chunk-F5CNMYJN.js";import{a as _t}from"./chunk-T43Y7FHE.js";import{a as L}from"./chunk-7HDLZ5CV.js";import{a as H}from"./chunk-ATJNJQBM.js";import{a as Lt}from"./chunk-OQUOAWQT.js";import{a as wt}from"./chunk-VEYMWARW.js";import{a as bt}from"./chunk-4SKJEDIT.js";import{a as J}from"./chunk-5BPP2QDO.js";import{a as $t}from"./chunk-EJUHK5AM.js";import{a as B}from"./chunk-BAZ76PK5.js";import{b as gt}from"./chunk-M4Q7DLXY.js";import{a as xt}from"./chunk-ZF2KHET3.js";import{a as ft}from"./chunk-RTNCMQDY.js";import{a as vt}from"./chunk-2HQGE3TS.js";import{b as ht}from"./chunk-4Z3DF3VU.js";import{X as kt,c as ut,p as pt,t as dt}from"./chunk-CRFRZPAJ.js";import{a as D}from"./chunk-F3362XCG.js";var Ut,Ot;function Q(){if(!Ot){let t=D.subcmd==="dropitems"?"removeIndex[]":"storeIndex[]";Ut=document.forms[0].elements[t],Ot=!0}return Ut}function A(){let t=Q();return t?Nt(t):[]}function N(){return A().filter(t=>!B("fshHide",$(t)))}function Z(t){return R({subcmd:"dodropitems",removeIndex:t})}async function tt(t){let e=await Rt(t),o={s:e.r===0};return o.s?o.r={items:[],deleted_items:t}:o.e={message:e.m},o}function et(t){return H(Z,tt,t)}function Mt(t){return $(t.target).cells[0].children[0].value}async function Kt(t){let{items:e}=await v();L("storeitems","Check All of Type"),N().filter(o=>e[o.value]&&e[o.value].item_id===e[Mt(t)].item_id).forEach(o=>{o.checked=!o.disabled&&!o.checked})}function Wt(t){let e=$(t);e.cells[0].children[0].disabled=!0,Lt(".actionButton",e).forEach(o=>{o.disabled=!0,o.textContent="",o.removeAttribute("data-tooltip"),o.classList.add("inProgress")}),t.blur(),t.classList.add("fshSpinner","fshSpinner12")}function Xt(t,e){t.target.classList.remove("fshSpinner","fshSpinner12"),t.target.classList.add("fshGreen"),t.target.textContent=e}async function Ft(t,e,o){Wt(t.target);let i=await e([Mt(t)]);i&&i.s?Xt(t,o):St(i)}var Zt=[["Check All",Kt],["Quick Send",t=>{L("storeitems","Quick Send"),Ft(t,Ht,"Sent")}],["Quick Drop",t=>{L("storeitems","Quick Drop"),Ft(t,et,"Dropped")}]];function ot(t){if(t.target.tagName==="A"&&["AH","UFSG"].includes(t.target.textContent)&&L("storeitems",t.target.textContent),t.target.tagName!=="BUTTON"||B("custombutton",t.target))return;let e=Zt.find(([o])=>o===bt(t.target));e&&e[1](t)}function te(t){let e=t[2](t[0])+"",o,i;return{c(){o=b(e),i=b(" AH and UFSG Links")},m(n,r){p(n,o,r),p(n,i,r)},p(n,r){r&1&&e!==(e=n[2](n[0])+"")&&E(o,e)},d(n){n&&d(o),n&&d(i)}}}function ee(t){let e=t[2](t[1])+"",o,i;return{c(){o=b(e),i=b(" Quick Drop links")},m(n,r){p(n,o,r),p(n,i,r)},p(n,r){r&2&&e!==(e=n[2](n[1])+"")&&E(o,e)},d(n){n&&d(o),n&&d(i)}}}function oe(t){let e,o,i;return e=new q({props:{$$slots:{default:[ne]},$$scope:{ctx:t}}}),e.$on("click",t[5]),{c(){o=h("div"),M(e.$$.fragment),x(o,"display","contents"),x(o,"--button-width","10.8em")},m(n,r){p(n,o,r),P(e,o,null),i=!0},p(n,r){let l={};r&128&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){i||(T(e.$$.fragment,n),i=!0)},o(n){y(e.$$.fragment,n),i=!1},d(n){n&&d(o),V(e,n)}}}function ne(t){let e;return{c(){e=b("Select All Guild Locked")},m(o,i){p(o,e,i)},d(o){o&&d(e)}}}function re(t){let e,o,i,n,r,l,_,k;e=new q({props:{$$slots:{default:[te]},$$scope:{ctx:t}}}),e.$on("click",t[3]),n=new q({props:{$$slots:{default:[ee]},$$scope:{ctx:t}}}),n.$on("click",t[4]);let c=D.subcmd2==="storeitems"&&oe(t);return{c(){o=h("div"),M(e.$$.fragment),i=b(`\xA0
`),r=h("div"),M(n.$$.fragment),l=b(`\xA0
`),c&&c.c(),_=It(),x(o,"display","contents"),x(o,"--button-width","11.8em"),x(r,"display","contents"),x(r,"--button-width","10.6em")},m(s,u){p(s,o,u),P(e,o,null),p(s,i,u),p(s,r,u),P(n,r,null),p(s,l,u),c&&c.m(s,u),p(s,_,u),k=!0},p(s,[u]){let w={};u&129&&(w.$$scope={dirty:u,ctx:s}),e.$set(w);let a={};u&130&&(a.$$scope={dirty:u,ctx:s}),n.$set(a),D.subcmd2==="storeitems"&&c.p(s,u)},i(s){k||(T(e.$$.fragment,s),T(n.$$.fragment,s),T(c),k=!0)},o(s){y(e.$$.fragment,s),y(n.$$.fragment,s),y(c),k=!1},d(s){s&&d(o),V(e,s),s&&d(i),s&&d(r),V(n,s),s&&d(l),c&&c.d(s),s&&d(_)}}}function ie(t,e,o){let i=F(),n=s=>s?"Hide":"Show",{showExtraLinks:r=!1}=e,{showQuickDropLinks:l=!1}=e;function _(){L("storeitems","toggleShowExtraLinks"),o(0,r=!r),J("showExtraLinks",r),i("showExtraLinks",r)}function k(){L("storeitems","toggleShowQuickDropLinks"),o(1,l=!l),J("showQuickDropLinks",l),i("showQuickDropLinks",l)}function c(){L("storeitems","selectLocked"),i("selectLocked")}return t.$$set=s=>{"showExtraLinks"in s&&o(0,r=s.showExtraLinks),"showQuickDropLinks"in s&&o(1,l=s.showQuickDropLinks)},[r,l,n,_,k,c]}var nt=class extends j{constructor(e){super(),G(this,e,ie,re,U,{showExtraLinks:0,showQuickDropLinks:1})}},Pt=nt;var rt=0;function se(t,e){if(e.item_id!==13699)return e.item_name;let o=t.find(i=>i.value===String(e.inv_id));return o?wt(o.parentNode.parentNode.children[2]):e.item_name}async function le(t){let e=await v();return e.items?yt(xt(e.items).map(([o,i])=>[o,{...i,item_name:se(t,i)}])):{}}function ce(t){return rt||(rt=le(t)),rt}async function it(){let t=A();if(!t.length)return[];let e=await ce(t);return t.map(o=>[$(o).cells[2],e[o.value]]).filter(([,o])=>o)}var Vt=["showExtraLinks","enableItemColoring","checkAllOfType","showQuickSendLinks","showQuickDropLinks"];function fe(t,e){return t[e]=(t[e]||0)+1,t}function ue(t){return{...t.map(([,e])=>e.item_id).reduce(fe,{}),13699:1}}var pe=t=>` data-tooltip="INSTANTLY ${t} THE ITEM. NO REFUNDS OR DO-OVERS! Use at own risk."`,qt=(t,e,o)=>` [<button class="fshStoreItemsButton ${t}"${e}>${o}</button>]`,Gt=(t,e,o)=>qt(`${t} actionButton tooltip-multiline`,pe(e),`Quick ${o}`),Yt=(t,e,o)=>`[<a href="${t}"${e}>${o}</a>]`;function de(t){return t.bound?'<span class="aHSpacer"></span>':Yt(`${dt}${encodeURIComponent(t.item_name)}`,"","AH")}var ke=t=>Yt(`${kt}items${pt}view&item_id=${t.item_id}`,' target="_blank"',"UFSG"),he=(t,e,o)=>t[2]&&e[o.item_id]>1,_e=(t,e)=>t[3]&&(!e.bound||e.guild_tag!==-1),ge=(t,e)=>t[4]&&e.guild_tag===-1;function be(t,e){return e[0]()?t+e[1]():t}function we(t,e,o){return[[()=>t[0],()=>`${de(o)} ${ke(o)}`],[()=>!0,()=>`&nbsp;${o.item_name}`],[()=>he(t,e,o),()=>qt("fshBlack","","Check All")],[()=>_e(t,o),()=>Gt("fshBlue","SENDS","Send")],[()=>ge(t,o),()=>Gt("fshRed","DROP","Drop")]]}function Le(t,e,[o,i]){let n=o;t[1]&&(n.className=ut[i.rarity].clas);let r=we(t,e,i).reduce(be,"");n.innerHTML!==r&&(n.innerHTML=r)}async function S(t){let e=await it(),o=t[2]?ue(e):[];_t(3,At,[[5,3,e,0,ft(Le,t,o)]])}function xe(t){let[e]=document.forms;return new Pt({props:{showExtraLinks:t[0],showQuickDropLinks:t[4]},target:e.parentNode.children[5].children[0]})}async function $e(){let t=N();if(!t.length)return;let e=await v();!e.items||t.map(o=>[o,e.items[o.value]]).filter(([,o])=>o).forEach(([o,i])=>{o.checked=!o.disabled&&i.guild_tag!==-1})}function st(t){let e=xe(t);e.$on("showExtraLinks",o=>{t[0]=o.detail,S(t)}),e.$on("showQuickDropLinks",o=>{t[4]=o.detail,S(t)}),e.$on("selectLocked",()=>{$e()})}async function ve(){if($t()||!Q())return;let e=Vt.map(o=>ht(o));Qt(),st(e),e.some(o=>o)&&S(e),vt(gt,ot)}function zt(t,e,o){let i=t.slice();return i[5]=e[o],i}function Jt(t){let e,o=t[5].name+"",i,n;return{c(){e=h("option"),i=b(o),e.__value=n=t[5].id,e.value=e.__value},m(r,l){p(r,e,l),g(e,i)},p(r,l){l&1&&o!==(o=r[5].name+"")&&E(i,o),l&1&&n!==(n=r[5].id)&&(e.__value=n,e.value=e.__value)},d(r){r&&d(e)}}}function Se(t){let e,o,i,n,r,l,_,k,c,s,u,w=t[0],a=[];for(let m=0;m<w.length;m+=1)a[m]=Jt(zt(t,w,m));return{c(){e=h("tr"),o=h("td"),i=h("span"),i.textContent="Move selected items to:",n=O(),r=h("select");for(let m=0;m<a.length;m+=1)a[m].c();l=O(),_=h("span"),_.textContent="\xA0",k=O(),c=h("button"),c.textContent="Move",I(r,"class","customselect"),t[1]===void 0&&Tt(()=>t[3].call(r)),I(c,"class","custombutton"),I(c,"type","button"),I(o,"class","fshCenter")},m(m,C){p(m,e,C),g(e,o),g(o,i),g(o,n),g(o,r);for(let f=0;f<a.length;f+=1)a[f].m(r,null);X(r,t[1]),g(o,l),g(o,_),g(o,k),g(o,c),s||(u=[W(r,"change",t[3]),W(c,"click",t[2])],s=!0)},p(m,[C]){if(C&1){w=m[0];let f;for(f=0;f<w.length;f+=1){let mt=zt(m,w,f);a[f]?a[f].p(mt,C):(a[f]=Jt(mt),a[f].c(),a[f].m(r,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=w.length}C&3&&X(r,m[1])},i:K,o:K,d(m){m&&d(e),Dt(a,m),s=!1,Ct(u)}}}function Ce(t,e,o){let i=F(),{folders:n}=e,r;function l(){i("move",r)}function _(){r=Et(this),o(1,r),o(0,n)}return t.$$set=k=>{"folders"in k&&o(0,n=k.folders)},[n,r,l,_]}var lt=class extends j{constructor(e){super(),G(this,e,Ce,Se,U,{folders:0})}},Yo=lt;function ct(t,e){return Bt(e,t).then(()=>({r:e}))}function at(t,e){return R({subcmd:"sendtofolder",folder_id:t,folderItem:e})}function De(t,e){return H(at,ct,t,e)}export{Q as a,A as b,Yo as c,De as d,N as e,et as f,ve as g};
//# sourceMappingURL=chunk-EXEXTP77.js.map
