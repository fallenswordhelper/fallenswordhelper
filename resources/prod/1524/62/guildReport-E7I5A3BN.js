import{a as Et}from"./chunk-Q27JTAEJ.js";import{a as $,c as It}from"./chunk-UNDM5BVR.js";import"./chunk-WNBLHUEZ.js";import"./chunk-VDKZDXOF.js";import{a as l}from"./chunk-JAM7CGM2.js";import{a as Ht}from"./chunk-NANTGT4Y.js";import{a as wt}from"./chunk-WO2LKE5W.js";import{a as vt}from"./chunk-GSBVXKMO.js";import"./chunk-6WXDQZ7M.js";import"./chunk-EWN6QJ7N.js";import{a as Mt}from"./chunk-IQFNVJNI.js";import"./chunk-YKENGH6A.js";import"./chunk-Y4UDZE3F.js";import"./chunk-5RU2F3WM.js";import{a as Rt}from"./chunk-EGGRJEVI.js";import"./chunk-P3PBGNPL.js";import{a as ht}from"./chunk-AKZEGWGN.js";import{a as xt}from"./chunk-TNC2Z5WR.js";import{a as et}from"./chunk-ZMRAOOI3.js";import{a as H}from"./chunk-XU5KP4C4.js";import"./chunk-LX6BJAAE.js";import"./chunk-HUVFJU6B.js";import"./chunk-L3KWCNKY.js";import{a as yt}from"./chunk-WPPV5C7D.js";import{a as lt}from"./chunk-JZWOPZAU.js";import{a as mt}from"./chunk-WTPW2QVE.js";import"./chunk-N6DHR4HD.js";import{a as c}from"./chunk-5VTP3GQ6.js";import"./chunk-7N7KYOCQ.js";import{a as f}from"./chunk-EHOBQCEV.js";import"./chunk-I4D4CXXN.js";import{a as O}from"./chunk-6WXPRACV.js";import"./chunk-VML6VTTW.js";import"./chunk-73BUZD3L.js";import"./chunk-34NYN3UK.js";import{a as ft}from"./chunk-5RCOVVCV.js";import{a}from"./chunk-T3KU5OD5.js";import{a as i}from"./chunk-U6MH67WD.js";import{a as st}from"./chunk-67AICILL.js";import{a as S}from"./chunk-GWMYQJWD.js";import{a as ut}from"./chunk-GR3YYUXL.js";import"./chunk-IPXXUBBR.js";import"./chunk-VF3UWJK5.js";import{b as dt}from"./chunk-ILTMC3ON.js";import{a as it}from"./chunk-SS3QYSR2.js";import{a as ot}from"./chunk-6HCREAXP.js";import{a as at}from"./chunk-TTIL6Q2Q.js";import{a as p}from"./chunk-CYTNSAKG.js";import"./chunk-4KBBARFN.js";import"./chunk-57Z3RMCJ.js";import{a as E}from"./chunk-COCD6PSO.js";import"./chunk-QVPWC52X.js";import{a as gt}from"./chunk-VSE6PNGN.js";import"./chunk-IXAZ6GFZ.js";import{a as rt}from"./chunk-YIEWHY6V.js";import"./chunk-7XTGUVW5.js";import"./chunk-CF4P6XS2.js";import"./chunk-AH5EZJ7R.js";import"./chunk-G3R5NAPB.js";import"./chunk-CQ3PZTYF.js";import{a as nt}from"./chunk-C5OE7PQU.js";import"./chunk-RY5JB5JV.js";import"./chunk-ZOPLLTNB.js";import"./chunk-HTCI2HHR.js";import{a as ct}from"./chunk-5AABVCBG.js";import"./chunk-VWMHLX6I.js";import{a as N}from"./chunk-SWDYJ63E.js";import{a as bt}from"./chunk-456CPU7X.js";import"./chunk-4VL7TVGR.js";import{b as h}from"./chunk-QOWOSZRG.js";import{a as m}from"./chunk-3WYOJJSD.js";import"./chunk-FM7OJ7NO.js";import{a as s}from"./chunk-HA7HK2NF.js";import{a as tt}from"./chunk-YBC6MMGI.js";import"./chunk-U546IVLZ.js";import{a as y}from"./chunk-DXI2WUUD.js";import{a as o}from"./chunk-JQPK3YVC.js";import{a as pt,b as u}from"./chunk-7KBBV5J4.js";import"./chunk-J2QMB37G.js";import"./chunk-HT7PAWAR.js";import"./chunk-T34QP7UC.js";import"./chunk-WHLURLGI.js";import"./chunk-M6FQTS4T.js";import{a as I}from"./chunk-2URZ55LX.js";import"./chunk-FTOV4GKD.js";import"./chunk-NY6FBFCL.js";import{a as g}from"./chunk-UWALNOSV.js";import"./chunk-POXCGSYQ.js";import{b as X,h as Z,x as j}from"./chunk-M72CYKCS.js";import{a as w}from"./chunk-ZP7KCDX3.js";var Gt=`<span class="guildReportSpinner" style="background-image: url('${X}ui/misc/spinner.gif');"></span>`;function Wt(t){m('<span class="fastWorn">You successfully recalled the item</span>',t)}function Ct(t){m('<span class="fastWorn">Worn</span>',t)}function qt(t){window.openQuickMsgDialog(t.getAttribute("target_player"))}function kt(t){return t.match(Z)[1]}function Ut(t,e,r){r.r!==1&&(t==="recall"?Wt(e):Ct(e))}function Tt(t,e,r,n){It($(e),kt(e),r,n).then(o(Ut,n,t))}function Lt(t,e,r){Tt(t,e,r,"recall")}function _t(t,e){f("GuildReport","Fast BP"),Lt(t,e,0)}function Kt(t,e){f("GuildReport","Fast GS"),Lt(t,e,1)}function Qt(t,e){f("GuildReport","Fast Wear"),Number(kt(e))===yt()?Mt($(e)).then(o(Ct,t)):Tt(t,e,0,"wear")}var Jt=[["fast-bp",_t],["fast-gs",Kt],["fast-wear",Qt]];function Vt(t){let e=t.parentNode.parentNode;if(!e)return;let{href:r}=e.children[0];!r||(Jt.find(o(mt,t))[1](e,r),m(Gt,e))}var Yt=[["sendLink",Vt],["a-reply",qt]];function A(){I(rt("table",h)[1],lt(Yt))}var St='<span class="sendLink fast-bp">Fast BP</span> | ',C='<span class="sendLink fast-gs">Fast GS</span>',Nt=' | <span class="sendLink fast-wear">Fast Wear</span>',B,F,P,D,G;function zt(){return B||(B=new RegExp("<b>|Bottle|Brew|Draft|Elixir|Potion|Jagua Egg|Gut Rot Head Splitter|Serum")),B}function Xt(){return P||(P=a({innerHTML:St+C})),P.cloneNode(!0)}function Zt(){return D||(D=a({innerHTML:St+C+Nt})),D.cloneNode(!0)}function jt(){return F||(F=a({innerHTML:C})),F.cloneNode(!0)}function Ot(){return G||(G=a({innerHTML:C+Nt})),G.cloneNode(!0)}var te=[[!0,!0,Zt],[!0,!1,Ot],[!1,!0,Xt],[!1,!1,jt]];function ee(t,e,r){return r[0]===t&&r[1]===e}function W(t){let e=!zt().test(t.previousElementSibling.innerHTML),r=t.children.length===2;return te.find(o(ee,e,r))[2]()}function re(t,e,r){return e[r]=t[r],e}function M(t){return s(t).sort(bt).reduce(o(re,t),{})}var q;function ne(t,e,r,n){return t.myMap[n]!=="Ignore"&&(r[t.myMap[n]]?r[t.myMap[n]]+=e[n]:r[t.myMap[n]]=e[n]),r}function oe(t){let e=Math.max(Math.min(t,100),0),r,n,v=0;return e<50?(r=255,n=Math.round(5.1*e)):(n=255,r=Math.round(510-5.1*e)),`#${`000000${(r*65536+n*256+v).toString(16)}`.slice(-6)}`}function ie(t,e,r,n){return`${r}<tr><td>${n}</td><td style="background-color: ${oe((e[n]-t.minpoint)/(t.maxpoint-t.minpoint)*100)};">${e[n].toString()}</td></tr>`}function d(t,e){f("potReport","drawInventory");let r=M(s(e).reduce(o(ne,t,e),{}));m(`<table><tbody>${s(r).reduce(o(ie,t,r),"")}</tbody></table>`,q)}function $t(t,e,r){q=a({id:"inventory"}),t.pottab1?d(t,e):H(r.parentNode.children[0],"change",o(d,t,e)),i(r,q)}function U(t){return st("option",t)}var R,x;function At(){let t=Et();return t.insertCell(-1),t.insertCell(-1),t}function _(t){let e=U();return e.value=t,e.text=t,e}function ae(t,e){i(t,_(e[0]))}function me(){return vt({style:{width:"130px"}})}function le(){if(!x){x=At();let t=me();x.cells[1].dataset.tooltip='Set to "Ignore" to exclude from report',i(x.cells[1],t)}return x.cloneNode(!0)}function se(t,e){let r=le();ft(e[0],r.cells[0]);let n=r.cells[1].children[0];i(n,_(e[1])),[n.name,n.value]=e,i(t.tBodies[0],r)}function Bt(t,e,r){let n=Rt({id:e,type:"button",value:r});i(t.cells[1],n)}function fe(t){let e=At();Bt(e,"fshIgnoreAll","Ignore All"),O(e.cells[1],"&nbsp;"),Bt(e,"fshReset","Reset"),i(t.tBodies[0],e)}function ce(t,e){if(e.target.tagName==="SELECT"){let r=e.target,{value:n}=r;m("",r),i(r,_("Ignore")),y(t).forEach(o(ae,r)),r.value=n}}function k(t){f("potReport","drawMapping");let e=ht({innerHTML:"<tbody></tbody>"});R.replaceChild(e,R.children[0]),g(R,"mousedown",o(ce,t.myMap)),c(3,l,[[5,3,y(t.myMap),0,o(se,e),o(fe,e)]])}function Ft(t,e){R=a({id:"mapping",innerHTML:"<p></p>"}),t.pottab2?k(t):H(e.parentNode.children[2],"change",o(k,t)),i(e,R)}var b="fsh_potMap",pe={pottab1:!1,pottab2:!1,pottab3:!1,myMap:{},minpoint:12,maxpoint:20};function ue(t,e){t.myMap[e]||(t.myMap[e]=e)}function de(t,e){return xt(y(t).map(([r,n])=>[r,n,e[r]]).filter(([,r,n])=>r!=="Ignore"||n).map(([r,n])=>[r,n]))}function be(t,e){return s(e).forEach(o(ue,t)),M(de(t.myMap,e))}function ge(t){return a({id:"potReport",innerHTML:`<input id="pottab1" type="checkbox"${E(t.pottab1)}><label for="pottab1">Composed Potion Inventory</label><input id="pottab2" type="checkbox"${E(t.pottab2)}><label for="pottab2">Mapping</label><input id="pottab3" type="checkbox"${E(t.pottab3)}><label for="pottab3">Thresholds</label>`})}function he(t,e){let r=a({id:"thresholds",innerHTML:`Min:<input id="minpoint" type="number" value="${t.minpoint}" min="0" max="999">Max:<input id="maxpoint" type="number" value="${t.maxpoint}" min="0" max="999">`});i(e,r)}function ye(t,e,r){r.target.tagName==="SELECT"&&(t.myMap[r.target.name]=r.target.value,u(b,t),d(t,e))}function Me(t,e,r){return t?e[r]="Ignore":e[r]=r,e}function Re(t,e,r){t.myMap=s(e).reduce(o(Me,r),{})}function Pt(t,e,r){Re(t,e,r),u(b,t),k(t),d(t,e)}function xe(t){return/^pottab\d$/.test(t.id)}function ve(t,e){let r=e.id;t[r]=e.checked,u(b,t)}function we(t,e){return[[S("fshIgnoreAll"),o(Pt,t,e,!0)],[S("fshReset"),o(Pt,t,e,null)],[xe,o(ve,t)]]}function He(t,e,r){let n=r.target.id,v=Ht(r.target.value,0,999);v&&(t[n]=v,u(b,t),d(t,e))}function Ie(t,e,r){g(r,"change",o(ye,t,e)),I(r,ut(we(t,e))),g(r,"input",o(He,t,e))}function Ee(t,e){let r=h.lastElementChild.insertRow(2).insertCell(-1);return Ie(t,e,r),r}function Ce(t,e){let r=ge(t),n=a({id:"panels"});i(r,n),$t(t,e,n),Ft(t,n),he(t,n),i(Ee(t,e),r)}function ke(t,e){let r=N({},pe);N(r,tt(e,{})),r.myMap=be(r,t),u(b,r),Ce(r,t)}function K(t){!h||pt(b).then(o(ke,t))}var Q,J,T;function Te(t,e){let r=J[e];i(r,t)}function Le(t){if(t.endsWith(" (Potion)")){let e=t.slice(0,-9);T[e]=(T[e]||0)+1}}function Se(t){Q.push(W(t)),Le(t.previousElementSibling.innerHTML)}function Ne(){l([5,3,Q,0,Te,o(K,T)])}function V(){J=p("#pCC table table tr:not(.fshHide) td:nth-of-type(3n)"),T={},Q=[],l([5,3,J,0,Se,Ne])}function $e(t){return`${dt({last_login:w.membrList[t].last_login})}<a href="${j}${w.membrList[t].id}">${t}</a> [ <span class="a-reply fshLink" target_player=${t}>m</span> ]`}function Ae(t){let e=nt(t);w.membrList[e]&&m($e(e),t)}function Y(){let t=p('#pCC table table tr:not(.fshHide) td[bgcolor="#DAA534"][colspan="2"] b');l([5,3,t,0,Ae])}var L,Dt;function Be(t){t.children[0].hasAttribute("bgcolor")&&(Dt=ot(L,t.children[0].children[0])),Dt||(t.className="fshHide")}function z(){if(L=et("user"),!L||!at('#pCC table table td[bgcolor="#DAA534"] b').some(it(L)))return;let r=p("#pCC table table tr");l([5,2,r,0,Be])}async function Fe(){await wt(!1),c(3,Y)}function Pe(){ct()||!gt()||(Fe(),c(2,z),c(3,V),A())}export{Pe as default};
//# sourceMappingURL=guildReport-E7I5A3BN.js.map
