import{a as P}from"./chunk-TIFRVDGK.js";import{a as K}from"./chunk-PFM3MDMH.js";import{a as J}from"./chunk-V6GAZ7PZ.js";import{a as z,b as V,c as d,d as G}from"./chunk-CNAECPSV.js";import{a as B}from"./chunk-DC5ZFAIU.js";import{a as N}from"./chunk-PFGCDC22.js";import{b as Q,c as j}from"./chunk-UMXCIUIA.js";import{a as C}from"./chunk-EHOBQCEV.js";import{a as E}from"./chunk-73BUZD3L.js";import{a as F}from"./chunk-IPXXUBBR.js";import{a as f}from"./chunk-TTIL6Q2Q.js";import{a as I,b as S}from"./chunk-65G2IS3O.js";import{a as q}from"./chunk-5GCIHG55.js";import{a as H}from"./chunk-VSE6PNGN.js";import{a as D}from"./chunk-SXJ2GCOL.js";import{a as _}from"./chunk-5AABVCBG.js";import{a as A}from"./chunk-SWDYJ63E.js";import{a as s}from"./chunk-U546IVLZ.js";import{a as R}from"./chunk-DXI2WUUD.js";import{a as i}from"./chunk-JQPK3YVC.js";import{a as v,b as m}from"./chunk-7KBBV5J4.js";import{a as c,b as O}from"./chunk-FTOV4GKD.js";import{ua as l}from"./chunk-M72CYKCS.js";import{a as k}from"./chunk-ZP7KCDX3.js";function ot(t,e,[r,n]){let a=t.find(([,h])=>h===r);return a&&(B(a[0]).style.backgroundColor="#ff0000",e[r]=n),e}function x(t){if(!s(t))return;let r=f('#arenaTypeTabs tr:not([style="display: none;"]) input[type="submit"]').map(a=>[a,a.previousElementSibling.value]),n=R(t).reduce(i(ot,r),{});m("fsh_arenaFull",n)}var o,p;function u(){m(d,o)}function U(t,e){o=o||{},o.minLvl=t,o.maxLvl=e,u()}function W(){$('#arenaTypeTabs table[width="635"]').DataTable().draw()}function X(){P(U,W)}function Y(){U(c.arenaMinLvl,c.arenaMaxLvl),$("#fshMinLvl").val(o.minLvl),$("#fshMaxLvl").val(o.maxLvl),W()}function Z(t){o=o||{},o.hideMoves=t.target.checked,u(),$(".moveMax").toggle(!t.target.checked)}function tt(t){o=t||{},p=o.id||{},o.id={}}function nt(t,e){let r=o.minLvl,n=o.maxLvl,a=D(e[7]);return S(I,a,r,n)}function at(t,e){return o?nt(t,e):!0}function it(t,e,r,n){return 0?n[4]["@data-order"]==="0":!0}function b(){$.fn.dataTable.ext.search.push(at),k.userIsDev&&$.fn.dataTable.ext.search.push(it)}function st(){let t=$("#pCC > table > tbody > tr:nth-child(4)");return t.clone().insertBefore(t).find("td").attr("height","2"),t.clone().insertAfter(t).find("td").attr("height","1"),t}function ct(t){let e=$("#fshHideMoves",t);o&&"hideMoves"in o&&(e.prop("checked",o.hideMoves),$(".moveMax").toggle(!o.hideMoves)),e.on("click",Z)}function ft(t){let e=$("#fshMinLvl",t);o&&"minLvl"in o?e.val(o.minLvl):e.val(c.arenaMinLvl)}function lt(t){let e=$("#fshMaxLvl",t);o&&"maxLvl"in o?e.val(o.maxLvl):e.val(c.arenaMaxLvl)}function mt(t){$("#fshMinLvl, #fshMaxLvl",t).on("keyup",X),$("#fshReset",t).on("click",Y)}function y(){let t=st(),e=$(V);ct(e),ft(e),lt(e),mt(e),$("td",t).append(e)}function dt(t,e){p&&!p[e]&&(t.css("background-color","#F5F298"),t.find("tr").css("background-color","#F5F298"))}function pt(t,e){let r=/#\s(\d+)/.exec(e.eq(0).text());[r,o,o.id].every(s)&&(o.id[r[1]]=r[1],dt(t,r[1]))}function ut(t){let e=t.eq(1),r=e.text().split(/\s\/\s/);r&&e.attr("data-order",(Number(r[0])-Number(r[1]))*100+Number(r[1]))}function ht(t){let e=t.eq(2);e.attr("data-order",$("td",e).first().text().replace(/[,\s]/g,""))}function vt(t,e){let r=/(\d)\.png/.exec($("img",e).attr("src"));r&&$(e).attr("data-order",r[1])}function xt(t){t.slice(4,7).each(vt)}function bt(t,e){o.moves[t[1]]&&o.moves[t[1]]===3&&e.addClass("moveMax")}function yt(t,e){let r=G.exec($("img",t).attr("src"));r&&(bt(r,e),t.attr("data-order",r[1]))}function gt(t,e){let r=t.eq(8);o&&o.moves&&yt(r,e)}function Mt(t){let e=t.eq(8);e.children(l).length===1&&e.attr("data-order",e.find("td").first().text().replace(/[,\s]/g,""))}function Lt(t,e){let r=$(e),n=r.children();pt(r,n),ut(n),ht(n),xt(n),gt(n,r),Mt(n)}function g(t){t.children("tbody").children("tr").each(Lt)}var $t=t=>[t,Number(t.previousElementSibling.value)];function wt(t,e){return t.r.arenas?e.concat(t.r.arenas.find(r=>r.id===e[1])):e}function Tt(t,e){return e.guild_id===t?`<span class="fshRed">${e.name}</span>`:e.name}function et(t){t&&t.classList&&t.classList.add("fshGray")}var kt=(t,e)=>e.reward_type===1&&t.r.moves,Ot=(t,e)=>t.r.moves.find(r=>r.id===e.reward),Ft=t=>t&&t.max===3,Rt=(t,e)=>kt(t,e)&&Ft(Ot(t,e));function _t(t,[e,,r]){r&&Rt(t,r)&&et(e)}function Dt(t,e,r){let n=r.players.filter(h=>h.guild_id===t).length,a=r.max_players/4;n===a&&et(e)}function Ht(t,e,r){K(r.players.map(i(Tt,t)).join("<br>"),e),e.classList.add("tip-static"),t&&e.value==="Join"&&Dt(t,e,r)}var It=[s,t=>F(t.players),t=>t.players.length>0];function St(t,[e,,r]){It.every(n=>n(r))&&Ht(t,e,r)}function qt(t){return f('#arenaTypeTabs tr:not([style="display: none;"]) input[type="submit"]').map($t).map(i(wt,t))}function M(t){if(!t||!t.s||!s(t.r))return;let e=qt(t);e.forEach(i(St,H())),e.forEach(i(_t,t))}var rt="td.sorting, td.sorting_asc, td.sorting_desc";function At(t){let e=t.attr("class"),r=/sorting([^\s]+)/.exec(e);return r&&r[1]==="_desc"?"asc":"desc"}function Ct(t,e,r){let n=t.closest(l).DataTable();e!==3?n.order([3,"asc"],[e,r]).draw():n.order([3,r]).draw()}function Et(t){let e=$(t.target).closest("td"),r=At(e);Ct(e,e.index(),r)}function L(t){$(rt,t).off("click"),t.on("click",rt,Et)}function w(t){return E(A({cmd:"arena"},t))}function T(){return w({subcmd:"view"})}function Nt(){f('#arenaTypeTabs tr[style="display: none;"]').forEach(e=>e.remove())}function Bt(t,e){let r=$("tr",e).first();$("a",r).contents().unwrap(),$(e).prepend($("<thead/>").append(r))}function Pt(){y(),u(),b()}function zt(t,[e,r,n]){let a=$('table[width="635"]',t);a.each(Bt),tt(e),g(a),x(r),M(n),Pt(),a.DataTable(z),L(t)}function Vt(t,e){let r=O("betaOptIn");r&&Q("arena.process"),Nt(),zt(t,e),J(),r&&j("arena.process")}function Gt(t){N([v(d),v("fsh_arenaFull"),T().catch(()=>({})),q()],i(Vt,t))}function Jt(){if(_())return;let t=$("#arenaTypeTabs");t.length===1?Gt(t):C("arena","Join error screen ?")}export{w as a,T as b,Jt as c};
//# sourceMappingURL=chunk-WU4ZQH4P.js.map
