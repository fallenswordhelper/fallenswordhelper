import{a as je}from"./chunk-RX77LLFP.js";import{b as K}from"./chunk-ATSX26LL.js";import{a as Se}from"./chunk-GFYMJ5JH.js";import{A as j,B as U,C as r,I as Ce,J as ye,K as qe,L as T,M as B,N as J,Q as Re,R as xe,S as Ae,T as De,U as Fe,b as Ie,d as ke,o as i,p as N,q as Q,s as c,t as I,u as k,w as z,x as we,y as a,z as H}from"./chunk-5AZ2HWTX.js";import{a as _e}from"./chunk-FYHFJFPV.js";import{a as ge}from"./chunk-HUVFJU6B.js";import"./chunk-L3KWCNKY.js";import{a as V}from"./chunk-EHOBQCEV.js";import{a as be}from"./chunk-VQEVI3UQ.js";import{a as ve}from"./chunk-VML6VTTW.js";import{a as he}from"./chunk-73BUZD3L.js";import{a as ae}from"./chunk-U6MH67WD.js";import"./chunk-67AICILL.js";import{a as S}from"./chunk-V3AM6ELX.js";import{a as L}from"./chunk-TTIL6Q2Q.js";import"./chunk-CYTNSAKG.js";import"./chunk-7XTGUVW5.js";import{a as de}from"./chunk-CF4P6XS2.js";import"./chunk-G3R5NAPB.js";import"./chunk-CQ3PZTYF.js";import{a as ce}from"./chunk-C5OE7PQU.js";import"./chunk-RY5JB5JV.js";import"./chunk-SWDYJ63E.js";import{b as me}from"./chunk-QOWOSZRG.js";import"./chunk-FM7OJ7NO.js";import"./chunk-HA7HK2NF.js";import"./chunk-YBC6MMGI.js";import"./chunk-U546IVLZ.js";import"./chunk-DXI2WUUD.js";import"./chunk-JQPK3YVC.js";import{a as pe}from"./chunk-HT7PAWAR.js";import"./chunk-T34QP7UC.js";import"./chunk-WHLURLGI.js";import"./chunk-M6FQTS4T.js";import"./chunk-FTOV4GKD.js";import"./chunk-NY6FBFCL.js";import"./chunk-UWALNOSV.js";import"./chunk-POXCGSYQ.js";import{X as fe,b as ue,p as le}from"./chunk-M72CYKCS.js";import"./chunk-ZP7KCDX3.js";function W(t){return he({cmd:"inventing",subcmd:"doinvent",recipe_id:t})}function Qe(t){let e=ge(t);return e.includes("successfully")?{r:{item:{}},s:!0}:{e:{message:e},s:!1}}function X(t){return de({cmd:"inventing",subcmd:"doinvent",recipe_id:t}).then(Qe)}function Y(t){return ve(W,X,t)}function Be(t){let e;return{c(){e=I("(max)")},m(n,m){N(n,e,m)},d(n){n&&Q(e)}}}function Ee(t){let e,n,m,s,p,o,d;return{c(){e=c("div"),n=c("div"),n.textContent="INFORMATION",m=k(),s=c("div"),p=I(t[4]),r(n,"background","#8E8668"),r(n,"color","#FFF"),r(n,"font-size","smaller"),r(e,"border","2px solid #FFF"),r(e,"margin","10px auto"),r(e,"width","80%"),r(e,"background","#D3CFC1")},m(u,_){N(u,e,_),i(e,n),i(e,m),i(e,s),i(s,p),d=!0},p(u,_){(!d||_&16)&&j(p,u[4])},i(u){d||(u&&Ce(()=>{o||(o=J(e,K,{},!0)),o.run(1)}),d=!0)},o(u){u&&(o||(o=J(e,K,{},!1)),o.run(0)),d=!1},d(u){u&&Q(e),u&&o&&o.end()}}}function Ge(t){let e,n,m,s,p,o,d,u,_,b,E,v,h,C,y,D=t[1]+t[2]+"",q,R,G,te,F,x,ne,M,ie,A,re,P,w,O,oe;o=new Se({props:{$$slots:{default:[Be]},$$scope:{ctx:t}}}),o.$on("click",t[5]);let f=t[4]&&Ee(t);return{c(){e=c("form"),n=c("label"),n.textContent="Select how many to quick invent",m=k(),s=c("input"),p=k(),Re(o.$$.fragment),d=k(),u=c("input"),_=k(),b=c("div"),f&&f.c(),E=k(),v=c("div"),h=c("div"),C=k(),y=c("p"),q=I(D),R=I(" / "),G=I(t[0]),te=k(),F=c("div"),x=c("div"),ne=I("Successes: "),M=I(t[1]),ie=k(),A=c("div"),re=I("Failures: "),P=I(t[2]),a(n,"for","quick-invent-amount"),a(s,"type","number"),a(s,"id","quick-invent-amount"),a(s,"name","quick-invent-amount"),a(s,"min","0"),a(s,"step","1"),a(s,"class","custominput fshNumberInput"),s.required=!0,a(u,"class","custombutton"),a(u,"type","submit"),u.value="Quick Invent",r(u,"margin-left","8px"),a(h,"class","composing-progress-bar"),r(h,"background-position","right top"),r(h,"width",t[3]+"%"),r(h,"transition","width 0.4s ease-out"),r(h,"position","absolute"),r(h,"top","0px"),r(y,"position","relative"),a(v,"class","composing-progress"),r(v,"margin","0px auto"),r(v,"font-weight","bold"),r(v,"color","#fff"),r(v,"left","0px"),r(x,"display","inline-block"),r(x,"width","250px"),a(x,"class","fshQs fshGreen"),r(A,"display","inline-block"),r(A,"width","250px"),a(A,"class","fshQs fshRed"),r(F,"margin-top","36px"),a(e,"class","fshCenter"),r(e,"margin-top","12px")},m(l,g){N(l,e,g),i(e,n),i(e,m),i(e,s),U(s,t[0]),i(e,p),xe(o,e,null),i(e,d),i(e,u),i(e,_),i(e,b),f&&f.m(b,null),i(b,E),i(b,v),i(v,h),i(v,C),i(v,y),i(y,q),i(y,R),i(y,G),i(b,te),i(b,F),i(F,x),i(x,ne),i(x,M),i(F,ie),i(F,A),i(A,re),i(A,P),w=!0,O||(oe=[z(s,"input",t[9]),z(e,"submit",we(t[6]))],O=!0)},p(l,[g]){g&1&&H(s.value)!==l[0]&&U(s,l[0]);let se={};g&2048&&(se.$$scope={dirty:g,ctx:l}),o.$set(se),l[4]?f?(f.p(l,g),g&16&&T(f,1)):(f=Ee(l),f.c(),T(f,1),f.m(b,E)):f&&(ye(),B(f,1,1,()=>{f=null}),qe()),(!w||g&8)&&r(h,"width",l[3]+"%"),(!w||g&6)&&D!==(D=l[1]+l[2]+"")&&j(q,D),(!w||g&1)&&j(G,l[0]),(!w||g&2)&&j(M,l[1]),(!w||g&4)&&j(P,l[2])},i(l){w||(T(o.$$.fragment,l),T(f),w=!0)},o(l){B(o.$$.fragment,l),B(f),w=!1},d(l){l&&Q(e),Ae(o),f&&f.d(),O=!1,Ie(oe)}}}function Me(t,e,n){let{max:m}=e,{recipeID:s}=e,p=1,o=0,d=0,u=0,_="";function b(){n(1,o=0),n(2,d=0),n(3,u=0),n(4,_="")}function E(){n(0,p=m),V("inventing","maxInventButton")}async function v(){if(V("inventing","quickInvent"),!p)return;b(),Array(p).fill(s).reduce(async(y,D)=>{let q=await y;if(!q||q.s===!0){let R=await Y(D);return R.s===!1?n(4,_=R.e.message):R.r.success_count>0?n(1,o+=1):n(2,d+=1),n(3,u=100*((o+d)/p)),R}return q},Promise.resolve())}function h(){p=H(this.value),n(0,p)}return t.$$set=C=>{"max"in C&&n(7,m=C.max),"recipeID"in C&&n(8,s=C.recipeID)},[p,o,d,u,_,E,v,m,s,h]}var Te=class extends Fe{constructor(e){super();De(this,e,Me,Ge,ke,{max:7,recipeID:8})}},Le=Te;function Pe(t){let[e,n]=ce(S("tr:nth-child(2) td",t)).split("/").map(m=>parseInt(m,10));return{have:e,need:n}}function Oe(){return L(`#pCC td[background^="${ue}ui/inventory/"]`).map(e=>e.parentElement.parentElement).map(Pe)}function Z(){return Oe().reduce((e,n)=>Math.min(e,Math.floor(n.have/n.need)),1/0)}function Ve(t,e){return new Le({props:t,target:e})}function ze(t){let n=t.insertRow(-1).insertCell(-1);n.className="header",n.setAttribute("height","1")}function He(t){let n=t.insertRow(-1).insertCell(-1);return n.className="fshCenter",n}function $(){let t=S('input[name="recipe_id"]');if(!t)return;let e=Z(),n=me.lastElementChild;ze(n),Ve({max:e,recipeID:t.value},He(n))}function Ue(t){if(!t)return;let e=t.src.match(/\/items\/(\d+)\.gif/);if(e)return e[1]}function Je(t){return`${fe}items${le}view&item_id=${t}`}function Ke(t){return _e({href:Je(t),target:"_blank"})}function Ne(t,e){let n=Ue(e);if(!n)return;let m=Ke(n);be(m,t),ae(m,t)}function We(t){Ne(t,t)}function Xe(){let t=je('.//b[.="Target Invention"]/../../following-sibling::*[1]//img'),e=S("#pCC b");Ne(e,t)}function Ye(){L('#pCC img[src*="/items/"]').forEach(We)}function ee(){Xe(),Ye()}function Ze(){pe()&&(ee(),$())}export{Ze as default};
//# sourceMappingURL=inventing-4DDLMFNR.js.map
