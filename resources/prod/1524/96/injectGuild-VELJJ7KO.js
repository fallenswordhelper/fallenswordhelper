import{a as ie}from"./chunk-T4IHQIKE.js";import{a as te,b as ee}from"./chunk-ZKAA65CL.js";import{a as Kt}from"./chunk-OVJ5BJCB.js";import{a as z}from"./chunk-ND7BVOEA.js";import{a as oe}from"./chunk-HUJWKN3N.js";import{a as re}from"./chunk-CK4DH4AS.js";import{a as Jt}from"./chunk-5W5JA5BZ.js";import{a as Yt}from"./chunk-RHVUI2N7.js";import{a as V}from"./chunk-JUCPAWL4.js";import{a as Wt}from"./chunk-7PVLJRQR.js";import{a as Zt}from"./chunk-XA7VEA3S.js";import"./chunk-5BZ7KNTS.js";import"./chunk-BUZTYUGF.js";import{a as _}from"./chunk-ZJZE47OZ.js";import{a as _t}from"./chunk-W74PDBGV.js";import{a as Qt}from"./chunk-PGXTFZG7.js";import{a as zt}from"./chunk-TU4HFMDQ.js";import"./chunk-TS3O5RP5.js";import{a as Q}from"./chunk-3H6GCVB5.js";import{a as St}from"./chunk-AER4ZW23.js";import{a as Bt}from"./chunk-3G7CYY57.js";import{a as Ot}from"./chunk-2VDK4LUV.js";import"./chunk-N7KWRY2I.js";import{a as Nt}from"./chunk-ZK36QI5P.js";import{a as c}from"./chunk-B7WY4WJY.js";import"./chunk-QZ3PTAVB.js";import{a as m}from"./chunk-HF6D2UFB.js";import"./chunk-KJYHCQ2M.js";import{a as n}from"./chunk-5ECNYKUD.js";import{a as o}from"./chunk-QWWGFHCC.js";import{a as P}from"./chunk-UYTG5BIE.js";import"./chunk-E4NFRWIU.js";import{a as vt}from"./chunk-W5PGQCP6.js";import"./chunk-65X75NMX.js";import{a as M}from"./chunk-BRCLG7CS.js";import{c as I}from"./chunk-JF26II2G.js";import"./chunk-MQKV5UZF.js";import{a as $t}from"./chunk-A4AW7RHB.js";import{a as D}from"./chunk-4M32JDT3.js";import"./chunk-5JLHYAC5.js";import{a as Gt}from"./chunk-GVRKHMXU.js";import"./chunk-CPH7EA52.js";import"./chunk-S2OM6JJX.js";import{a as Ct}from"./chunk-X6TTU562.js";import"./chunk-NA5RGSNR.js";import{b as a}from"./chunk-B4VPWMSY.js";import{a as l}from"./chunk-PGM6BW3X.js";import{a as yt}from"./chunk-EQGONDX6.js";import{a as jt,b as Ut,c as qt,d as Ft}from"./chunk-RQXNHHXJ.js";import{a as Xt}from"./chunk-PRSSBDVJ.js";import"./chunk-QT2LCJTA.js";import"./chunk-POEHLG6V.js";import"./chunk-GS2KLCIZ.js";import"./chunk-FWB3XNXM.js";import"./chunk-KLIOCADL.js";import{a as O}from"./chunk-MBDU2CUC.js";import{a as Vt}from"./chunk-JJYXGDGG.js";import"./chunk-L5RDKRDA.js";import"./chunk-V2FNJKJ6.js";import{a as Mt}from"./chunk-XHAV7GZE.js";import{a as x}from"./chunk-FRO6SRPS.js";import{a as T}from"./chunk-KISGUHSG.js";import"./chunk-IPRVEOT3.js";import{a as f}from"./chunk-DTVBVYDR.js";import{a as Dt}from"./chunk-TLSBW6NW.js";import{a as Pt}from"./chunk-VOZNQMDZ.js";import"./chunk-FWKC5QHK.js";import"./chunk-NWPELAGL.js";import"./chunk-PQNRX7KL.js";import"./chunk-3HA3LGRS.js";import"./chunk-PQQEFJJP.js";import{a as h}from"./chunk-75D56BHN.js";import"./chunk-ES5FO3D6.js";import"./chunk-PG53AESD.js";import{a as At,b as Rt}from"./chunk-AXJWJKP2.js";import"./chunk-LI5QSEK4.js";import{a as wt}from"./chunk-K6BERMOF.js";import{a as Ht}from"./chunk-LLBDB37F.js";import"./chunk-FBE7XRGY.js";import"./chunk-RXTT2WAC.js";import{a as v}from"./chunk-MQXWBXAI.js";import{a as G}from"./chunk-DRRSBJLB.js";import{a as Et}from"./chunk-BUURZXBN.js";import{a as X}from"./chunk-T4OHWY7E.js";import{a as N}from"./chunk-56KYPMCN.js";import{a as $}from"./chunk-Y2VHEFD6.js";import{a as It}from"./chunk-IVQP43UK.js";import"./chunk-6IZV36TT.js";import"./chunk-L3JPR2OA.js";import"./chunk-BOKRD7MF.js";import"./chunk-SFHHQNN2.js";import{a as d}from"./chunk-OX4LUTGU.js";import"./chunk-APL2ZPH4.js";import"./chunk-DUYXF4AP.js";import{a as k}from"./chunk-2AE3RW75.js";import{b as s}from"./chunk-4VOC3Y22.js";import{a as bt}from"./chunk-EBYAAPUH.js";import{a as p}from"./chunk-OORPHTKR.js";import{G as R,K as Tt,Na as xt,k as A,l as kt,ta as C,wa as L,y as Lt}from"./chunk-7FWLR7VA.js";import"./chunk-CQMSXQA7.js";import{a as S}from"./chunk-YZRZJRAF.js";var ne=0,ae=1;function Ce(t,e){let{mins:r}=M(e.dataset.tipped);return r<44640&&(t[ne]+=1,t[ae]+=Number(k(A,e.dataset.tipped))),t}function Ne(t){return t.reduce(Ce,[0,0])}function W(){let t=x("b",a()).find(D("Members"));if(t){let e=te(),r=Ne(e);t.classList.add("tip-static"),Zt(`Active: ${r[ne]}/${e.length}<br>Stamina: ${G(r[ae])}`,t)}}function me(t,e){let r=k(e,t.replace(/,/g,""));return r?parseInt(r,10):0}function Ee(t,e){let r="";return t>e&&(r="+"),r+G(t-e)}function Be(t){let e=t.dataset.tipped,r=me(e,/XP Lock: <b>(?<lockXp>\d*)/),i=me(e,/XP: <b>(?<realXp>\d*)/);m(t.parentNode.nextElementSibling,` (<b>${Ee(i,r)}</b>)`)}function J(){let t=f('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&Be(t)}function Y(){let t=x(L,a()).slice(-2,-1)[0];if(!t)return;let e=t.rows[0].cells[0],r=n({id:"profile-bio",innerHTML:e.innerHTML});l("",e),o(e,r),re()}var Z=0,K=0;function He(t){return Z&&t>=jt()&&t<=Ut()}function Ae(t){return K&&t>=qt()&&t<=Ft()}var Re=t=>[t,M(t.dataset.tipped).days],Pe=([,t])=>t<7,Me=([t])=>[t,Number(k(kt,t.dataset.tipped))],$e=([t,e])=>[t.parentNode.parentNode.rowIndex,He(e),Ae(e)];function Ie(){return $('#pCC a[data-tipped*="<td>VL:</td>"]').map(Re).filter(Pe).map(Me).map($e)}function De(){return Number(St("guild_id"))!==Vt()&&(Z||K)}var Ge=t=>t.map(([e])=>`.fshHighlight tr:nth-child(${e+1})`).join(",");function se(t,e){if(t.length){let r=`${Ge(t)} {background-color: #${e};}`;o(document.body,V(r))}}function Ve(t,e){if(t.length+e.length){let r=T(L,a());r[r.length-1].classList.add("fshHighlight")}}function je(){let t=Ie(),e=t.filter(([,i])=>i),r=t.filter(([,i,w])=>!i&&w);se(e,"4671C8"),se(r,"FF9900"),Ve(e,r)}function Ue(){De()&&je()}function tt(){Z=s("highlightPlayersNearMyLvl"),K=s("highlightGvGPlayersNearMyLvl"),Ue(),s("enableHistoryCompressor")&&Y()}function qe(t){m(t.parentNode,' <span class="smallLink">[b]</span>')}function Fe(t){t.target.className==="smallLink"&&zt(Qt(t.target.previousElementSibling.href))}function et(){let t=It(`#pCC a[href^="${Lt}"]`);Kt([3,t,0,qe]),v(a(),Fe)}function j(t){return Pt({cmd:"guild",subcmd:"conflicts",page:t})}function ce(t,e){l(e,t.insertCell(-1))}function le(t,e,r){let i=t.insertRow(t.rows.length-2);ce(i,e),ce(i,r)}function Xe(t){le(t,`<a href="${R}conflicts">Active Conflicts</a>`,"Score")}function Oe(t,e){le(t,e.cells[0].innerHTML,`<b>${e.cells[6].innerHTML}</b>`)}function _e(t,e,r){e===1&&Xe(r),Wt(t,7,0).forEach(d(Oe,r))}function Qe(t,e,r){let i=f("#pCC > table > tbody > tr > td > table",t);i&&i.rows.length>3&&_e(i,e,r)}function ze(t){return Number(t.nextSibling.textContent.split("\xA0")[2])}async function We(t,e,r){let i=await j(t+1);e(r,i)}function fe(t,e){let r=Dt(e),i=f('#pCC input[name="page"]',r);if(!i)return;let w=Number(i.value),Se=ze(i);Qe(r,w,t.node),Se>w&&We(w,fe,t)}async function rt(t){let[e]=t.rows[6].cells[0].children;if(e){let r=await j(1);fe({node:e},r)}}function Je(t){t.target.id===C&&h(C,!s(C))}function ot(){let t=f("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,r=n({className:"fsh-tracker"}),i=n({innerHTML:`${I(C)}&nbsp;<label class="custombutton" for="tracker">Show</label>`});p(i,"change",Je),o(r,t),o(r,i),Bt(e,r)}function it(){return P("br")}function nt(t){return P("th",t)}var at=0,st="",B=0,mt=0,U=0,rr=(t,e)=>`${t}<option value="${e}">${e}</option>`,or=t=>`<select name="member">${t.reduce(rr,"")}</select>`,ir=t=>st!==t;function E(t){return bt(t)?"#DEF":t.toLocaleString()}function nr(t,e,r){return`${e}<tr><td>${Xt(new Date(r[4]*1e3))}</td><td>${t}</td><td class="fshRight">${E(r[2])}</td><td class="fshRight">${E(r[5])}</td><td class="fshRight">${E(r[1])}</td><td class="fshRight">${E(r[3])}</td><td class="fshRight">${Math.floor(r[1]/r[3]*100)}</td><td class="fshRight">${r[0]}</td><td class="fshRight">${E(r[6])}</td></tr>`}function ar(t,e){return ir(e)?t:t+U[e].reduce(d(nr,e),"")}var mr=()=>O(U).reduce(ar,"");function sr(){U&&l(mr(),at),B.classList.remove("fshSpinner")}function de(){B.classList.add("fshSpinner"),c(3,sr)}function cr(t){st=t.target.value,de()}function q(t){if(t){U=t;let e=O(t).sort(Gt);[st]=e,l(or(e),mt),de()}}function lr(){let t=nt({textContent:"Member"});return mt=n(),o(t,mt),t}function fr(t){let e=t.createTHead().insertRow(-1);m(e,"<th>Date</th>");let r=lr();o(e,r),m(e,"<th>Level</th><th>VL</th><th>Stam</th><th>Max<br>Stam</th><th>Stam<br>%</th><th>Last<br>Activity<br>(Days)</th><th>GXP</th>")}function pr(t){at=ie(),o(t,at)}function ge(){let t=Yt({id:"tg"});return fr(t),pr(t),p(t,"change",cr),B=n({className:"tgCont fshSpinner64"}),o(B,t),B}var u=0,he=0,be=0,g=0;function ur(t){u.value=t,g.classList.remove("fshSpinner")}function ke(t){t&&(g.classList.add("fshSpinner"),c(4,ur,[t]))}function dr(){u.value='{"lastUpdate": 0, "members": {}}'}function gr(t){z("Update successful"),q(t.members)}async function hr(){let t=vt(u.value);try{await Rt("fsh_guildActivity",t),gr(t)}catch(e){z(e)}}function ye(t,e){let r=Jt({className:"custombutton",textContent:t});return v(r,e),r}function br(){u=oe(),u.setAttribute("autocapitalize","off"),u.setAttribute("autocomplete","off"),u.setAttribute("autocorrect","off"),u.setAttribute("spellcheck","false")}function Le(){return g=n({id:"io",className:"fshSpinner64"}),br(),he=ye("Save",hr),be=ye("Reset",dr),o(g,u),o(g,it()),o(g,he),o(g,be),g}var ct=0,b=0,H=0;function Te(){return!b.checked}function yr(){return b.checked}function kr(){b.checked=!1}function Lr(t){yr()&&t.code==="Escape"&&kr()}function Tr(t){Te()&&(t.style.transform=null)}function xr(){return Ot({className:"fshMove ui-tabs-nav ui-widget-header ui-corner-all ui-helper-reset ui-helper-clearfix",innerHTML:'<li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab1">Guild Activity Tracker</label></li><li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab2">Import/Export</label></li><label for="tracker" class="fsh-dialog-close ui-dialog-titlebar-close">&times;</label>'})}function vr(){N("guildTracker","updateRawData"),ct&&ke(ct)}function wr(){let t=n({className:"fsh-dialog-popup ui-dialog ui-tabs ui-widget ui-widget-content ui-corner-all",innerHTML:'<input id="acttab1" class="fsh-tab-open" name="acttabs" checked type="radio">'}),e=_({className:"fsh-tab-open",id:"acttab2",name:"acttabs",type:"radio"});return X(e,"change",vr),o(t,e),t}function Sr(){let t=wr(),e=xr();return o(t,e),Et(e,t),t}function Cr(){let t=n({className:"fsh-dialog-content"});return o(t,ge()),o(t,Le()),t}function Nr(){let t=Sr(),e=Cr();o(t,e),p(b,"change",d(Tr,t)),o(H,t)}function Er(){m(H,'<div class="fsh-dialog-overlay"><label class="fsh-dialog-cancel" for="tracker"></label></div>')}function Br(t){t&&(ct=wt(t),q(t.members))}async function Hr(){N("guildTracker","openDialog");let t=At("fsh_guildActivity");S.dialogIsClosed=Te,Er(),Nr(),Br(await t)}function Ar(){b=_({id:"tracker",className:"fsh-dialog-open",type:"checkbox"}),X(b,"change",Hr),H=n({className:"fsh-dialog"}),o(H,b),p(document.body,"keydown",Lr),o(document.body,H)}function lt(){ot(),Ar()}function ft(t){let e=t.target.dataset.linkto,r=yt(e),i=Nt("fshHide",r);r.classList.toggle("fshHide"),i?h(e,""):h(e,"ON")}function Rr(t){return Q({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function Pr(t){let e=Q({className:"fshNoWrap",innerHTML:"[&nbsp;"});return o(e,t),m(e,"&nbsp;]"),e}function pt(t,e,r){let i=Rr(r);o(t,Pr(i)),e.id=r,s(r)&&_t(e),v(i,ft)}function xe(t){pt(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function ve(t){let e=t.rows[4].cells[1].children[0];l(Ct(e.innerHTML),e),pt(e,t.rows[6].cells[0].children[0],"statisticsControl")}function we(t){let e=t.rows[15]?.cells[1].children[0];e&&pt(e,t.rows[17].cells[0].children[0],"guildStructureControl")}var ut=0;function Mr(t){let{stam:e,max:r}=Mt(A,t.dataset.tipped);return Math.min(Math.round(Number(e)/Number(r)*100),100)}function $r(t){let e=Mr(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${e}%, transparent ${e+1}%)}`}function Ir(){let t=T(L,a()),e=t[t.length-1];e.classList.add("fshProgressBar");let i=$(xt,e).map($r).join(`
`);ut=o(document.body,V(i)).sheet}function F(t){ut?ut.disabled=!t:Ir()}var dt="enableStamBars",y=0;function Dr(){y=!y,h(dt,y),F(y),N("guildManage","StamBars")}function Gr(){if(!f("#pCC img.guild_openGuildStore"))return;let e=o(a(),n({innerHTML:I(dt),style:{marginLeft:"66%"}}));p(e,"change",Dr)}function gt(){Gr(),y=s(dt),y&&F(y)}function Vr(t){let e=x("b",t).filter(D("Relics"));if(e.length!==1)return;let r=e[0].parentNode.nextElementSibling.children[0];l(`[ <a href="${R}reliclist">Control</a> ]&nbsp;`,r)}function jr(t){let e=T("li",t);if(!e||!e.length)return;let r=e[e.length-1].parentNode;m(r,`<li><a href="${Tt}${$t()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function Ur(){return a().lastElementChild.rows?.[2].cells[0].children[0]}function qr(t,e){c(3,e,[t])}function Fr(t){[xe,ve,we,Vr,jr].forEach(d(qr,t))}function Xr(t){Ht()||(s("detailedConflictInfo")&&c(3,rt,[t]),c(4,lt))}function ht(){if(!a())return;let t=Ur();t&&(Fr(t),s("showBuffLinks")&&c(3,et),Xr(t),gt())}function Or(){c(3,ee),c(3,J),c(3,W),["-","manage"].includes(S.subcmd)&&ht(),S.subcmd==="view"&&tt()}export{Or as default};
//# sourceMappingURL=injectGuild-VELJJ7KO.js.map
