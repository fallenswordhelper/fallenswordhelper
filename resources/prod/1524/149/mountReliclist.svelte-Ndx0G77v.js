import{a6 as i,R as l,bE as e,S as s,T as a,W as t,dZ as n,at as r,au as v,as as c,X as d,a7 as o,a8 as m,V as u,Z as $,a3 as f,bF as p,bq as b,Y as g,_ as h,a4 as k,K as y,s as H,a0 as C,br as _,b6 as w,b5 as G,bt as S,bH as L,bS as R,e8 as j,bA as x,ao as A,ad as F}from"./calfSystem-BGW9cdWN.js"
import{r as O}from"./reliclist-oDZI5fBF.js"
var P=(i,l)=>l("view relic on UFSG"),T=(i,l)=>l("view guild"),X=d("<a> </a>"),Z=d('<div class="svelte-19l2imp"> </div> <div class="svelte-19l2imp"><a> </a></div> <div class="svelte-19l2imp"><!></div> <div class="svelte-19l2imp"> </div> <div class="svelte-19l2imp"> </div> <div class="svelte-19l2imp"> </div> <div class="svelte-19l2imp"> </div> <div class="svelte-19l2imp"> </div> <div class="svelte-19l2imp"> </div> <div class="svelte-19l2imp"><!></div>',1),q=d('<div class="content grid svelte-19l2imp"><div class="innerColumnHeader svelte-19l2imp"><!></div> <div class="innerColumnHeader svelte-19l2imp"><!></div> <div class="innerColumnHeader svelte-19l2imp"><!></div> <div class="innerColumnHeader svelte-19l2imp"><!></div> <div class="innerColumnHeader svelte-19l2imp"><!></div> <div class="innerColumnHeader svelte-19l2imp"><!></div> <div class="innerColumnHeader svelte-19l2imp"><!></div> <div class="innerColumnHeader svelte-19l2imp"><!></div> <div class="innerColumnHeader svelte-19l2imp"><!></div> <div class="innerColumnHeader svelte-19l2imp"><!></div> <!></div>'),D=d('<div class="content svelte-19l2imp"> </div>'),E=d(" <br>",1),I=d('<div class="content svelte-19l2imp"></div>')
function K(i,d){l(d,!0)
let A=e(d,"visible",15,!0),F=s(a([])),K=s(a([])),M=-1,N=""
function U(i){H("Relic List",i)}function V(i){t(K,i.concat(u(K)),!0)}const W=(i,l)=>i?.attributes?.find((i=>l=>l.id===i)(l)),Y=(i,l)=>W(i,l)?.value??"",z=i=>W(i,6),B=(i,l)=>M*(i.time-l.time),J=(i,l)=>W(i,l)?.value??0,Q=i=>(l,e)=>M*(J(l,i)-J(e,i)),ii=(i,l)=>M*R(i.guild?.name??"",l.guild?.name??""),li=(i,l)=>M*R(i.name,l.name),ei=i=>i.location.realm.min_level,si=(i,l)=>M*(ei(i)-ei(l))
function ai(i,l){M=N===i?-1*M:1,t(F,u(F).slice().sort(l),!0),N=i}function ti(i,l){U(i),ai(i,l)}async function ni(i=0,l=100){V([`offset ${i}`])
const e=await O(null,i,l)
if(e?.s)return e.r.remaining_relics?e.r.relics.concat(await ni(i+e.r.relics.length,Math.min(100,e.r.remaining_relics))):e.r.relics}async function ri(){V(["Loading..."])
const i=await ni()
y(i)&&(t(F,i.filter(z),!0),ai("sort by level",si))}let vi=s(a(Promise.resolve()))
t(vi,ri(),!0)
{const l=i=>{var l=b("Relic List")
f(i,l)}
n(i,{close:function(){U("close"),A(!1)},get visible(){return A()},title:l,children:(i,l)=>{var e=r(),s=v(e)
c(s,(()=>u(vi)),(i=>{var l=I()
h(l,21,(()=>u(K)),L,((i,l)=>{var e=E(),s=v(e)
o((()=>m(s,`${u(l)??""} `))),f(i,e)})),f(i,l)}),(i=>{var l=q(),e=$(l),s=$(e)
p(s,{onclick:()=>{ti("sort by level",si)},children:(i,l)=>{var e=b("Level")
f(i,e)},$$slots:{default:!0}})
var a=g(e,2),t=$(a)
p(t,{onclick:()=>{ti("sort by name",li)},children:(i,l)=>{var e=b("Name")
f(i,e)},$$slots:{default:!0}})
var n=g(a,2),r=$(n)
p(r,{onclick:()=>{ti("sort by guild",ii)},children:(i,l)=>{var e=b("Guild")
f(i,e)},$$slots:{default:!0}})
var c=g(n,2),d=$(c)
p(d,{onclick:()=>{ti("sort by stam gain",Q(6))},children:(i,l)=>{var e=b("Stam Gain")
f(i,e)},$$slots:{default:!0}})
var k=g(c,2),y=$(k)
p(y,{onclick:()=>{ti("sort by attack",Q(0))},children:(i,l)=>{var e=b("Atk")
f(i,e)},$$slots:{default:!0}})
var H=g(k,2),L=$(H)
p(L,{onclick:()=>{ti("sort by damage",Q(4))},children:(i,l)=>{var e=b("Dmg")
f(i,e)},$$slots:{default:!0}})
var R=g(H,2),A=$(R)
p(A,{onclick:()=>{ti("sort by stamina",Q(5))},children:(i,l)=>{var e=b("Stam")
f(i,e)},$$slots:{default:!0}})
var O=g(R,2),D=$(O)
p(D,{onclick:()=>{ti("sort by gold gain",Q(7))},children:(i,l)=>{var e=b("Gold Gain")
f(i,e)},$$slots:{default:!0}})
var E=g(O,2),I=$(E)
p(I,{onclick:()=>{ti("sort by xp gain",Q(8))},children:(i,l)=>{var e=b("XP Gain")
f(i,e)},$$slots:{default:!0}})
var K=g(E,2),M=$(K)
p(M,{onclick:()=>{ti("sort by time",B)},children:(i,l)=>{var e=b("Time")
f(i,e)},$$slots:{default:!0}})
var N=g(K,2)
h(N,17,(()=>u(F)),(i=>i.id),((i,l)=>{var e=Z(),s=v(e),a=$(s),t=g(s,2),n=$(t)
n.__click=[P,U]
var r=$(n),c=g(t,2),d=$(c),p=i=>{var e=X()
e.__click=[T,U]
var s=$(e)
o((()=>{_(e,"href",`${S??""}${u(l).guild.id??""}`),m(s,u(l).guild.name)})),f(i,e)}
C(d,(i=>{u(l).guild&&i(p)}))
var h=g(c,2),k=$(h),y=g(h,2),H=$(y),L=g(y,2),R=$(L),A=g(L,2),F=$(A),O=g(A,2),q=$(O),D=g(O,2),E=$(D),I=g(D,2),K=$(I),M=i=>{var e=b()
o((i=>m(e,i)),[()=>function(i){const[l,e,s,a]=j(i)
return`${l}d ${x(e)}h ${x(s)}m ${x(a)}s`}(u(l).time)]),f(i,e)}
C(K,(i=>{u(l).time&&i(M)})),o(((i,e,s,t,v,c)=>{m(a,u(l).location.realm.min_level),_(n,"href",`${w??""}relics${G}view&relic_id=${u(l).id??""}`),m(r,u(l).name),m(k,i),m(H,e),m(R,s),m(F,t),m(q,v),m(E,c)}),[()=>Y(u(l),6),()=>Y(u(l),0),()=>Y(u(l),4),()=>Y(u(l),5),()=>Y(u(l),7),()=>Y(u(l),8)]),f(i,e)})),f(i,l)}),((i,l)=>{var e=D(),s=$(e)
o((()=>m(s,u(l).message))),f(i,e)})),f(i,e)},$$slots:{title:!0,default:!0}})}k()}i(["click"])
const M=a({visible:!0})
let N=0
function U(){A("betaOptIn")&&(N?M.visible=!0:N=F(K,{props:M,target:document.body}))}export{U as default}
//# sourceMappingURL=mountReliclist.svelte-Ndx0G77v.js.map
