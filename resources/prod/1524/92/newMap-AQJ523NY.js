import{a as jl,b as es}from"./chunk-ESWTHD7L.js";import{a as ds}from"./chunk-4QEUXFCK.js";import{a as ls}from"./chunk-2K6EQ4EC.js";import"./chunk-EXZPPOOL.js";import"./chunk-56L6SVLZ.js";import"./chunk-GUDWGCLP.js";import{a as Zl}from"./chunk-DRVBB2R6.js";import{a as hs}from"./chunk-7XYT6ACN.js";import{a as fo}from"./chunk-X5PIXWSG.js";import{a as ns,b as is,c as as}from"./chunk-7CODU5GJ.js";import{a as uo}from"./chunk-Y4KXVTV4.js";import{a as ss,b as us}from"./chunk-VFC3N6DZ.js";import{b as fs}from"./chunk-HVZUAEX5.js";import{a as ie,b as M}from"./chunk-4AGIFBOY.js";import{a as R}from"./chunk-I5XBDRTK.js";import{a as tt}from"./chunk-ZQDERVVJ.js";import{b as ts}from"./chunk-KQVF2U7E.js";import{a as ps}from"./chunk-JYLEEWMK.js";import{a as et}from"./chunk-N3HOJER6.js";import{a as Ie,b as so}from"./chunk-BK2AP6XG.js";import"./chunk-N277GDHS.js";import{a as we}from"./chunk-NAE6VLJ2.js";import{a as os}from"./chunk-EE2FKXK4.js";import{a as cs}from"./chunk-XZB3VEC2.js";import{a as rs}from"./chunk-SO2EGR4N.js";import{a as lo}from"./chunk-B4QOFZKA.js";import"./chunk-QTBIKNIY.js";import{a as Jl}from"./chunk-KJIUCR3J.js";import{a as ms}from"./chunk-Y4PCT6J3.js";import"./chunk-STS5MBDW.js";import{a as ql}from"./chunk-OFF5KLXW.js";import{a as io}from"./chunk-RXVTRRND.js";import{a as Rl}from"./chunk-H4446FYY.js";import{a as Il}from"./chunk-RMI4QTOK.js";import{a as Kl}from"./chunk-OQPRDOZL.js";import{a as Wl}from"./chunk-KAYN3J5T.js";import{a as Ul}from"./chunk-LAOZVBJ3.js";import{a as Xl}from"./chunk-7MWSCZWH.js";import{a as Yl}from"./chunk-KGDDIYYL.js";import{a as zl}from"./chunk-LTFOXCVW.js";import{a as Ql}from"./chunk-4TBUXWYP.js";import{a as I}from"./chunk-FO5AIT2P.js";import{a as En}from"./chunk-UXPWLJKF.js";import{a as Pl,b as Fl,c as Ol}from"./chunk-JAAIUYXB.js";import{a as Gl}from"./chunk-CXJHL2KO.js";import{a as $l}from"./chunk-EJQFETEW.js";import{a as ao}from"./chunk-5FKYEWY3.js";import"./chunk-QTSQHPKK.js";import"./chunk-4U7T7HTS.js";import"./chunk-EVIGSOCH.js";import{a as no}from"./chunk-ZK3AGOF2.js";import{a as za}from"./chunk-VZ7ZAV5B.js";import{a as Qr}from"./chunk-W7IQPAFJ.js";import{a as _e}from"./chunk-GQTCWOPY.js";import"./chunk-MD6UYHMZ.js";import{a as wl}from"./chunk-NTTJB2O5.js";import{a as Nl}from"./chunk-WRHTWSD6.js";import"./chunk-NCDRXM67.js";import{a as Xr}from"./chunk-B4DZ2JJW.js";import{a as Fr}from"./chunk-LFZPKT47.js";import"./chunk-OR5BPR4B.js";import{a as V}from"./chunk-A77NZCEP.js";import{a as E}from"./chunk-NJN6T7TI.js";import{a as k}from"./chunk-4NGCZM3S.js";import"./chunk-AOZMZP5H.js";import{a as ce}from"./chunk-MB2DX4ZC.js";import{a as gl}from"./chunk-NQ7NIM5V.js";import"./chunk-6DMIKT3C.js";import{d as Be}from"./chunk-H3DQ4UVX.js";import{a as eo}from"./chunk-B2RQR7FO.js";import"./chunk-QPLXN3ET.js";import{a as Dl}from"./chunk-5GJY7CQP.js";import"./chunk-VT3LH7JR.js";import{a as xe}from"./chunk-6NBL4CEJ.js";import{a as Me}from"./chunk-UECO6BBS.js";import"./chunk-4DLBYTJ5.js";import{a as K}from"./chunk-5KGM3LZY.js";import{a as T}from"./chunk-DI3XCMNE.js";import{a as xl}from"./chunk-NIHNAIB5.js";import{a as ro}from"./chunk-OFS25YDJ.js";import{a as _l}from"./chunk-PVHDKJRP.js";import{a as bl}from"./chunk-PHMVEGOF.js";import{a as Ee}from"./chunk-KF2BXDH2.js";import"./chunk-NQFMO265.js";import{a as Vn}from"./chunk-33GAZWWN.js";import{a as He}from"./chunk-7H5ET4BP.js";import"./chunk-WCTHIQU3.js";import"./chunk-WA4H3QPQ.js";import"./chunk-DKWH62CP.js";import{a as Ua}from"./chunk-2IOAHVVN.js";import"./chunk-GALQGYEO.js";import"./chunk-T4ZSWDX2.js";import"./chunk-WE2GCAKX.js";import{a as te}from"./chunk-BQPBQ4WG.js";import"./chunk-N3ED3R2T.js";import{a as Jr,b as Zr}from"./chunk-6OIODDYF.js";import"./chunk-TKVEOBDL.js";import{a as vl}from"./chunk-3V3LTFJF.js";import{a as zr}from"./chunk-IQ37ZVMO.js";import{a as z}from"./chunk-DGZXYCCD.js";import"./chunk-4RW655CP.js";import{a as El}from"./chunk-KO7VAH62.js";import{a as ve}from"./chunk-JY6WJLGQ.js";import"./chunk-JKEV6NM2.js";import{$ as Vl,C as f,E as y,G as Bl,N as Sl,O as Al,R as Ll,U as Qe,V as Xe,W as U,X as re,Z as Mn,_ as Tl,a as q,ba as Hl,d as Y,da as Je,e as Hn,ea as Ze,fa as je,ga as Q,h as pe,ha as X,r as a,s as C,t as D,u as Ne,v as m,w as g,x as h,y as Re,z as oo}from"./chunk-OB44S7IV.js";import{a as Ml}from"./chunk-OI7KRNQS.js";import"./chunk-C7L2X63R.js";import{a as me}from"./chunk-WTCWPEJX.js";import{a as to}from"./chunk-H2ANYIFW.js";import"./chunk-KUIVOAMB.js";import{a as jr,e as yl,g as Cl}from"./chunk-LKEXSUYL.js";import{a as Yr}from"./chunk-O6E23IRT.js";import{a as kl}from"./chunk-TLAXHTSP.js";import"./chunk-CKRPJ7HI.js";import{a as w}from"./chunk-RUEPLNRL.js";import"./chunk-O7K3SHEW.js";import"./chunk-EZQ2GDBH.js";import"./chunk-GVTRKM2F.js";import{b as N}from"./chunk-EZ536MXS.js";import{a as Ka}from"./chunk-LVBWHS3E.js";import{a as ue}from"./chunk-OR37OWF3.js";import{$ as ja,Ca as cl,Da as ml,Ea as pl,Fa as dl,Ga as hl,L as Ln,O as Xa,Oa as Ur,Q as Tn,S as Ja,Y as Za,Z as Ve,_ as $r,aa as el,b as be,ba as tl,ca as rl,d as Ya,da as ol,e as Or,ea as nl,fa as il,ga as al,ha as Wr,ia as ll,ja as sl,ka as fl,m as Qa,ma as ul,na as ge,oa as Kr,pa as ee,r as Sn,y as An}from"./chunk-FQGZN2JL.js";import"./chunk-BYAZQWO5.js";import{a as d}from"./chunk-MR322WHU.js";var Se=0;function Nu(e){return e}function Ru(e){return d.showBuffInfo&&e.some(Nu)}function Iu(){if(Se)R(Se,!1);else{Se=E({className:"fshActionBox",innerHTML:"<div></div><div></div><div></div><div></div><div></div>"});let e=T("actionContainer");Wl(Se,e.children[2])}return Se}function qu(){Se&&R(Se,!0)}function Nn(e){if(Ru(e))return Iu();qu()}function de(e,t,r,o){t&&(e.className=t),V(r,e);let n=I();return k(e,n),et(e,o),n}var qe=0,gs=0;function Gu(e){qe=e.children[3],gs=de(qe,"fshBlue","CA "," active")}function Pu(e,t){qe?R(qe,!1):Gu(e),V(t.level,gs)}function Fu(){qe&&R(qe,!0)}function Rn(e,t){t?Pu(e,t):Fu()}var Ge=0,vs=0;function Ou(e){Ge=e.children[4],vs=de(Ge,"fshRed","Doubler "," active")}function $u(e,t){Ge?R(Ge,!1):Ou(e),V(t.level,vs)}function Wu(){Ge&&R(Ge,!0)}function In(e,t){t?$u(e,t):Wu()}var Pe=0,ws=0;function Ku(e){Pe=e.children[2],ws=de(Pe,"","Damage bonus: ","%")}function Uu(e,t){if(e){let r=Math.min(Math.round(Math.floor(t/5)*Number(e.level))*.01,20);return Ie(r,2).toString()}return"0"}function zu(e,t,r){Pe?R(Pe,!1):Ku(e),V(Uu(t,Number(r)),ws)}function Yu(){Pe&&R(Pe,!0)}function qn(e,t,r){t?zu(e,t,r):Yu()}function Gn(e,t){V(ve(e),t)}var Fe=0,ks=0;function Qu(e){Fe=e.children[1],ks=de(Fe,"","Kill Streak: ","")}function Xu(e,t){Fe?R(Fe,!1):Qu(e),Gn(t,ks)}function Ju(){Fe&&R(Fe,!0)}function Pn(e,t,r,o){t||r?Xu(e,o):Ju()}function Zu(e,t){return t.name===e}function ke(e){let{buffs:t}=GameData.player();if(t)return t.find(w(Zu,e))}var ju=["red","orange","yellow"];function Fn(){let e=$("#actionlist-shield-imp");e.length===1&&e.css("background-color",ju[e.text()]||"#ad8043")}var ae=0,On=0;function ec(e){es(e)&&GameData.fetch(ge)}function tc(){ke("Summon Shield Imp")||jl([eo()],[55]).then(ec)}function rc(e){return e?Number(e.stack):0}var oc=["imp-0","imp-1","imp-1"];function nc(e){return oc[e]||"fshGreen"}function ic(e){[ae]=e.children,V("Shield Imps Remaining: ",ae),On=I(),k(ae,On),Fr(ae,"&nbsp;");let t=we({className:"xSmallLink",textContent:"Recast"});k(ae,t),z(t,tc)}function ac(e,t){ae?R(ae,!1):ic(e);let r=rc(t);ae.className=nc(r),V(r,On)}function lc(){ae&&R(ae,!0)}function $n(e,t,r){t||r?ac(e,t):lc()}function sc(e){return e.type===0}function Wn(){let{dynamic:e}=GameData.realm();return ce(e)&&e.some(sc)}var rt=0,Kn=0,Un=0,zn=0,Yn=0,Qn=0;function fc(){rt=ke("Death Dealer"),Kn=ke("Doubler"),Un=ke("Counter Attack"),zn=ke("Summon Shield Imp"),Yn=Wn(),Qn=GameData.player().killStreak}function Oe(){Fn(),fc();let e=Nn([rt,Kn,Un,zn,Yn]);e&&($n(e,zn,rt),Pn(e,rt,Yn,Qn),qn(e,rt,Qn),Rn(e,Un),In(e,Kn))}function Xn(){Oe(),$.subscribe(`${$r} ${ja}`,Oe)}function P(e){return I({textContent:e})}function uc(){return window.GameController&&GameController.Realm&&!GameController.Realm.footprintTileList}function Jn(){uc()&&(GameController.Realm.footprintTileList=[])}function ys(e,t,r){return ql({className:`fshCurveEle fshCurveLbl fshPoint tip-static ${e}`,dataset:{tipped:t},htmlFor:r})}function co(e){let t=E({className:"fshToggle"}),r=io({checked:e.prefVal,id:e.checkId,type:"checkbox"});k(t,r);let o=ys(e.onClass,e.onTip,e.checkId);k(t,o);let n=ys(e.offClass,e.offTip,e.checkId);return k(t,n),k(e.worldName,t),r}var ye=0,po=0,ho=0,xs=0,_s=0,Bs=0,Ss=0,As=0,Ls=0;function cc(e){ao(e),GameData.doAction(12,401,{},0)}function mc(){Xl(za())}function pc(){window.open(`${Xa+Sn}map`,"fsMap")}function dc(){let e=GameData.realm();window.open(`${Za}realms${Sn}view&realm_id=${e.id}`,"mapUfsg")}function hc(){te("playNewMessageSound",!N("playNewMessageSound"))}function gc(){d.huntingMode=!d.huntingMode,te("huntingMode",d.huntingMode)}function vc(){return E({className:"fshCurveContainer",id:"fshWorldButtonContainer"})}var Cs=e=>P(e?e.toString():"?");function Ds(e,t,r){let o=E({textContent:`${t} Lvl: `});k(o,r),k(e,o)}function wc(e){let t=E({className:"fshFsty"});po=Cs(GameData.realm().minlevel),Ds(t,"Min",po),ho=Cs(GameData.player().level),Ds(t,"Your",ho),k(e,t)}function mo(e,t,r){let o=we({className:`fshCurveEle fshCurveBtn fshPoint tip-static ${e}`,dataset:{tipped:t}});return k(r,o),o}function kc(e){wc(e),xs=mo("fshFormGroup","Quick Create Attack Group",e),_s=mo("fshQuickBuff","Open Quick Buff Popup",e),Bs=mo("fshRealmMap","Open Realm Map",e),Ss=mo("fshTempleOne","Search map in Ultimate FSG",e)}function yc(e){if(N("showSpeakerOnWorld")){let t=N("playNewMessageSound");As=co({prefVal:t,checkId:"fshSoundCheck",onClass:"soundOn",onTip:"Turn Off Sound when you have a new log message",offClass:"soundOff",offTip:"Turn On Sound when you have a new log message",worldName:e})}}function Cc(e){let t=d.huntingMode;Ls=co({prefVal:t,checkId:"fshHuntCheck",onClass:"huntOn",onTip:"Hunting mode is ON",offClass:"huntOff",offTip:"Hunting mode is OFF",worldName:e})}function Dc(){kc(ye),yc(ye),Cc(ye)}var bc=[[()=>As,hc],[()=>Ls,gc]],xc=[[()=>xs,cc],[()=>_s,mc],[()=>Bs,pc],[()=>Ss,dc]];function _c(e,t){let{target:r}=t,[,o]=e.find(([n])=>n()===r)??[];o&&(r.blur(),o(r))}function bs(e){return w(_c,e)}function Bc(){z(ye,bs(xc)),ue(ye,"change",bs(bc))}function Sc(){ye||(ye=vc(),Dc(),Bc(),Qr(ye,T("worldCoord")))}function Ac(e,t){po&&t.b.minlevel&&(Jn(),V(t.b.minlevel,po))}function Lc(e,t){ho&&V(t.b,ho)}function Zn(){Sc(),$.subscribe(nl,Ac),$.subscribe(el,Lc)}var Tc=["NORMAL","CHAMPION","ELITE","SUPER ELITE","TITAN","LEGENDARY"],Vc=`url("${be}ui/world/icon_action_attack_`,go=!1;function jn(e){return He(".verb.attack",e)}function ei(e){let t=Tc.indexOf(e.toUpperCase());return to(`#actionList .actionListItem.creature.creature-${t}`)}function Hc(e){e.classList.remove("attack-1","attack-2","attack-3","attack-4","attack-5","attack-6","attack-7","attack-8"),e.style.backgroundImage=""}function Mc(e,t){e!==null&&(e.classList.add(`attack-${t+1}`),e.style.backgroundImage=`${Vc}${t+1}.png")`)}function Ts(e){let t=["LEGENDARY","NORMAL"].flatMap(ei),r=ei("CHAMPION"),[o,n]=e?[t,r]:[r,t];o.map(jn).filter(l=>l!==null).forEach(Hc),n.slice(0,8).map(jn).forEach(Mc)}function Ec(e){let t=jn(e);t&&(me("world","ChampionAttack"),Gl(t))}function Nc(e){if(!e.altKey||!e.shiftKey||e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||(go||Ts(!0),go=!0,!/(?:Digit|Numpad)[1-8]/.test(e.code)))return;let t=ei("CHAMPION"),r=parseInt(e.code.slice(-1),10)-1;r<t.length&&Ec(t[r])}function Rc(e){go&&(!e.ctrlKey||!e.shiftKey)&&(go=!1,Ts(!1))}function ti(){let{body:e}=document;ue(e,"keydown",Nc),ue(e,"keyup",Rc)}var Ic=["Breaker","Protection","Master Thief","Protect Gold","Disarm","Duelist","Thievery","Master Blacksmith","Master Crafter","Fury Caster","Master Inventor","Sustain"],ri=[],J=0;function qc(e){(e.id===54||e.id===26)&&(J.player.buffs[e.id]=parseInt(e.level,10))}function Gc(e){Ic.indexOf(e.name)===-1&&(J.player.enhancements[e.name]=e.value)}function Pc(e){e.player.buffs&&e.player.buffs.forEach(qc)}function Fc(e){e.player.enhancements&&e.player.enhancements.forEach(Gc)}function Oc(e){J={},J.combat=e.response.data,J.combat.inventory_id&&(J.combat.drop=J.combat.item.id),J.player={},J.player.buffs={},J.player.enhancements={},Pc(e),Fc(e),J.time=e.time,ri.push(J),Zr("fsh_combatLog",ri)}function $c(e,t){t.response.response===0&&Oc(t)}function Wc(e){e&&(ri=e),$.subscribe(Wr,$c)}function oi(){N("keepLogs")&&Jr("fsh_combatLog").then(Wc)}function ni(e,t){return e.every(r=>_e(r,t))}function ot(e){return kl({cache:!1,url:"fetchdata.php",data:{...e,fshrnd:ts()},dataType:"json"})}function Ae(e){return!e||!e.response||!e.response.data}var Vs=[];function Kc(e){return Ae(e)||Vs.push(e),e}function Uc(e,t){return e===Number(t.response.data.id)}function zc(e,t){e(t)}function Yc(e){return new Promise(t=>{wl(3,zc,[t,e])})}function nt(e,t){let r=Vs.find(w(Uc,e));return r?Yc(r):ot({a:1,d:0,id:e,passback:t}).then(Kc)}var Hs=0,Ms=0,Es=0,Ns=0,Rs=0,Is=0,ii=()=>Hs,qs=()=>Ms,Gs=()=>Es,Ps=()=>Ns,Fs=()=>Rs,Os=()=>Is;function it(e,t){return xl(Ee(t,e))}function Qc(e){Es=it(e,ml),Ms=it(e,cl),Rs=it(e,dl),Ns=it(e,pl),Is=it(e,hl)}function $s(){Hs=GameData.player().level,Qc(T("statbar-character-tooltip-stats"))}function Xc(e){return`<table><tr><td><img src="${be}creatures/${e.image_id}.png" height="200" width="200"></td><td rowspan="2"><table width="400"><tr><td class="header" colspan="4" class="fshCenter">Statistics</td></tr>`}var vo=e=>`<td>${e}:&nbsp;</td>`,wo=e=>`<td width="40%">${e}</td>`;function ai([e,t,r,o,n]){return[vo(e),wo(`${t} (your ${r}:<span class="${o}">${n()}</span>)`)]}function li(e){return["<tr>",...e,"</tr>"].join("")}function Jc(e,t){return li([vo("Class"),wo(e.creature_class),...ai(["Level",e.level,"level",t,ii])])}function Ws(e,t){return li([...ai(e),...ai(t)])}function Zc(e){return Ws(["Attack",e.attack,"defense","fshYellow",qs],["Defense",e.defense,"attack","fshYellow",Gs])}function jc(e){return Ws(["Armor",e.armor,"damage","fshYellow",Ps],["Damage",e.damage,"armor","fshYellow",Fs])}function em(e,t){return li([vo("HP"),wo(`${e.hp} (your HP:<span class="fshYellow">${Os()}</span>)(1H: <span class="fshRed">${t}</span>)`),vo("Gold"),wo(e.gold)])}var tm='<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Enhancements</td></tr>';function rm(e){return`<tr><td colspan="2">${e.name}:</td><td colspan="2">${e.value}</td></tr>`}function om(e){return e.enhancements.length===0?'<tr><td colspan="4">[no enhancements]</td></tr>':e.enhancements.map(rm).join("")}function nm(e){return`<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Description</td></tr><tr><td colspan="4">${e.description}</td></tr><tr><td colspan="4" height="5"></td></tr></table></td></tr><tr><td class="fshCenter"><b>${e.name}</b></td></tr></table>`}function im(e,t,r){return Xc(e)+Jc(e,r)+Zc(e)+jc(e)+em(e,t)+tm+om(e)+nm(e)}function am(e){let t=Math.ceil(e.hp*d.hpVariable+e.armor*d.generalVariable),r="fshYellow";return $s(),ii()>e.level&&(r="fshRed"),im(e,t,r)}function si(e){if(!Ae(e))return am(e.response.data)}var lm=["verb","view","tip-static"];function sm(e,t){$(e).qtip({overwrite:!0,show:{event:"mouseover",ready:!0},style:{classes:"qtip-tipsy qtip-custom"},position:{my:"center right",at:"center left",effect:!1,viewport:$(window)},content:{text:t},hide:{effect:!1}})}function fm(e){return Yr(e.parentNode.children).indexOf(e)}function um(e,t){let r=si(t);e.set("content.text",r)}function cm(e,t,r){return nt(GameData.actions()[e].data.id,e).then(w(um,r)),"Loading..."}function mm(e,t){me("NewMap","CreatureInfo");let r=fm(t);e.classList.add("fshTip"),sm(e,w(cm,r))}function pm(e,t){return ni(lm,e)&&!_e("fshTip",e)&&_e("creature",t)}function dm(e){if(!d.showCreatureInfo)return;let{target:t}=e,r=t.parentNode.parentNode.parentNode;pm(t,r)&&mm(t,r)}function fi(){ue(T("actionList"),"mouseover",dm)}function hm(){k(document.body,rs(`#actionList .creature-1 {color: green;}
#actionList .creature-2 {color: yellow;}
#actionList .creature-3 {color: red;}`))}function ui(){N("enableCreatureColoring")&&hm()}function Le(e){return d.doNotKillList.includes(Me(e))}function gm(e){e.classList.toggle("fshBlue",Le(Ua(e)))}function $e(){let e=T("actionList");Xr("creature",e).forEach(gm)}function vm(e,t){if(Le(e))return T("actionList").children[t].children[0].children[1].classList.remove("loading"),!0}function wm(e){let t=GameData.actions()[e];if(t)return vm(t.data.name,e)}function km(e){return function(r,o,n,l){wm(n.passback)||e(r,o,n,l)}}var ym={2:km};function Cm(e){return Ka(e)||e===0}function Dm(e){return e&&zr(e)}function bm(e){return function(r,o,n,l){let i=ym[r];Dm(i)&&Cm(l)?i(e)(r,o,n,l):e(r,o,n,l)}}function ci(){let e=GameData.doAction;GameData.doAction=bm(e)}function mi(){$.subscribe(Ve,$e),$e(),ci()}function pi(e){return Ml({cmd:"globalquests",...e})}function di(){return pi({subcmd:"contrib"})}var xm=({username:e,value:t})=>({player:{name:e},value:t});async function hi(){return{r:(await Nl({cmd:"toprated",subcmd:"eventcontrib"})).map(xm)}}function gi(){return no(di,hi)}function Ks(e){e[1]=e[2].r}function Us(e,t,r){let o=e.slice();return o[3]=t[r].player,o[2]=t[r].value,o[5]=r,o}function _m(e){let t,r=e[6].message+"",o;return{c(){t=m("p"),o=g(r),Bl(t,"color","red")},m(n,l){C(n,t,l),a(t,o)},p(n,l){l&1&&r!==(r=n[6].message+"")&&y(o,r)},d(n){n&&D(t)}}}function Bm(e){Ks(e);let t,r,o,n=e[1],l=[];for(let i=0;i<n.length;i+=1)l[i]=Ys(Us(e,n,i));return{c(){t=m("table"),r=m("tr"),r.innerHTML=`<td class="header"></td> 
      <td class="header"></td> 
      <td class="header">Username</td> 
      <td class="header">Kills</td>`,o=h();for(let i=0;i<l.length;i+=1)l[i].c();f(r,"class","svelte-1p6satm"),f(t,"id","world-event-contrib-table"),f(t,"class","svelte-1p6satm")},m(i,u){C(i,t,u),a(t,r),a(t,o);for(let s=0;s<l.length;s+=1)l[s].m(t,null)},p(i,u){if(Ks(i),u&1){n=i[1];let s;for(s=0;s<n.length;s+=1){let c=Us(i,n,s);l[s]?l[s].p(c,u):(l[s]=Ys(c),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(i){i&&D(t),Ne(l,i)}}}function zs(e){let t,r,o,n;return{c(){t=m("a"),r=m("img"),Hn(r.src,o=be+"guilds/"+e[3].guild_id+"_mini.png")||f(r,"src",o),f(r,"alt","guild logo"),f(r,"class","svelte-1p6satm"),f(t,"href",n=""+(Ln+e[3].guild_id))},m(l,i){C(l,t,i),a(t,r)},p(l,i){i&1&&!Hn(r.src,o=be+"guilds/"+l[3].guild_id+"_mini.png")&&f(r,"src",o),i&1&&n!==(n=""+(Ln+l[3].guild_id))&&f(t,"href",n)},d(l){l&&D(t)}}}function Ys(e){let t,r,o=e[5]+1+"",n,l,i,u,s,c,p=e[3].name+"",b,L,H,F,O=e[2]+"",_,he,G=e[3].guild_id&&zs(e);return{c(){t=m("tr"),r=m("td"),n=g(o),l=h(),i=m("td"),G&&G.c(),u=h(),s=m("td"),c=m("a"),b=g(p),H=h(),F=m("td"),_=g(O),he=h(),f(c,"href",L=""+(Tn+e[3].name)),f(t,"class","svelte-1p6satm")},m(W,fe){C(W,t,fe),a(t,r),a(r,n),a(t,l),a(t,i),G&&G.m(i,null),a(t,u),a(t,s),a(s,c),a(c,b),a(t,H),a(t,F),a(F,_),a(t,he)},p(W,fe){W[3].guild_id?G?G.p(W,fe):(G=zs(W),G.c(),G.m(i,null)):G&&(G.d(1),G=null),fe&1&&p!==(p=W[3].name+"")&&y(b,p),fe&1&&L!==(L=""+(Tn+W[3].name))&&f(c,"href",L),fe&1&&O!==(O=W[2]+"")&&y(_,O)},d(W){W&&D(t),G&&G.d()}}}function Sm(e){let t;return{c(){t=g("Loading...")},m(r,o){C(r,t,o)},p:q,d(r){r&&D(t)}}}function Am(e){let t,r,o={ctx:e,current:null,token:null,hasCatch:!0,pending:Sm,then:Bm,catch:_m,value:2,error:6};return Mn(r=e[0],o),{c(){t=Re(),o.block.c()},m(n,l){C(n,t,l),o.block.m(n,o.anchor=l),o.mount=()=>t.parentNode,o.anchor=t},p(n,[l]){e=n,o.ctx=e,l&1&&r!==(r=e[0])&&Mn(r,o)||Tl(o,e,l)},i:q,o:q,d(n){n&&D(t),o.block.d(n),o.token=null,o=null}}}function Lm(e,t,r){let{promise:o}=t;return e.$$set=n=>{"promise"in n&&r(0,o=n.promise)},[o]}var vi=class extends X{constructor(t){super(),Q(this,t,Lm,Am,Y,{promise:0})}},Qs=vi;var wi=0,Xs=()=>({promise:gi()});function Tm(e){wi?wi.$set(Xs()):wi=new Qs({props:Xs(),target:e})}function Vm(){let e=T("world-event-contrib");Tm(e),$(e).dialog({title:"Top 100 Event Contributers",minWidth:300,height:300,zIndex:9999})}function ki(){let e=$("#world-event-badge");!e.length||(e.off(),z(e[0],Vm))}function Js(e){$(`#actionList li.creature-${e.toString()} a.create-group`).hide()}function Hm(e){$.subscribe(Ve,w(Js,e))}var Mm=["hideChampionsGroup","hideElitesGroup","hideSEGroup","hideTitanGroup","hideLegendaryGroup"];function Em(e,t){N(e)&&(Hm(t+1),Js(t+1))}function yi(){Mm.forEach(Em)}function Nm(e){return e.response&&e.response.msg&&e.response.msg.startsWith("Creature did not exist at that location")}function Rm(e){Nm(e)&&GameData.fetch(Kr+ee)}function Im(e){e.remove()}function qm(e,t){Rm(t),to(".creature-4 > .quickCombat > .verbs").forEach(Im)}function Ci(){$.subscribe(Wr,qm)}function Zs(e,t,r){let o=e.slice();return o[10]=t[r].msg,o[11]=t[r].type,o[12]=t[r].count,o}function js(e){let t,r,o=e[12]+"",n;return{c(){t=m("div"),r=g("x"),n=g(o),f(t,"class","count svelte-1leyf3b")},m(l,i){C(l,t,i),a(t,r),a(t,n)},p(l,i){i&1&&o!==(o=l[12]+"")&&y(n,o)},d(l){l&&D(t)}}}function ef(e,t){let r,o=t[10]+"",n,l,i,u,s,c,p=t[12]>1&&js(t);function b(){return t[3](t[10])}return{key:e,first:null,c(){r=m("div"),n=g(o),l=h(),p&&p.c(),i=h(),f(r,"class",u="fsh-message "+t[11]+" svelte-1leyf3b"),this.first=r},m(L,H){C(L,r,H),a(r,n),a(r,l),p&&p.m(r,null),a(r,i),s||(c=oo(r,"click",b),s=!0)},p(L,H){t=L,H&1&&o!==(o=t[10]+"")&&y(n,o),t[12]>1?p?p.p(t,H):(p=js(t),p.c(),p.m(r,i)):p&&(p.d(1),p=null),H&1&&u!==(u="fsh-message "+t[11]+" svelte-1leyf3b")&&f(r,"class",u)},d(L){L&&D(r),p&&p.d(),s=!1,c()}}}function Gm(e){let t=[],r=new Map,o,n=e[1](e[0]),l=i=>i[10];for(let i=0;i<n.length;i+=1){let u=Zs(e,n,i),s=l(u);r.set(s,t[i]=ef(s,u))}return{c(){for(let i=0;i<t.length;i+=1)t[i].c();o=Re()},m(i,u){for(let s=0;s<t.length;s+=1)t[s].m(i,u);C(i,o,u)},p(i,[u]){u&7&&(n=i[1](i[0]),t=Hl(t,u,l,1,i,n,r,o.parentNode,Vl,ef,o,Zs))},i:q,o:q,d(i){for(let u=0;u<t.length;u+=1)t[u].d(i);i&&D(o)}}}function*Pm(){for(let e=0;;e++)yield e}function Fm(e,t,r){let o=document.body.appendChild(document.createElement("iframe"));window.requestAnimationFrame=o.contentWindow.requestAnimationFrame,window.cancelAnimationFrame=o.contentWindow.cancelAnimationFrame,o.hidden=!0;let n=[],l=window.$("#messageCenter").data().hcsWorldMessageCenter,i=Pm(),u=()=>i.next().value;function s(){l._reposition()}async function c(H,F,O=3e3){let _=u();r(0,n=[...n,{msg:H,type:F,expire:_}]),setTimeout(()=>{r(0,n=n.filter(({expire:he})=>he!==_))},O),await Ll(),s()}let p=H=>Il(H,"msg").map(({msg:F,type:O})=>({msg:F,type:O,count:H.filter(({msg:_})=>_===F).length}));function b(H){r(0,n=n.filter(({msg:F})=>F!==H)),s()}return l._displayMessage=c,[n,p,b,H=>b(H)]}var Di=class extends X{constructor(t){super(),Q(this,t,Fm,Gm,Y,{})}},tf=Di;var Om=e=>new tf({target:e});function bi(){Om(T("messageCenter"))}var oe=0;function $m(e,t){t.creature_class=e.creature_class,t.image_id=e.image_id,t.level=Number(e.level),t.type=e.type}function Wm(e){oe[e.name]?oe[e.name].seen&&(oe[e.name].seen+=1):(oe[e.name]={seen:1},$m(e,oe[e.name]))}function rf(e,t,r){return t?e(t,r):r}function of(e,t){let r=e||{};return r.min=rf(Math.min,r.min,t),r.max=rf(Math.max,r.max,t),r}var Km=["attack","armor","damage","defense","hp"];function Um(e,t){return!e||e.min!==t.min||e.max!==t.max}function zm(e,t,r){let o=of(t[r],Number(e[r]));Um(t[r],o)&&(t[r]=o)}function Ym(e,t){Km.forEach(w(zm,e,t))}function Qm(e){return e.enhancements&&e.enhancements.length>0}function Xm(e,t){e[t.name]=of(e[t.name],Number(t.value))}function Jm(e,t){Qm(e)&&(t.enhancements=t.enhancements||{},e.enhancements.forEach(w(Xm,t.enhancements)))}function Zm(e){oe||(oe={}),Wm(e),Ym(e,oe[e.name]),Jm(e,oe[e.name]),Zr("fsh_monsterLog",oe)}function nf(e){d.showMonsterLog&&Zm(e)}function jm(e){oe=e||{}}function af(){Jr("fsh_monsterLog").then(jm)}var lf=[];function ep(e){Ae(e)||(me("NewMap","MonsterLog"),nf(e.response.data))}function tp(e,t){return e.id===t.id}function rp(e){if(lf.find(w(tp,e.data)))return!0;lf.push(e.data)}function op(e,t){e.type!==6||rp(e)||nt(e.data.id,t).then(ep)}function sf(){d.showMonsterLog&&GameData.actions().forEach(op)}function xi(){af(),$.subscribe("-1-success.action-response 4-success.action-response 5-success.action-response 25-success.action-response",sf),sf()}var ff="",uf=()=>ff;function cf(e){ff=e}function _i(){return El({subcmd:"scouttower"})}function np(e){let t=e.split(/[: /[]/);return new Date(Number(t[4]),Or.indexOf(t[3]),Number(t[2]),Number(t[0]),Number(t[1]))}function ip(e){let t=xe(e[1]);return t==="No active cooldown"?0:Math.ceil((np(t.slice(16))-jr())/1e3)}function ap(e){let[t]=e[0].cells[0].children;return{base_id:Number(t.src.split("/").slice(-1)[0].slice(0,-36)),name:t.title}}function lp(e){return{cooldown:ip(e),creature:ap(e),kills:Number(xe(e[0].cells[3]))}}function sp(e){let t=xe(e[0].cells[1]);if(t!=="n/a"){let r=xe(e[0].cells[2]).split("/");return{realm:t,current_hp:Number(r[0]),max_hp:Number(r[1])}}}function fp(e){let t=e[2].cells[0].children;if(t.length===1)return{contributors:Jl(t[0],3,0).map(o=>({kills:Number(xe(o.cells[1])),player:{name:xe(o.cells[0])}}))}}function up(e){return{...lp(e),...sp(e),...fp(e)}}var cp=(e,t,r)=>t!==0&&t<r.length-1&&(t-1)%6<3;function mp(e){let t=He('table[width="500"]',e);if(!t)return{s:!1};let r=Yr(t.rows).filter(cp);return{r:tt(3,r).map(up),s:!0}}async function Bi(){return mp(await $l({cmd:"guild",subcmd:"scouttower"}))}function Si(){return no(_i,Bi)}function pp(e,[t,r,o]){let n=e.insertCell(-1);return n.colSpan=t,o&&(n.className="header"),k(n,r()),n}function dp(e,t){t.forEach(w(pp,e))}function hp(e,t,r){let o=e.insertRow(-1);return r&&(o.className="fshBlue"),dp(o,t),o}function gp(e,t){hp(e,t[0],t[1])}function at(e,t){t.forEach(w(gp,e))}var mf=0,pf=0,df=0,hf=0,gf=0,vf=0,wf=0,kf=0,yf=()=>mf,Cf=()=>pf,Df=()=>df,bf=()=>hf,xf=()=>gf,_f=()=>vf,Bf=()=>wf,Sf=()=>kf;function vp(){mf=P("Current"),pf=P("Kills"),df=P("Member"),hf=P("% of Total")}function wp(){gf=P("Status"),vf=P("Titan HP"),wf=P("Total"),kf=P("Your Guild")}function Af(){vp(),wp()}var Ai=0,Li=0,Ti=0,Vi=0,Hi=0,Mi=0,Ei=0,Ni=0,Ri=0,ko=()=>Ai,yo=()=>Li,Co=()=>Ti,Do=()=>Vi,bo=()=>Hi,xo=()=>Mi,_o=()=>Ei,Bo=()=>Ni,So=()=>Ri;function kp(){Ai=I({innerHTML:"&nbsp;"}),Li=I({innerHTML:"&nbsp;"}),Ti=I(),Vi=I()}function yp(){Hi=I(),Mi=I(),Ei=I(),Ni=I(),Ri=I()}function Lf(){kp(),yp()}function Tf(){K("&nbsp;",Ai),K("&nbsp;",Li),V("",Ti),V("",Vi),V("",Hi),V("",Mi),V("",Ei),K("",Ni),K("",Ri)}var lt=0,Ao=()=>lt;function Lo(){for(;lt.rows.length>8;)lt.deleteRow(8)}function Cp(){let e=I();return k(e,Co()),et(e,"/"),k(e,Do()),e}function Vf(e){let t=I();return k(t,e),et(t,"%"),t}function Hf(){lt=os({className:"fshCenter"}),Af(),at(lt,[[[[5,ko,!0],[1,yo,!0]]],[[[2,_f,!0],[4,Sf,!0]]],[[[2,Cp],[4,bo]]],[[[2,yf,!0],[4,w(Vf,xo())]],!0],[[[2,Bf,!0],[4,w(Vf,_o())]],!0],[[[2,xf,!0],[4,Bo]],!0],[[[6,So]]],[[[2,Df,!0],[2,Cf,!0],[2,bf,!0]]]])}var Ce=0,Ii=0,Mf="";var Ef=()=>Ii,Nf=()=>Mf;function qi(){Ii=null,Ce&&!_e("fshHide",Ce)&&(R(Ce,!0),Tf(),Lo())}function Rf(e){return e.type===0?(Ii=e.base_creature_id,Mf=`(${e.x},${e.y})`,!0):!1}function If(){if(Ce)R(Ce,!1);else{let e=T("actionContainer");Ce=E({className:"fshActionBox titanInfo"}),Lf(),Hf(),k(Ce,Ao()),k(e,Ce)}}function Dp(e){let t=new Date(jr()+e*1e3);return`${ro(t.getHours())}:${ro(t.getMinutes())} ${ro(t.getDate())}/${Or[t.getMonth()]}/${t.getFullYear()}`}function bp(e){return e<=0?'<span class="fshGreen cooldown">No active cooldown</span>':`<span class="fshMaroon cooldown">Cooldown until: ${Dp(e)}</span>`}function xp(e){return so(is(e.max_hp-e.current_hp,e.kills),2)}function _p(e){return so(e.kills*100/e.max_hp,2)}function Bp(e){return as(e.kills,e.max_hp,e.current_hp)}function Sp(e){[[ns(e.creature.name),ko],[Nf(),yo],[e.current_hp,Co],[e.max_hp,Do],[e.kills,bo],[xp(e),xo],[_p(e),_o]].forEach(([t,r])=>V(t,r()))}function Ap(e){Sp(e),K(Bp(e),Bo()),K(bp(e.cooldown),So())}function Lp(e,t){return[[[2,()=>P(t.player.name)],[2,()=>P(t.kills.toString())],[2,()=>P(`${so(t.kills*100/e.kills,2)}%`)]]]}function Tp(e){if(Lo(),!e.contributors)return;let t=e.contributors.map(w(Lp,e));at(Ao(),t)}function Vp(e){return e.realm&&e.creature.base_id===Ef()&&e.realm===uf()}function Gi(e){let t=e.find(Vp);t&&(Ap(t),Tp(t))}var To=null;function Hp(){To&&(window.clearTimeout(To),To=null)}var Mp=e=>e&&e.s&&ce(e.r),qf=e=>d.showTitanInfo&&ce(e)&&e.some(Rf);function Ep(e,t){!Mp(t)||(Gi(t.r),qf(GameData.realm().dynamic)?To=window.setTimeout(e,3e4):qi())}function Gf(){Si().then(w(Ep,Gf))}function st(e){Hp(),qf(e)?(If(),Gf()):qi()}function Pi(e){e.dynamic&&(cf(e.name),st(e.dynamic))}function Np(e){return e.realm&&e.realm.name}function Pf(e,t){Np(t)&&Pi(t.realm)}function Fi(){window.initialGameData&&Pf(null,window.initialGameData),$.subscribe(`${il} ${sl}`,Pf)}function Ff(e,t,r){let o=e.slice();return o[5]=t[r],o[7]=r,o}function Rp(e){let t=e[1](e[7])+"",r;return{c(){r=g(t)},m(o,n){C(o,r,n)},p:q,d(o){o&&D(r)}}}function Of(e){let t,r,o,n;function l(...i){return e[3](e[5],e[7],...i)}return r=new Rl({props:{$$slots:{default:[Rp]},$$scope:{ctx:e}}}),r.$on("click",l),{c(){t=m("li"),Je(r.$$.fragment),o=h()},m(i,u){C(i,t,u),Ze(r,t,null),a(t,o),n=!0},p(i,u){e=i;let s={};u&256&&(s.$$scope={dirty:u,ctx:e}),r.$set(s)},i(i){n||(U(r.$$.fragment,i),n=!0)},o(i){re(r.$$.fragment,i),n=!1},d(i){i&&D(t),je(r)}}}function Ip(e){let t,r,o=tt(16,e[0]),n=[];for(let i=0;i<o.length;i+=1)n[i]=Of(Ff(e,o,i));let l=i=>re(n[i],1,1,()=>{n[i]=null});return{c(){t=m("ul");for(let i=0;i<n.length;i+=1)n[i].c();f(t,"class","svelte-1k3xw12")},m(i,u){C(i,t,u);for(let s=0;s<n.length;s+=1)n[s].m(t,null);r=!0},p(i,[u]){if(u&7){o=tt(16,i[0]);let s;for(s=0;s<o.length;s+=1){let c=Ff(i,o,s);n[s]?(n[s].p(c,u),U(n[s],1)):(n[s]=Of(c),n[s].c(),U(n[s],1),n[s].m(t,null))}for(Qe(),s=o.length;s<n.length;s+=1)l(s);Xe()}},i(i){if(!r){for(let u=0;u<o.length;u+=1)U(n[u]);r=!0}},o(i){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)re(n[u]);r=!1},d(i){i&&D(t),Ne(n,i)}}}function qp(e,t,r){let o=Al(),{members:n=[]}=t,l=s=>`Buff ${Ya[s]} 16`;function i(s,c,p){p.target.blur(),Ql(`${Ja}&players=${s.join(",")}`,"fsQuickBuff",618,1e3,",scrollbars"),o("buffBatch",l(c))}let u=(s,c,p)=>i(s,c,p);return e.$$set=s=>{"members"in s&&r(0,n=s.members)},[n,l,i,u]}var Oi=class extends X{constructor(t){super(),Q(this,t,qp,Ip,Y,{members:0})}},$f=Oi;function Vo(e,t){return e>t*10||e<t?e:t*10}function Gp(e){e.attackValue=Vo(e.attackBonus,e.levelValue),e.defenseValue=Vo(e.defenseBonus,e.levelValue),e.armorValue=Vo(e.armorBonus,e.levelValue),e.damageValue=Vo(e.damageBonus,e.levelValue),e.hpValue=e.hpBonus}var Pp=[["levelValue","level"],["attackValue","attack"],["attackBonus","bonus_attack"],["defenseValue","defense"],["defenseBonus","bonus_defense"],["armorValue","armor"],["armorBonus","bonus_armor"],["damageValue","damage"],["damageBonus","bonus_damage"],["hpValue","hp"],["hpBonus","bonus_hp"],["killStreakValue","killstreak"]];function Fp(e,t,r){e[r[0]]=Number(t[r[1]])}function Op(e,t){Pp.forEach(w(Fp,e,t))}var $p=[["counterAttackLevel","Counter Attack"],["doublerLevel","Doubler"],["deathDealerLevel","Death Dealer"],["darkCurseLevel","Dark Curse"],["holyFlameLevel","Holy Flame"],["constitutionLevel","Constitution"],["sanctuaryLevel","Sanctuary"],["flinchLevel","Flinch"],["nightmareVisageLevel","Nightmare Visage"],["superEliteSlayerLevel","Super Elite Slayer"],["fortitudeLevel","Fortitude"],["chiStrikeLevel","Chi Strike"],["terrorizeLevel","Terrorize"],["barricadeLevel","Barricade"],["reignOfTerrorLevel","Reign Of Terror"],["anchoredLevel","Anchored"],["severeConditionLevel","Severe Condition"],["entrenchLevel","Entrench"],["cloakLevel","Cloak"]];function Wp(e,t,r){e[r[0]]=t[r[1]]||0}function Kp(e,t){$p.forEach(w(Wp,e,t))}function ft(e){if(!e)return;let t=fo(e._skills),r={};return Op(r,e),Kp(r,t),r.superEliteSlayerMultiplier=Ie(.002*r.superEliteSlayerLevel,2),_l(r.armorValue)&&Gp(r),r}var le=ie(["statusStore","Done."]),Ho=[],Wf=M(le,(e,t)=>{let r=Ho.find(([n])=>n===e[0]);r?[,r[1]]=e:Ho=[...Ho,e];let o=Ho.find(([,n])=>n!=="Done.");t(o?.[1]??"Done.")});var We=ie(0);async function Up(e,t){if(!e)return;le.set(["relicStore","Processing defending guild relics ... "]);let o=(await ls(e)).r.relics.length,n=o===1?1.5:Ie(1-o/10,2),l=`${String(n*100)}%`;t({noOfRelics:o,relicMultiplier:n,leadDefenderBonus:l}),le.set(["relicStore","Done."])}var Mo=M(We,(e,t)=>{Up(e,t)});var Eo=ie([]);async function zp(e,t){if(!e.length)return;le.set(["defendersStore","Processing defending group stats ... "]);let r=[];await bl(e.map(async(o,n)=>{let l=await zl(o);r.push([n,ft(l)]),t(r)})),le.set(["defendersStore","Done."])}var No=M(Eo,(e,t)=>{zp(e,t)}),Ke=M(No,(e,t)=>{let r=e?.find(([o])=>o===0);r&&t(r[1])}),ut=(e,t,r)=>Math.ceil(r*(t===0?e:Qa));function Yp(e,t,[r,o]){return{armorValue:t.armorValue+ut(e,r,o.armorValue),attackValue:t.attackValue+ut(e,r,o.attackValue),damageValue:t.damageValue+ut(e,r,o.damageValue),cloaked:t.cloaked+(o.cloakLevel?1:0),defenseValue:t.defenseValue+ut(e,r,o.defenseValue),hpValue:t.hpValue+ut(e,r,o.hpValue)}}var Qp=([e,t],r)=>{if(!e?.relicMultiplier||!t?.length)return;let o=t?.reduce(w(Yp,e.relicMultiplier),{armorValue:0,attackValue:0,damageValue:0,cloaked:0,defenseValue:0,hpValue:0});r(o)},ct=M([Mo,No],Qp);var Ro=ie(0),Xp=e=>e.members[0].name===GameData.player().username;async function Jp(){return(await lo())?.r?.find(Xp)?.id}async function Zp(e){let t=await uo(e);return fs(t?.r?.attributes)}async function jp(e){let t=await ss(),r=us(t);return e?.map((o,n)=>o-r[n])}async function ed(e,t){if(!e)return;le.set(["groupStore","Processing attacking group stats ... "]);let r=await Jp(),o=r&&await Zp(r),n=o&&await jp(o);n&&t({attack:n[0],defense:n[1],armor:n[2],hp:n[3],damage:n[4]}),le.set(["groupStore","Done."])}var mt=M(Ro,(e,t)=>{ed(e,t)});var Kf=(e,t,r)=>Math.ceil(e*Vn(t,0)*r),Io=(e,t)=>Kf(e,t,.0025),pt=(e,t)=>Kf(e,t,.001),qo=pt,Go=pt,Po=pt,Fo=pt,Oo=pt,$o=(e,t)=>Math.ceil(e*(1+Vn(t,0)*.001)),td=e=>1-e*Ur,$i=(e,t)=>Math.ceil(e*td(t));var Wo=ie([]),Wi=M(Wo,(e,t)=>{!e||t(fo(e))}),rd=M([Wi,mt],([e,t],r)=>{if(!e||!t)return;let o=$o(t.defense,e.Constitution),n=qo(o,e.Fortitude),l=t.hp+n,i=Go(l,e["Chi Strike"]);r({dmgWithChiStrike:t.damage+i,defWithConst:o,hpWithFortitude:l,nmv:Io(t.attack,e["Nightmare Visage"]),sanctuary:Po(t.armor,e.Sanctuary)})});function od([e,t,r],o){if(!e||!t||!r)return;let n=r.attack-e.nmv,l=Fo(n,t.flinchLevel),i=Oo(e.dmgWithChiStrike,t.terrorizeLevel);o({attack:n-l,defense:e.defWithConst+e.nmv,armor:r.armor+e.sanctuary,hp:e.hpWithFortitude,damage:e.dmgWithChiStrike-i})}var Uf=M([rd,Ke,mt],od);var nd=M([Ke,ct],([e,t],r)=>{if(!e||!t)return;let o=Io(t.attackValue,e.nightmareVisageLevel),n=$o(t.defenseValue,e.constitutionLevel),l=qo(n,e.fortitudeLevel),i=t.hpValue+l,u=Go(i,e.chiStrikeLevel),s=t.damageValue+u;r({attackWithNmv:t.attackValue-o,chiStrike:e.chiStrikeLevel,cloak:e.cloakLevel?"Yes":"No",dmgWithChiStrike:s,defWithConst:n,hpWithFortitude:i,nmv:o,sanctuary:Po(t.armorValue,e.sanctuaryLevel)})});function id([e,t,r],o){if(!e||!t||!r)return;let n=Fo(t.attackWithNmv,e.Flinch),l=t.defWithConst+t.nmv,i=Oo(t.dmgWithChiStrike,e.Terrorize);o({attack:t.attackWithNmv-n,dc225:$i(l,225),dc175:$i(l,175),defense:l,armor:r.armorValue+t.sanctuary,hp:t.hpWithFortitude,damage:t.dmgWithChiStrike-i})}var zf=M([Wi,nd,ct],id);var Yf=M(Mo,(e,t)=>{t({noOfRelics:e?.noOfRelics??"",leadDefenderBonus:e?.leadDefenderBonus??""})}),Qf=M(Ke,(e,t)=>{if(!e)return t("");e.cloakLevel?t("Yes"):t("No")}),Xf=M(ct,(e,t)=>{t({armorValue:e?.armorValue??"",attackValue:e?.attackValue??"",damageValue:e?.damageValue??"",cloaked:e?.cloaked??"",defenseValue:e?.defenseValue??"",hpValue:e?.hpValue??""})}),Jf=M(No,(e,t)=>{t(e?.length??"")}),Zf=M(zf,(e,t)=>{t({attack:e?.attack??"",dc225:e?.dc225??"",dc175:e?.dc175??"",defense:e?.defense??"",armor:e?.armor??"",hp:e?.hp??"",damage:e?.damage??""})}),jf=e=>({attack:e?.attack??"",defense:e?.defense??"",armor:e?.armor??"",hp:e?.hp??"",damage:e?.damage??""}),eu=M(mt,(e,t)=>{t(jf(e))}),tu=M(Uf,(e,t)=>{t(jf(e))});function ru(e,t,r){let o=e.slice();return o[6]=t[r].id,o[7]=t[r].username,o}function ou(e){let t,r=e[7]+"",o,n,l=" ",i;return{c(){t=m("a"),o=g(r),i=g(l),f(t,"href",n=""+(An+e[6])),f(t,"class","svelte-3priew")},m(u,s){C(u,t,s),a(t,o),C(u,i,s)},p(u,s){s&1&&r!==(r=u[7]+"")&&y(o,r),s&1&&n!==(n=""+(An+u[6]))&&f(t,"href",n)},d(u){u&&D(t),u&&D(i)}}}function ad(e){let t=(e[0].length||"")+"",r,o,n,l=e[0],i=[];for(let u=0;u<l.length;u+=1)i[u]=ou(ru(e,l,u));return{c(){r=g(t),o=g(` Offline guild members not at relic:
`),n=m("div");for(let u=0;u<i.length;u+=1)i[u].c();f(n,"class","missing svelte-3priew")},m(u,s){C(u,r,s),C(u,o,s),C(u,n,s);for(let c=0;c<i.length;c+=1)i[c].m(n,null)},p(u,[s]){if(s&1&&t!==(t=(u[0].length||"")+"")&&y(r,t),s&1){l=u[0];let c;for(c=0;c<l.length;c+=1){let p=ru(u,l,c);i[c]?i[c].p(p,s):(i[c]=ou(p),i[c].c(),i[c].m(n,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=l.length}},i:q,o:q,d(u){u&&D(r),u&&D(o),u&&D(n),Ne(i,u)}}}function ld(e,t,r){let{members:o=[]}=t,n=[],l=[({username:c})=>!o.includes(c),({last_login:c})=>c,({last_login:c})=>c<yl(),({last_login:c})=>c>Cl(),({level:c})=>c<400||c>421,({level:c})=>c<441||c>450],i=c=>l.every(p=>p(c)),u=({username:c},{username:p})=>Dl(c,p);async function s(c){let p=await cs(c);r(0,n=p.filter(i).sort(u))}return We.subscribe(c=>{s(c)}),e.$$set=c=>{"members"in c&&r(1,o=c.members)},[n,o]}var Ki=class extends X{constructor(t){super(),Q(this,t,ld,ad,Y,{members:1})}},nu=Ki;function iu(e){let t,r,o;return r=new $f({props:{members:e[10]}}),r.$on("buffBatch",e[11]),{c(){t=m("div"),Je(r.$$.fragment),f(t,"class","buff-links svelte-1qul0wc")},m(n,l){C(n,t,l),Ze(r,t,null),o=!0},p:q,i(n){o||(U(r.$$.fragment,n),o=!0)},o(n){re(r.$$.fragment,n),o=!1},d(n){n&&D(t),je(r)}}}function sd(e){let t,r,o,n,l,i,u,s;return{c(){t=m("div"),t.textContent="Processing",r=h(),o=m("div"),n=g(e[2]),l=h(),i=m("div"),i.textContent="Assumptions",u=h(),s=m("div"),s.textContent="Above calculations include Constitution, Fortitude, Nightmare Visage, Chi Strike, Sanctuary, Terrorize and Flinch bonus calculations (in that order) on both the defending group and attacking group.",f(t,"class","b-top svelte-1qul0wc"),f(o,"class","proc-stat svelte-1qul0wc"),f(i,"class","b-top svelte-1qul0wc"),f(s,"class","assume svelte-1qul0wc")},m(c,p){C(c,t,p),C(c,r,p),C(c,o,p),a(o,n),C(c,l,p),C(c,i,p),C(c,u,p),C(c,s,p)},p(c,p){p&4&&y(n,c[2])},d(c){c&&D(t),c&&D(r),c&&D(o),c&&D(l),c&&D(i),c&&D(u),c&&D(s)}}}function fd(e){let t,r,o;return{c(){t=m("button"),t.textContent="Fetch Stats",f(t,"class","custombutton"),f(t,"type","button")},m(n,l){C(n,t,l),r||(o=oo(t,"click",e[12]),r=!0)},p:q,d(n){n&&D(t),r=!1,o()}}}function au(e){let t,r,o,n,l,i,u=e[3].noOfRelics+"",s,c,p,b,L=e[3].leadDefenderBonus+"",H,F,O,_,he,G,W,fe,x,Ct,Dt,bt=e[5].attackValue+"",en,ya,xt,_t,Bt=e[6].attack+"",tn,Ca,St,At,Lt=e[5].defenseValue+"",rn,Da,Tt,Vt,Ht=e[6].defense+"",on,ba,Mt,Et,Nt=e[5].armorValue+"",nn,xa,Rt,It,qt=e[6].armor+"",an,_a,Gt,Pt,Ft=e[5].damageValue+"",ln,Ba,Ot,$t,Wt=e[6].damage+"",sn,Sa,Kt,Ut,zt=e[5].hpValue+"",fn,Aa,Yt,Qt,Xt=e[6].hp+"",un,La,Jt,Zt,jt=e[5].cloaked+"",cn,Ta,er,tr,mn,pn,j,rr,Va,ne,or,nr,ir=e[6].dc225+"",dn,Ha,ar,lr,sr=e[6].dc175+"",hn,Ma,fr,Ea,ur,Na,S,cr,mr,pr=e[8].attack+"",gn,Ra,dr,hr,gr=e[9].attack+"",vn,Ia,vr,wr,kr=e[8].defense+"",wn,qa,yr,Cr,Dr=e[9].defense+"",kn,Ga,br,xr,_r=e[8].armor+"",yn,Pa,Br,Sr,Ar=e[9].armor+"",Cn,Fa,Lr,Tr,Vr=e[8].damage+"",Dn,Oa,Hr,Mr,Er=e[9].damage+"",bn,$a,Nr,Rr,Ir=e[8].hp+"",xn,Wa,qr,Gr,Pr=e[9].hp+"",_n,Bn,Ye,Te,A;return Te=new nu({props:{members:e[10]}}),{c(){t=m("div"),r=m("div"),r.textContent="Defending Guild Stats",o=h(),n=m("div"),l=m("div"),l.textContent="Relic Count:",i=m("div"),s=g(u),c=h(),p=m("div"),p.textContent="Lead Defender Bonus:",b=m("div"),H=g(L),F=h(),O=m("div"),O.textContent="Lead Defender Cloaked:",_=m("div"),he=g(e[4]),G=h(),W=m("div"),W.textContent="Other Defender Stats",fe=h(),x=m("div"),Ct=m("div"),Ct.textContent="Raw Attack:",Dt=m("div"),en=g(bt),ya=h(),xt=m("div"),xt.textContent="Attack w/ buffs:",_t=m("div"),tn=g(Bt),Ca=h(),St=m("div"),St.textContent="Raw Defense:",At=m("div"),rn=g(Lt),Da=h(),Tt=m("div"),Tt.textContent="Defense w/buffs:",Vt=m("div"),on=g(Ht),ba=h(),Mt=m("div"),Mt.textContent="Raw Armor:",Et=m("div"),nn=g(Nt),xa=h(),Rt=m("div"),Rt.textContent="Armor w/ buffs:",It=m("div"),an=g(qt),_a=h(),Gt=m("div"),Gt.textContent="Raw Damage:",Pt=m("div"),ln=g(Ft),Ba=h(),Ot=m("div"),Ot.textContent="Damage w/ buffs:",$t=m("div"),sn=g(Wt),Sa=h(),Kt=m("div"),Kt.textContent="Raw HP:",Ut=m("div"),fn=g(zt),Aa=h(),Yt=m("div"),Yt.textContent="HP w/ buffs:",Qt=m("div"),un=g(Xt),La=h(),Jt=m("div"),Jt.textContent="Cloaked:",Zt=m("div"),cn=g(jt),Ta=h(),er=m("div"),er.textContent="Processed:",tr=m("div"),mn=g(e[7]),pn=h(),j=m("div"),rr=m("div"),rr.textContent="Adjusted Defense Values",Va=h(),ne=m("div"),or=m("div"),or.textContent="DC225:",nr=m("div"),dn=g(ir),Ha=h(),ar=m("div"),ar.textContent="DC175:",lr=m("div"),hn=g(sr),Ma=h(),fr=m("div"),fr.textContent="\xA0",Ea=h(),ur=m("div"),ur.textContent="Attacking Group Stats",Na=h(),S=m("div"),cr=m("div"),cr.textContent="Raw Group Attack:",mr=m("div"),gn=g(pr),Ra=h(),dr=m("div"),dr.textContent="Group Attack w/ buffs:",hr=m("div"),vn=g(gr),Ia=h(),vr=m("div"),vr.textContent="Raw Group Defense:",wr=m("div"),wn=g(kr),qa=h(),yr=m("div"),yr.textContent="Group Defense w/ buffs:",Cr=m("div"),kn=g(Dr),Ga=h(),br=m("div"),br.textContent="Raw Group Armor:",xr=m("div"),yn=g(_r),Pa=h(),Br=m("div"),Br.textContent="Group Armor w/ buffs:",Sr=m("div"),Cn=g(Ar),Fa=h(),Lr=m("div"),Lr.textContent="Raw Group Damage:",Tr=m("div"),Dn=g(Vr),Oa=h(),Hr=m("div"),Hr.textContent="Group Damage w/ buffs:",Mr=m("div"),bn=g(Er),$a=h(),Nr=m("div"),Nr.textContent="Raw Group HP:",Rr=m("div"),xn=g(Ir),Wa=h(),qr=m("div"),qr.textContent="Group HP w/ buffs:",Gr=m("div"),_n=g(Pr),Bn=h(),Ye=m("div"),Je(Te.$$.fragment),f(r,"class","b-top svelte-1qul0wc"),f(l,"class","svelte-1qul0wc"),f(i,"class","svelte-1qul0wc"),f(p,"class","svelte-1qul0wc"),f(b,"class","svelte-1qul0wc"),f(O,"class","svelte-1qul0wc"),f(_,"class","svelte-1qul0wc"),f(n,"class","stat-grid svelte-1qul0wc"),f(W,"class","b-top svelte-1qul0wc"),f(Ct,"class","svelte-1qul0wc"),f(Dt,"class","svelte-1qul0wc"),f(xt,"class","svelte-1qul0wc"),f(_t,"class","svelte-1qul0wc"),f(St,"class","svelte-1qul0wc"),f(At,"class","svelte-1qul0wc"),f(Tt,"class","svelte-1qul0wc"),f(Vt,"class","svelte-1qul0wc"),f(Mt,"class","svelte-1qul0wc"),f(Et,"class","svelte-1qul0wc"),f(Rt,"class","svelte-1qul0wc"),f(It,"class","svelte-1qul0wc"),f(Gt,"class","svelte-1qul0wc"),f(Pt,"class","svelte-1qul0wc"),f(Ot,"class","svelte-1qul0wc"),f($t,"class","svelte-1qul0wc"),f(Kt,"class","svelte-1qul0wc"),f(Ut,"class","svelte-1qul0wc"),f(Yt,"class","svelte-1qul0wc"),f(Qt,"class","svelte-1qul0wc"),f(Jt,"class","svelte-1qul0wc"),f(Zt,"class","svelte-1qul0wc"),f(er,"class","svelte-1qul0wc"),f(tr,"class","svelte-1qul0wc"),f(x,"class","stat-grid svelte-1qul0wc"),f(t,"class","middle svelte-1qul0wc"),f(rr,"class","b-top svelte-1qul0wc"),f(or,"class","svelte-1qul0wc"),f(nr,"class","svelte-1qul0wc"),f(ar,"class","svelte-1qul0wc"),f(lr,"class","svelte-1qul0wc"),f(fr,"class","svelte-1qul0wc"),f(ne,"class","stat-grid svelte-1qul0wc"),f(ur,"class","b-top svelte-1qul0wc"),f(cr,"class","svelte-1qul0wc"),f(mr,"class","svelte-1qul0wc"),f(dr,"class","svelte-1qul0wc"),f(hr,"class","svelte-1qul0wc"),f(vr,"class","svelte-1qul0wc"),f(wr,"class","svelte-1qul0wc"),f(yr,"class","svelte-1qul0wc"),f(Cr,"class","svelte-1qul0wc"),f(br,"class","svelte-1qul0wc"),f(xr,"class","svelte-1qul0wc"),f(Br,"class","svelte-1qul0wc"),f(Sr,"class","svelte-1qul0wc"),f(Lr,"class","svelte-1qul0wc"),f(Tr,"class","svelte-1qul0wc"),f(Hr,"class","svelte-1qul0wc"),f(Mr,"class","svelte-1qul0wc"),f(Nr,"class","svelte-1qul0wc"),f(Rr,"class","svelte-1qul0wc"),f(qr,"class","svelte-1qul0wc"),f(Gr,"class","svelte-1qul0wc"),f(S,"class","stat-grid svelte-1qul0wc"),f(j,"class","right svelte-1qul0wc"),f(Ye,"class","bottom b-top svelte-1qul0wc")},m(v,B){C(v,t,B),a(t,r),a(t,o),a(t,n),a(n,l),a(n,i),a(i,s),a(n,c),a(n,p),a(n,b),a(b,H),a(n,F),a(n,O),a(n,_),a(_,he),a(t,G),a(t,W),a(t,fe),a(t,x),a(x,Ct),a(x,Dt),a(Dt,en),a(x,ya),a(x,xt),a(x,_t),a(_t,tn),a(x,Ca),a(x,St),a(x,At),a(At,rn),a(x,Da),a(x,Tt),a(x,Vt),a(Vt,on),a(x,ba),a(x,Mt),a(x,Et),a(Et,nn),a(x,xa),a(x,Rt),a(x,It),a(It,an),a(x,_a),a(x,Gt),a(x,Pt),a(Pt,ln),a(x,Ba),a(x,Ot),a(x,$t),a($t,sn),a(x,Sa),a(x,Kt),a(x,Ut),a(Ut,fn),a(x,Aa),a(x,Yt),a(x,Qt),a(Qt,un),a(x,La),a(x,Jt),a(x,Zt),a(Zt,cn),a(x,Ta),a(x,er),a(x,tr),a(tr,mn),C(v,pn,B),C(v,j,B),a(j,rr),a(j,Va),a(j,ne),a(ne,or),a(ne,nr),a(nr,dn),a(ne,Ha),a(ne,ar),a(ne,lr),a(lr,hn),a(ne,Ma),a(ne,fr),a(j,Ea),a(j,ur),a(j,Na),a(j,S),a(S,cr),a(S,mr),a(mr,gn),a(S,Ra),a(S,dr),a(S,hr),a(hr,vn),a(S,Ia),a(S,vr),a(S,wr),a(wr,wn),a(S,qa),a(S,yr),a(S,Cr),a(Cr,kn),a(S,Ga),a(S,br),a(S,xr),a(xr,yn),a(S,Pa),a(S,Br),a(S,Sr),a(Sr,Cn),a(S,Fa),a(S,Lr),a(S,Tr),a(Tr,Dn),a(S,Oa),a(S,Hr),a(S,Mr),a(Mr,bn),a(S,$a),a(S,Nr),a(S,Rr),a(Rr,xn),a(S,Wa),a(S,qr),a(S,Gr),a(Gr,_n),C(v,Bn,B),C(v,Ye,B),Ze(Te,Ye,null),A=!0},p(v,B){(!A||B&8)&&u!==(u=v[3].noOfRelics+"")&&y(s,u),(!A||B&8)&&L!==(L=v[3].leadDefenderBonus+"")&&y(H,L),(!A||B&16)&&y(he,v[4]),(!A||B&32)&&bt!==(bt=v[5].attackValue+"")&&y(en,bt),(!A||B&64)&&Bt!==(Bt=v[6].attack+"")&&y(tn,Bt),(!A||B&32)&&Lt!==(Lt=v[5].defenseValue+"")&&y(rn,Lt),(!A||B&64)&&Ht!==(Ht=v[6].defense+"")&&y(on,Ht),(!A||B&32)&&Nt!==(Nt=v[5].armorValue+"")&&y(nn,Nt),(!A||B&64)&&qt!==(qt=v[6].armor+"")&&y(an,qt),(!A||B&32)&&Ft!==(Ft=v[5].damageValue+"")&&y(ln,Ft),(!A||B&64)&&Wt!==(Wt=v[6].damage+"")&&y(sn,Wt),(!A||B&32)&&zt!==(zt=v[5].hpValue+"")&&y(fn,zt),(!A||B&64)&&Xt!==(Xt=v[6].hp+"")&&y(un,Xt),(!A||B&32)&&jt!==(jt=v[5].cloaked+"")&&y(cn,jt),(!A||B&128)&&y(mn,v[7]),(!A||B&64)&&ir!==(ir=v[6].dc225+"")&&y(dn,ir),(!A||B&64)&&sr!==(sr=v[6].dc175+"")&&y(hn,sr),(!A||B&256)&&pr!==(pr=v[8].attack+"")&&y(gn,pr),(!A||B&512)&&gr!==(gr=v[9].attack+"")&&y(vn,gr),(!A||B&256)&&kr!==(kr=v[8].defense+"")&&y(wn,kr),(!A||B&512)&&Dr!==(Dr=v[9].defense+"")&&y(kn,Dr),(!A||B&256)&&_r!==(_r=v[8].armor+"")&&y(yn,_r),(!A||B&512)&&Ar!==(Ar=v[9].armor+"")&&y(Cn,Ar),(!A||B&256)&&Vr!==(Vr=v[8].damage+"")&&y(Dn,Vr),(!A||B&512)&&Er!==(Er=v[9].damage+"")&&y(bn,Er),(!A||B&256)&&Ir!==(Ir=v[8].hp+"")&&y(xn,Ir),(!A||B&512)&&Pr!==(Pr=v[9].hp+"")&&y(_n,Pr)},i(v){A||(U(Te.$$.fragment,v),A=!0)},o(v){re(Te.$$.fragment,v),A=!1},d(v){v&&D(t),v&&D(pn),v&&D(j),v&&D(Bn),v&&D(Ye),je(Te)}}}function ud(e){let t,r,o,n,l,i=e[0].is_owner&&iu(e);function u(b,L){return b[1]?sd:fd}let s=u(e,-1),c=s(e),p=e[1]&&au(e);return{c(){t=m("div"),r=m("div"),i&&i.c(),o=h(),c.c(),n=h(),p&&p.c(),f(r,"class","left svelte-1qul0wc"),f(t,"class","body svelte-1qul0wc")},m(b,L){C(b,t,L),a(t,r),i&&i.m(r,null),a(r,o),c.m(r,null),a(t,n),p&&p.m(t,null),l=!0},p(b,[L]){b[0].is_owner?i?(i.p(b,L),L&1&&U(i,1)):(i=iu(b),i.c(),U(i,1),i.m(r,o)):i&&(Qe(),re(i,1,1,()=>{i=null}),Xe()),s===(s=u(b,L))&&c?c.p(b,L):(c.d(1),c=s(b),c&&(c.c(),c.m(r,null))),b[1]?p?(p.p(b,L),L&2&&U(p,1)):(p=au(b),p.c(),U(p,1),p.m(t,null)):p&&(Qe(),re(p,1,1,()=>{p=null}),Xe())},i(b){l||(U(i),U(p),l=!0)},o(b){re(i),re(p),l=!1},d(b){b&&D(t),i&&i.d(),c.d(),p&&p.d()}}}function cd(e,t,r){let o,n,l,i,u,s,c,p;pe(e,Wf,_=>r(2,o=_)),pe(e,Yf,_=>r(3,n=_)),pe(e,Qf,_=>r(4,l=_)),pe(e,Xf,_=>r(5,i=_)),pe(e,Zf,_=>r(6,u=_)),pe(e,Jf,_=>r(7,s=_)),pe(e,eu,_=>r(8,c=_)),pe(e,tu,_=>r(9,p=_));let{relicData:b={}}=t,L=b.defenders.map(_=>_.player_name),H=!1;function F(_){me("relic",_.detail)}function O(){me("relic","fetchStats"),r(1,H=!0),We.set(b.controlled_by.guild_id),Eo.set(L),Ro.set(GameData.player().hasGroup),Wo.set(GameData.player().buffs)}return Sl(()=>{r(1,H=!1),We.set(0),Eo.set([]),Ro.set(0),Wo.set([])}),e.$$set=_=>{"relicData"in _&&r(0,b=_.relicData)},[b,H,o,n,l,i,u,s,c,p,L,F,O]}var Ui=class extends X{constructor(t){super(),Q(this,t,cd,ud,Y,{relicData:0})}},lu=Ui;var zi=0;function md(e,t){zi&&zi.$destroy(),zi=new lu({props:{relicData:t},target:e})}function pd(e,t){t?.response?.data?.defenders?.length>0&&md(T("dialog-relic"),t.response.data)}function Yi(){$.subscribe(ll,pd)}function dd(e,t){t==="ACT_REPAIR"&&GameData.fetch(ul+ge+Kr+ee)}function Qi(){$.subscribe(ol,dd)}var Xi=0;function su(e){$("#statbar-gold").css("background-color",e)}function fu(){$("#HelperSendTotal").html(ve(N("currentGoldSentTotal"))),Number(GameData.player().gold)>Xi?su("red"):su("inherit")}function hd(){return`<dt class="stat-gold-sendTo">Send To:</dt><dd id="HelperSendTo">${N("goldRecipient")}</dd><dt class="stat-gold-sendAmt">Amount:</dt><dd id="HelperSendAmt">${ve(Xi)}</dd><dt class="stat-gold-sendTo">Send?</dt><dd><input id="HelperSendGold" value="Send!" class="custombutton" type="submit"><input type="hidden" id="xc" value=""</dd><dt class="stat-gold-sendTotal">Total Sent:</dt><dd id="HelperSendTotal">${ve(N("currentGoldSentTotal"))}</dd>`}function gd(){Xi=N("goldAmount"),$("#statbar-gold-tooltip-general").append(hd()),$("#HelperSendGold").on("click",Ol),fu(),$.subscribe(tl,fu)}function Ji(){Fl(),Pl()&&gd()}var dt=0,ht=0,Ko=0,Ue=0,Zi=0,Uo=0;function vd(){return ot({a:14,d:0,id:dt.id,item_id:dt.itemId})}function wd(e){let t=e.response.response,r=e.response.msg,o=r;if(t!==0){let n=r.indexOf("<");n!==-1&&(o=r.substring(0,n))}else o=`You purchased ${e.response.data.name} for ${ve(e.response.data.cost)} gold.`;Fr(Uo,`${o}<br>`)}function kd(){GameData.doAction(14,3,{id:dt.id,item_id:dt.itemId},0),Ko.close()}function yd(){let e=ps(Zi.value);if(!e)return;let t=[];for(let r=1;r<e;r+=1)t.push(vd().then(wd));ms(t,kd)}function Cd(){Ue=E({className:"fshClear",textContent:"Select how many to quick-buy:"}),Zi=io({id:"buyAmount",className:"fshNumberInput",min:1,max:99,value:1,type:"number"}),k(Ue,Zi);let e=we({textContent:"Quick-buy"});z(e,yd),k(Ue,e),Uo=E(),k(Ue,Uo),k(ht,Ue)}function Dd(){return ht||T("shopDialogConfirm")}function bd(){return Ko||$(ht).data("hcsWorldDialogShopConfirm")}function xd(){Ue?V("",Uo):Cd()}function _d(e,t){dt=t,ht=Dd(),ht&&(Ko=bd(),Ko&&xd())}function ji(){$.subscribe(rl,_d)}function uu(e){let t,r;return{c(){t=m("div"),r=g(e[0]),f(t,"id","tp-overlay"),f(t,"class","svelte-dcwx64")},m(o,n){C(o,t,n),a(t,r)},p(o,n){n&1&&y(r,o[0])},d(o){o&&D(t)}}}function Bd(e){let t,r=e[1]&&uu(e);return{c(){r&&r.c(),t=Re()},m(o,n){r&&r.m(o,n),C(o,t,n)},p(o,[n]){o[1]?r?r.p(o,n):(r=uu(o),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:q,o:q,d(o){r&&r.d(o),o&&D(t)}}}function cu(){return Math.floor(Date.now()/1e3)}function Sd(e,t,r){let{tpButton:o}=t,n=0,l=0,i=!1;function u(){n>0||(clearInterval(i),r(1,i=!1),o.classList.remove("cooldown"))}function s(){let p=GameData.player().teleportCooldown;r(0,n=p-cu()+l),u()}function c(p,b){l=cu(),s(),!(i||b.response.response!==0)&&r(1,i=setInterval(()=>{s()},1e3))}return window.$.subscribe("stats.player",s),window.$.subscribe(fl,c),e.$$set=p=>{"tpButton"in p&&r(2,o=p.tpButton)},[n,i,o]}var ea=class extends X{constructor(t){super(),Q(this,t,Sd,Bd,Y,{tpButton:2})}},mu=ea;function Ad(e,t){return new mu({target:e,props:t})}function ta(){let e=He(".actionListHeaderButton.teleport");Ad(e,{tpButton:e})}function pu(e){return e.numberOfCreatureHitsTillDead-e.numberOfHitsRequired<=1?", dies on miss":", survives a miss"}function du(e,t){return t==="-"?e:e==="-"||e>t?"-":e}var Ld=[[e=>e.playerHits==="-"&&e.creatureHits==="-",()=>"Unresolved"],[e=>e.playerHits==="-",()=>"Player dies"],[e=>e.playerHits===1,e=>`Player 1 hits${pu(e)}`],[e=>e.playerHits>1,e=>`Player > 1 hits${pu(e)}`]];function Td(e,t){return t[0](e)}function Vd(e){let t=Ld.find(w(Td,e));return t?t[1](e):"Unknown"}function ra(e){e.playerHits=du(e.numberOfHitsRequired,e.numberOfCreatureHitsTillDead),e.creatureHits=du(e.numberOfCreatureHitsTillDead,e.numberOfHitsRequired),e.fightStatus=Vd(e)}function se(e,t,r){return e.callback.groupExists?t:r}function gt(e,t,r,o){t>0&&(e.extraNotes+=`${r} = ${Math.floor(o*t*.001)}<br>`)}var Hd=e=>se(e,e.callback.groupArmorValue,e.player.armorValue);function Md(e){let t=Hd(e);e.overallArmorValue=t+Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}function Ed(e){gt(e,e.player.sanctuaryLevel,"Sanc Bonus Armor",e.player.armorValue)}function Nd(e){e.terrorizeEffect=Math.floor(e.creature.damage*e.player.terrorizeLevel*.001)}function Rd(e){e.player.terrorizeLevel>0&&(e.extraNotes+=`Terrorize Creature Damage Effect = ${e.terrorizeEffect*-1}<br>`)}function Id(e){e.creatureDamageDone=Math.ceil(e.generalVariable*e.creature.damage-e.overallArmorValue+e.overallHPValue)}function qd(e){let t=e.generalVariable*e.creature.damage;t<e.overallArmorValue?e.numberOfCreatureHitsTillDead=e.overallHPValue:e.numberOfCreatureHitsTillDead=Math.ceil(e.overallHPValue/(t-e.overallArmorValue))}function Gd(e){e.creatureHitByHowMuch>=0?qd(e):e.numberOfCreatureHitsTillDead="-"}function oa(e){Md(e),Ed(e),Nd(e),Rd(e),e.creature.damage-=e.terrorizeEffect,Id(e),Gd(e)}var Pd=e=>se(e,e.callback.groupAttackValue,e.player.attackValue);function hu(e){return Math.floor(e.creature.defense*e.player.darkCurseLevel*Ur)}function Fd(e){let t=e.creature.defense-hu(e);return e.combatEvaluatorBias===3?e.overallAttackValue-Math.ceil(t)-50:e.overallAttackValue-Math.ceil(e.attackVariable*t)}function na(e){let t=Pd(e);e.player.darkCurseLevel>0&&(e.extraNotes+=`DC Bonus Attack = ${hu(e)}<br>`),e.nightmareVisageAttackMovedToDefense=Math.floor((t+e.counterAttackBonusAttack)*e.player.nightmareVisageLevel*.0025),e.player.nightmareVisageLevel>0&&(e.extraNotes+=`NMV Attack moved to Defense = ${e.nightmareVisageAttackMovedToDefense}<br>`),e.overallAttackValue=t+e.counterAttackBonusAttack-e.nightmareVisageAttackMovedToDefense,e.hitByHowMuch=Fd(e)}function Od(e){return e.player.counterAttackLevel>0&&e.numberOfHitsRequired===1}var gu=(e,t,r)=>Math.max(Math.ceil((e-t+1)/r/.0025),0);function wu(e){e.lowestCALevelToStillHit=gu(e.counterAttackBonusAttack,e.hitByHowMuch,e.player.attackValue),e.lowestCALevelToStillKill=gu(e.counterAttackBonusDamage,e.damageDone,e.player.damageValue)}function $d(e){return e.player.counterAttackLevel>0?Math.ceil((1+e.player.doublerLevel/50)*.0025*e.lowestFeasibleCALevel):0}function Wd(e){e.extraAttackAtLowestFeasibleCALevel=Math.floor(e.player.attackValue*.0025*e.lowestFeasibleCALevel),e.extraDamageAtLowestFeasibleCALevel=Math.floor(e.player.damageValue*.0025*e.lowestFeasibleCALevel),e.extraNotes+=`Extra CA Att/Dam at this lowered CA level = ${e.extraAttackAtLowestFeasibleCALevel} / ${e.extraDamageAtLowestFeasibleCALevel}<br>`}function Kd(e){wu(e),e.lowestFeasibleCALevel=Math.max(e.lowestCALevelToStillHit,e.lowestCALevelToStillKill),e.extraNotes+=`Lowest CA to still 1-hit this creature = ${e.lowestFeasibleCALevel}<br>`,e.lowestFeasibleCALevel!==0&&Wd(e),e.extraStaminaPerHitAtLowestFeasibleCALevel=$d(e),e.extraStaminaPerHitAtLowestFeasibleCALevel<e.extraStaminaPerHit?e.extraNotes+=`Extra Stam Used at this lowered CA level = ${e.extraStaminaPerHitAtLowestFeasibleCALevel}<br>`:e.extraNotes+="No reduction of stam used at the lower CA level<br>"}function Ud(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired!==1}function vu(e,t,r){e[t]>203?e.extraNotes+=`Even with CA203 you cannot ${r} this creature<br>`:e[t]!==0&&(e.extraNotes+=`You need a minimum of CA${e[t]} to ${r} this creature<br>`)}function zd(e){wu(e),vu(e,"lowestCALevelToStillHit","hit"),vu(e,"lowestCALevelToStillKill","1-hit kill")}function ia(e){Od(e)&&Kd(e),Ud(e)&&zd(e)}var Yd=e=>se(e,e.callback.groupHPValue,e.player.hpValue),Qd=e=>se(e,e.callback.groupDamageValue,e.player.damageValue);function Xd(e){let t=Yd(e),{fortitudeLevel:r}=e.player;e.fortitudeExtraHPs=Math.floor(t*r*.001),r>0&&(e.extraNotes+=`Fortitude Bonus HP = ${e.fortitudeExtraHPs}<br>`),e.overallHPValue=t+e.fortitudeExtraHPs}function Jd(e){let{chiStrikeLevel:t}=e.player;e.chiStrikeExtraDamage=Math.floor(e.overallHPValue*t*.001),t>0&&(e.extraNotes+=`Chi Strike Bonus Damage = ${e.chiStrikeExtraDamage}<br>`)}function aa(e){if(Xd(e),Jd(e),e.overallDamageValue=Qd(e)+e.deathDealerBonusDamage+e.counterAttackBonusDamage+e.holyFlameBonusDamage+e.chiStrikeExtraDamage,e.damageDone=Math.floor(e.overallDamageValue-(e.generalVariable*e.creature.armor+e.hpVariable*e.creature.hp)),e.hitByHowMuch>0){let t=1;e.overallDamageValue>=e.generalVariable*e.creature.armor&&(t=e.overallDamageValue-e.generalVariable*e.creature.armor),e.numberOfHitsRequired=Math.ceil(e.hpVariable*e.creature.hp/t)}else e.numberOfHitsRequired="-"}var yu=e=>se(e,e.callback.groupDefenseValue,e.player.defenseValue),Cu=e=>Math.floor(yu(e)*e.player.constitutionLevel*.001);function Zd(e){e.player.constitutionLevel>0&&(e.extraNotes+=`Constitution Bonus Defense = ${Cu(e)}<br>`)}function jd(e){gt(e,e.player.flinchLevel,"Flinch Bonus Attack Reduction",e.creature.attack)}var ku=e=>e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue;function la(e){e.overallDefenseValue=yu(e)+Cu(e)+e.nightmareVisageAttackMovedToDefense,Zd(e),jd(e),e.creatureHitByHowMuch=Math.floor(e.attackVariable*ku(e)),e.combatEvaluatorBias===3&&(e.creatureHitByHowMuch=Math.floor(ku(e)-50))}function eh(e){e.player.superEliteSlayerLevel>0&&(e.extraNotes+=`SES Stat Reduction Multiplier = ${e.player.superEliteSlayerMultiplier}<br>`)}function th(e){e.holyFlameBonusDamage=0,e.creature.class==="Undead"&&(e.holyFlameBonusDamage=Math.max(Math.floor((e.player.damageValue-e.creature.armor)*e.player.holyFlameLevel*.002),0),e.player.holyFlameLevel>0&&(e.extraNotes+=`HF Bonus Damage = ${e.holyFlameBonusDamage}<br>`))}function rh(e){e.deathDealerBonusDamage=Math.floor(e.player.damageValue*(Math.min(Math.floor(e.player.killStreakValue/5)*.01*e.player.deathDealerLevel,20)/100))}function oh(e){e.counterAttackBonusAttack=Math.floor(e.player.attackValue*.0025*e.player.counterAttackLevel),e.counterAttackBonusDamage=Math.floor(e.player.damageValue*.0025*e.player.counterAttackLevel)}function nh(e){e.extraStaminaPerHit=0,e.player.counterAttackLevel>0&&(e.extraStaminaPerHit=Math.ceil((1+e.player.doublerLevel/50)*.0025*e.player.counterAttackLevel))}function ih(e){e.player.deathDealerLevel>0&&(e.extraNotes+=`DD Bonus Damage = ${e.deathDealerBonusDamage}<br>`)}function ah(e){e.player.counterAttackLevel>0&&(e.extraNotes+=`CA Bonus Attack/Damage = ${e.counterAttackBonusAttack} / ${e.counterAttackBonusDamage}<br>CA Extra Stam Used = ${e.extraStaminaPerHit}<br>`)}function sa(e){e.extraNotes="",eh(e),th(e),rh(e),oh(e),nh(e),ih(e),ah(e)}var lh=e=>e.creatureHitByHowMuch>=0?"Yes":"No",sh=e=>e.hitByHowMuch>0?"Yes":"No",fh=e=>e.callback.groupExists?"Group ":"",Z=e=>`<span style="color:#333333">${e}</span>`,zo=e=>`<tr>${e}</tr>`,fa=(e,t)=>`<td${t%2?"":' class="fshRight"'}>${e}</td>`,vt=e=>zo(e.map(fa).join("")),uh=e=>zo(`<td bgcolor="#CD9E4B" colspan="4" align="center">${fh(e)}Combat Evaluation</td>`),ch=e=>vt([Z("Will I hit it?"),sh(e),Z("Extra Attack:"),`( ${e.hitByHowMuch} )`]),mh=e=>vt([Z("# Hits to kill it?"),e.numberOfHitsRequired,Z("Extra Damage:"),`( ${e.damageDone} )`]),ph=e=>vt([Z("Will I be hit?"),lh(e),Z("Extra Defense:"),`( ${-1*e.creatureHitByHowMuch} )`]),dh=e=>vt([Z("# Hits to kill me?"),e.numberOfCreatureHitsTillDead,Z("Extra Armor + HP:"),`( ${-1*e.creatureDamageDone} )`]),hh=e=>vt([Z("# Player Hits?"),e.playerHits,Z("# Creature Hits?"),e.creatureHits]),gh=e=>zo(`${fa(Z("Fight Status:"),0)}<td colspan="3"><span>${e.fightStatus}</span></td>`),vh=e=>zo(`${fa(Z("Notes:"),0)}<td colspan="3"><span style="font-size:x-small;">${e.extraNotes}</span></td>`);function ua(e){return`<table width="100%"><tbody>${uh(e)}${ch(e)}${mh(e)}${ph(e)}${dh(e)}${hh(e)}${gh(e)}${vh(e)}</tbody></table>`}var Yo=0,Qo=0,wt=0;function wh(e){if(!Yo){let t=Ee("body",e);t.length===1&&([Yo]=t)}}function Du(){return Le(Qo)?"Remove from do not kill list":"Add to the do not kill list"}function bu(){V(Du(),wt)}function kh(){let e=d.doNotKillList.indexOf(Qo);e===-1?d.doNotKillList.push(Qo):d.doNotKillList.splice(e,1),bu(),te("doNotKillList",d.doNotKillList.join()),$e()}function yh(){wt=we({className:"fshBl",textContent:Du(),type:"button"});let e=E({className:"description",innerHTML:'<span class="ui-helper-hidden-accessible"><input type="text"></span>'});k(e,wt),k(Yo,e),z(wt,kh)}function Ch(){wt?bu():yh()}function ca(e,t){wh(t),Yo&&(Qo=Me(e),Ch())}var ze=0,kt=0,Xo=0,Jo=0;function Dh(){ze||(ze=T("dialog-viewcreature"))}function bh(){kt||(kt=E(),k(ze,kt),k(ze,E({innerHTML:'<span class="fshFooter">*Does include CA, DD, HF, DC, Flinch, Super Elite Slayer, NMV, Sanctuary, Constitution, Fortitude, Chi Strike and Terrorize (if active) and allow for randomness (1.1053). Constitution, NMV, Fortitude and Chi Strike apply to group stats.</span>'})))}function xu(){Xo||(bh(),Xo=E(),k(kt,Xo))}function xh(){Jo||(xu(),Jo=E(),k(kt,Jo))}function _u(e){xu(),K(e,Xo)}function Bu(e){xh(),K(e,Jo)}function _h(e,t,r){r===3&&(t.attack-=Math.ceil(t.attack*e),t.defense-=Math.ceil(t.defense*e),t.armor-=Math.ceil(t.armor*e),t.damage-=Math.ceil(t.damage*e),t.hp-=Math.ceil(t.hp*e))}function Bh(e,t){let r={name:e.name,class:e.creature_class,attack:Number(e.attack),defense:Number(e.defense),armor:Number(e.armor),damage:Number(e.damage),hp:Number(e.hp)};return _h(t,r,e.type),r}function Sh(e){e.combatEvaluatorBias=d.combatEvaluatorBias,e.attackVariable=1.1053,e.generalVariable=d.generalVariable,e.hpVariable=d.hpVariable}function Ah(e){Kl([sa,na,aa,la,oa,ra,ia],e)}function Su(e,t,r){let o={};o.callback=r,o.player=ft(t),Sh(o),o.creature=Bh(e.response.data,o.player.superEliteSlayerMultiplier),Ah(o),o.evaluatorHTML=ua(o),r.groupExists?Bu(o.evaluatorHTML):_u(o.evaluatorHTML)}function Lh(e){return e.members[0].name===eo()}function Th(e){if(ce(e.r))return e.r.find(Lh).id}function Vh(e,t,r){if(!r.r||!r.r.attributes)return;let o=r.r.attributes;Su(e,t,{groupExists:!0,groupAttackValue:o[0].value,groupDefenseValue:o[1].value,groupArmorValue:o[2].value,groupDamageValue:o[3].value,groupHPValue:o[4].value})}function Hh(e,t,r){r&&uo(r).then(w(Vh,e,t))}function Mh(e,t){lo().then(Th).then(w(Hh,e,t))}function Eh(e,t){e.player.hasGroup&&Mh(e,t),Su(e,t,{groupExists:!1})}function Nh(e){return e.response&&e.response.data}function Rh(e,t){Dh(),ze&&(_u(""),Bu(""),Nh(t)&&(ca(t.response.data.name,ze),Yl(!0).then(w(Eh,t))))}function ma(){$.subscribe(al,Rh)}var yt=0;function Lu(){yt=!yt,te("hidePlayerActions",yt),GameData.fetch(ee)}function Ih(e){let t=Ee("verbs",e);t.length===1&&Ul(t[0])}function Au(){if(!yt)return;let e=T("actionList");Xr("player",e).forEach(Ih)}function Tu(){yt=N("hidePlayerActions"),$.subscribe(Ve,Au),Au()}var Vu=0,Hu="",pa=()=>Vu,Mu=()=>Hu;function Zo(){let e=[null,[d.buffs,d.buffsName],[d.buffs2,d.buffs2Name],[d.buffs3,d.buffs3Name]][d.enabledHuntingMode];ce(e)&&([Vu,Hu]=e)}function da(e){e.target.name==="enabledHuntingMode"&&(d.enabledHuntingMode=e.target.value,te("enabledHuntingMode",d.enabledHuntingMode),Zo(),GameData.fetch(ge))}function De(e){d[e]=!d[e],te(e,d[e])}function qh(){return E({id:"fshWorldPrefs",innerHTML:`${Be("showCreatureInfo")}&nbsp;&nbsp;${Be("showMonsterLog")}&nbsp;&nbsp;${Be("showTitanInfo")}&nbsp;&nbsp;${Be("showBuffInfo")}<br>${Be("hideSubLvlCreature")}&nbsp;&nbsp;${Be("hidePlayerActions")}&nbsp;&nbsp;${ds()}`})}function Gh(){De("showHuntingBuffs"),GameData.fetch(ge)}function Ph(){De("hideSubLvlCreature"),GameData.fetch(ee)}function Fh(){De("showTitanInfo"),st(GameData.realm().dynamic)}function Oh(){De("showBuffInfo"),Oe()}var $h={hideSubLvlCreature:Ph,hidePlayerActions:Lu,showCreatureInfo:()=>De("showCreatureInfo"),showHuntingBuffs:Gh,showMonsterLog:()=>De("showMonsterLog"),showTitanInfo:Fh,showBuffInfo:Oh};function Wh(e){let t=$h[e.target.name];zr(t)&&(e.target.blur(),t(e))}function ha(){let e=T("worldContainerBelow")?.children[0];if(!e)return;let t=E({className:"fshCenter fshFten"}),r=qh();z(r,Wh),ue(r,"change",da),k(t,r);let o=E();return k(t,o),Qr(t,e),o}var jo=[{generalVariable:1.1053,hpVariable:1.1},{generalVariable:1.1,hpVariable:1.053},{generalVariable:1.053,hpVariable:1},{generalVariable:1.1053,hpVariable:1}];function Kh(e){return jo[e]?jo[e].generalVariable:1.1053}function Uh(e){return jo[e]?jo[e].hpVariable:1.1}function ga(){d.combatEvaluatorBias=N("combatEvaluatorBias"),d.generalVariable=Kh(d.combatEvaluatorBias),d.hpVariable=Uh(d.combatEvaluatorBias)}function zh(e,t){return e[t.name]=!0,e}function Yh(e,t,r){return e[Me(r)]||t.push(r),t}function Qh(e,t){K(`You are missing some ${Mu()} hunting buffs<br>(${t.join(", ")})`,e)}function Eu(e){K("",e)}function Xh(e,t){let r=t.b.reduce(zh,{}),o=pa().reduce(w(Yh,r),[]);o.length>0?Qh(e,o):Eu(e)}function Jh(e,t){d.showHuntingBuffs?Xh(e,t):Eu(e)}function Zh(e,t,r){pa()&&Jh(e,r)}function va(e){Zo();let t=w(Zh,e);$.subscribe($r,t),d.showHuntingBuffs&&window.initialGameData&&t(null,{b:window.initialGameData.player.buffs})}function jh(e){return!e||!e.actions||e.actions.length===0}function eg(e,t){return t.type===6?t.data.creature_type!==0||t.data.level>=e:!0}function tg(e){return e.realm&&e.realm.minlevel||GameData.realm().minlevel}function rg(e){let t=gl(e);return jh(t)?e:(t.actions=t.actions.filter(w(eg,tg(t))),vl(t))}function og(e){return e.data&&e.data.d&&hs(e.data.d,ee)}function ng(e,t){d.hideSubLvlCreature&&og(t)&&(e.dataFilter=rg)}function wa(){$.ajaxPrefilter("JSON",ng),d.hideSubLvlCreature&&GameData.fetch(ee)}function ig(e){d[e[0]]=En(e[1])}function ag(){[["buffs","huntingBuffs"],["buffs2","huntingBuffs2"],["buffs3","huntingBuffs3"]].forEach(ig)}function lg(e){d[e]=En(e)}function sg(){["doNotKillList"].forEach(lg)}function fg(){ag(),sg()}function ug(e){d[e[0]]=N(e[1])}function cg(){[["buffsName","huntingBuffsName"],["buffs2Name","huntingBuffs2Name"],["buffs3Name","huntingBuffs3Name"],["showHuntingBuffs","showHuntingBuffs"]].forEach(ug)}function mg(e){d[e]=N(e)}function pg(){["enabledHuntingMode","hideSubLvlCreature","showTitanInfo","showBuffInfo","showMonsterLog","showCreatureInfo"].forEach(mg)}function dg(){cg(),pg()}function hg(){fg(),dg()}function ka(){ga(),hg();let e=ha();wa(),va(e),Tu()}function gg(){$("#messageCenter").worldMessageCenter({offset:"0 60"})}function vg(){ao("#mapTooltip")}var wg=[ka,Ji,ma,yi,ui,mi,xi,Qi,oi,Fi,ji,Yi,gg,vg,Zn,Xn,fi,ti,ki,ta,bi];function kg(){Zl(wg),d.userIsDev&&Ci()}export{kg as default};
//# sourceMappingURL=newMap-AQJ523NY.js.map
