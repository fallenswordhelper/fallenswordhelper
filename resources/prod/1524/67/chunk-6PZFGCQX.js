import{a as wt,b as $t}from"./chunk-PAWRBJVL.js";import{a as bt}from"./chunk-WJ6WYBIB.js";import{a as gt}from"./chunk-CXSGHUR2.js";import{a as kt}from"./chunk-75YP5RJL.js";import{a as ht}from"./chunk-QSSSVTFW.js";import{a as k}from"./chunk-CX6XSC6N.js";import{a as mt}from"./chunk-AB2WHLZ2.js";import{a as E}from"./chunk-QATO5RVZ.js";import{B,D as d,I as lt,O as L,P as x,V as I,W as T,X as v,Y as ut,Z as pt,d as at,p as a,q as f,s as y,t as p,v as ft}from"./chunk-GQICR5FI.js";import{a as dt}from"./chunk-T72LSAK3.js";import{a as ct}from"./chunk-RAE67CTP.js";import{a as X}from"./chunk-RKFUGC6E.js";import{a as u}from"./chunk-QPL4UDOG.js";import{a as st}from"./chunk-P5WXMFOM.js";import{a as ot}from"./chunk-FJBSYG3T.js";import{a as et}from"./chunk-PGXMNMPQ.js";import{a as tt}from"./chunk-PUGPLE52.js";import{a as N}from"./chunk-3NPR3CPY.js";import{a as nt}from"./chunk-HTRQRB5B.js";import{a as C}from"./chunk-SWRTRF44.js";import{b as Z}from"./chunk-RWFKIDH7.js";import{a as rt}from"./chunk-TBVC64JY.js";import{a as q}from"./chunk-PCBO3IJC.js";import{a as it}from"./chunk-JDVPJYUH.js";import{b as W}from"./chunk-EGK63SHX.js";import{X as K,c as Y,p as z,t as J}from"./chunk-ZBCNB5YM.js";import{a as $}from"./chunk-UMUEY5TB.js";var Lt,xt;function _(){if(!xt){let t=$.subcmd==="dropitems"?"removeIndex[]":"storeIndex[]";Lt=document.forms[0].elements[t],xt=!0}return Lt}function S(){let t=_();return t?bt(t):[]}function D(){return S().filter(t=>!C("fshHide",k(t)))}var H;function h(){return H||(H=ht()),H}function R(t){return ct({subcmd:"dodropitems",removeIndex:t})}async function U(t){let e=await $t(t),o={s:e.r===0};return o.s?o.r={items:[],deleted_items:t}:o.e={message:e.m},o}function O(t){return st(R,U,t)}function St(t){return k(t.target).cells[0].children[0].value}async function Qt(t){let{items:e}=await h();u("storeitems","Check All of Type"),D().filter(o=>e[o.value]&&e[o.value].item_id===e[St(t)].item_id).forEach(o=>{o.checked=!o.disabled&&!o.checked})}function At(t){let e=k(t);e.cells[0].children[0].disabled=!0,ot(".actionButton",e).forEach(o=>{o.disabled=!0,o.textContent="",o.removeAttribute("data-tooltip"),o.classList.add("inProgress")}),t.blur(),t.classList.add("fshSpinner","fshSpinner12")}function Nt(t,e){t.target.classList.remove("fshSpinner","fshSpinner12"),t.target.classList.add("fshGreen"),t.target.textContent=e}async function _t(t,e,o){At(t.target);let n=await e([St(t)]);n&&n.s?Nt(t,o):mt(n)}var Bt=[["Check All",Qt],["Quick Send",t=>{u("storeitems","Quick Send"),_t(t,wt,"Sent")}],["Quick Drop",t=>{u("storeitems","Quick Drop"),_t(t,O,"Dropped")}]];function F(t){if(t.target.tagName==="A"&&["AH","UFSG"].includes(t.target.textContent)&&u("storeitems",t.target.textContent),t.target.tagName!=="BUTTON"||C("custombutton",t.target))return;let e=Bt.find(([o])=>o===tt(t.target));e&&e[1](t)}function Ht(t){let e=t[2](t[0])+"",o,n;return{c(){o=p(e),n=p(" AH and UFSG Links")},m(r,s){a(r,o,s),a(r,n,s)},p(r,s){s&1&&e!==(e=r[2](r[0])+"")&&B(o,e)},d(r){r&&f(o),r&&f(n)}}}function Rt(t){let e=t[2](t[1])+"",o,n;return{c(){o=p(e),n=p(" Quick Drop links")},m(r,s){a(r,o,s),a(r,n,s)},p(r,s){s&2&&e!==(e=r[2](r[1])+"")&&B(o,e)},d(r){r&&f(o),r&&f(n)}}}function Ut(t){let e,o,n;return e=new E({props:{$$slots:{default:[Ot]},$$scope:{ctx:t}}}),e.$on("click",t[5]),{c(){o=y("div"),I(e.$$.fragment),d(o,"display","contents"),d(o,"--button-width","10.8em")},m(r,s){a(r,o,s),T(e,o,null),n=!0},p(r,s){let c={};s&128&&(c.$$scope={dirty:s,ctx:r}),e.$set(c)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){x(e.$$.fragment,r),n=!1},d(r){r&&f(o),v(e,r)}}}function Ot(t){let e;return{c(){e=p("Select All Guild Locked")},m(o,n){a(o,e,n)},d(o){o&&f(e)}}}function Ft(t){let e,o,n,r,s,c,w,g;e=new E({props:{$$slots:{default:[Ht]},$$scope:{ctx:t}}}),e.$on("click",t[3]),r=new E({props:{$$slots:{default:[Rt]},$$scope:{ctx:t}}}),r.$on("click",t[4]);let l=$.subcmd2==="storeitems"&&Ut(t);return{c(){o=y("div"),I(e.$$.fragment),n=p(`\xA0
`),s=y("div"),I(r.$$.fragment),c=p(`\xA0
`),l&&l.c(),w=ft(),d(o,"display","contents"),d(o,"--button-width","11.8em"),d(s,"display","contents"),d(s,"--button-width","10.6em")},m(i,m){a(i,o,m),T(e,o,null),a(i,n,m),a(i,s,m),T(r,s,null),a(i,c,m),l&&l.m(i,m),a(i,w,m),g=!0},p(i,[m]){let M={};m&129&&(M.$$scope={dirty:m,ctx:i}),e.$set(M);let j={};m&130&&(j.$$scope={dirty:m,ctx:i}),r.$set(j),$.subcmd2==="storeitems"&&l.p(i,m)},i(i){g||(L(e.$$.fragment,i),L(r.$$.fragment,i),L(l),g=!0)},o(i){x(e.$$.fragment,i),x(r.$$.fragment,i),x(l),g=!1},d(i){i&&f(o),v(e,i),i&&f(n),i&&f(s),v(r,i),i&&f(c),l&&l.d(i),i&&f(w)}}}function Pt(t,e,o){let n=lt(),r=i=>i?"Hide":"Show",{showExtraLinks:s=!1}=e,{showQuickDropLinks:c=!1}=e;function w(){u("storeitems","toggleShowExtraLinks"),o(0,s=!s),N("showExtraLinks",s),n("showExtraLinks",s)}function g(){u("storeitems","toggleShowQuickDropLinks"),o(1,c=!c),N("showQuickDropLinks",c),n("showQuickDropLinks",c)}function l(){u("storeitems","selectLocked"),n("selectLocked")}return t.$$set=i=>{"showExtraLinks"in i&&o(0,s=i.showExtraLinks),"showQuickDropLinks"in i&&o(1,c=i.showQuickDropLinks)},[s,c,r,w,g,l]}var Dt=class extends pt{constructor(e){super();ut(this,e,Pt,Ft,at,{showExtraLinks:0,showQuickDropLinks:1})}},Ct=Dt;var P;function Vt(t,e){if(e.item_id!==13699)return e.item_name;let o=t.find(n=>n.value===String(e.inv_id));return o?et(o.parentNode.parentNode.children[2]):e.item_name}async function Gt(t){let e=await h();return!e||!e.items?{}:dt(rt(e.items).map(([o,n])=>[o,{...n,item_name:Vt(t,n)}]))}async function Mt(t){return P||(P=await Gt(t)),P}async function V(){let t=S();if(!t.length)return[];let e=await Mt(t);return t.map(o=>[k(o).cells[2],e[o.value]]).filter(([,o])=>o)}var yt=["showExtraLinks","enableItemColoring","checkAllOfType","showQuickSendLinks","showQuickDropLinks"];function Yt(t,e){return t[e]=(t[e]||0)+1,t}function zt(t){return{...t.map(([,e])=>e.item_id).reduce(Yt,{}),13699:1}}var Jt=t=>` data-tooltip="INSTANTLY ${t} THE ITEM. NO REFUNDS OR DO-OVERS! Use at own risk."`,vt=(t,e,o)=>` [<button class="fshStoreItemsButton ${t}"${e}>${o}</button>]`,It=(t,e,o)=>vt(`${t} actionButton tooltip-multiline`,Jt(e),`Quick ${o}`),Et=(t,e,o)=>`[<a href="${t}"${e}>${o}</a>]`;function Kt(t){return t.bound?'<span class="aHSpacer"></span>':Et(`${J}${encodeURIComponent(t.item_name)}`,"","AH")}var Wt=t=>Et(`${K}items${z}view&item_id=${t.item_id}`,' target="_blank"',"UFSG"),Xt=(t,e,o)=>t[2]&&e[o.item_id]>1,Zt=(t,e)=>t[3]&&(!e.bound||e.guild_tag!==-1),te=(t,e)=>t[4]&&e.guild_tag===-1;function ee(t,e){return e[0]()?t+e[1]():t}function oe(t,e,o){return[[()=>t[0],()=>`${Kt(o)} ${Wt(o)}`],[()=>!0,()=>`&nbsp;${o.item_name}`],[()=>Xt(t,e,o),()=>vt("fshBlack","","Check All")],[()=>Zt(t,o),()=>It("fshBlue","SENDS","Send")],[()=>te(t,o),()=>It("fshRed","DROP","Drop")]]}function re(t,e,[o,n]){let r=o;t[1]&&(r.className=Y[n.rarity].clas);let s=oe(t,e,n).reduce(ee,"");r.innerHTML!==s&&(r.innerHTML=s)}async function b(t){let e=await V(),o=t[2]?zt(e):[];X(3,gt,[[5,3,e,0,q(re,t,o)]])}function ne(t){let e=document.forms[0];return new Ct({props:{showExtraLinks:t[0],showQuickDropLinks:t[4]},target:e.parentNode.children[5].children[0]})}async function ie(){let t=D();if(!t.length)return;let e=await h();!e||!e.items||t.map(o=>[o,e.items[o.value]]).filter(([,o])=>o).forEach(([o,n])=>{o.checked=!o.disabled&&n.guild_tag!==-1})}function G(t){let e=ne(t);e.$on("showExtraLinks",o=>{t[0]=o.detail,b(t)}),e.$on("showQuickDropLinks",o=>{t[4]=o.detail,b(t)}),e.$on("selectLocked",()=>{ie()})}async function se(){if(nt()||!_())return;let e=yt.map(o=>W(o));kt(),G(e),e.some(o=>o)&&b(e),it(Z,F)}export{_ as a,S as b,D as c,h as d,O as e,se as f};
//# sourceMappingURL=chunk-6PZFGCQX.js.map
