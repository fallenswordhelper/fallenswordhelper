import{a as ie,b as ae}from"./chunk-KQWKIFXE.js";import{a as oe}from"./chunk-HOZ4BOCV.js";import"./chunk-N2JW6LXT.js";import{a as Kt,b as ee}from"./chunk-OAR2EWBU.js";import{a as re}from"./chunk-UTE3G3VP.js";import{a as te}from"./chunk-6KGSNVF6.js";import{a as ne}from"./chunk-XP3VDFGN.js";import{a as x}from"./chunk-MLQXMKBB.js";import{a as Zt}from"./chunk-ZKH2SOY7.js";import{a as Wt}from"./chunk-2SLP3R2S.js";import"./chunk-3HWAELXQ.js";import{a as Yt}from"./chunk-MKMENRQU.js";import{a as Xt,b as _,c as _t,d as Q,e as Qt,f as zt,g as Jt}from"./chunk-HJHZ4TJG.js";import{a as jt}from"./chunk-NC6EPUUJ.js";import"./chunk-ZVCTDYWS.js";import{a as F}from"./chunk-O43LGY2B.js";import{a as Vt}from"./chunk-5E6JQNWL.js";import{a as O}from"./chunk-HGNKQF5Q.js";import{a as Gt}from"./chunk-IJMM76Q4.js";import{a as qt}from"./chunk-GMA67BXN.js";import{a as Ot}from"./chunk-A6Q75LBV.js";import"./chunk-QSO6T6S5.js";import{a as X}from"./chunk-PZZGI3D7.js";import{a as Ut}from"./chunk-RMS5LI4S.js";import{a as gt}from"./chunk-WU6P4ISJ.js";import{a as Lt}from"./chunk-LNXB6HXV.js";import{a as U}from"./chunk-JJHUXFUB.js";import{a}from"./chunk-ICPNEDF3.js";import{a as w}from"./chunk-JEZXSBDP.js";import"./chunk-IUL3SPHK.js";import{a as Ft}from"./chunk-R2ABASBL.js";import"./chunk-BQTQOQGW.js";import{a as l}from"./chunk-6HFP56UB.js";import"./chunk-JMJ2BOMP.js";import{a as n}from"./chunk-NFDSTU22.js";import{a as o}from"./chunk-3DWHDW4D.js";import{a as Tt}from"./chunk-RVEJ4C26.js";import"./chunk-QVJB3OVM.js";import{a as vt}from"./chunk-BKOP6XT6.js";import{a as Et}from"./chunk-JR7C2FJO.js";import{f as $}from"./chunk-V3SGRUIJ.js";import{a as Ht}from"./chunk-HPL4PUCM.js";import{a as p}from"./chunk-7Q3UNQAY.js";import{a as M}from"./chunk-UXNFKJNR.js";import"./chunk-NK5OP5IN.js";import{a as P}from"./chunk-S367ATRC.js";import{a as St}from"./chunk-CL6MB4ZE.js";import"./chunk-FRV7FQNH.js";import{a as Ct}from"./chunk-XPYPU624.js";import"./chunk-2I2Z33ZT.js";import{a as Rt,b as $t,c as Dt,d as It}from"./chunk-YRMD5FMD.js";import"./chunk-FEGUW2ZZ.js";import"./chunk-E4X35TKG.js";import"./chunk-M54BODYJ.js";import{a as Pt}from"./chunk-V4O7SGPV.js";import"./chunk-SOIZ76GQ.js";import{a as k}from"./chunk-QDYZC5DW.js";import{a as y}from"./chunk-6F7KGMTR.js";import{a as At}from"./chunk-CSKN77A5.js";import{a as Bt}from"./chunk-3EONQEO2.js";import"./chunk-FA37UARH.js";import"./chunk-JDBXWYYY.js";import"./chunk-5GNYWTGT.js";import"./chunk-E5PHBQC4.js";import"./chunk-XG256B2T.js";import{a as R}from"./chunk-XWCLQVCM.js";import"./chunk-GNGPRTAS.js";import"./chunk-EBLMPFV5.js";import{a as wt}from"./chunk-EUEELQXP.js";import{a as D}from"./chunk-763ETG3B.js";import"./chunk-PP2OWSJ3.js";import{a as Mt}from"./chunk-NRQO7GDG.js";import"./chunk-PSL5QBR2.js";import{b as c}from"./chunk-P664PW54.js";import{a as f}from"./chunk-XJ5473QP.js";import"./chunk-WM64FGHN.js";import{a as q}from"./chunk-GQGCY7E7.js";import"./chunk-CU7PBPNO.js";import"./chunk-LXVMDOGR.js";import"./chunk-GX4J242O.js";import{a as s}from"./chunk-X5N7OOVX.js";import{a as xt,b as Nt}from"./chunk-PUT3KB2D.js";import"./chunk-ZZU2SK7K.js";import"./chunk-MKQZLDMS.js";import"./chunk-55RTNKIA.js";import"./chunk-X73J5C7S.js";import"./chunk-5TFX5HF5.js";import{a as v}from"./chunk-KM25KKJO.js";import{b as m}from"./chunk-NG7LLWFJ.js";import{a as kt}from"./chunk-45P77O4Z.js";import{a as u}from"./chunk-6FX7G55Z.js";import"./chunk-O24SBNSZ.js";import"./chunk-DW345X2O.js";import{F as H,J as bt,Ma as yt,g as E,sa as T,ua as b,x as ht}from"./chunk-AWEYVB2J.js";import{a as S}from"./chunk-UUU5NSJN.js";var me=0,le=1;function Ne(t,e){let r=E.exec(e.dataset.tipped);return Et({min:r[3],hour:r[2],day:r[1]})<44640&&(t[me]+=1,t[le]+=Number(/Stamina:<\/td><td>(\d+)/.exec(e.dataset.tipped)[1])),t}function Ae(t){return t.reduce(Ne,[0,0])}function z(){let t=k("b",c).find(M("Members"));if(t){let e=Kt(),r=Ae(e);t.classList.add("tip-static"),Yt(`Active: ${r[me]}/${e.length}<br>Stamina: ${D(r[le])}`,t)}}function ce(t,e){let r,i=t.replace(/,/g,"").match(e);return i?r=parseInt(i[1],10):r=0,r}function Be(t,e){let r="";return t>e&&(r="+"),r+D(t-e)}function Ee(t){let e=t.dataset.tipped,r=ce(e,/XP Lock: <b>(\d*)/),i=ce(e,/XP: <b>(\d*)/);l(t.parentNode.nextElementSibling,` (<b>${Be(i,r)}</b>)`)}function J(){let t=p('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&Ee(t)}function W(){let t=k(b,c).slice(-2,-1)[0].rows[0].cells[0],e=n({id:"profile-bio",innerHTML:t.innerHTML});f("",t),o(t,e),re()}var Y,Z;function He(t){return Y&&t>=Rt()&&t<=$t()}function Me(t){return Z&&t>=Dt()&&t<=It()}var Pe=t=>[t,E.exec(t.dataset.tipped)[1]],Re=([,t])=>t<7,$e=([t])=>[t,Number(/VL:.+?(\d+)/.exec(t.dataset.tipped)[1])],De=([t,e])=>[t.parentNode.parentNode.rowIndex,He(e),Me(e)];function Ie(){return P('#pCC a[data-tipped*="<td>VL:</td>"]').map(Pe).filter(Re).map($e).map(De)}function Ge(){return Number(Lt("guild_id"))!==Pt()&&(Y||Z)}var se=t=>t.map(([e])=>`.fshHighlight tr:nth-child(${e+1})`).join(",");function je(t){if(t.length){let e=`${se(t)} {background-color: #4671C8;}`;o(document.body,x(e))}}function Ve(t){if(t.length){let e=`${se(t)} {background-color: #FF9900;}`;o(document.body,x(e))}}function Ue(t,e){if(t.length+e.length){let r=y(b,c);r[r.length-1].classList.add("fshHighlight")}}function qe(){let t=Ie(),e=t.filter(([,i])=>i),r=t.filter(([,i,C])=>!i&&C);je(e),Ve(r),Ue(e,r)}function Fe(){Ge()&&qe()}function K(){Y=m("highlightPlayersNearMyLvl"),Z=m("highlightGvGPlayersNearMyLvl"),Fe(),m("enableHistoryCompressor")&&W()}function Oe(t){l(t.parentNode,' <span class="smallLink">[b]</span>')}function Xe(t){t.target.className==="smallLink"&&Ot(qt(t.target.previousElementSibling.href))}function tt(){let t=St(`#pCC a[href^="${ht}"]`);te([5,3,t,0,Oe]),v(c,Xe)}function I(t){return Bt({cmd:"guild",subcmd:"conflicts",page:t})}function fe(t,e){f(e,t.insertCell(-1))}function pe(t,e,r){let i=t.insertRow(t.rows.length-2);fe(i,e),fe(i,r)}function _e(t){pe(t,`<a href="${H}conflicts">Active Conflicts</a>`,"Score")}function Qe(t,e){pe(t,e.cells[0].innerHTML,`<b>${e.cells[6].innerHTML}</b>`)}function ze(t,e,r){e===1&&_e(r),Wt(t.rows,7,0).forEach(s(Qe,r))}function Je(t,e,r){let i=p("#pCC > table > tbody > tr > td > table",t);i&&i.rows.length>3&&ze(i,e,r)}function We(t){return Number(t.parentNode.innerHTML.match(/of&nbsp;(\d*)/)[1])}function Ye(t,e,r){I(t+1).then(s(e,r))}function ue(t,e){let r=At(e),i=p('#pCC input[name="page"]',r);if(!i)return;let C=Number(i.value),xe=We(i);Je(r,C,t.node),xe>C&&Ye(C,ue,t)}function et(t){let e=t.rows[6].cells[0].children[0];e&&I(1).then(s(ue,{node:e}))}function Ze(t){t.target.id===T&&R(T,!m(T))}function rt(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,r=n({className:"fsh-tracker"}),i=n({innerHTML:`${$(T)}&nbsp;<label class="custombutton" for="tracker">Show</label>`});u(i,"change",Ze),o(r,t),o(r,i),Ft(e,r)}function ot(t){return Tt("th",t)}var it,G,N,nt,j;function Ke(t,e){return`${t}<option value="${e}">${e}</option>`}function tr(t){return`<select name="member"><option value="- All -" selected>- All -</option>${q(t).sort(Mt).reduce(Ke,"")}</select>`}function A(t){return kt(t)?"#DEF":t.toLocaleString()}function er(t){return G&&G!=="- All -"&&G!==t}function rr(t,e,r){return`${e}<tr><td>${oe(new Date(r[Qt]*1e3))}</td><td>${t}</td><td class="fshRight">${A(r[_t])}</td><td class="fshRight">${A(r[zt])}</td><td class="fshRight">${A(r[_])}</td><td class="fshRight">${A(r[Q])}</td><td class="fshRight">${Math.floor(r[_]/r[Q]*100)}</td><td class="fshRight">${r[Xt]}</td><td class="fshRight">${A(r[Jt])}</td></tr>`}function or(t,e){return er(e)?t:t+j[e].reduce(s(rr,e),"")}function ir(){return q(j).reduce(or,"")}function nr(){j&&f(ir(),it),N.classList.remove("fshSpinner")}function de(){N.classList.add("fshSpinner"),a(3,nr)}function ar(t){G=t.target.value,de()}function V(t){t&&(j=t,f(tr(t),nt),de())}function mr(){let t=ot({textContent:"Member"});return nt=n(),o(t,nt),t}function lr(t){let e=t.createTHead().insertRow(-1);l(e,"<th>Date</th>");let r=mr();o(e,r),l(e,"<th>Level</th><th>VL</th><th>Stam</th><th>Max<br>Stam</th><th>Stam<br>%</th><th>Last<br>Activity<br>(Days)</th><th>GXP</th>")}function cr(t){it=jt(),o(t,it)}function ge(){let t=Gt({id:"tg"});return lr(t),cr(t),u(t,"change",ar),N=n({className:"tgCont fshSpinner64"}),o(N,t),N}var d,he,be,g;function sr(t){d.value=t,g.classList.remove("fshSpinner")}function ye(t){t&&(g.classList.add("fshSpinner"),a(4,sr,[t]))}function fr(){d.value='{"lastUpdate": 0, "members": {}}'}function pr(t){F("Update successful"),V(t.members)}function ur(){let t=vt(d.value);Nt("fsh_guildActivity",t).then(s(pr,t)).catch(F)}function ke(t,e){let r=Zt({className:"custombutton",textContent:t});return v(r,e),r}function dr(){d=ne(),d.setAttribute("autocapitalize","off"),d.setAttribute("autocomplete","off"),d.setAttribute("autocorrect","off"),d.setAttribute("spellcheck","false")}function ve(){return g=n({id:"io",className:"fshSpinner64"}),dr(),he=ke("Save",ur),be=ke("Reset",fr),o(g,d),o(g,ie()),o(g,he),o(g,be),g}var at,h,B,mt;function Le(){return!h.checked}function gr(){return h.checked}function hr(){h.checked=!1}function br(t){gr()&&t.code==="Escape"&&hr()}function yr(t){Le()&&(t.style.transform=null)}function kr(){return Vt({className:"fshMove ui-tabs-nav ui-widget-header ui-corner-all ui-helper-reset ui-helper-clearfix",innerHTML:'<li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab1">Guild Activity Tracker</label></li><li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab2">Import/Export</label></li><label for="tracker" class="fsh-dialog-close ui-dialog-titlebar-close">&times;</label>'})}function vr(){w("guildTracker","updateRawData"),at&&ye(at)}function Lr(){let t=n({className:"fsh-dialog-popup ui-dialog ui-tabs ui-widget ui-widget-content ui-corner-all",innerHTML:'<input id="acttab1" class="fsh-tab-open" name="acttabs" checked type="radio">'});return mt=O({className:"fsh-tab-open",id:"acttab2",name:"acttabs",type:"radio"}),U(mt,"change",vr),o(t,mt),t}function Cr(){let t=Lr(),e=kr();return o(t,e),gt(e,t),t}function Sr(){let t=n({className:"fsh-dialog-content"});return o(t,ge()),o(t,ve()),t}function Tr(){let t=Cr(),e=Sr();o(t,e),u(h,"change",s(yr,t)),o(B,t)}function wr(){l(B,'<div class="fsh-dialog-overlay"><label class="fsh-dialog-cancel" for="tracker"></label></div>')}function xr(t){t&&(at=JSON.stringify(t),V(t.members))}function Nr(){w("guildTracker","openDialog"),xt("fsh_guildActivity").then(xr),S.dialogIsClosed=Le,wr(),Tr()}function Ar(){h=O({id:"tracker",className:"fsh-dialog-open",type:"checkbox"}),U(h,"change",Nr),B=n({className:"fsh-dialog"}),o(B,h),u(document.body,"keydown",br),o(document.body,B)}function lt(){rt(),Ar()}var ct="enableStamBars",L,st;function Br(t){let e=t.dataset.tipped.match(/Stamina:<\/td><td>(\d{1,12}) \/ (\d{1,12})<\/td>/);return Math.min(Math.round(Number(e[1])/Number(e[2])*100),100)}function Er(t){let e=Br(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${e}%, transparent ${e+1}%)}`}function Hr(){let t=y(b,c),e=t[t.length-1];e.classList.add("fshProgressBar");let i=P(yt,e).map(Er).join(`
`);st=o(document.body,x(i)).sheet}function Ce(){st?st.disabled=!L:Hr()}function Mr(){L=!L,R(ct,L),Ce(),w("guildManage","StamBars")}function Pr(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,r=o(e,n({className:"fshCenter",innerHTML:$(ct)}));u(r,"change",Mr)}function ft(){Pr(),L=m(ct),L&&Ce()}function Rr(t){return X({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function $r(t){let e=X({className:"fshNoWrap",innerHTML:"[&nbsp;"});return o(e,t),l(e,"&nbsp;]"),e}function pt(t,e,r){let i=Rr(r);o(t,$r(i)),e.id=r,m(r)&&Ut(e),v(i,ae)}function Se(t){pt(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function Te(t){let e=t.rows[4].cells[1].children[0];f(Ct(e.innerHTML),e),pt(e,t.rows[6].cells[0].children[0],"statisticsControl")}function we(t){let e=t.rows[15]?.cells[1].children[0];e&&pt(e,t.rows[17].cells[0].children[0],"guildStructureControl")}function Dr(t){let e=k("b",t).filter(M("Relics"));if(e.length!==1)return;let r=e[0].parentNode.nextElementSibling.children[0];f(`[ <a href="${H}reliclist">Control</a> ]&nbsp;`,r)}function Ir(t){let e=y("li",t);if(!e||!e.length)return;let r=e[e.length-1].parentNode;l(r,`<li><a href="${bt}${Ht()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function Gr(){return c.lastElementChild.rows[2].cells[0].children[0]}function jr(t,e){a(3,e,[t])}function Vr(t){[Se,Te,we,Dr,Ir].forEach(s(jr,t))}function Ur(t){wt()||(m("detailedConflictInfo")&&a(3,et,[t]),a(4,lt))}function ut(){if(!c)return;let t=Gr();Vr(t),m("showBuffLinks")&&a(3,tt),Ur(t),ft()}function qr(t){let e=t.nextElementSibling.nextElementSibling;e&&e.classList.add("fshBreakAll")}function dt(){let t=p('#pCC img[src*="/guilds/"][width="200"]');!t||(t.removeAttribute("style"),qr(t))}function Fr(){a(3,ee),a(3,dt),a(3,J),a(3,z),S.subcmd==="manage"&&ut(),S.subcmd==="view"&&K()}export{Fr as default};
//# sourceMappingURL=injectGuild-7SV74CEM.js.map
