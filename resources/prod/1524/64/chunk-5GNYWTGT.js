import{a as d}from"./chunk-X5N7OOVX.js";import{a as m}from"./chunk-X73J5C7S.js";import{a as l}from"./chunk-6FX7G55Z.js";function h(t){return t.data?(delete t.data.fshrnd,$.param(t.data)):t.url}function T(t,e,n,r){let i=`${e.status} ${e.statusText} - `;if(e.statusText===r.toString())return i+h(t);let a=`${i+n} ${r} - ${h(t)}`;return n==="parsererror"?`${a} - ${e.responseText}`:a}var u=class extends Error{constructor([e,n,r,i],...a){super(T(e,n,r,i),...a);Error.captureStackTrace&&Error.captureStackTrace(this,u),this.jqSettings=e,this.jqXhr=n,this.jqTextStatus=r,this.jqErrorThrown=i}};var s=!0,o=[],p;function b(t){return typeof t=="string"?{url:t}:t}function j(t){t.abort(),o=[]}function q(t){l(window,"beforeunload",d(j,t))}var w=[0,503,504],k=["abort"],F=["We have encountered an issue with a server connection","We're performing maintenance on the game","the team have been notified and will get it fixed soon","uUDRezBqFM4"];function E(t){return w.includes(t.jqXhr.status)||k.includes(t.jqTextStatus)||F.some(e=>t.jqXhr.responseText.includes(e))}function R(t,e){E(e)||(m(e.toString(),!1),t(void 0))}function v([t,e,n,r,i]){return function(c,x,S){n>0&&c.status===503?setTimeout(t,100,e,n-1,r,i):R(r,new u([e,c,x,S]))}}function g(t,e,n,r){let i=b(t);return i.beforeSend=q,$.ajax(i).then(n).catch(v([g,i,e,n,r]))}function y(t){if($.active<5){let e=o.shift();g(...e),t()}}function f(){o.length===0?s=!0:(s=!1,y(f))}function A(){p||($(document).ajaxComplete(f),p=!0)}function H(t,e,n,r){o.push([t,e,n,r]),s&&f()}function M(t){if(A(),t)return new Promise((e,n)=>{H(t,10,e,n)})}export{M as a};
//# sourceMappingURL=chunk-5GNYWTGT.js.map
