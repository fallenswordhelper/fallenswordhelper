import{a as I}from"./chunk-7IZGRSNS.js";import{a as A}from"./chunk-6KGSNVF6.js";import{b as P}from"./chunk-GMOGDOAU.js";import{a as S,b as T}from"./chunk-II4BLBT5.js";import"./chunk-VAFEM2T7.js";import"./chunk-JAAA6A3K.js";import{a as j}from"./chunk-HGNKQF5Q.js";import"./chunk-ICPNEDF3.js";import{a as p}from"./chunk-JEZXSBDP.js";import{a as D}from"./chunk-BQTQOQGW.js";import{a as s}from"./chunk-6HFP56UB.js";import{a as v}from"./chunk-POEIU4DF.js";import{a as E}from"./chunk-SDRXUAQO.js";import"./chunk-UWLJN7Q5.js";import"./chunk-JMJ2BOMP.js";import{a as R}from"./chunk-3DWHDW4D.js";import"./chunk-RVEJ4C26.js";import"./chunk-QVJB3OVM.js";import{a as B}from"./chunk-HPL4PUCM.js";import{a as N}from"./chunk-7Q3UNQAY.js";import"./chunk-S367ATRC.js";import"./chunk-CL6MB4ZE.js";import"./chunk-M54BODYJ.js";import"./chunk-THUVFGD2.js";import"./chunk-CSKN77A5.js";import{a as C}from"./chunk-3EONQEO2.js";import"./chunk-JDBXWYYY.js";import"./chunk-5GNYWTGT.js";import{a as f}from"./chunk-E5PHBQC4.js";import"./chunk-XG256B2T.js";import{a as b}from"./chunk-EUEELQXP.js";import"./chunk-QS7J5TMD.js";import{a as y}from"./chunk-PSL5QBR2.js";import{b as m}from"./chunk-P664PW54.js";import"./chunk-WM64FGHN.js";import"./chunk-GQGCY7E7.js";import"./chunk-CU7PBPNO.js";import"./chunk-LXVMDOGR.js";import"./chunk-GX4J242O.js";import{a}from"./chunk-X5N7OOVX.js";import"./chunk-ZZU2SK7K.js";import"./chunk-MKQZLDMS.js";import"./chunk-55RTNKIA.js";import"./chunk-X73J5C7S.js";import"./chunk-5TFX5HF5.js";import{a as c}from"./chunk-KM25KKJO.js";import{b as x}from"./chunk-NG7LLWFJ.js";import"./chunk-45P77O4Z.js";import"./chunk-6FX7G55Z.js";import{a as w}from"./chunk-DW345X2O.js";import"./chunk-AWEYVB2J.js";import"./chunk-UUU5NSJN.js";function u(t,o){return t+o}var H=[[2,5],[4,4],[64,5],[256,.1],[512,.2],[4096,.5],[32768,.2],[524288,.1],[65536,5],[4194304,4]],V=(t,[,o])=>t+o-1,_=t=>H.filter(([o])=>I(t,o)).reduce(V,0),L=t=>t>>>0,M=t=>L(t).toString(2),q=t=>M(t).split("").map(Number).reduce(u,0),F=t=>P(_(t)+q(t),1);function G(t,o){let r=o.children[0],i=f(r.firstChild),n=t.find(e=>e&&e.name===i);n&&v(r,`<span class="fshBlue">(${F(n.permissions)}) Tax:(${n.tax}%)</span> `)}function O(t,o){p("ranks","fetchRankData"),t.forEach(a(G,o))}function Q(t,o,r){let i=j({className:"custombutton",type:"button",value:"Get Rank Weightings"});c(i,a(O,t,o));let n=r.parentNode.parentNode;s(n,"&nbsp;"),R(n,i)}function d(t,o){let r=N('#pCC a[href*="=ranks&subcmd2=add"]');r&&Q(t,o,r)}function l(t,o){return C({cmd:"guild",subcmd:"ranks",subcmd2:t,rank_id:o}).then(()=>({s:!0}))}function h(t,o){return S({subcmd2:t,rank_id:o})}function g(t,o){return E(h,l,t,o)}var k,Z=t=>["Up","Down"].includes(t.target.value);function z(t,o){return k>=Math.min(t.rowIndex,o)||o<1||o>t.parentNode.rows.length}function J(t){return t==="Up"?-1:2}function K(t){return t==="Up"?-22:22}function X(t,o,r){let i=t.target.getAttribute("onclick").match(/rank_id=(\d+)/);g(y(t.target.value),i[1]);let n=o.parentNode.rows[r];D(o,n);let e=K(t.target.value);window.scrollBy(0,e),t.stopPropagation()}function Y(t){p("ranks","overrideUpDown");let o=t.target.parentNode.parentNode.parentNode,r=o.rowIndex+J(t.target.value);z(o,r)||X(t,o,r)}function tt(t){Z(t)&&Y(t)}function U(){k&&x("ajaxifyRankControls")&&c(m,tt,!0)}function W(t,o){o.includes(B())&&(k=t.rowIndex)}function ot(){let t=m.lastElementChild.previousElementSibling.rows?.[7]?.children[0]?.children[0]?.rows;if(t)return w(t)}function rt(t,o){let r=o.children[0],i=f(r),n=t.find(e=>e.name===i);if(n?.members.length){let e=n.members.map($=>$.name);W(o,e),s(r,` <span class="fshBlue">- ${e.join(", ")}</span>`)}}function nt(t){let o=ot();o&&(A([5,3,o,1,a(rt,t)]),d(o,t),U())}async function et(){if(b())return;let t=await T();t?.s&&nt(t.r)}export{et as default};
//# sourceMappingURL=rank-OVQ4FEP5.js.map
