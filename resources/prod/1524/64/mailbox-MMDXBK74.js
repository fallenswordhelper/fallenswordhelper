import{a as R}from"./chunk-7OUV3IMZ.js";import{a as N}from"./chunk-JAAA6A3K.js";import{a as q,b as M}from"./chunk-VM4LKBFC.js";import{a as A}from"./chunk-ZVCTDYWS.js";import{a as D}from"./chunk-5E6JQNWL.js";import{a as L}from"./chunk-HGNKQF5Q.js";import{a as h}from"./chunk-JJHUXFUB.js";import{a as B}from"./chunk-JXL4HPF6.js";import{a as l}from"./chunk-BQTQOQGW.js";import"./chunk-6HFP56UB.js";import{a as E}from"./chunk-SDRXUAQO.js";import{a as y}from"./chunk-UWLJN7Q5.js";import"./chunk-JMJ2BOMP.js";import{a as m}from"./chunk-NFDSTU22.js";import{a as n}from"./chunk-3DWHDW4D.js";import"./chunk-RVEJ4C26.js";import{a as T}from"./chunk-QVJB3OVM.js";import"./chunk-THUVFGD2.js";import{a as x}from"./chunk-QDYZC5DW.js";import"./chunk-6F7KGMTR.js";import"./chunk-JDBXWYYY.js";import"./chunk-5GNYWTGT.js";import"./chunk-XG256B2T.js";import"./chunk-GNGPRTAS.js";import{a as Q}from"./chunk-EUEELQXP.js";import{a as v}from"./chunk-PP2OWSJ3.js";import"./chunk-QS7J5TMD.js";import{b as c}from"./chunk-P664PW54.js";import{a as f}from"./chunk-XJ5473QP.js";import{a as b}from"./chunk-WM64FGHN.js";import"./chunk-GQGCY7E7.js";import"./chunk-LXVMDOGR.js";import{a as I}from"./chunk-GX4J242O.js";import{a}from"./chunk-X5N7OOVX.js";import"./chunk-MKQZLDMS.js";import"./chunk-55RTNKIA.js";import"./chunk-X73J5C7S.js";import"./chunk-5TFX5HF5.js";import{a as C}from"./chunk-KM25KKJO.js";import"./chunk-NG7LLWFJ.js";import"./chunk-45P77O4Z.js";import"./chunk-6FX7G55Z.js";import"./chunk-DW345X2O.js";import{i as g}from"./chunk-AWEYVB2J.js";import"./chunk-UUU5NSJN.js";function S(t){return B({cmd:"tempinv",subcmd:"takeitem",temp_id:t,ajax:1})}function F(t){let e=t.filter(o=>o.r===0),i=t.filter(o=>o.r!==0);return e.length>0?{r:e.map(o=>({id:o.temp_id})),s:!0}:i.length>0?{e:{message:i[0].m},s:!1}:{e:{message:t[0].m},s:!1}}function u(t){return N(t.map(S),F)}function p(t){return y({cmd:"tempinv",subcmd:"takeitems",item:t})}function d(t){return E(p,u,t)}function H(t,e,i){let o=A({id:t,className:"sendLink",htmlFor:"fshQuickTake",textContent:`Toggle ${e}`});return l(o,i),o}function O(t,e){let i=e.children[0],{tipped:o}=i.dataset,r=g.exec(o);if(!r)return t;let s=r[1],k=r[2];return t[s]?t[s].invIds.push(k):t[s]={invIds:[k],tipped:o.replace(/&extra=\d/,""),src:i.src},t}function _(){return m({id:"quickTake",innerHTML:'<div class="fshCenter"><br><font size="3"><b>Quick Take</b></font><br><br>Select which item to take all similar items from your Mailbox.</div><div></div>'})}function j(t){let e=m(),i=D();return n(e,i),n(t,e),i}function w(t,e){let i=e[1],o=m(),r=m({innerHTML:`<img src="${i.src}" class="tip-dynamic" data-tipped="${i.tipped}">`});n(o,r);let s=m({innerHTML:`<button class="fshBl fshBls" data-id="${e[0]}">Take All ${i.invIds.length}</button>`});n(o,s),n(t,o)}function z(t,e){I(e).forEach(a(w,t))}function G(t){let e=$(`#temp-inv-img-${t}`).qtip("api");e&&e.destroy(!0)}function J(t){G(t.id);let e=b(`temp-inv-${t.id}`);e&&f("",e)}function P(t,e){e.r.forEach(J),q(`${e.r.length.toString()} item(s) taken.`,t)}function U(t,e){M(e,t)||T(e.r)&&P(t,e)}function K(t,e){d(e).then(a(U,t))}function V(t,e,i){let o=i.dataset.id,{invIds:r}=t[o];f(`taking all ${r.length} items`,i.parentNode),R(40,r).forEach(a(K,e))}function W(t,e,i){v("fshBls",i.target)&&V(t,e,i.target)}function X(t,e,i){let o=m({className:"fshTakeGrid"});z(o,t),n(e,o),C(o,a(W,t,i))}function Y(t){let e=_(),i=j(e);n(e,m()),X(t,e,i),n(c,e)}function Z(t,e){H("qtOn","Mailbox",e);let i=t.reduce(O,{});Y(i)}function tt(t,e){let i=L({id:"fshQuickTake",type:"checkbox"});l(i,e),h(i,"change",a(Z,t,e))}function et(){if(Q()||!c)return;let t=x("a",c);if(t.length===0)return;let e=c.lastElementChild;tt(t,e),H("qtOff","Quick Take",e)}export{et as default};
//# sourceMappingURL=mailbox-MMDXBK74.js.map
