import{a as e,$ as t,S as l,K as s,L as a,bb as n,bc as r,b6 as c,b9 as i,bd as o,ae as u,M as v,O as d,Q as h,Y as m,a0 as p,bm as _,cI as f,aa as g,X as b,d7 as k,N as z,U as w,c5 as x,b0 as y,aJ as $,aZ as S,R as C,V as q,a1 as M,a_ as Q,Z as L,aI as N,cJ as P}from"./calfSystem-abb16b0d.js"
import{h as j,u as U}from"./await_block-78969f55.js"
import{e as H,u as T,d as A}from"./each-13c4feae.js"
import{M as G}from"./ModalTitled-3d3c0c48.js"
import"./Modal-f3893d54.js"
function B(){return t={subcmd:"view"},e({cmd:"questbook",...t})
var t}function F(e,t,l){const s=e.slice()
return s[35]=t[l],s}function I(e,t,l){const s=e.slice()
return s[38]=t[l],s[40]=l,s}function J(e){return{c:b,m:b,p:b,d:b}}function R(e){let t,l,s,a,n,r,c,i,o,u,_,g,b,N,P,j,U,T,A,G,B,I,J,R,W,Y,Z,O,V,X,D,E,ee,te,le,se,ae,ne,re,ce,ie,oe,ue,ve,de,he,me,pe,_e,fe,ge,be,ke,ze,we,xe,ye,$e,Se,Ce,qe,Me,Qe,Le,Ne,Pe,je,Ue,He,Te,Ae,Ge,Be,Fe,Ie,Je,Re,We=e[0]?"Seasonal":"Normal",Ye=H(e[8]),Ze=[]
for(let t=0;t<Ye.length;t+=1)Ze[t]=K(F(e,Ye,t))
return Fe=k(e[19][0]),Ie=k(e[19][1]),{c(){t=v("h1"),t.textContent="Quest Book",l=z(),s=v("p"),a=p("[\n        "),n=v("label"),r=v("input"),c=p("\n          Normal"),i=p("\n        |\n        "),o=v("label"),u=v("input"),_=p("\n          Seasonal"),g=p("\n        ]"),b=z(),N=v("p"),P=p("Total "),j=p(We),U=p(" Quest Progress:"),T=z(),A=v("div"),G=v("img"),J=z(),R=v("p"),W=p("[\n        "),Y=v("label"),Z=v("input"),O=p("\n          Active"),V=p(" |\n        "),X=v("label"),D=v("input"),E=p("\n          Complete"),ee=p(" |\n        "),te=v("label"),le=v("input"),se=p("\n          Not Started"),ae=p(" |\n        "),ne=v("label"),re=v("input"),ce=p("\n          Hidden"),ie=p("\n        ]"),oe=z(),ue=v("table"),ve=v("thead"),de=v("tr"),he=v("td"),me=v("input"),pe=z(),_e=v("td"),fe=p("Min lvl - Max lvl"),ge=v("br"),be=z(),ke=v("input"),ze=p(" -\n              "),we=v("input"),xe=z(),ye=v("td"),$e=v("input"),Se=z(),Ce=v("tr"),qe=v("th"),qe.textContent="Quest Name",Me=z(),Qe=v("th"),Qe.textContent="Level",Le=z(),Ne=v("th"),Ne.textContent="Starting Realm",Pe=z(),je=v("th"),je.textContent="Status",Ue=z(),He=v("th"),He.textContent="Guides",Te=z(),Ae=v("th"),Ae.textContent="Hide",Ge=z(),Be=v("tbody")
for(let e=0;e<Ze.length;e+=1)Ze[e].c()
d(t,"class","svelte-1ltzvr"),d(r,"type","radio"),d(r,"name","seasonal"),r.__value=!1,w(r,r.__value),d(r,"class","svelte-1ltzvr"),d(n,"class","asLink svelte-1ltzvr"),x(n,"active",!e[0]),d(u,"type","radio"),d(u,"name","seasonal"),u.__value=!0,w(u,u.__value),d(u,"class","svelte-1ltzvr"),d(o,"class","asLink svelte-1ltzvr"),x(o,"active",e[0]),d(s,"class","svelte-1ltzvr"),d(N,"class","svelte-1ltzvr"),y(G.src,B=$+"ui/misc/progress_purple.png")||d(G,"src",B),S(G,"width",100*e[9]+"%"),d(G,"height","10"),d(G,"class","tip-static"),d(G,"alt","Progress"),d(G,"data-tipped",I="<span class='fshHelpTitle'>Quests Completed</span><br>"+e[7].filter(e[13].completed).length+" / "+e[7].length),d(A,"id","fshQuestProgress"),d(A,"class","svelte-1ltzvr"),d(Z,"type","radio"),Z.__value="active",w(Z,Z.__value),d(Z,"class","svelte-1ltzvr"),d(Y,"class","asLink svelte-1ltzvr"),x(Y,"active","active"===e[1]),d(D,"type","radio"),D.__value="completed",w(D,D.__value),d(D,"class","svelte-1ltzvr"),d(X,"class","asLink svelte-1ltzvr"),x(X,"active","completed"===e[1]),d(le,"type","radio"),le.__value="notStarted",w(le,le.__value),d(le,"class","svelte-1ltzvr"),d(te,"class","asLink svelte-1ltzvr"),x(te,"active","notStarted"===e[1]),d(re,"type","radio"),re.__value="hidden",w(re,re.__value),d(re,"class","svelte-1ltzvr"),d(ne,"class","asLink svelte-1ltzvr"),x(ne,"active","hidden"===e[1]),d(R,"class","svelte-1ltzvr"),d(me,"type","text"),d(me,"placeholder","Search quest name"),d(he,"class","svelte-1ltzvr"),d(ke,"type","number"),d(ke,"placeholder","Min lvl"),d(ke,"class","svelte-1ltzvr"),d(we,"type","number"),d(we,"placeholder","Max lvl"),d(we,"class","svelte-1ltzvr"),d(_e,"class","svelte-1ltzvr"),d($e,"type","text"),d($e,"placeholder","Search realm name"),d(ye,"class","svelte-1ltzvr"),d(de,"class","svelte-1ltzvr"),d(qe,"width","20%"),d(qe,"class","fshPointer svelte-1ltzvr"),d(Qe,"width","20%"),d(Qe,"class","fshPointer svelte-1ltzvr"),d(Ne,"width","25%"),d(Ne,"class","fshPointer svelte-1ltzvr"),d(je,"width","10%"),d(je,"class","fshPointer svelte-1ltzvr"),d(He,"width","10%"),d(He,"class","svelte-1ltzvr"),d(Ae,"width","10%"),d(Ae,"class","svelte-1ltzvr"),d(Ce,"class","svelte-1ltzvr"),d(ue,"class","svelte-1ltzvr"),Fe.p(Z,D,le,re),Ie.p(r,u)},m(v,d){h(v,t,d),h(v,l,d),h(v,s,d),C(s,a),C(s,n),C(n,r),r.checked=r.__value===e[0],C(n,c),C(s,i),C(s,o),C(o,u),u.checked=u.__value===e[0],C(o,_),C(s,g),h(v,b,d),h(v,N,d),C(N,P),C(N,j),C(N,U),h(v,T,d),h(v,A,d),C(A,G),h(v,J,d),h(v,R,d),C(R,W),C(R,Y),C(Y,Z),Z.checked=Z.__value===e[1],C(Y,O),C(R,V),C(R,X),C(X,D),D.checked=D.__value===e[1],C(X,E),C(R,ee),C(R,te),C(te,le),le.checked=le.__value===e[1],C(te,se),C(R,ae),C(R,ne),C(ne,re),re.checked=re.__value===e[1],C(ne,ce),C(R,ie),h(v,oe,d),h(v,ue,d),C(ue,ve),C(ve,de),C(de,he),C(he,me),w(me,e[3]),C(de,pe),C(de,_e),C(_e,fe),C(_e,ge),C(_e,be),C(_e,ke),w(ke,e[5]),C(_e,ze),C(_e,we),w(we,e[6]),C(de,xe),C(de,ye),C(ye,$e),w($e,e[4]),C(ve,Se),C(ve,Ce),C(Ce,qe),C(Ce,Me),C(Ce,Qe),C(Ce,Le),C(Ce,Ne),C(Ce,Pe),C(Ce,je),C(Ce,Ue),C(Ce,He),C(Ce,Te),C(Ce,Ae),C(ue,Ge),C(ue,Be)
for(let e=0;e<Ze.length;e+=1)Ze[e]&&Ze[e].m(Be,null)
Je||(Re=[q(r,"change",e[18]),q(u,"change",e[20]),q(Z,"change",e[21]),q(D,"change",e[22]),q(le,"change",e[23]),q(re,"change",e[24]),q(me,"input",e[25]),q(ke,"input",e[26]),q(we,"input",e[27]),q($e,"input",e[28]),q(qe,"click",e[29]),q(Qe,"click",e[30]),q(Ne,"click",e[31]),q(je,"click",e[32])],Je=!0)},p(e,t){if(1&t[0]&&(r.checked=r.__value===e[0]),1&t[0]&&x(n,"active",!e[0]),1&t[0]&&(u.checked=u.__value===e[0]),1&t[0]&&x(o,"active",e[0]),1&t[0]&&We!==(We=e[0]?"Seasonal":"Normal")&&M(j,We),512&t[0]&&S(G,"width",100*e[9]+"%"),128&t[0]&&I!==(I="<span class='fshHelpTitle'>Quests Completed</span><br>"+e[7].filter(e[13].completed).length+" / "+e[7].length)&&d(G,"data-tipped",I),2&t[0]&&(Z.checked=Z.__value===e[1]),2&t[0]&&x(Y,"active","active"===e[1]),2&t[0]&&(D.checked=D.__value===e[1]),2&t[0]&&x(X,"active","completed"===e[1]),2&t[0]&&(le.checked=le.__value===e[1]),2&t[0]&&x(te,"active","notStarted"===e[1]),2&t[0]&&(re.checked=re.__value===e[1]),2&t[0]&&x(ne,"active","hidden"===e[1]),8&t[0]&&me.value!==e[3]&&w(me,e[3]),32&t[0]&&f(ke.value)!==e[5]&&w(ke,e[5]),64&t[0]&&f(we.value)!==e[6]&&w(we,e[6]),16&t[0]&&$e.value!==e[4]&&w($e,e[4]),3330&t[0]){let l
for(Ye=H(e[8]),l=0;l<Ye.length;l+=1){const s=F(e,Ye,l)
Ze[l]?Ze[l].p(s,t):(Ze[l]=K(s),Ze[l].c(),Ze[l].m(Be,null))}for(;l<Ze.length;l+=1)Ze[l].d(1)
Ze.length=Ye.length}},d(e){e&&(m(t),m(l),m(s),m(b),m(N),m(T),m(A),m(J),m(R),m(oe),m(ue)),Q(Ze,e),Fe.r(),Ie.r(),Je=!1,L(Re)}}}function W(e,t){let l
return{key:e,first:null,c(){l=v("div"),d(l,"class","fshStage svelte-1ltzvr"),x(l,"incomplete",t[40]>=t[35].current_stage),this.first=l},m(e,t){h(e,l,t)},p(e,s){t=e,256&s[0]&&x(l,"incomplete",t[40]>=t[35].current_stage)},d(e){e&&m(l)}}}function Y(e){let t,l,s
return{c(){t=v("button"),t.textContent="Hide",d(t,"type","button")},m(a,n){h(a,t,n),l||(s=q(t,"click",(function(){P(e[10](e[35]))&&e[10](e[35]).apply(this,arguments)})),l=!0)},p(t,l){e=t},d(e){e&&m(t),l=!1,s()}}}function Z(e){let t,l,s
return{c(){t=v("button"),t.textContent="Unhide",d(t,"type","button")},m(a,n){h(a,t,n),l||(s=q(t,"click",(function(){P(e[11](e[35]))&&e[11](e[35]).apply(this,arguments)})),l=!0)},p(t,l){e=t},d(e){e&&m(t),l=!1,s()}}}function K(e){let t,l,s,a,n,r,c,i,o,u,_,f,g,b,k,w,S,q,Q,L,P,j,U,G,B,F,J,R,K,O,V,X,D,E,ee=e[35].name+"",te=e[35].min_level+"",le=e[35].realm.name+"",se=[],ae=new Map,ne=Math.round(e[35].current_stage/e[35].max_stage*100)+"",re=H(Array(e[35].max_stage))
const ce=e=>e[40]
for(let t=0;t<re.length;t+=1){let l=I(e,re,t),s=ce(l)
ae.set(s,se[t]=W(s,l))}function ie(e,t){return"hidden"===e[1]?Z:Y}let oe=ie(e),ue=oe(e)
return{c(){t=v("tr"),l=v("td"),s=v("a"),a=p(ee),r=z(),c=v("td"),i=p(te),o=z(),u=v("td"),_=v("a"),f=p(le),b=z(),k=v("td"),w=v("div")
for(let e=0;e<se.length;e+=1)se[e].c()
S=z(),q=v("div"),Q=p(ne),L=p("%"),P=z(),j=v("td"),U=v("a"),G=v("img"),J=z(),R=v("a"),K=v("img"),X=z(),D=v("td"),ue.c(),E=z(),d(s,"href",n="https://fallensword.com/index.php?cmd=questbook&subcmd=viewquest&quest_id="+e[35].id),d(l,"class","svelte-1ltzvr"),d(c,"class","svelte-1ltzvr"),d(_,"href",g=N+"realms&subcmd=view&realm_id="+e[35].realm.id),d(_,"target","_blank"),d(_,"rel","noreferrer"),d(u,"class","svelte-1ltzvr"),d(q,"class","percentbar-value"),d(w,"class","fshPercentbar svelte-1ltzvr"),x(w,"complete",e[35].current_stage===e[35].max_stage),d(k,"class","svelte-1ltzvr"),y(G.src,B="https://fallensword.com/favicon.ico")||d(G,"src","https://fallensword.com/favicon.ico"),d(G,"alt","UFSG"),d(G,"width","16"),d(G,"hieght","16"),d(G,"class","tip-static svelte-1ltzvr"),d(G,"data-tipped","Search for this quest on the Ultimate Fallen Sword Guide"),d(U,"href",F=N+"quests&subcmd=view&quest_id="+e[35].id),d(U,"target","_blank"),d(U,"rel","noreferrer"),y(K.src,O=$+"ui/misc/wiki.png")||d(K,"src",O),d(K,"alt","Wiki"),d(K,"width","16"),d(K,"height","16"),d(K,"class","tip-static svelte-1ltzvr"),d(K,"data-tipped","Search for this quest on the Wiki"),d(R,"href",V="https://wiki.fallensword.com/index.php?title="+e[35].name.replace(/ /g,"_")),d(R,"target","_blank"),d(R,"rel","noreferrer"),d(j,"class","svelte-1ltzvr"),d(D,"class","svelte-1ltzvr"),d(t,"class","svelte-1ltzvr")},m(e,n){h(e,t,n),C(t,l),C(l,s),C(s,a),C(t,r),C(t,c),C(c,i),C(t,o),C(t,u),C(u,_),C(_,f),C(t,b),C(t,k),C(k,w)
for(let e=0;e<se.length;e+=1)se[e]&&se[e].m(w,null)
C(w,S),C(w,q),C(q,Q),C(q,L),C(t,P),C(t,j),C(j,U),C(U,G),C(j,J),C(j,R),C(R,K),C(t,X),C(t,D),ue.m(D,null),C(t,E)},p(e,t){256&t[0]&&ee!==(ee=e[35].name+"")&&M(a,ee),256&t[0]&&n!==(n="https://fallensword.com/index.php?cmd=questbook&subcmd=viewquest&quest_id="+e[35].id)&&d(s,"href",n),256&t[0]&&te!==(te=e[35].min_level+"")&&M(i,te),256&t[0]&&le!==(le=e[35].realm.name+"")&&M(f,le),256&t[0]&&g!==(g=N+"realms&subcmd=view&realm_id="+e[35].realm.id)&&d(_,"href",g),256&t[0]&&(re=H(Array(e[35].max_stage)),se=T(se,t,ce,1,e,re,ae,w,A,W,S,I)),256&t[0]&&ne!==(ne=Math.round(e[35].current_stage/e[35].max_stage*100)+"")&&M(Q,ne),256&t[0]&&x(w,"complete",e[35].current_stage===e[35].max_stage),256&t[0]&&F!==(F=N+"quests&subcmd=view&quest_id="+e[35].id)&&d(U,"href",F),256&t[0]&&V!==(V="https://wiki.fallensword.com/index.php?title="+e[35].name.replace(/ /g,"_"))&&d(R,"href",V),oe===(oe=ie(e))&&ue?ue.p(e,t):(ue.d(1),ue=oe(e),ue&&(ue.c(),ue.m(D,null)))},d(e){e&&m(t)
for(let e=0;e<se.length;e+=1)se[e].d()
ue.d()}}}function O(e){let t
return{c(){t=p("Loading...")},m(e,l){h(e,t,l)},p:b,d(e){e&&m(t)}}}function V(e){let t,l={ctx:e,current:null,token:null,hasCatch:!1,pending:O,then:R,catch:J}
return j(e[12](),l),{c(){t=v("div"),l.block.c(),d(t,"id","fshQuestContainer"),d(t,"class","svelte-1ltzvr")},m(e,s){h(e,t,s),l.block.m(t,l.anchor=null),l.mount=()=>t,l.anchor=null},p(t,s){U(l,e=t,s)},d(e){e&&m(t),l.block.d(),l.token=null,l=null}}}function X(e){let t
return{c(){t=p("Quest Book")},m(e,l){h(e,t,l)},d(e){e&&m(t)}}}function D(e){let t,l
return t=new G({props:{visible:e[2],$$slots:{title:[X],default:[V]},$$scope:{ctx:e}}}),t.$on("close",e[15]),{c(){n(t.$$.fragment)},m(e,s){r(t,e,s),l=!0},p(e,l){const s={}
4&l[0]&&(s.visible=e[2]),1019&l[0]|1024&l[1]&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){l||(c(t.$$.fragment,e),l=!0)},o(e){i(t.$$.fragment,e),l=!1},d(e){o(t,e)}}}function E(e,t){return e.toUpperCase().includes(t.toUpperCase())}function ee(e,l,s){let a,n,r,{seasonal:c=!1}=l,{status:i="active"}=l,{visible:o=!0}=l,v=u("hideQuestNames").split(",")
function d(){g("hideQuestNames",v.join(","))}let h="",m="",p=0,b=6e3,k=[]
const z={active:e=>e.current_stage>0&&e.max_stage>e.current_stage,notStarted:e=>0===e.current_stage,completed:e=>e.current_stage===e.max_stage,hidden:e=>v.includes(e.name)}
let w=""
function x(e){w===e?k.reverse():"string"==typeof k[0][e]?k.sort(((t,l)=>_(t[e],l[e]))):k.sort(((t,l)=>t[e]-l[e])),s(17,k),w=e}return e.$$set=e=>{"seasonal"in e&&s(0,c=e.seasonal),"status"in e&&s(1,i=e.status),"visible"in e&&s(2,o=e.visible)},e.$$.update=()=>{var t,l,o,u
131073&e.$$.dirty[0]&&s(7,a=k.filter((e=>e.seasonal===c))),128&e.$$.dirty[0]&&s(9,n=a.filter(z.completed).length/a.length),65786&e.$$.dirty[0]&&s(8,r=a.filter(z[i]).filter((e=>v.includes(e.name)===("hidden"===i))).filter((t=h,l=m,o=p,u=b,e=>e.min_level>=o&&e.min_level<=u&&E(e.realm_name,l)&&E(e.name,t))))},[c,i,o,h,m,p,b,a,r,n,function(e){s(16,v=[...v,e.name]),d()},function(e){s(16,v=v.filter((t=>t!==e.name))),d()},async function(){const e=await t(B)
s(17,k=e.r.map((e=>({...e,realm_name:e.realm.name}))))},z,x,function(){s(2,o=!1)},v,k,function(){c=this.__value,s(0,c)},[[],[]],function(){c=this.__value,s(0,c)},function(){i=this.__value,s(1,i)},function(){i=this.__value,s(1,i)},function(){i=this.__value,s(1,i)},function(){i=this.__value,s(1,i)},function(){h=this.value,s(3,h)},function(){p=f(this.value),s(5,p)},function(){b=f(this.value),s(6,b)},function(){m=this.value,s(4,m)},()=>x("name"),()=>x("min_level"),()=>x("realm_name"),()=>x("current_stage")]}var te=class extends l{constructor(e){super(),s(this,e,ee,D,a,{seasonal:0,status:1,visible:2},null,[-1,-1])}}
let le
function se(){return le?le.$set({visible:!0}):le=new te({target:document.body}),le}export{se as default}
//# sourceMappingURL=questbook-f962e5ec.js.map
