import{a as It}from"./chunk-FE7TX2M6.js";import{a as At,b as Rt,c as qt}from"./chunk-BMWEIEIT.js";import{a as Ft}from"./chunk-DXXJ65VM.js";import{b as ft}from"./chunk-C6EYJ6K4.js";import{a as zt}from"./chunk-ICQDHAVX.js";import{a as D}from"./chunk-E35I3ACJ.js";import"./chunk-B7X7TQBP.js";import{a as Et}from"./chunk-2STV335M.js";import{a as st}from"./chunk-TDUZZ733.js";import"./chunk-PZDGCOKP.js";import{B as Bt,O as z,P as F,R as $t,S as Lt,V as q,W as P,X as M,Y as V,Z as O,a as b,b as it,d as R,o as f,p as y,q as v,r as tt,s as p,t as S,u as k,w as H,z as _}from"./chunk-L6GQNQR4.js";import{a as Ht}from"./chunk-FWGO5OVV.js";import{a as ct}from"./chunk-4SJZAQQ6.js";import{a as at}from"./chunk-5AG5V3SV.js";import"./chunk-LU7QE7AL.js";import{a as Q}from"./chunk-DNEZA6IN.js";import{a as jt}from"./chunk-SVQKATET.js";import"./chunk-JZ3WGSMX.js";import{a as A}from"./chunk-TRNMZZEK.js";import{a as B}from"./chunk-5ECB7X7D.js";import"./chunk-3UCDRIAV.js";import{a as lt}from"./chunk-U3HUZOSO.js";import"./chunk-PMAGLG7V.js";import{a as St}from"./chunk-RNIUOJRT.js";import{a as rt}from"./chunk-XSQXGOC6.js";import"./chunk-H26KFXOF.js";import"./chunk-PPK4OJWZ.js";import"./chunk-7TR27PES.js";import{a as Tt}from"./chunk-Y7SJWUHU.js";import{a as Y}from"./chunk-S7ZKFSNJ.js";import{a as $}from"./chunk-LL7EZAKT.js";import"./chunk-HSLYILSV.js";import"./chunk-HI53DSDF.js";import{a as vt}from"./chunk-OSFTM2FV.js";import{a as yt}from"./chunk-CMTYGPMG.js";import{a as Ct}from"./chunk-MHV4ZIP3.js";import"./chunk-DEJU4WFB.js";import{b as kt}from"./chunk-HQTGHXRS.js";import{a as wt}from"./chunk-VK2Q3AUA.js";import"./chunk-5H66GZ4Q.js";import"./chunk-FFFKYVLG.js";import{a as L}from"./chunk-PDSYNNV7.js";import"./chunk-FS5GA4BE.js";import{a as K,b as x}from"./chunk-UX7PVUMC.js";import"./chunk-7EBZL5GD.js";import"./chunk-UGFNEEAM.js";import"./chunk-KDLHHGCJ.js";import"./chunk-WBGREN3P.js";import"./chunk-SOCGTSZG.js";import{a as Nt}from"./chunk-G24MBLFU.js";import"./chunk-3HXRWLGC.js";import"./chunk-OZW2BU7Q.js";import"./chunk-CJWCCIGF.js";import{a as Z}from"./chunk-YKB3MUO2.js";import{X as ot,ua as bt}from"./chunk-E427CPYE.js";import"./chunk-7MAPWPFS.js";function Jt(t){t.previousElementSibling&&at(ct(t.previousElementSibling.href))}var Wt=t=>ct(t.cells[0].children[0].href);function Yt(t){let e=t.parentNode.parentNode.parentNode.parentNode,n=D(e,3,0).map(Wt).join();at(n)}function Zt(t){let{target:e}=t;rt("[b]",e)&&Jt(e),rt("all",e)&&Yt(e)}function Kt(t){yt("fshBl",t.target)&&Zt(t)}function xt(t){B(t.cells[0],' <button class="fshBl fshXSmall">[b]</button>')}function te(t){D(t,3,0).forEach(xt),B(t.rows[0].cells[0],' <button class="fshBl fshXSmall">all</button>')}function ee(t,e){return t.rows.length>1&&e>1}function ne(t){Z(t).filter(ee).forEach(te),Nt(t[1],Kt)}function mt(t){t.length>2&&ne(t)}function oe(t,e,n){return`<br><span class="fshBlue"> (${ft(At(n-e,t),2)}% Current <br>${ft(t*100/n,2)}% Total<br>${Rt(t,n,e)})`}function re(t){let e=t.hp.split("/");B(t.tr.cells[3],oe(Number($(t.tr.cells[3])),Number(e[0]),Number(e[1])))}function ut(t){!t.active||re(t)}function Pt(t,e,n){let r=t.slice();return r[4]=e[n][0],r[5]=e[n][1],r}function Mt(t){let e,n,r=t[4]+"",u,s,i,o=t[5].cooldownText+"",c,l,m,d=t[5].seen+"",T,h;return{c(){e=p("tr"),n=p("td"),u=S(r),s=k(),i=p("td"),c=S(o),l=k(),m=p("td"),T=S(d),h=k(),_(n,"class","svelte-1g6lyd8"),_(i,"class","cd svelte-1g6lyd8"),_(m,"class","svelte-1g6lyd8")},m(N,E){y(N,e,E),f(e,n),f(n,u),f(e,s),f(e,i),f(i,c),f(e,l),f(e,m),f(m,T),f(e,h)},p:b,d(N){N&&v(e)}}}function le(t){let e,n,r,u,s=t[0](),i=[];for(let o=0;o<s.length;o+=1)i[o]=Mt(Pt(t,s,o));return{c(){e=p("table"),n=p("tbody"),r=p("tr"),r.innerHTML=`<td class="header svelte-1g6lyd8">Titan</td> 
      <td class="header svelte-1g6lyd8">Cooldown</td> 
      <td class="header svelte-1g6lyd8">Visible</td>`,u=k();for(let o=0;o<i.length;o+=1)i[o].c();_(e,"class","svelte-1g6lyd8")},m(o,c){y(o,e,c),f(e,n),f(n,r),f(n,u);for(let l=0;l<i.length;l+=1)i[l].m(n,null)},p(o,[c]){if(c&1){s=o[0]();let l;for(l=0;l<s.length;l+=1){let m=Pt(o,s,l);i[l]?i[l].p(m,c):(i[l]=Mt(m),i[l].c(),i[l].m(n,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=s.length}},i:b,o:b,d(o){o&&v(e),tt(i,o)}}}function ie(t,e,n){let{theTitans:r}=e,u=([,o])=>o.coolTime>Y,s=([,o],[,c])=>o.coolTime-c.coolTime,i=()=>L(r).filter(u).sort(s);return t.$$set=o=>{"theTitans"in o&&n(1,r=o.theTitans)},[i,r]}var pt=class extends O{constructor(e){super(),V(this,e,ie,le,R,{theTitans:1})}},Vt=pt;function Ot(t,e,n){let r=t.slice();return r[23]=e[n][0],r[24]=e[n][1],r[25]=e,r[26]=n,r}function se(t){return{c:b,m:b,p:b,i:b,o:b,d:b}}function ce(t){let e,n,r,u,s,i,o=t[2],c=[];for(let l=0;l<o.length;l+=1)c[l]=Qt(Ot(t,o,l));return r=new st({props:{$$slots:{default:[ae]},$$scope:{ctx:t}}}),r.$on("click",t[7]),s=new st({props:{$$slots:{default:[fe]},$$scope:{ctx:t}}}),s.$on("click",t[8]),{c(){for(let l=0;l<c.length;l+=1)c[l].c();e=k(),n=p("div"),q(r.$$.fragment),u=k(),q(s.$$.fragment),_(n,"class","svelte-16ajzwe")},m(l,m){for(let d=0;d<c.length;d+=1)c[d].m(l,m);y(l,e,m),y(l,n,m),P(r,n,null),f(n,u),P(s,n,null),i=!0},p(l,m){if(m&68){o=l[2];let h;for(h=0;h<o.length;h+=1){let N=Ot(l,o,h);c[h]?c[h].p(N,m):(c[h]=Qt(N),c[h].c(),c[h].m(e.parentNode,e))}for(;h<c.length;h+=1)c[h].d(1);c.length=o.length}let d={};m&134217728&&(d.$$scope={dirty:m,ctx:l}),r.$set(d);let T={};m&134217728&&(T.$$scope={dirty:m,ctx:l}),s.$set(T)},i(l){i||(z(r.$$.fragment,l),z(s.$$.fragment,l),i=!0)},o(l){F(r.$$.fragment,l),F(s.$$.fragment,l),i=!1},d(l){tt(c,l),l&&v(e),l&&v(n),M(r),M(s)}}}function Qt(t){let e,n,r,u=t[23]+"",s,i,o,c;function l(){t[13].call(n,t[25],t[26])}return{c(){e=p("label"),n=p("input"),r=k(),s=S(u),i=k(),_(n,"type","checkbox"),_(e,"class","svelte-16ajzwe")},m(m,d){y(m,e,d),f(e,n),n.checked=t[24],f(e,r),f(e,s),y(m,i,d),o||(c=[H(n,"change",l),H(n,"change",t[6])],o=!0)},p(m,d){t=m,d&4&&(n.checked=t[24]),d&4&&u!==(u=t[23]+"")&&Bt(s,u)},d(m){m&&v(e),m&&v(i),o=!1,it(c)}}}function ae(t){let e;return{c(){e=S("Select All")},m(n,r){y(n,e,r)},d(n){n&&v(e)}}}function fe(t){let e;return{c(){e=S("Select None")},m(n,r){y(n,e,r)},d(n){n&&v(e)}}}function me(t){return{c:b,m:b,p:b,i:b,o:b,d:b}}function ue(t){let e,n,r,u,s,i,o,c,l,m,d,T,h,N,E,G,C,j,et,J,U,I,X,W,w={ctx:t,current:null,token:null,hasCatch:!1,pending:me,then:ce,catch:se,blocks:[,,,]};return $t(et=t[3](),w),{c(){e=p("table"),n=p("tbody"),r=p("tr"),r.innerHTML='<td class="header svelte-16ajzwe" colspan="3"></td>',u=k(),s=p("tr"),i=p("td"),o=p("label"),c=p("input"),l=S(`
          Current`),m=k(),d=p("label"),T=p("input"),h=S(`
          History`),N=k(),E=p("tr"),E.innerHTML='<td class="header svelte-16ajzwe" colspan="3"></td>',G=k(),C=p("tr"),j=p("td"),w.block.c(),J=k(),U=p("tr"),U.innerHTML='<td class="header svelte-16ajzwe" colspan="3"></td>',_(c,"type","checkbox"),_(o,"class","svelte-16ajzwe"),_(T,"type","checkbox"),_(d,"class","svelte-16ajzwe"),_(i,"colspan","3"),_(i,"class","svelte-16ajzwe"),_(j,"colspan","3"),_(j,"class","svelte-16ajzwe"),_(e,"class","svelte-16ajzwe")},m(a,g){y(a,e,g),f(e,n),f(n,r),f(n,u),f(n,s),f(s,i),f(i,o),f(o,c),c.checked=t[0],f(o,l),f(i,m),f(i,d),f(d,T),T.checked=t[1],f(d,h),f(n,N),f(n,E),f(n,G),f(n,C),f(C,j),w.block.m(j,w.anchor=null),w.mount=()=>j,w.anchor=null,f(n,J),f(n,U),I=!0,X||(W=[H(c,"change",t[11]),H(c,"change",t[4]),H(T,"change",t[12]),H(T,"change",t[5])],X=!0)},p(a,[g]){t=a,g&1&&(c.checked=t[0]),g&2&&(T.checked=t[1]),Lt(w,t,g)},i(a){I||(z(w.block),I=!0)},o(a){for(let g=0;g<3;g+=1){let nt=w.blocks[g];F(nt)}I=!1},d(a){a&&v(e),w.block.d(),w.token=null,w=null,X=!1,it(W)}}}var Ut="fsh_titanFilter";function pe(t,e,n){let{theTitans:r}=e,{titanRows:u}=e,s=!0,i=!0,o=[],c=([a],[g])=>Ct(a,g),l=()=>K(Ut),m=()=>x(Ut,{current:s,history:i,titans:o}),d=({titanName:a})=>o.find(([g])=>g===a)[1],T=()=>L({...Q(L(r).map(([a])=>[a,!0])),...Q(o)}).sort(c);function h(a){return!((a.active&&s||!a.active&&i)&&d(a))}function N([a,g]){let nt=Z(zt(a.tr).rows),_t=a.tr.rowIndex;nt.slice(_t,_t+6).forEach(Gt=>Et(Gt,g)),a.visible=!g}function E(){u.map(a=>[a,h(a)]).filter(([a,g])=>a.visible===g).forEach(N)}async function G(){let a=await l();a&&n(0,{current:s,history:i,titans:o}=a,s,n(1,i),n(2,o)),n(2,o=T()),E()}function C(){m(),E()}function j(){A("TitanFilter","toggleCurrent"),C()}function et(){A("TitanFilter","toggleHistory"),C()}function J(){A("TitanFilter","toggleTitan"),C()}function U(){A("TitanFilter","selectAll"),n(2,o=o.map(([a])=>[a,!0])),C()}function I(){A("TitanFilter","selectNone"),n(2,o=o.map(([a])=>[a,!1])),C()}function X(){s=this.checked,n(0,s)}function W(){i=this.checked,n(1,i)}function w(a,g){a[g][1]=this.checked,n(2,o)}return t.$$set=a=>{"theTitans"in a&&n(9,r=a.theTitans),"titanRows"in a&&n(10,u=a.titanRows)},[s,i,o,G,j,et,J,U,I,r,u,X,W,w]}var dt=class extends O{constructor(e){super(),V(this,e,pe,ue,R,{theTitans:9,titanRows:10})}},Xt=dt;function de(t){let e,n,r,u,s,i;return r=new Vt({props:{theTitans:t[0]}}),s=new Xt({props:{theTitans:t[0],titanRows:t[1]}}),{c(){e=p("tr"),n=p("td"),q(r.$$.fragment),u=k(),q(s.$$.fragment),_(n,"colspan","3")},m(o,c){y(o,e,c),f(e,n),P(r,n,null),f(n,u),P(s,n,null),i=!0},p(o,[c]){let l={};c&1&&(l.theTitans=o[0]),r.$set(l);let m={};c&1&&(m.theTitans=o[0]),c&2&&(m.titanRows=o[1]),s.$set(m)},i(o){i||(z(r.$$.fragment,o),z(s.$$.fragment,o),i=!0)},o(o){F(r.$$.fragment,o),F(s.$$.fragment,o),i=!1},d(o){o&&v(e),M(r),M(s)}}}function he(t,e,n){let{theTitans:r}=e,{titanRows:u}=e;return t.$$set=s=>{"theTitans"in s&&n(0,r=s.theTitans),"titanRows"in s&&n(1,u=s.titanRows)},[r,u]}var ht=class extends O{constructor(e){super(),V(this,e,he,de,R,{theTitans:0,titanRows:1})}},Dt=ht;function ge(t,e,n){return new Dt({anchor:t.rows[5],props:{theTitans:e,titanRows:n},target:t.children[0]})}var _e=t=>t.includes("until")?Ft(t.replace("Cooldown until: ","")):0;function be(t){let e=$(t.nextElementSibling.cells[0]);return{cooldownText:e,coolTime:_e(e),seen:"yes"}}var ke=({titanName:t,tr:e})=>[t,be(e)];function Te(t,e){return Q(L(t).filter(([n])=>!e[n]).filter(([,n])=>n.coolTime>Y).map(([n,r])=>[n,{...r,seen:"no"}]))}function we(t,e){let n=Q(Ht(e,"titanName").map(ke));return{...n,...t&&Te(t,n)}}async function gt(t,e){let n=we(await K("fsh_titans"),e);t[0].rows.length>5&&ge(t[0],n,e),x("fsh_titans",n)}function ye(t){let e=encodeURIComponent(t.titanName),[n]=t.tr.cells[0].children,r=jt({href:`${ot}creatures&search_name=${e}`,target:"_blank"});lt(r,n),lt(t.tr.cells[0],r)}function ve(t){let[,e]=t.tr.cells,n=$(e);wt(`<a href="${ot}realms&search_name=${n}" target="_blank">${n}</a>`,e)}function Ne(t){B(t.tr.cells[0],t.titanName)}function Se(t){ye(t),Ne(t)}function Ce(t){ut(t),Se(t),ve(t)}function Ee(t){return It(St("img",t))}var je=t=>({hp:$(t.cells[2]),titanName:qt(Ee(t)),tr:t,visible:!0}),Be=t=>({...t,active:!t.hp.includes("-")}),$e=t=>D(t[1],4,0).map(je).map(Be);function Le(){if(vt())return;let t=Tt(bt,kt);mt(t);let e=$e(t);e.forEach(Ce),gt(t,e)}export{Le as default};
//# sourceMappingURL=injectScouttower-A542NU7B.js.map
