import{a as V,b as D}from"./chunk-LX5L4B3T.js";import"./chunk-TMHWAQJN.js";import"./chunk-XWANSCMS.js";import{a as E,b as H}from"./chunk-HPQR4O4V.js";import{a as _}from"./chunk-CHBH4OUE.js";import{a as q}from"./chunk-BDRC5WHN.js";import{a as T}from"./chunk-SJ34J5WR.js";import"./chunk-4ULUKIZ4.js";import"./chunk-R2H7X7CU.js";import"./chunk-ZL7L5RNG.js";import{a as d}from"./chunk-66WWLLVY.js";import{a as p}from"./chunk-6JEBQQXB.js";import"./chunk-WSSW4LE4.js";import"./chunk-XAK3RXQ4.js";import{a as I}from"./chunk-JKCGPSLU.js";import"./chunk-KZMROKUM.js";import{a as m}from"./chunk-7ISBQY3F.js";import"./chunk-LJGQ6BIE.js";import"./chunk-RXZ343DN.js";import"./chunk-YYF4XEZN.js";import"./chunk-ODP3NXYP.js";import"./chunk-3FN7LFWY.js";import{a}from"./chunk-GGOZ3OO7.js";import"./chunk-MO44YMNC.js";import"./chunk-QB5S66YQ.js";import{a as O}from"./chunk-YXNNMQHM.js";import{a as N}from"./chunk-EMIYNX52.js";import{a as w}from"./chunk-UHDN7CXZ.js";import"./chunk-PVJ32AKX.js";import"./chunk-QMUMVPKQ.js";import{a as s}from"./chunk-ANHXFVGQ.js";import{a as C,b as k}from"./chunk-BWQ25E6K.js";import"./chunk-CU6VQLH4.js";import"./chunk-2XSC56S6.js";import"./chunk-4D7SULLS.js";import"./chunk-RGJLWSH5.js";import"./chunk-IHC7UOJU.js";import{a as R}from"./chunk-D545QQO5.js";import{a as u,b as i}from"./chunk-PIEHJDPR.js";import"./chunk-Q3ZGTWEX.js";import{a as M}from"./chunk-Z5QM5T22.js";import{j as x}from"./chunk-N7OQJWUZ.js";import"./chunk-CAZ242LS.js";function F(e,t){let n=$("<div/>").append(e[t][0]);return $("img",n).addClass("fshImgCntr"),[n.html(),e[t][1],e[t][2],e[t][3]*100+e[t][4]+1]}function v(e){return N(e).map(s(F,e))}var j,S;function J(e){let t=e.match(x);if(t)return Number(t[1])}var K=[()=>j,e=>J(e[0])!==T(),e=>p(e[2])>=V(),e=>p(e[2])<=D()];function X(e){return K.every(t=>t(e))}function Y(e,t){X(t)&&$("td",e).eq(2).addClass("lvlHighlight")}function Z(e){return{columns:[{title:"Guild",class:"dt-center",orderable:!1},{title:"Name",class:"dt-center"},{title:"Level",class:"dt-center"},{title:"Page/Index",class:"dt-center"}],createdRow:Y,data:e,deferRender:!0,lengthMenu:[[30,60,-1],[30,60,"All"]],order:[3,"desc"],pageLength:30,stateDuration:0,stateSave:!0}}function B(e,t){j=i("highlightPlayersNearMyLvl"),S=$("#fshInv",e).DataTable(Z(t))}function h(){S.draw()}function g(e){(e.target.id==="fshMinLvl"||e.target.id==="fshMaxLvl")&&h()}function y(){let e=i("lastOnlineCheck");return m-e>3e5?'<span> (takes a while to refresh so only do it if you really need to) </span><span id="fshRefresh" class="fshLink">[Refresh]</span>':`<span>[ Wait ${Math.round(300-(m-e)/1e3)}s ]</span>`}function G(e,t){return parseInt($(e,t).val(),10)}function A(e,t){q(t)||a(e,t)}function ee(e,t,n){let o=G("#fshMinLvl",e),f=G("#fshMaxLvl",e);A("onlinePlayerMinLvl",o),A("onlinePlayerMaxLvl",f);let z=w(p(n[2]),0);return H(E,z,o,f)}function P(e){$.fn.dataTable.ext.search.push(s(ee,e)),$("#fshOutput",e).html(`<div align=right>Min lvl:<input value="${i("onlinePlayerMinLvl")}" class="fshNumberInput" type="number" id="fshMinLvl" /> Max lvl:<input value="${i("onlinePlayerMaxLvl")}" class="fshNumberInput" type="number" id="fshMaxLvl" /> <input id="fshReset" type="button" value="Reset"/></div><table id="fshInv" class="allow stripe hover"></table>`)}function L(e){a("onlinePlayerMinLvl",u.onlinePlayerMinLvl),a("onlinePlayerMaxLvl",u.onlinePlayerMaxLvl),$("#fshMinLvl",e).val(u.onlinePlayerMinLvl),$("#fshMaxLvl",e).val(u.onlinePlayerMaxLvl),h()}var r=0,l=0,c=0,b=0;function Q(e){l=e||{},P(r),B(r,v(l))}function te(){c===b&&(k("fsh_onlinePlayers",l),Q(l))}function ne(e,t){return l[e]&&l[e][3]>t}function re(e,t,n){return[n.eq(0).html(),n.eq(1).html(),n.eq(2).text(),e,t]}function le(e,t,n){let o=$("td",$(n)),f=o.eq(1).text();ne(f,e)||(l[f]=re(e,t,o))}function ie(e,t){let n=t.attr("value");$('#pCC img[src$="/world/icon_action_view.png',e).parent().parent().parent().each(s(le,n))}function ae(e){let t=e.parent().text().match(/(?<page>\d+)/);return parseInt(t.groups.page,10)}function oe(e,t){b=ae(t);for(let n=2;n<=b;n+=1)d(n).then(e)}function U(e){$("#fshOutput",r).append(e)}function W(e){U(` ${c+1}`);let t=I(e),n=$("#pCC input.custominput",t).first();ie(t,n),c+=1,c===1&&oe(W,n),te()}function se(){$("#fshRefresh",r).hide(),c=0,l={},d(1).then(W),a("lastOnlineCheck",m),U("Parsing online players...")}function fe(e){e.target.id==="fshRefresh"&&se(),e.target.id==="fshReset"&&L(r)}function ue(){r.html(`<span><b>Online Players</b></span>${y()}<div id="fshOutput"></div>`),C("fsh_onlinePlayers").then(Q),R(r[0],fe),M(r[0],"keyup",g)}function me(e){O()||(r=e?$(e):$("#pCC"),_().then(ue))}export{me as default};
//# sourceMappingURL=injectOnlinePlayers-3PDOIRHM.js.map
