import{a as F}from"./chunk-XR2DZFPS.js";import{a as w}from"./chunk-DPFMLBRO.js";import{a as q}from"./chunk-5MFIR2R5.js";import{a as v}from"./chunk-DJURCDAC.js";import"./chunk-K4A73PNG.js";import{a as p}from"./chunk-MPQTMPMU.js";import{a as s}from"./chunk-U6JCSF56.js";import"./chunk-XAX5HKDY.js";import{a as m}from"./chunk-LOTO2GZ7.js";import{a as W}from"./chunk-E56BPSNF.js";import"./chunk-EY5RBC27.js";import"./chunk-NXLFQQSK.js";import"./chunk-ADYMHPX2.js";import{a as B}from"./chunk-67CTFPBW.js";import{a as c}from"./chunk-PSHFCZCL.js";import"./chunk-ZXTXYIKP.js";import{a as V}from"./chunk-JKCGPSLU.js";import{a as J}from"./chunk-KZMROKUM.js";import{b as d}from"./chunk-7ISBQY3F.js";import"./chunk-LJGQ6BIE.js";import"./chunk-RXZ343DN.js";import{a as u}from"./chunk-ODP3NXYP.js";import"./chunk-3FN7LFWY.js";import{a as U}from"./chunk-GGOZ3OO7.js";import"./chunk-MO44YMNC.js";import"./chunk-QB5S66YQ.js";import{a as I}from"./chunk-YXNNMQHM.js";import{a as S}from"./chunk-MXS6U56Z.js";import{a as x}from"./chunk-4Q2W2AV2.js";import{a as g}from"./chunk-QJIXYOVR.js";import"./chunk-PVJ32AKX.js";import"./chunk-QMUMVPKQ.js";import"./chunk-ANHXFVGQ.js";import"./chunk-2XSC56S6.js";import"./chunk-4D7SULLS.js";import"./chunk-RGJLWSH5.js";import"./chunk-IHC7UOJU.js";import{a as H}from"./chunk-D545QQO5.js";import{b as P}from"./chunk-PIEHJDPR.js";import"./chunk-Q3ZGTWEX.js";import"./chunk-Z5QM5T22.js";import{W as h}from"./chunk-N7OQJWUZ.js";import{a as o}from"./chunk-CAZ242LS.js";function l(t){return J({cmd:"bounty",page:t})}function Z(t){return t.children[0].tagName==="A"?t.children[0]:t.children[0].children[0]}function _(t){return B("img",t[2]).title}function b(t){let e=Z(t[0]);return{target:u(e),link:e.href,lvl:u(e.nextSibling).replace(/[[|\]]/g,""),reward:u(t[2]),rewardType:_(t),posted:u(t[3]),xpLoss:u(t[4])}}var i,n,N,E,y,R;function tt(t){return!/No bounties active/.test(t.rows[1].cells[0].innerHTML)}function et(t){return{...b(t),progress:u(t[5])}}function rt(t){for(let e=1;e<t.rows.length-2;e+=2){let r=t.rows[e].cells,L=et(r);i.bounty.push(L)}}function nt(t){tt(t)&&rt(t)}function G(t){let e=g("bounty-info",t);if(!e)return;let r=e.parentNode.parentNode.previousElementSibling.children[0].children[0];i={},i.bounty=[],i.isRefreshed=!0,i.lastUpdate=d,r&&nt(r),N=!0}function ot(){return i&&d-i.lastUpdate>E}function it(){return n&&d-n.lastUpdate>E}function st(){return ot()||it()}function K(){i=W("bountyList"),n=W("wantedList"),E=P("bountyListRefreshTime"),y=P("bwNeedsRefresh"),!y&&st()&&(y=!0)}function X(){n={},n.bounty=[],n.isRefreshed=!0,n.lastUpdate=d,N=!1,R=q("wantedNames"),U("bwNeedsRefresh",!1)}function at(t){let e=t[6];return c(e)!=="[n/a]"?e.children[0].children[0].getAttribute("onclick"):""}function ft(t){return{...b(t),offerer:c(t[1].children[0].children[0]),tickets:c(t[5]),accept:at(t)}}var ut=[()=>R.includes("*"),t=>R.includes(t),(t,e)=>o.wantedGuildMembers&&c(e.cells[6])==="[n/a]"];function ct(t,e){return c(e.cells[6])!=="[active]"&&ut.some(r=>r(t,e))}function mt(t,e){ct(t,e)&&n.bounty.push(ft(e.cells))}function O(t){for(let e=1;e<t.rows.length-2;e+=2){let r=t.rows[e],L=c(r.cells[0].children[0].children[0]);if(L==="[ No bounties available. ]")break;mt(L,r)}}var a=0,f=0;function z(){return p({className:"minibox"})}function Q(){o.enableActiveBountyList&&(a=z(),s(S,a)),o.enableWantedList&&(f=z(),s(S,f))}var $=0;function pt(t){return`Level:  ${t.lvl}<br>Reward: ${t.reward} ${t.rewardType}<br>XP Loss Remaining: ${t.xpLoss}<br>Progress:  ${t.progress}`}function T(){m("bountyList",i),x("",a);let t=p({innerHTML:`<a class="fshBountyHeader" href="${h}">Active Bounties</a> `});$=w({className:"xxsLink",textContent:"Reset"}),s(t,$),s(a,t);let e="";if(i.bounty.length===0)e+='<div class="xsOrange">[No active bounties]</div>';else for(let r of i.bounty)e+=`<a href="${r.link}" class="xsKhaki tip-static" data-tipped="${pt(r)}">${r.target}</a><br>`;v(a,e)}var A=0;function dt(t){return`Target Level:  ${t.lvl}<br>Offerer: ${t.offerer}<br>Reward: ${t.reward} ${t.rewardType}<br>XP Loss Remaining: ${t.xpLoss}<br>Posted: ${t.posted}<br>Tickets Req.:  ${t.tickets}`}function lt(t){return t.accept?`<span class="xsGreen" onclick="${t.accept}">[a]</span>&nbsp;`:""}function k(){m("wantedList",n),x("",f);let t=p({innerHTML:`<a class="fshBountyHeader" href="${h}">Wanted Bounties</a> `});A=w({className:"xxsLink",textContent:"Reset"}),s(t,A),s(f,t);let e="";if(n.bounty.length===0)e+='<div class="xsOrange">[No wanted bounties]</div>';else for(let r of n.bounty)e+=`${lt(r)}<a class="xsKhaki tip-static" data-tipped="${dt(r)}" href="${r.link}">${r.target}</a><br>`;v(f,e)}var j,C;function bt(t){let e=B('#pCC input[name="page"]',t);if(!e)return;j=Number(e.value),C=Number(e.parentNode.innerHTML.match(/of&nbsp;(\d*)/)[1]);let r=g("bounty-info",t).parentNode.parentNode.nextElementSibling.children[0].children[0];r&&O(r)}function yt(t){o.enableActiveBountyList&&!N&&(G(t),T())}function D(t){let e=V(t);yt(e),o.enableWantedList&&(bt(e),j<C?l(j+1).then(D):k())}function Lt(t,e){e&&(n.isRefreshed=!1,k()),t&&(i.isRefreshed=!1,T())}var gt=[()=>!i,()=>!n,()=>y];function ht(){return gt.some(F)}function M(t,e){K(),ht()?(X(),l(1).then(D)):Lt(t,e)}function Y(t){t.target===$&&(m("bountyList",null),M(o.enableActiveBountyList,o.enableWantedList)),t.target===A&&(m("wantedList",null),M(o.enableActiveBountyList,o.enableWantedList))}function vt(){a&&H(a,Y),f&&H(f,Y)}function xt(){I()||(Q(),vt(),M(o.enableActiveBountyList,o.enableWantedList))}export{xt as default};
//# sourceMappingURL=activeWantedBounties-CFNK7XNI.js.map
