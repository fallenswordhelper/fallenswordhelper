import{a as Kt,b as re}from"./chunk-YQ3XQHWP.js";import{a as ee}from"./chunk-G6YL5QMG.js";import{a as Jt,b as Yt}from"./chunk-TTYVOPIW.js";import{a as Wt}from"./chunk-ZYHML7HJ.js";import{a as Q}from"./chunk-4FT6IZ5E.js";import{a as te}from"./chunk-WVZBW3DY.js";import{a as Zt}from"./chunk-5TRKRJDB.js";import{a as _t}from"./chunk-V45SJJZM.js";import{a as G}from"./chunk-3ZTT3JGB.js";import{a as Qt}from"./chunk-Y57XX7QV.js";import{a as Ot}from"./chunk-FDY5YZU6.js";import{a as zt}from"./chunk-43VPT366.js";import"./chunk-VGKK475Q.js";import{a as Vt}from"./chunk-VDSFVSVH.js";import"./chunk-DVOKY4MG.js";import{a as O}from"./chunk-YLB4ZPHF.js";import{a as Ut}from"./chunk-R5WOJ7GX.js";import{a as qt}from"./chunk-33U5GL4C.js";import{a as Ft}from"./chunk-COXIFJJW.js";import"./chunk-X5TLXNZB.js";import{a as _}from"./chunk-SWGHI6EY.js";import{a as Lt}from"./chunk-4FSPVNQG.js";import{a as Xt}from"./chunk-AXGSFJMJ.js";import"./chunk-IQFV6W2U.js";import"./chunk-SESBBU2F.js";import{a as s}from"./chunk-BLOLTXSI.js";import"./chunk-LC4JONE7.js";import{a}from"./chunk-NCMEUMLE.js";import"./chunk-G2RN5QP2.js";import{a as n}from"./chunk-RCXM6IKN.js";import{a as o}from"./chunk-M23P7YNW.js";import{a as xt}from"./chunk-3RB7HJ6G.js";import"./chunk-KGG4Z2YI.js";import{a as kt}from"./chunk-PV6HFEQR.js";import{a as wt}from"./chunk-JGFZLKTI.js";import"./chunk-45ST4BSH.js";import{a as P}from"./chunk-NBRMVJS6.js";import{d as $}from"./chunk-SDYJ5HZW.js";import{a as Ht}from"./chunk-DIOS3EFN.js";import{a as D}from"./chunk-JAGCOGSP.js";import"./chunk-G74HYO4G.js";import{a as Pt}from"./chunk-DIYPVMCF.js";import"./chunk-CFDFCOR3.js";import"./chunk-ON76EM3G.js";import{a as vt}from"./chunk-5TD4FW2O.js";import"./chunk-J3GDMVIU.js";import{b as m}from"./chunk-HZOZPFQX.js";import{a as f}from"./chunk-FH2ZQIVR.js";import"./chunk-ZC2VG7OL.js";import{a as $t,b as Dt,c as It,d as Gt}from"./chunk-HPKOGFJP.js";import{a as jt}from"./chunk-YVXWPXYO.js";import"./chunk-PFZEGHOR.js";import"./chunk-DXWRAIAB.js";import"./chunk-TAEVPX54.js";import"./chunk-3H3AFOW3.js";import"./chunk-LSTBONAT.js";import{a as X}from"./chunk-HSQDT2D7.js";import{a as Mt}from"./chunk-B3Y6PSMQ.js";import"./chunk-YZABUIWG.js";import"./chunk-ELWUFZG5.js";import{a as Bt}from"./chunk-Z4DYRJJW.js";import{a as T}from"./chunk-JGAHWCWU.js";import{a as L}from"./chunk-XXK2POF2.js";import"./chunk-3TEITCXC.js";import{a as p}from"./chunk-M5ZUFNEH.js";import{a as Rt}from"./chunk-R7EK2RTK.js";import{a as Et}from"./chunk-RUAHQRDU.js";import"./chunk-IZJ2YJYN.js";import"./chunk-HUBAYN2T.js";import"./chunk-O2AVUBO7.js";import"./chunk-QRS6GHYV.js";import"./chunk-QVWND6LG.js";import{a as R}from"./chunk-MCDZT6O2.js";import"./chunk-52NQXPZP.js";import{a as Ct,b as Nt}from"./chunk-2NTPEDIZ.js";import"./chunk-QKLZ7AT3.js";import{a as St}from"./chunk-2CZQIOBC.js";import"./chunk-SX3746CW.js";import"./chunk-XA4CEPNM.js";import{a as v}from"./chunk-WGYE6OHG.js";import{a as I}from"./chunk-CR3YSYOW.js";import{a as Tt}from"./chunk-KT2BG5B6.js";import{a as F}from"./chunk-QZW3L7VR.js";import{a as C}from"./chunk-5EWVRUCY.js";import{a as M}from"./chunk-S7D27425.js";import{a as At}from"./chunk-PKOOIOYV.js";import"./chunk-LFT5BCCP.js";import"./chunk-LQ2ARGUI.js";import"./chunk-BR5IQZCO.js";import"./chunk-FIOQMJU7.js";import{a as l}from"./chunk-32IJAGRN.js";import"./chunk-BYHOBLWC.js";import"./chunk-A562UK6S.js";import{a as y}from"./chunk-JDVJBZWD.js";import{b as c}from"./chunk-7JP44NWZ.js";import{a as dt}from"./chunk-I57GWZIZ.js";import{a as u}from"./chunk-O2SP7GRB.js";import{G as A,K as bt,Ma as yt,k as H,l as gt,ta as w,va as k,y as ht}from"./chunk-LROIQ2AY.js";import{a as S}from"./chunk-DDP3QCAT.js";import"./chunk-RBWWPJJC.js";var oe=0,ie=1;function Se(t,e){let{mins:r}=P(e.dataset.tipped);return r<44640&&(t[oe]+=1,t[ie]+=Number(y(H,e.dataset.tipped))),t}function we(t){return t.reduce(Se,[0,0])}function z(){let t=T("b",m()).find(D("Members"));if(t){let e=Jt(),r=we(e);t.classList.add("tip-static"),zt(`Active: ${r[oe]}/${e.length}<br>Stamina: ${I(r[ie])}`,t)}}function ne(t,e){let r=y(e,t.replace(/,/g,""));return r?parseInt(r,10):0}function Ce(t,e){let r="";return t>e&&(r="+"),r+I(t-e)}function Ne(t){let e=t.dataset.tipped,r=ne(e,/XP Lock: <b>(?<lockXp>\d*)/),i=ne(e,/XP: <b>(?<realXp>\d*)/);a(t.parentNode.nextElementSibling,` (<b>${Ce(i,r)}</b>)`)}function W(){let t=p('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&Ne(t)}function J(){let t=T(k,m()).slice(-2,-1)[0];if(!t)return;let e=t.rows[0].cells[0],r=n({id:"profile-bio",innerHTML:e.innerHTML});f("",e),o(e,r),Zt()}var Y=0,Z=0;function Ee(t){return Y&&t>=$t()&&t<=Dt()}function Be(t){return Z&&t>=It()&&t<=Gt()}var He=t=>[t,P(t.dataset.tipped).days],Ae=([,t])=>t<7,Re=([t])=>[t,Number(y(gt,t.dataset.tipped))],Pe=([t,e])=>[t.parentNode.parentNode.rowIndex,Ee(e),Be(e)];function Me(){return M('#pCC a[data-tipped*="<td>VL:</td>"]').map(He).filter(Ae).map(Re).map(Pe)}function $e(){return Number(Lt("guild_id"))!==Mt()&&(Y||Z)}var De=t=>t.map(([e])=>`.fshHighlight tr:nth-child(${e+1})`).join(",");function me(t,e){if(t.length){let r=`${De(t)} {background-color: #${e};}`;o(document.body,G(r))}}function Ie(t,e){if(t.length+e.length){let r=L(k,m());r[r.length-1].classList.add("fshHighlight")}}function Ge(){let t=Me(),e=t.filter(([,i])=>i),r=t.filter(([,i,x])=>!i&&x);me(e,"4671C8"),me(r,"FF9900"),Ie(e,r)}function je(){$e()&&Ge()}function K(){Y=c("highlightPlayersNearMyLvl"),Z=c("highlightGvGPlayersNearMyLvl"),je(),c("enableHistoryCompressor")&&J()}function Ve(t){a(t.parentNode,' <span class="smallLink">[b]</span>')}function Ue(t){t.target.className==="smallLink"&&Ft(qt(t.target.previousElementSibling.href))}function tt(){let t=At(`#pCC a[href^="${ht}"]`);Wt([3,t,0,Ve]),v(m(),Ue)}function j(t){return Et({cmd:"guild",subcmd:"conflicts",page:t})}function ae(t,e){f(e,t.insertCell(-1))}function ce(t,e,r){let i=t.insertRow(t.rows.length-2);ae(i,e),ae(i,r)}function qe(t){ce(t,`<a href="${A}conflicts">Active Conflicts</a>`,"Score")}function Fe(t,e){ce(t,e.cells[0].innerHTML,`<b>${e.cells[6].innerHTML}</b>`)}function Xe(t,e,r){e===1&&qe(r),Ot(t,7,0).forEach(l(Fe,r))}function Oe(t,e,r){let i=p("#pCC > table > tbody > tr > td > table",t);i&&i.rows.length>3&&Xe(i,e,r)}function _e(t){return Number(t.nextSibling.textContent.split("\xA0")[2])}function Qe(t,e,r){j(t+1).then(l(e,r))}function se(t,e){let r=Rt(e),i=p('#pCC input[name="page"]',r);if(!i)return;let x=Number(i.value),xe=_e(i);Oe(r,x,t.node),xe>x&&Qe(x,se,t)}function et(t){let[e]=t.rows[6].cells[0].children;e&&j(1).then(l(se,{node:e}))}function ze(t){t.target.id===w&&R(w,!c(w))}function rt(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,r=n({className:"fsh-tracker"}),i=n({innerHTML:`${$(w)}&nbsp;<label class="custombutton" for="tracker">Show</label>`});u(i,"change",ze),o(r,t),o(r,i),Xt(e,r)}function ot(t){return xt("th",t)}var it=0,mt="",E=0,nt=0,V=0,tr=(t,e)=>`${t}<option value="${e}">${e}</option>`,er=t=>`<select name="member">${t.reduce(tr,"")}</select>`,rr=t=>mt!==t;function N(t){return dt(t)?"#DEF":t.toLocaleString()}function or(t,e,r){return`${e}<tr><td>${jt(new Date(r[4]*1e3))}</td><td>${t}</td><td class="fshRight">${N(r[2])}</td><td class="fshRight">${N(r[5])}</td><td class="fshRight">${N(r[1])}</td><td class="fshRight">${N(r[3])}</td><td class="fshRight">${Math.floor(r[1]/r[3]*100)}</td><td class="fshRight">${r[0]}</td><td class="fshRight">${N(r[6])}</td></tr>`}function ir(t,e){return rr(e)?t:t+V[e].reduce(l(or,e),"")}var nr=()=>X(V).reduce(ir,"");function mr(){V&&f(nr(),it),E.classList.remove("fshSpinner")}function pe(){E.classList.add("fshSpinner"),s(3,mr)}function ar(t){mt=t.target.value,pe()}function U(t){if(t){V=t;let e=X(t).sort(Pt);[mt]=e,f(er(e),nt),pe()}}function cr(){let t=ot({textContent:"Member"});return nt=n(),o(t,nt),t}function sr(t){let e=t.createTHead().insertRow(-1);a(e,"<th>Date</th>");let r=cr();o(e,r),a(e,"<th>Level</th><th>VL</th><th>Stam</th><th>Max<br>Stam</th><th>Stam<br>%</th><th>Last<br>Activity<br>(Days)</th><th>GXP</th>")}function lr(t){it=ee(),o(t,it)}function ue(){let t=Qt({id:"tg"});return sr(t),lr(t),u(t,"change",ar),E=n({className:"tgCont fshSpinner64"}),o(E,t),E}var d=0,de=0,ge=0,g=0;function fr(t){d.value=t,g.classList.remove("fshSpinner")}function be(t){t&&(g.classList.add("fshSpinner"),s(4,fr,[t]))}function pr(){d.value='{"lastUpdate": 0, "members": {}}'}function ur(t){Q("Update successful"),U(t.members)}function dr(){let t=kt(d.value);Nt("fsh_guildActivity",t).then(l(ur,t)).catch(Q)}function he(t,e){let r=_t({className:"custombutton",textContent:t});return v(r,e),r}function gr(){d=te(),d.setAttribute("autocapitalize","off"),d.setAttribute("autocomplete","off"),d.setAttribute("autocorrect","off"),d.setAttribute("spellcheck","false")}function ye(){return g=n({id:"io",className:"fshSpinner64"}),gr(),de=he("Save",dr),ge=he("Reset",pr),o(g,d),o(g,Kt()),o(g,de),o(g,ge),g}var at=0,h=0,B=0;function ke(){return!h.checked}function hr(){return h.checked}function br(){h.checked=!1}function yr(t){hr()&&t.code==="Escape"&&br()}function kr(t){ke()&&(t.style.transform=null)}function Lr(){return Vt({className:"fshMove ui-tabs-nav ui-widget-header ui-corner-all ui-helper-reset ui-helper-clearfix",innerHTML:'<li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab1">Guild Activity Tracker</label></li><li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab2">Import/Export</label></li><label for="tracker" class="fsh-dialog-close ui-dialog-titlebar-close">&times;</label>'})}function Tr(){C("guildTracker","updateRawData"),at&&be(at)}function vr(){let t=n({className:"fsh-dialog-popup ui-dialog ui-tabs ui-widget ui-widget-content ui-corner-all",innerHTML:'<input id="acttab1" class="fsh-tab-open" name="acttabs" checked type="radio">'}),e=O({className:"fsh-tab-open",id:"acttab2",name:"acttabs",type:"radio"});return F(e,"change",Tr),o(t,e),t}function xr(){let t=vr(),e=Lr();return o(t,e),Tt(e,t),t}function Sr(){let t=n({className:"fsh-dialog-content"});return o(t,ue()),o(t,ye()),t}function wr(){let t=xr(),e=Sr();o(t,e),u(h,"change",l(kr,t)),o(B,t)}function Cr(){a(B,'<div class="fsh-dialog-overlay"><label class="fsh-dialog-cancel" for="tracker"></label></div>')}function Nr(t){t&&(at=wt(t),U(t.members))}function Er(){C("guildTracker","openDialog"),Ct("fsh_guildActivity").then(Nr),S.dialogIsClosed=ke,Cr(),wr()}function Br(){h=O({id:"tracker",className:"fsh-dialog-open",type:"checkbox"}),F(h,"change",Er),B=n({className:"fsh-dialog"}),o(B,h),u(document.body,"keydown",yr),o(document.body,B)}function ct(){rt(),Br()}function Hr(t){return _({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function Ar(t){let e=_({className:"fshNoWrap",innerHTML:"[&nbsp;"});return o(e,t),a(e,"&nbsp;]"),e}function st(t,e,r){let i=Hr(r);o(t,Ar(i)),e.id=r,c(r)&&Ut(e),v(i,re)}function Le(t){st(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function Te(t){let e=t.rows[4].cells[1].children[0];f(vt(e.innerHTML),e),st(e,t.rows[6].cells[0].children[0],"statisticsControl")}function ve(t){let e=t.rows[15]?.cells[1].children[0];e&&st(e,t.rows[17].cells[0].children[0],"guildStructureControl")}var lt=0;function Rr(t){let{stam:e,max:r}=Bt(H,t.dataset.tipped);return Math.min(Math.round(Number(e)/Number(r)*100),100)}function Pr(t){let e=Rr(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${e}%, transparent ${e+1}%)}`}function Mr(){let t=L(k,m()),e=t[t.length-1];e.classList.add("fshProgressBar");let i=M(yt,e).map(Pr).join(`
`);lt=o(document.body,G(i)).sheet}function q(t){lt?lt.disabled=!t:Mr()}var ft="enableStamBars",b=0;function $r(){b=!b,R(ft,b),q(b),C("guildManage","StamBars")}function Dr(){if(!p("#pCC img.guild_openGuildStore"))return;let e=o(m(),n({innerHTML:$(ft),style:{marginLeft:"66%"}}));u(e,"change",$r)}function pt(){Dr(),b=c(ft),b&&q(b)}function Ir(t){let e=T("b",t).filter(D("Relics"));if(e.length!==1)return;let r=e[0].parentNode.nextElementSibling.children[0];f(`[ <a href="${A}reliclist">Control</a> ]&nbsp;`,r)}function Gr(t){let e=L("li",t);if(!e||!e.length)return;let r=e[e.length-1].parentNode;a(r,`<li><a href="${bt}${Ht()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function jr(){return m().lastElementChild.rows?.[2].cells[0].children[0]}function Vr(t,e){s(3,e,[t])}function Ur(t){[Le,Te,ve,Ir,Gr].forEach(l(Vr,t))}function qr(t){St()||(c("detailedConflictInfo")&&s(3,et,[t]),s(4,ct))}function ut(){if(!m())return;let t=jr();!t||(Ur(t),c("showBuffLinks")&&s(3,tt),qr(t),pt())}function Fr(){s(3,Yt),s(3,W),s(3,z),["-","manage"].includes(S.subcmd)&&ut(),S.subcmd==="view"&&K()}export{Fr as default};
//# sourceMappingURL=injectGuild-AOOJ3TJT.js.map
