import{a as Yl,b as Ql}from"./chunk-SEGEEV6P.js";import{a as fs}from"./chunk-D7QJ3JYH.js";import{a as rs}from"./chunk-GVLAC6JA.js";import"./chunk-6DB5DM5Z.js";import"./chunk-VE7JKSOT.js";import"./chunk-K44MIQTP.js";import{a as zl}from"./chunk-ICHVB2CV.js";import{a as us}from"./chunk-25W5QWES.js";import{a as so}from"./chunk-NXZOKS2B.js";import{a as jl,b as es,c as ts}from"./chunk-6COPBNON.js";import{a as fo}from"./chunk-LLB3MQBT.js";import{a as os,b as is}from"./chunk-JUXZQ7VN.js";import{b as ns}from"./chunk-PTLFYCUT.js";import{a as ne,b as V}from"./chunk-HSI4HTTD.js";import{a as N}from"./chunk-3FGHEYUR.js";import{a as tt}from"./chunk-OLG3YVAY.js";import{b as Xl}from"./chunk-D2IHAXPH.js";import{a as ss}from"./chunk-32534Y4O.js";import{a as et}from"./chunk-6CI3QTYG.js";import{a as Ie,b as lo}from"./chunk-MBCVDXOU.js";import"./chunk-DJSMX3XM.js";import{a as ve}from"./chunk-V45SJJZM.js";import{a as Jl}from"./chunk-3ZTT3JGB.js";import{a as Zl}from"./chunk-Y57XX7QV.js";import{a as as}from"./chunk-SVJ5ICHO.js";import{a as ao}from"./chunk-CJLF76FT.js";import"./chunk-MGGAL4XF.js";import{a as Ul}from"./chunk-FDY5YZU6.js";import{a as ls}from"./chunk-W3TMITFB.js";import"./chunk-ZZCXMDTU.js";import{a as Ml}from"./chunk-DVOKY4MG.js";import{a as no}from"./chunk-YLB4ZPHF.js";import{a as Hl}from"./chunk-I2ANVLM5.js";import"./chunk-CB6PDTMW.js";import{a as Pl}from"./chunk-TQCC4G7D.js";import{a as ql}from"./chunk-3JEPUKNF.js";import{a as Fl}from"./chunk-R5WOJ7GX.js";import{a as Kl}from"./chunk-COXIFJJW.js";import{a as $l}from"./chunk-BZRDUDS7.js";import{a as Ol}from"./chunk-QXQL5NC2.js";import{a as Wl}from"./chunk-X5TLXNZB.js";import{a as R}from"./chunk-SWGHI6EY.js";import{a as Mn}from"./chunk-3ATWGYLD.js";import{a as Nl,b as Rl,c as Il}from"./chunk-CBHRTNV6.js";import{a as El}from"./chunk-JZUUZRFC.js";import{a as Gl}from"./chunk-N5FTCMRG.js";import{a as Re}from"./chunk-4NH6YXV7.js";import"./chunk-V2EESBF7.js";import"./chunk-LFQ43LVC.js";import"./chunk-S5KLCJVR.js";import{a as oo}from"./chunk-B3YXDQZ3.js";import{a as Ka}from"./chunk-NEB7ITA7.js";import{a as io}from"./chunk-IQFV6W2U.js";import{a as be}from"./chunk-SESBBU2F.js";import"./chunk-LKWABTD4.js";import{a as hl}from"./chunk-BLOLTXSI.js";import{a as Vl}from"./chunk-TQHISIWN.js";import"./chunk-LC4JONE7.js";import{a as Qr}from"./chunk-527SOVYW.js";import{a as Fr}from"./chunk-NCMEUMLE.js";import"./chunk-G2RN5QP2.js";import{a as T}from"./chunk-4C3C77WW.js";import{a as H}from"./chunk-RCXM6IKN.js";import{a as k}from"./chunk-M23P7YNW.js";import"./chunk-3RB7HJ6G.js";import{a as ue}from"./chunk-KGG4Z2YI.js";import{a as dl}from"./chunk-PV6HFEQR.js";import{a as gl}from"./chunk-JGFZLKTI.js";import"./chunk-T6ZATT2Y.js";import{d as Be}from"./chunk-SDYJ5HZW.js";import{a as jr}from"./chunk-DIOS3EFN.js";import"./chunk-OTDUXAAH.js";import{a as Cl}from"./chunk-DIYPVMCF.js";import"./chunk-CFDFCOR3.js";import{a as xe}from"./chunk-ON76EM3G.js";import{a as Me}from"./chunk-5TD4FW2O.js";import"./chunk-J3GDMVIU.js";import{a as O}from"./chunk-FH2ZQIVR.js";import{a as _}from"./chunk-ZC2VG7OL.js";import{a as Dl}from"./chunk-TAEVPX54.js";import{a as to}from"./chunk-3H3AFOW3.js";import{a as xl}from"./chunk-LSTBONAT.js";import{a as yl}from"./chunk-FRQRSFOI.js";import{a as Ee}from"./chunk-YZABUIWG.js";import"./chunk-ELWUFZG5.js";import{a as Tn}from"./chunk-3TEITCXC.js";import{a as He}from"./chunk-M5ZUFNEH.js";import"./chunk-R7EK2RTK.js";import"./chunk-RUAHQRDU.js";import"./chunk-IZJ2YJYN.js";import{a as Wa}from"./chunk-HUBAYN2T.js";import"./chunk-O2AVUBO7.js";import"./chunk-QRS6GHYV.js";import"./chunk-QVWND6LG.js";import{a as X}from"./chunk-MCDZT6O2.js";import"./chunk-52NQXPZP.js";import{a as Xr,b as Jr}from"./chunk-2NTPEDIZ.js";import"./chunk-QKLZ7AT3.js";import{a as zr}from"./chunk-XA4CEPNM.js";import{a as F}from"./chunk-WGYE6OHG.js";import"./chunk-OMRTCLMA.js";import{a as Tl}from"./chunk-K2L7MYHU.js";import{a as ge}from"./chunk-CR3YSYOW.js";import"./chunk-7UMX7UJ7.js";import{C as s,E as y,G as Bl,M as Sl,N as Al,S as Qe,T as Xe,U as W,V as J,X as Hn,Y as Ll,a as P,ba as Je,ca as Ze,d as te,da as je,e as Vn,ea as re,fa as oe,h as me,r as i,s as D,t as x,u as Ne,v as f,w as g,x as h,y as ro,z as bl}from"./chunk-QJ6HT372.js";import{a as _l}from"./chunk-76PHM2VZ.js";import"./chunk-NVGKRTGQ.js";import{a as ce}from"./chunk-5EWVRUCY.js";import{a as eo}from"./chunk-S7D27425.js";import"./chunk-PKOOIOYV.js";import{a as Zr,e as wl,g as kl}from"./chunk-LFT5BCCP.js";import{a as Yr}from"./chunk-LQ2ARGUI.js";import{a as vl}from"./chunk-BR5IQZCO.js";import"./chunk-FIOQMJU7.js";import{a as w}from"./chunk-32IJAGRN.js";import"./chunk-BYHOBLWC.js";import"./chunk-A562UK6S.js";import"./chunk-JDVJBZWD.js";import{b as E}from"./chunk-7JP44NWZ.js";import{a as $a}from"./chunk-I57GWZIZ.js";import{a as fe}from"./chunk-O2SP7GRB.js";import{$ as Ja,Ba as fl,Ca as ul,Da as cl,Ea as ml,Fa as pl,L as Ln,Na as Ur,O as Ya,Q as _n,S as Qa,Y as Xa,Z as Ve,_ as $r,aa as Za,b as De,ba as ja,ca as el,d as Ua,da as tl,e as Or,ea as rl,fa as ol,ga as nl,ha as Wr,ia as il,ja as al,ka as ll,m as za,ma as sl,na as he,oa as Kr,pa as Q,r as Sn,y as An}from"./chunk-LROIQ2AY.js";import{a as p}from"./chunk-DDP3QCAT.js";import"./chunk-RBWWPJJC.js";var Se=0;function Su(e){return e}function Au(e){return p.showBuffInfo&&e.some(Su)}function Lu(){if(Se)N(Se,!1);else{Se=H({className:"fshActionBox",innerHTML:"<div></div><div></div><div></div><div></div><div></div>"});let e=_("actionContainer");ql(Se,e.children[2])}return Se}function _u(){Se&&N(Se,!0)}function En(e){if(Au(e))return Lu();_u()}function pe(e,t,r,o){t&&(e.className=t),T(r,e);let n=R();return k(e,n),et(e,o),n}var Ge=0,cs=0;function Tu(e){Ge=e.children[3],cs=pe(Ge,"fshBlue","CA "," active")}function Vu(e,t){Ge?N(Ge,!1):Tu(e),T(t.level,cs)}function Hu(){Ge&&N(Ge,!0)}function Nn(e,t){t?Vu(e,t):Hu()}var qe=0,ms=0;function Mu(e){qe=e.children[4],ms=pe(qe,"fshRed","Doubler "," active")}function Eu(e,t){qe?N(qe,!1):Mu(e),T(t.level,ms)}function Nu(){qe&&N(qe,!0)}function Rn(e,t){t?Eu(e,t):Nu()}var Pe=0,ps=0;function Ru(e){Pe=e.children[2],ps=pe(Pe,"","Damage bonus: ","%")}function Iu(e,t){if(e){let r=Math.min(Math.round(Math.floor(t/5)*Number(e.level))*.01,20);return Ie(r,2).toString()}return"0"}function Gu(e,t,r){Pe?N(Pe,!1):Ru(e),T(Iu(t,Number(r)),ps)}function qu(){Pe&&N(Pe,!0)}function In(e,t,r){t?Gu(e,t,r):qu()}function Gn(e,t){T(ge(e),t)}var Fe=0,ds=0;function Pu(e){Fe=e.children[1],ds=pe(Fe,"","Kill Streak: ","")}function Fu(e,t){Fe?N(Fe,!1):Pu(e),Gn(t,ds)}function Ou(){Fe&&N(Fe,!0)}function qn(e,t,r,o){t||r?Fu(e,o):Ou()}function $u(e,t){return t.name===e}function we(e){let{buffs:t}=GameData.player();if(t)return t.find(w($u,e))}var Wu=["red","orange","yellow"];function Pn(){let e=$("#actionlist-shield-imp");e.length===1&&e.css("background-color",Wu[e.text()]||"#ad8043")}var ie=0,Fn=0;function Ku(e){Ql(e)&&GameData.fetch(he)}function Uu(){we("Summon Shield Imp")||Yl([jr()],[55]).then(Ku)}function zu(e){return e?Number(e.stack):0}var Yu=["imp-0","imp-1","imp-1"];function Qu(e){return Yu[e]||"fshGreen"}function Xu(e){[ie]=e.children,T("Shield Imps Remaining: ",ie),Fn=R(),k(ie,Fn),Fr(ie,"&nbsp;");let t=ve({className:"xSmallLink",textContent:"Recast"});k(ie,t),F(t,Uu)}function Ju(e,t){ie?N(ie,!1):Xu(e);let r=zu(t);ie.className=Qu(r),T(r,Fn)}function Zu(){ie&&N(ie,!0)}function On(e,t,r){t||r?Ju(e,t):Zu()}function ju(e){return e.type===0}function $n(){let{dynamic:e}=GameData.realm();return ue(e)&&e.some(ju)}var rt=0,Wn=0,Kn=0,Un=0,zn=0,Yn=0;function ec(){rt=we("Death Dealer"),Wn=we("Doubler"),Kn=we("Counter Attack"),Un=we("Summon Shield Imp"),zn=$n(),Yn=GameData.player().killStreak}function Oe(){Pn(),ec();let e=En([rt,Wn,Kn,Un,zn]);e&&(On(e,Un,rt),qn(e,rt,zn,Yn),In(e,rt,Yn),Nn(e,Kn),Rn(e,Wn))}function Qn(){Oe(),$.subscribe(`${$r} ${Ja}`,Oe)}function G(e){return R({textContent:e})}function tc(){return window.GameController&&GameController.Realm&&!GameController.Realm.footprintTileList}function Xn(){tc()&&(GameController.Realm.footprintTileList=[])}function hs(e,t,r){return Ml({className:`fshCurveEle fshCurveLbl fshPoint tip-static ${e}`,dataset:{tipped:t},htmlFor:r})}function uo(e){let t=H({className:"fshToggle"}),r=no({checked:e.prefVal,id:e.checkId,type:"checkbox"});k(t,r);let o=hs(e.onClass,e.onTip,e.checkId);k(t,o);let n=hs(e.offClass,e.offTip,e.checkId);return k(t,n),k(e.worldName,t),r}var ke=0,mo=0,po=0,ks=0,Cs=0,ys=0,Ds=0,xs=0,bs=0;function rc(e){Re(e),GameData.doAction(12,401,{},0)}function oc(){Kl(Ka())}function nc(){window.open(`${Ya+Sn}map`,"fsMap")}function ic(){let e=GameData.realm();window.open(`${Xa}realms${Sn}view&realm_id=${e.id}`,"mapUfsg")}function ac(){X("playNewMessageSound",!E("playNewMessageSound"))}function lc(){p.huntingMode=!p.huntingMode,X("huntingMode",p.huntingMode)}function sc(){return H({className:"fshCurveContainer",id:"fshWorldButtonContainer"})}var gs=e=>G(e?e.toString():"?");function vs(e,t,r){let o=H({textContent:`${t} Lvl: `});k(o,r),k(e,o)}function fc(e){let t=H({className:"fshFsty"});mo=gs(GameData.realm().minlevel),vs(t,"Min",mo),po=gs(GameData.player().level),vs(t,"Your",po),k(e,t)}function co(e,t,r){let o=ve({className:`fshCurveEle fshCurveBtn fshPoint tip-static ${e}`,dataset:{tipped:t}});return k(r,o),o}function uc(e){fc(e),ks=co("fshFormGroup","Quick Create Attack Group",e),Cs=co("fshQuickBuff","Open Quick Buff Popup",e),ys=co("fshRealmMap","Open Realm Map",e),Ds=co("fshTempleOne","Search map in Ultimate FSG",e)}function cc(e){if(E("showSpeakerOnWorld")){let t=E("playNewMessageSound");xs=uo({prefVal:t,checkId:"fshSoundCheck",onClass:"soundOn",onTip:"Turn Off Sound when you have a new log message",offClass:"soundOff",offTip:"Turn On Sound when you have a new log message",worldName:e})}}function mc(e){let t=p.huntingMode;bs=uo({prefVal:t,checkId:"fshHuntCheck",onClass:"huntOn",onTip:"Hunting mode is ON",offClass:"huntOff",offTip:"Hunting mode is OFF",worldName:e})}function pc(){uc(ke),cc(ke),mc(ke)}var dc=[[()=>xs,ac],[()=>bs,lc]],hc=[[()=>ks,rc],[()=>Cs,oc],[()=>ys,nc],[()=>Ds,ic]];function gc(e,t){let{target:r}=t,[,o]=e.find(([n])=>n()===r)??[];o&&(r.blur(),o(r))}function ws(e){return w(gc,e)}function vc(){F(ke,ws(hc)),fe(ke,"change",ws(dc))}function wc(){ke||(ke=sc(),pc(),vc(),io(ke,_("worldCoord")))}function kc(e,t){mo&&t.b.minlevel&&(Xn(),T(t.b.minlevel,mo))}function Cc(e,t){po&&T(t.b,po)}function Jn(){wc(),$.subscribe(rl,kc),$.subscribe(Za,Cc)}var yc=["NORMAL","CHAMPION","ELITE","SUPER ELITE","TITAN","LEGENDARY"],Dc=`url("${De}ui/world/icon_action_attack_`,ho=!1;function Zn(e){return He(".verb.attack",e)}function jn(e){let t=yc.indexOf(e.toUpperCase());return eo(`#actionList .actionListItem.creature.creature-${t}`)}function xc(e){e.classList.remove("attack-1","attack-2","attack-3","attack-4","attack-5","attack-6","attack-7","attack-8"),e.style.backgroundImage=""}function bc(e,t){e!==null&&(e.classList.add(`attack-${t+1}`),e.style.backgroundImage=`${Dc}${t+1}.png")`)}function Bs(e){let t=["LEGENDARY","NORMAL"].flatMap(jn),r=jn("CHAMPION"),[o,n]=e?[t,r]:[r,t];o.map(Zn).filter(l=>l!==null).forEach(xc),n.slice(0,8).map(Zn).forEach(bc)}function Bc(e){let t=Zn(e);t&&(ce("world","ChampionAttack"),El(t))}function Sc(e){if(!e.altKey||!e.shiftKey||e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||(ho||Bs(!0),ho=!0,!/(?:Digit|Numpad)[1-8]/.test(e.code)))return;let t=jn("CHAMPION"),r=parseInt(e.code.slice(-1),10)-1;r<t.length&&Bc(t[r])}function Ac(e){ho&&(!e.ctrlKey||!e.shiftKey)&&(ho=!1,Bs(!1))}function ei(){let{body:e}=document;fe(e,"keydown",Sc),fe(e,"keyup",Ac)}var Lc=["Breaker","Protection","Master Thief","Protect Gold","Disarm","Duelist","Thievery","Master Blacksmith","Master Crafter","Fury Caster","Master Inventor","Sustain"],ti=[],K=0;function _c(e){(e.id===54||e.id===26)&&(K.player.buffs[e.id]=parseInt(e.level,10))}function Tc(e){Lc.indexOf(e.name)===-1&&(K.player.enhancements[e.name]=e.value)}function Vc(e){e.player.buffs&&e.player.buffs.forEach(_c)}function Hc(e){e.player.enhancements&&e.player.enhancements.forEach(Tc)}function Mc(e){K={},K.combat=e.response.data,K.combat.inventory_id&&(K.combat.drop=K.combat.item.id),K.player={},K.player.buffs={},K.player.enhancements={},Vc(e),Hc(e),K.time=e.time,ti.push(K),Jr("fsh_combatLog",ti)}function Ec(e,t){t.response.response===0&&Mc(t)}function Nc(e){e&&(ti=e),$.subscribe(Wr,Ec)}function ri(){E("keepLogs")&&Xr("fsh_combatLog").then(Nc)}function oi(e,t){return e.every(r=>be(r,t))}function ot(e){return vl({cache:!1,url:"fetchdata.php",data:{...e,fshrnd:Xl()},dataType:"json"})}function Ae(e){return!e||!e.response||!e.response.data}var Ss=[];function Rc(e){return Ae(e)||Ss.push(e),e}function Ic(e,t){return e===Number(t.response.data.id)}function Gc(e,t){e(t)}function qc(e){return new Promise(t=>{hl(3,Gc,[t,e])})}function nt(e,t){let r=Ss.find(w(Ic,e));return r?qc(r):ot({a:1,id:e,passback:t}).then(Rc)}var As=0,Ls=0,_s=0,Ts=0,Vs=0,Hs=0,ni=()=>As,Ms=()=>Ls,Es=()=>_s,Ns=()=>Ts,Rs=()=>Vs,Is=()=>Hs;function it(e,t){return Dl(Ee(t,e))}function Pc(e){_s=it(e,ul),Ls=it(e,fl),Vs=it(e,ml),Ts=it(e,cl),Hs=it(e,pl)}function Gs(){As=GameData.player().level,Pc(_("statbar-character-tooltip-stats"))}function Fc(e){return`<table><tr><td><img src="${De}creatures/${e.image_id}.png" height="200" width="200"></td><td rowspan="2"><table width="400"><tr><td class="header" colspan="4" class="fshCenter">Statistics</td></tr>`}var go=e=>`<td>${e}:&nbsp;</td>`,vo=e=>`<td width="40%">${e}</td>`;function ii([e,t,r,o,n]){return[go(e),vo(`${t} (your ${r}:<span class="${o}">${n()}</span>)`)]}function ai(e){return["<tr>",...e,"</tr>"].join("")}function Oc(e,t){return ai([go("Class"),vo(e.creature_class),...ii(["Level",e.level,"level",t,ni])])}function qs(e,t){return ai([...ii(e),...ii(t)])}function $c(e){return qs(["Attack",e.attack,"defense","fshYellow",Ms],["Defense",e.defense,"attack","fshYellow",Es])}function Wc(e){return qs(["Armor",e.armor,"damage","fshYellow",Ns],["Damage",e.damage,"armor","fshYellow",Rs])}function Kc(e,t){return ai([go("HP"),vo(`${e.hp} (your HP:<span class="fshYellow">${Is()}</span>)(1H: <span class="fshRed">${t}</span>)`),go("Gold"),vo(e.gold)])}var Uc='<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Enhancements</td></tr>';function zc(e){return`<tr><td colspan="2">${e.name}:</td><td colspan="2">${e.value}</td></tr>`}function Yc(e){return e.enhancements.length===0?'<tr><td colspan="4">[no enhancements]</td></tr>':e.enhancements.map(zc).join("")}function Qc(e){return`<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Description</td></tr><tr><td colspan="4">${e.description}</td></tr><tr><td colspan="4" height="5"></td></tr></table></td></tr><tr><td class="fshCenter"><b>${e.name}</b></td></tr></table>`}function Xc(e,t,r){return Fc(e)+Oc(e,r)+$c(e)+Wc(e)+Kc(e,t)+Uc+Yc(e)+Qc(e)}function Jc(e){let t=Math.ceil(e.hp*p.hpVariable+e.armor*p.generalVariable),r="fshYellow";return Gs(),ni()>e.level&&(r="fshRed"),Xc(e,t,r)}function li(e){if(!Ae(e))return Jc(e.response.data)}var Zc=["verb","view","tip-static"];function jc(e,t){$(e).qtip({overwrite:!0,show:{event:"mouseover",ready:!0},style:{classes:"qtip-tipsy qtip-custom"},position:{my:"center right",at:"center left",effect:!1,viewport:$(window)},content:{text:t},hide:{effect:!1}})}function em(e){return Yr(e.parentNode.children).indexOf(e)}function tm(e,t){let r=li(t);e.set("content.text",r)}function rm(e,t,r){return nt(GameData.actions()[e].data.id,e).then(w(tm,r)),"Loading..."}function om(e,t){ce("NewMap","CreatureInfo");let r=em(t);e.classList.add("fshTip"),jc(e,w(rm,r))}function nm(e,t){return oi(Zc,e)&&!be("fshTip",e)&&be("creature",t)}function im(e){if(!p.showCreatureInfo)return;let{target:t}=e,r=t.parentNode.parentNode.parentNode;nm(t,r)&&om(t,r)}function si(){fe(_("actionList"),"mouseover",im)}function am(){k(document.body,Jl(`#actionList .creature-1 {color: green;}
#actionList .creature-2 {color: yellow;}
#actionList .creature-3 {color: red;}`))}function fi(){E("enableCreatureColoring")&&am()}function Le(e){return p.doNotKillList.includes(Me(e))}function lm(e){e.classList.toggle("fshBlue",Le(Wa(e)))}function $e(){let e=_("actionList");Qr("creature",e).forEach(lm)}function sm(e,t){if(Le(e))return _("actionList").children[t].children[0].children[1].classList.remove("loading"),!0}function fm(e){let t=GameData.actions()[e];if(t)return sm(t.data.name,e)}function um(e){return function(r,o,n,l){fm(n.passback)||e(r,o,n,l)}}var cm={2:um};function mm(e){return $a(e)||e===0}function pm(e){return e&&zr(e)}function dm(e){return function(r,o,n,l){let a=cm[r];pm(a)&&mm(l)?a(e)(r,o,n,l):e(r,o,n,l)}}function ui(){let e=GameData.doAction;GameData.doAction=dm(e)}function ci(){$.subscribe(Ve,$e),$e(),ui()}function hm(e){Re(e.target)}function mi(){F(_("buffList"),hm)}function pi(e){return _l({cmd:"globalquests",...e})}function di(){return pi({subcmd:"contrib"})}var gm=({username:e,value:t})=>({player:{name:e},value:t});async function hi(){return{r:(await Vl({cmd:"toprated",subcmd:"eventcontrib"})).map(gm)}}function gi(){return oo(di,hi)}function Ps(e){e[1]=e[2].r}function Fs(e,t,r){let o=e.slice();return o[3]=t[r].player,o[2]=t[r].value,o[5]=r,o}function vm(e){let t,r=e[6].message+"",o;return{c(){t=f("p"),o=g(r),Bl(t,"color","red")},m(n,l){D(n,t,l),i(t,o)},p(n,l){l&1&&r!==(r=n[6].message+"")&&y(o,r)},d(n){n&&x(t)}}}function wm(e){Ps(e);let t,r,o,n=e[1],l=[];for(let a=0;a<n.length;a+=1)l[a]=$s(Fs(e,n,a));return{c(){t=f("table"),r=f("tr"),r.innerHTML=`<td class="header"></td> 
      <td class="header"></td> 
      <td class="header">Username</td> 
      <td class="header">Kills</td>`,o=h();for(let a=0;a<l.length;a+=1)l[a].c();s(r,"class","svelte-1p6satm"),s(t,"id","world-event-contrib-table"),s(t,"class","svelte-1p6satm")},m(a,m){D(a,t,m),i(t,r),i(t,o);for(let c=0;c<l.length;c+=1)l[c].m(t,null)},p(a,m){if(Ps(a),m&1){n=a[1];let c;for(c=0;c<n.length;c+=1){let u=Fs(a,n,c);l[c]?l[c].p(u,m):(l[c]=$s(u),l[c].c(),l[c].m(t,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(a){a&&x(t),Ne(l,a)}}}function Os(e){let t,r,o,n;return{c(){t=f("a"),r=f("img"),Vn(r.src,o=De+"guilds/"+e[3].guild_id+"_mini.png")||s(r,"src",o),s(r,"alt","guild logo"),s(r,"class","svelte-1p6satm"),s(t,"href",n=""+(Ln+e[3].guild_id))},m(l,a){D(l,t,a),i(t,r)},p(l,a){a&1&&!Vn(r.src,o=De+"guilds/"+l[3].guild_id+"_mini.png")&&s(r,"src",o),a&1&&n!==(n=""+(Ln+l[3].guild_id))&&s(t,"href",n)},d(l){l&&x(t)}}}function $s(e){let t,r,o=e[5]+1+"",n,l,a,m,c,u,d=e[3].name+"",b,M,j,de,z=e[2]+"",A,_e,I=e[3].guild_id&&Os(e);return{c(){t=f("tr"),r=f("td"),n=g(o),l=h(),a=f("td"),I&&I.c(),m=h(),c=f("td"),u=f("a"),b=g(d),j=h(),de=f("td"),A=g(z),_e=h(),s(u,"href",M=""+(_n+e[3].name)),s(t,"class","svelte-1p6satm")},m(q,se){D(q,t,se),i(t,r),i(r,n),i(t,l),i(t,a),I&&I.m(a,null),i(t,m),i(t,c),i(c,u),i(u,b),i(t,j),i(t,de),i(de,A),i(t,_e)},p(q,se){q[3].guild_id?I?I.p(q,se):(I=Os(q),I.c(),I.m(a,null)):I&&(I.d(1),I=null),se&1&&d!==(d=q[3].name+"")&&y(b,d),se&1&&M!==(M=""+(_n+q[3].name))&&s(u,"href",M),se&1&&z!==(z=q[2]+"")&&y(A,z)},d(q){q&&x(t),I&&I.d()}}}function km(e){let t;return{c(){t=g("Loading...")},m(r,o){D(r,t,o)},p:P,d(r){r&&x(t)}}}function Cm(e){let t,r,o={ctx:e,current:null,token:null,hasCatch:!0,pending:km,then:wm,catch:vm,value:2,error:6};return Hn(r=e[0],o),{c(){t=ro(),o.block.c()},m(n,l){D(n,t,l),o.block.m(n,o.anchor=l),o.mount=()=>t.parentNode,o.anchor=t},p(n,[l]){e=n,o.ctx=e,l&1&&r!==(r=e[0])&&Hn(r,o)||Ll(o,e,l)},i:P,o:P,d(n){n&&x(t),o.block.d(n),o.token=null,o=null}}}function ym(e,t,r){let{promise:o}=t;return e.$$set=n=>{"promise"in n&&r(0,o=n.promise)},[o]}var vi=class extends oe{constructor(t){super(),re(this,t,ym,Cm,te,{promise:0})}},Ws=vi;var wi=0,Ks=()=>({promise:gi()});function Dm(e){wi?wi.$set(Ks()):wi=new Ws({props:Ks(),target:e})}function xm(){let e=_("world-event-contrib");Dm(e),$(e).dialog({title:"Top 100 Event Contributers",minWidth:300,height:300,zIndex:9999})}function ki(){let e=$("#world-event-badge");!e.length||(e.off(),F(e[0],xm))}function Us(e){$(`#actionList li.creature-${e.toString()} a.create-group`).hide()}function bm(e){$.subscribe(Ve,w(Us,e))}var Bm=["hideChampionsGroup","hideElitesGroup","hideSEGroup","hideTitanGroup","hideLegendaryGroup"];function Sm(e,t){E(e)&&(bm(t+1),Us(t+1))}function Ci(){Bm.forEach(Sm)}function Am(e){return e.response&&e.response.msg&&e.response.msg.startsWith("Creature did not exist at that location")}function Lm(e){Am(e)&&GameData.fetch(Kr+Q)}function _m(e){e.remove()}function Tm(e,t){Lm(t),eo(".creature-4 > .quickCombat > .verbs").forEach(_m)}function yi(){$.subscribe(Wr,Tm)}var Z=0;function Vm(e,t){t.creature_class=e.creature_class,t.image_id=e.image_id,t.level=Number(e.level),t.type=e.type}function Hm(e){Z[e.name]?Z[e.name].seen&&(Z[e.name].seen+=1):(Z[e.name]={seen:1},Vm(e,Z[e.name]))}function zs(e,t,r){return t?e(t,r):r}function Ys(e,t){let r=e||{};return r.min=zs(Math.min,r.min,t),r.max=zs(Math.max,r.max,t),r}var Mm=["attack","armor","damage","defense","hp"];function Em(e,t){return!e||e.min!==t.min||e.max!==t.max}function Nm(e,t,r){let o=Ys(t[r],Number(e[r]));Em(t[r],o)&&(t[r]=o)}function Rm(e,t){Mm.forEach(w(Nm,e,t))}function Im(e){return e.enhancements&&e.enhancements.length>0}function Gm(e,t){e[t.name]=Ys(e[t.name],Number(t.value))}function qm(e,t){Im(e)&&(t.enhancements=t.enhancements||{},e.enhancements.forEach(w(Gm,t.enhancements)))}function Pm(e){Z||(Z={}),Hm(e),Rm(e,Z[e.name]),qm(e,Z[e.name]),Jr("fsh_monsterLog",Z)}function Qs(e){p.showMonsterLog&&Pm(e)}function Fm(e){Z=e||{}}function Xs(){Xr("fsh_monsterLog").then(Fm)}var Js=[];function Om(e){Ae(e)||(ce("NewMap","MonsterLog"),Qs(e.response.data))}function $m(e,t){return e.id===t.id}function Wm(e){if(Js.find(w($m,e.data)))return!0;Js.push(e.data)}function Km(e,t){e.type!==6||Wm(e)||nt(e.data.id,t).then(Om)}function Zs(){p.showMonsterLog&&GameData.actions().forEach(Km)}function Di(){Xs(),$.subscribe("-1-success.action-response 4-success.action-response 5-success.action-response 25-success.action-response",Zs),Zs()}var js="",ef=()=>js;function tf(e){js=e}function xi(){return Tl({subcmd:"scouttower"})}function Um(e){let t=e.split(/[: /[]/);return new Date(Number(t[4]),Or.indexOf(t[3]),Number(t[2]),Number(t[0]),Number(t[1]))}function zm(e){let t=xe(e[1]);return t==="No active cooldown"?0:Math.ceil((Um(t.slice(16))-Zr())/1e3)}function Ym(e){let[t]=e[0].cells[0].children;return{base_id:Number(t.src.split("/").slice(-1)[0].slice(0,-36)),name:t.title}}function Qm(e){return{cooldown:zm(e),creature:Ym(e),kills:Number(xe(e[0].cells[3]))}}function Xm(e){let t=xe(e[0].cells[1]);if(t!=="n/a"){let r=xe(e[0].cells[2]).split("/");return{realm:t,current_hp:Number(r[0]),max_hp:Number(r[1])}}}function Jm(e){let t=e[2].cells[0].children;if(t.length===1)return{contributors:Ul(t[0],3,0).map(o=>({kills:Number(xe(o.cells[1])),player:{name:xe(o.cells[0])}}))}}function Zm(e){return{...Qm(e),...Xm(e),...Jm(e)}}var jm=(e,t,r)=>t!==0&&t<r.length-1&&(t-1)%6<3;function ep(e){let t=He('table[width="500"]',e);if(!t)return{s:!1};let r=Yr(t.rows).filter(jm);return{r:tt(3,r).map(Zm),s:!0}}async function bi(){return ep(await Gl({cmd:"guild",subcmd:"scouttower"}))}function Bi(){return oo(xi,bi)}function tp(e,[t,r,o]){let n=e.insertCell(-1);return n.colSpan=t,o&&(n.className="header"),k(n,r()),n}function rp(e,t){t.forEach(w(tp,e))}function op(e,t,r){let o=e.insertRow(-1);return r&&(o.className="fshBlue"),rp(o,t),o}function np(e,t){op(e,t[0],t[1])}function at(e,t){t.forEach(w(np,e))}var rf=0,of=0,nf=0,af=0,lf=0,sf=0,ff=0,uf=0,cf=()=>rf,mf=()=>of,pf=()=>nf,df=()=>af,hf=()=>lf,gf=()=>sf,vf=()=>ff,wf=()=>uf;function ip(){rf=G("Current"),of=G("Kills"),nf=G("Member"),af=G("% of Total")}function ap(){lf=G("Status"),sf=G("Titan HP"),ff=G("Total"),uf=G("Your Guild")}function kf(){ip(),ap()}var Si=0,Ai=0,Li=0,_i=0,Ti=0,Vi=0,Hi=0,Mi=0,Ei=0,wo=()=>Si,ko=()=>Ai,Co=()=>Li,yo=()=>_i,Do=()=>Ti,xo=()=>Vi,bo=()=>Hi,Bo=()=>Mi,So=()=>Ei;function lp(){Si=R({innerHTML:"&nbsp;"}),Ai=R({innerHTML:"&nbsp;"}),Li=R(),_i=R()}function sp(){Ti=R(),Vi=R(),Hi=R(),Mi=R(),Ei=R()}function Cf(){lp(),sp()}function yf(){O("&nbsp;",Si),O("&nbsp;",Ai),T("",Li),T("",_i),T("",Ti),T("",Vi),T("",Hi),O("",Mi),O("",Ei)}var lt=0,Ao=()=>lt;function Lo(){for(;lt.rows.length>8;)lt.deleteRow(8)}function fp(){let e=R();return k(e,Co()),et(e,"/"),k(e,yo()),e}function Df(e){let t=R();return k(t,e),et(t,"%"),t}function xf(){lt=Zl({className:"fshCenter"}),kf(),at(lt,[[[[5,wo,!0],[1,ko,!0]]],[[[2,gf,!0],[4,wf,!0]]],[[[2,fp],[4,Do]]],[[[2,cf,!0],[4,w(Df,xo())]],!0],[[[2,vf,!0],[4,w(Df,bo())]],!0],[[[2,hf,!0],[4,Bo]],!0],[[[6,So]]],[[[2,pf,!0],[2,mf,!0],[2,df,!0]]]])}var Ce=0,Ni=0,bf="";var Bf=()=>Ni,Sf=()=>bf;function Ri(){Ni=null,Ce&&!be("fshHide",Ce)&&(N(Ce,!0),yf(),Lo())}function Af(e){return e.type===0?(Ni=e.base_creature_id,bf=`(${e.x},${e.y})`,!0):!1}function Lf(){if(Ce)N(Ce,!1);else{let e=_("actionContainer");Ce=H({className:"fshActionBox titanInfo"}),Cf(),xf(),k(Ce,Ao()),k(e,Ce)}}function up(e){let t=new Date(Zr()+e*1e3);return`${to(t.getHours())}:${to(t.getMinutes())} ${to(t.getDate())}/${Or[t.getMonth()]}/${t.getFullYear()}`}function cp(e){return e<=0?'<span class="fshGreen cooldown">No active cooldown</span>':`<span class="fshMaroon cooldown">Cooldown until: ${up(e)}</span>`}function mp(e){return lo(es(e.max_hp-e.current_hp,e.kills),2)}function pp(e){return lo(e.kills*100/e.max_hp,2)}function dp(e){return ts(e.kills,e.max_hp,e.current_hp)}function hp(e){[[jl(e.creature.name),wo],[Sf(),ko],[e.current_hp,Co],[e.max_hp,yo],[e.kills,Do],[mp(e),xo],[pp(e),bo]].forEach(([t,r])=>T(t,r()))}function gp(e){hp(e),O(dp(e),Bo()),O(cp(e.cooldown),So())}function vp(e,t){return[[[2,()=>G(t.player.name)],[2,()=>G(t.kills.toString())],[2,()=>G(`${lo(t.kills*100/e.kills,2)}%`)]]]}function wp(e){if(Lo(),!e.contributors)return;let t=e.contributors.map(w(vp,e));at(Ao(),t)}function kp(e){return e.realm&&e.creature.base_id===Bf()&&e.realm===ef()}function Ii(e){let t=e.find(kp);t&&(gp(t),wp(t))}var _o=null;function Cp(){_o&&(window.clearTimeout(_o),_o=null)}var yp=e=>e&&e.s&&ue(e.r),_f=e=>p.showTitanInfo&&ue(e)&&e.some(Af);function Dp(e,t){!yp(t)||(Ii(t.r),_f(GameData.realm().dynamic)?_o=window.setTimeout(e,3e4):Ri())}function Tf(){Bi().then(w(Dp,Tf))}function st(e){Cp(),_f(e)?(Lf(),Tf()):Ri()}function Gi(e){e.dynamic&&(tf(e.name),st(e.dynamic))}function xp(e){return e.realm&&e.realm.name}function Vf(e,t){xp(t)&&Gi(t.realm)}function qi(){window.initialGameData&&Vf(null,window.initialGameData),$.subscribe(`${ol} ${al}`,Vf)}function Hf(e,t,r){let o=e.slice();return o[5]=t[r],o[7]=r,o}function bp(e){let t=e[1](e[7])+"",r;return{c(){r=g(t)},m(o,n){D(o,r,n)},p:P,d(o){o&&x(r)}}}function Mf(e){let t,r,o,n;function l(...a){return e[3](e[5],e[7],...a)}return r=new Hl({props:{$$slots:{default:[bp]},$$scope:{ctx:e}}}),r.$on("click",l),{c(){t=f("li"),Je(r.$$.fragment),o=h()},m(a,m){D(a,t,m),Ze(r,t,null),i(t,o),n=!0},p(a,m){e=a;let c={};m&256&&(c.$$scope={dirty:m,ctx:e}),r.$set(c)},i(a){n||(W(r.$$.fragment,a),n=!0)},o(a){J(r.$$.fragment,a),n=!1},d(a){a&&x(t),je(r)}}}function Bp(e){let t,r,o=tt(16,e[0]),n=[];for(let a=0;a<o.length;a+=1)n[a]=Mf(Hf(e,o,a));let l=a=>J(n[a],1,1,()=>{n[a]=null});return{c(){t=f("ul");for(let a=0;a<n.length;a+=1)n[a].c();s(t,"class","svelte-1k3xw12")},m(a,m){D(a,t,m);for(let c=0;c<n.length;c+=1)n[c].m(t,null);r=!0},p(a,[m]){if(m&7){o=tt(16,a[0]);let c;for(c=0;c<o.length;c+=1){let u=Hf(a,o,c);n[c]?(n[c].p(u,m),W(n[c],1)):(n[c]=Mf(u),n[c].c(),W(n[c],1),n[c].m(t,null))}for(Qe(),c=o.length;c<n.length;c+=1)l(c);Xe()}},i(a){if(!r){for(let m=0;m<o.length;m+=1)W(n[m]);r=!0}},o(a){n=n.filter(Boolean);for(let m=0;m<n.length;m+=1)J(n[m]);r=!1},d(a){a&&x(t),Ne(n,a)}}}function Sp(e,t,r){let o=Al(),{members:n=[]}=t,l=c=>`Buff ${Ua[c]} 16`;function a(c,u,d){d.target.blur(),Wl(`${Qa}&players=${c.join(",")}`,"fsQuickBuff",618,1e3,",scrollbars"),o("buffBatch",l(u))}let m=(c,u,d)=>a(c,u,d);return e.$$set=c=>{"members"in c&&r(0,n=c.members)},[n,l,a,m]}var Pi=class extends oe{constructor(t){super(),re(this,t,Sp,Bp,te,{members:0})}},Ef=Pi;function To(e,t){return e>t*10||e<t?e:t*10}function Ap(e){e.attackValue=To(e.attackBonus,e.levelValue),e.defenseValue=To(e.defenseBonus,e.levelValue),e.armorValue=To(e.armorBonus,e.levelValue),e.damageValue=To(e.damageBonus,e.levelValue),e.hpValue=e.hpBonus}var Lp=[["levelValue","level"],["attackValue","attack"],["attackBonus","bonus_attack"],["defenseValue","defense"],["defenseBonus","bonus_defense"],["armorValue","armor"],["armorBonus","bonus_armor"],["damageValue","damage"],["damageBonus","bonus_damage"],["hpValue","hp"],["hpBonus","bonus_hp"],["killStreakValue","killstreak"]];function _p(e,t,r){e[r[0]]=Number(t[r[1]])}function Tp(e,t){Lp.forEach(w(_p,e,t))}var Vp=[["counterAttackLevel","Counter Attack"],["doublerLevel","Doubler"],["deathDealerLevel","Death Dealer"],["darkCurseLevel","Dark Curse"],["holyFlameLevel","Holy Flame"],["constitutionLevel","Constitution"],["sanctuaryLevel","Sanctuary"],["flinchLevel","Flinch"],["nightmareVisageLevel","Nightmare Visage"],["superEliteSlayerLevel","Super Elite Slayer"],["fortitudeLevel","Fortitude"],["chiStrikeLevel","Chi Strike"],["terrorizeLevel","Terrorize"],["barricadeLevel","Barricade"],["reignOfTerrorLevel","Reign Of Terror"],["anchoredLevel","Anchored"],["severeConditionLevel","Severe Condition"],["entrenchLevel","Entrench"],["cloakLevel","Cloak"]];function Hp(e,t,r){e[r[0]]=t[r[1]]||0}function Mp(e,t){Vp.forEach(w(Hp,e,t))}function ft(e){if(!e)return;let t=so(e._skills),r={};return Tp(r,e),Mp(r,t),r.superEliteSlayerMultiplier=Ie(.002*r.superEliteSlayerLevel,2),xl(r.armorValue)&&Ap(r),r}var ae=ne(["statusStore","Done."]),Vo=[],Nf=V(ae,(e,t)=>{let r=Vo.find(([n])=>n===e[0]);r?[,r[1]]=e:Vo=[...Vo,e];let o=Vo.find(([,n])=>n!=="Done.");t(o?.[1]??"Done.")});var We=ne(0);async function Ep(e,t){if(!e)return;ae.set(["relicStore","Processing defending guild relics ... "]);let o=(await rs(e)).r.relics.length,n=o===1?1.5:Ie(1-o/10,2),l=`${String(n*100)}%`;t({noOfRelics:o,relicMultiplier:n,leadDefenderBonus:l}),ae.set(["relicStore","Done."])}var Ho=V(We,(e,t)=>{Ep(e,t)});var Mo=ne([]);async function Np(e,t){if(!e.length)return;ae.set(["defendersStore","Processing defending group stats ... "]);let r=[];await yl(e.map(async(o,n)=>{let l=await Ol(o);r.push([n,ft(l)]),t(r)})),ae.set(["defendersStore","Done."])}var Eo=V(Mo,(e,t)=>{Np(e,t)}),Ke=V(Eo,(e,t)=>{let r=e?.find(([o])=>o===0);r&&t(r[1])}),ut=(e,t,r)=>Math.ceil(r*(t===0?e:za));function Rp(e,t,[r,o]){return{armorValue:t.armorValue+ut(e,r,o.armorValue),attackValue:t.attackValue+ut(e,r,o.attackValue),damageValue:t.damageValue+ut(e,r,o.damageValue),cloaked:t.cloaked+(o.cloakLevel?1:0),defenseValue:t.defenseValue+ut(e,r,o.defenseValue),hpValue:t.hpValue+ut(e,r,o.hpValue)}}var Ip=([e,t],r)=>{if(!e?.relicMultiplier||!t?.length)return;let o=t?.reduce(w(Rp,e.relicMultiplier),{armorValue:0,attackValue:0,damageValue:0,cloaked:0,defenseValue:0,hpValue:0});r(o)},ct=V([Ho,Eo],Ip);var No=ne(0),Gp=e=>e.members[0].name===GameData.player().username;async function qp(){return(await ao())?.r?.find(Gp)?.id}async function Pp(e){let t=await fo(e);return ns(t?.r?.attributes)}async function Fp(e){let t=await os(),r=is(t);return e?.map((o,n)=>o-r[n])}async function Op(e,t){if(!e)return;ae.set(["groupStore","Processing attacking group stats ... "]);let r=await qp(),o=r&&await Pp(r),n=o&&await Fp(o);n&&t({attack:n[0],defense:n[1],armor:n[2],hp:n[3],damage:n[4]}),ae.set(["groupStore","Done."])}var mt=V(No,(e,t)=>{Op(e,t)});var Rf=(e,t,r)=>Math.ceil(e*Tn(t,0)*r),Ro=(e,t)=>Rf(e,t,.0025),pt=(e,t)=>Rf(e,t,.001),Io=pt,Go=pt,qo=pt,Po=pt,Fo=pt,Oo=(e,t)=>Math.ceil(e*(1+Tn(t,0)*.001)),$p=e=>1-e*Ur,Fi=(e,t)=>Math.ceil(e*$p(t));var $o=ne([]),Oi=V($o,(e,t)=>{!e||t(so(e))}),Wp=V([Oi,mt],([e,t],r)=>{if(!e||!t)return;let o=Oo(t.defense,e.Constitution),n=Io(o,e.Fortitude),l=t.hp+n,a=Go(l,e["Chi Strike"]);r({dmgWithChiStrike:t.damage+a,defWithConst:o,hpWithFortitude:l,nmv:Ro(t.attack,e["Nightmare Visage"]),sanctuary:qo(t.armor,e.Sanctuary)})});function Kp([e,t,r],o){if(!e||!t||!r)return;let n=r.attack-e.nmv,l=Po(n,t.flinchLevel),a=Fo(e.dmgWithChiStrike,t.terrorizeLevel);o({attack:n-l,defense:e.defWithConst+e.nmv,armor:r.armor+e.sanctuary,hp:e.hpWithFortitude,damage:e.dmgWithChiStrike-a})}var If=V([Wp,Ke,mt],Kp);var Up=V([Ke,ct],([e,t],r)=>{if(!e||!t)return;let o=Ro(t.attackValue,e.nightmareVisageLevel),n=Oo(t.defenseValue,e.constitutionLevel),l=Io(n,e.fortitudeLevel),a=t.hpValue+l,m=Go(a,e.chiStrikeLevel),c=t.damageValue+m;r({attackWithNmv:t.attackValue-o,chiStrike:e.chiStrikeLevel,cloak:e.cloakLevel?"Yes":"No",dmgWithChiStrike:c,defWithConst:n,hpWithFortitude:a,nmv:o,sanctuary:qo(t.armorValue,e.sanctuaryLevel)})});function zp([e,t,r],o){if(!e||!t||!r)return;let n=Po(t.attackWithNmv,e.Flinch),l=t.defWithConst+t.nmv,a=Fo(t.dmgWithChiStrike,e.Terrorize);o({attack:t.attackWithNmv-n,dc225:Fi(l,225),dc175:Fi(l,175),defense:l,armor:r.armorValue+t.sanctuary,hp:t.hpWithFortitude,damage:t.dmgWithChiStrike-a})}var Gf=V([Oi,Up,ct],zp);var qf=V(Ho,(e,t)=>{t({noOfRelics:e?.noOfRelics??"",leadDefenderBonus:e?.leadDefenderBonus??""})}),Pf=V(Ke,(e,t)=>{if(!e)return t("");e.cloakLevel?t("Yes"):t("No")}),Ff=V(ct,(e,t)=>{t({armorValue:e?.armorValue??"",attackValue:e?.attackValue??"",damageValue:e?.damageValue??"",cloaked:e?.cloaked??"",defenseValue:e?.defenseValue??"",hpValue:e?.hpValue??""})}),Of=V(Eo,(e,t)=>{t(e?.length??"")}),$f=V(Gf,(e,t)=>{t({attack:e?.attack??"",dc225:e?.dc225??"",dc175:e?.dc175??"",defense:e?.defense??"",armor:e?.armor??"",hp:e?.hp??"",damage:e?.damage??""})}),Wf=e=>({attack:e?.attack??"",defense:e?.defense??"",armor:e?.armor??"",hp:e?.hp??"",damage:e?.damage??""}),Kf=V(mt,(e,t)=>{t(Wf(e))}),Uf=V(If,(e,t)=>{t(Wf(e))});function zf(e,t,r){let o=e.slice();return o[6]=t[r].id,o[7]=t[r].username,o}function Yf(e){let t,r=e[7]+"",o,n,l=" ",a;return{c(){t=f("a"),o=g(r),a=g(l),s(t,"href",n=""+(An+e[6])),s(t,"class","svelte-3priew")},m(m,c){D(m,t,c),i(t,o),D(m,a,c)},p(m,c){c&1&&r!==(r=m[7]+"")&&y(o,r),c&1&&n!==(n=""+(An+m[6]))&&s(t,"href",n)},d(m){m&&x(t),m&&x(a)}}}function Yp(e){let t=(e[0].length||"")+"",r,o,n,l=e[0],a=[];for(let m=0;m<l.length;m+=1)a[m]=Yf(zf(e,l,m));return{c(){r=g(t),o=g(` Offline guild members not at relic:
`),n=f("div");for(let m=0;m<a.length;m+=1)a[m].c();s(n,"class","missing svelte-3priew")},m(m,c){D(m,r,c),D(m,o,c),D(m,n,c);for(let u=0;u<a.length;u+=1)a[u].m(n,null)},p(m,[c]){if(c&1&&t!==(t=(m[0].length||"")+"")&&y(r,t),c&1){l=m[0];let u;for(u=0;u<l.length;u+=1){let d=zf(m,l,u);a[u]?a[u].p(d,c):(a[u]=Yf(d),a[u].c(),a[u].m(n,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=l.length}},i:P,o:P,d(m){m&&x(r),m&&x(o),m&&x(n),Ne(a,m)}}}function Qp(e,t,r){let{members:o=[]}=t,n=[],l=[({username:u})=>!o.includes(u),({last_login:u})=>u,({last_login:u})=>u<wl(),({last_login:u})=>u>kl(),({level:u})=>u<400||u>421,({level:u})=>u<441||u>450],a=u=>l.every(d=>d(u)),m=({username:u},{username:d})=>Cl(u,d);async function c(u){let d=await as(u);r(0,n=d.filter(a).sort(m))}return We.subscribe(u=>{c(u)}),e.$$set=u=>{"members"in u&&r(1,o=u.members)},[n,o]}var $i=class extends oe{constructor(t){super(),re(this,t,Qp,Yp,te,{members:1})}},Qf=$i;function Xf(e){let t,r,o;return r=new Ef({props:{members:e[10]}}),r.$on("buffBatch",e[11]),{c(){t=f("div"),Je(r.$$.fragment),s(t,"class","buff-links svelte-1qul0wc")},m(n,l){D(n,t,l),Ze(r,t,null),o=!0},p:P,i(n){o||(W(r.$$.fragment,n),o=!0)},o(n){J(r.$$.fragment,n),o=!1},d(n){n&&x(t),je(r)}}}function Xp(e){let t,r,o,n,l,a,m,c;return{c(){t=f("div"),t.textContent="Processing",r=h(),o=f("div"),n=g(e[2]),l=h(),a=f("div"),a.textContent="Assumptions",m=h(),c=f("div"),c.textContent="Above calculations include Constitution, Fortitude, Nightmare Visage, Chi Strike, Sanctuary, Terrorize and Flinch bonus calculations (in that order) on both the defending group and attacking group.",s(t,"class","b-top svelte-1qul0wc"),s(o,"class","proc-stat svelte-1qul0wc"),s(a,"class","b-top svelte-1qul0wc"),s(c,"class","assume svelte-1qul0wc")},m(u,d){D(u,t,d),D(u,r,d),D(u,o,d),i(o,n),D(u,l,d),D(u,a,d),D(u,m,d),D(u,c,d)},p(u,d){d&4&&y(n,u[2])},d(u){u&&x(t),u&&x(r),u&&x(o),u&&x(l),u&&x(a),u&&x(m),u&&x(c)}}}function Jp(e){let t,r,o;return{c(){t=f("button"),t.textContent="Fetch Stats",s(t,"class","custombutton"),s(t,"type","button")},m(n,l){D(n,t,l),r||(o=bl(t,"click",e[12]),r=!0)},p:P,d(n){n&&x(t),r=!1,o()}}}function Jf(e){let t,r,o,n,l,a,m=e[3].noOfRelics+"",c,u,d,b,M=e[3].leadDefenderBonus+"",j,de,z,A,_e,I,q,se,C,yt,Dt,xt=e[5].attackValue+"",jo,wa,bt,Bt,St=e[6].attack+"",en,ka,At,Lt,_t=e[5].defenseValue+"",tn,Ca,Tt,Vt,Ht=e[6].defense+"",rn,ya,Mt,Et,Nt=e[5].armorValue+"",on,Da,Rt,It,Gt=e[6].armor+"",nn,xa,qt,Pt,Ft=e[5].damageValue+"",an,ba,Ot,$t,Wt=e[6].damage+"",ln,Ba,Kt,Ut,zt=e[5].hpValue+"",sn,Sa,Yt,Qt,Xt=e[6].hp+"",fn,Aa,Jt,Zt,jt=e[5].cloaked+"",un,La,er,tr,cn,mn,Y,rr,_a,ee,or,nr,ir=e[6].dc225+"",pn,Ta,ar,lr,sr=e[6].dc175+"",dn,Va,fr,Ha,ur,Ma,S,cr,mr,pr=e[8].attack+"",hn,Ea,dr,hr,gr=e[9].attack+"",gn,Na,vr,wr,kr=e[8].defense+"",vn,Ra,Cr,yr,Dr=e[9].defense+"",wn,Ia,xr,br,Br=e[8].armor+"",kn,Ga,Sr,Ar,Lr=e[9].armor+"",Cn,qa,_r,Tr,Vr=e[8].damage+"",yn,Pa,Hr,Mr,Er=e[9].damage+"",Dn,Fa,Nr,Rr,Ir=e[8].hp+"",xn,Oa,Gr,qr,Pr=e[9].hp+"",bn,Bn,Ye,Te,L;return Te=new Qf({props:{members:e[10]}}),{c(){t=f("div"),r=f("div"),r.textContent="Defending Guild Stats",o=h(),n=f("div"),l=f("div"),l.textContent="Relic Count:",a=f("div"),c=g(m),u=h(),d=f("div"),d.textContent="Lead Defender Bonus:",b=f("div"),j=g(M),de=h(),z=f("div"),z.textContent="Lead Defender Cloaked:",A=f("div"),_e=g(e[4]),I=h(),q=f("div"),q.textContent="Other Defender Stats",se=h(),C=f("div"),yt=f("div"),yt.textContent="Raw Attack:",Dt=f("div"),jo=g(xt),wa=h(),bt=f("div"),bt.textContent="Attack w/ buffs:",Bt=f("div"),en=g(St),ka=h(),At=f("div"),At.textContent="Raw Defense:",Lt=f("div"),tn=g(_t),Ca=h(),Tt=f("div"),Tt.textContent="Defense w/buffs:",Vt=f("div"),rn=g(Ht),ya=h(),Mt=f("div"),Mt.textContent="Raw Armor:",Et=f("div"),on=g(Nt),Da=h(),Rt=f("div"),Rt.textContent="Armor w/ buffs:",It=f("div"),nn=g(Gt),xa=h(),qt=f("div"),qt.textContent="Raw Damage:",Pt=f("div"),an=g(Ft),ba=h(),Ot=f("div"),Ot.textContent="Damage w/ buffs:",$t=f("div"),ln=g(Wt),Ba=h(),Kt=f("div"),Kt.textContent="Raw HP:",Ut=f("div"),sn=g(zt),Sa=h(),Yt=f("div"),Yt.textContent="HP w/ buffs:",Qt=f("div"),fn=g(Xt),Aa=h(),Jt=f("div"),Jt.textContent="Cloaked:",Zt=f("div"),un=g(jt),La=h(),er=f("div"),er.textContent="Processed:",tr=f("div"),cn=g(e[7]),mn=h(),Y=f("div"),rr=f("div"),rr.textContent="Adjusted Defense Values",_a=h(),ee=f("div"),or=f("div"),or.textContent="DC225:",nr=f("div"),pn=g(ir),Ta=h(),ar=f("div"),ar.textContent="DC175:",lr=f("div"),dn=g(sr),Va=h(),fr=f("div"),fr.textContent="\xA0",Ha=h(),ur=f("div"),ur.textContent="Attacking Group Stats",Ma=h(),S=f("div"),cr=f("div"),cr.textContent="Raw Group Attack:",mr=f("div"),hn=g(pr),Ea=h(),dr=f("div"),dr.textContent="Group Attack w/ buffs:",hr=f("div"),gn=g(gr),Na=h(),vr=f("div"),vr.textContent="Raw Group Defense:",wr=f("div"),vn=g(kr),Ra=h(),Cr=f("div"),Cr.textContent="Group Defense w/ buffs:",yr=f("div"),wn=g(Dr),Ia=h(),xr=f("div"),xr.textContent="Raw Group Armor:",br=f("div"),kn=g(Br),Ga=h(),Sr=f("div"),Sr.textContent="Group Armor w/ buffs:",Ar=f("div"),Cn=g(Lr),qa=h(),_r=f("div"),_r.textContent="Raw Group Damage:",Tr=f("div"),yn=g(Vr),Pa=h(),Hr=f("div"),Hr.textContent="Group Damage w/ buffs:",Mr=f("div"),Dn=g(Er),Fa=h(),Nr=f("div"),Nr.textContent="Raw Group HP:",Rr=f("div"),xn=g(Ir),Oa=h(),Gr=f("div"),Gr.textContent="Group HP w/ buffs:",qr=f("div"),bn=g(Pr),Bn=h(),Ye=f("div"),Je(Te.$$.fragment),s(r,"class","b-top svelte-1qul0wc"),s(l,"class","svelte-1qul0wc"),s(a,"class","svelte-1qul0wc"),s(d,"class","svelte-1qul0wc"),s(b,"class","svelte-1qul0wc"),s(z,"class","svelte-1qul0wc"),s(A,"class","svelte-1qul0wc"),s(n,"class","stat-grid svelte-1qul0wc"),s(q,"class","b-top svelte-1qul0wc"),s(yt,"class","svelte-1qul0wc"),s(Dt,"class","svelte-1qul0wc"),s(bt,"class","svelte-1qul0wc"),s(Bt,"class","svelte-1qul0wc"),s(At,"class","svelte-1qul0wc"),s(Lt,"class","svelte-1qul0wc"),s(Tt,"class","svelte-1qul0wc"),s(Vt,"class","svelte-1qul0wc"),s(Mt,"class","svelte-1qul0wc"),s(Et,"class","svelte-1qul0wc"),s(Rt,"class","svelte-1qul0wc"),s(It,"class","svelte-1qul0wc"),s(qt,"class","svelte-1qul0wc"),s(Pt,"class","svelte-1qul0wc"),s(Ot,"class","svelte-1qul0wc"),s($t,"class","svelte-1qul0wc"),s(Kt,"class","svelte-1qul0wc"),s(Ut,"class","svelte-1qul0wc"),s(Yt,"class","svelte-1qul0wc"),s(Qt,"class","svelte-1qul0wc"),s(Jt,"class","svelte-1qul0wc"),s(Zt,"class","svelte-1qul0wc"),s(er,"class","svelte-1qul0wc"),s(tr,"class","svelte-1qul0wc"),s(C,"class","stat-grid svelte-1qul0wc"),s(t,"class","middle svelte-1qul0wc"),s(rr,"class","b-top svelte-1qul0wc"),s(or,"class","svelte-1qul0wc"),s(nr,"class","svelte-1qul0wc"),s(ar,"class","svelte-1qul0wc"),s(lr,"class","svelte-1qul0wc"),s(fr,"class","svelte-1qul0wc"),s(ee,"class","stat-grid svelte-1qul0wc"),s(ur,"class","b-top svelte-1qul0wc"),s(cr,"class","svelte-1qul0wc"),s(mr,"class","svelte-1qul0wc"),s(dr,"class","svelte-1qul0wc"),s(hr,"class","svelte-1qul0wc"),s(vr,"class","svelte-1qul0wc"),s(wr,"class","svelte-1qul0wc"),s(Cr,"class","svelte-1qul0wc"),s(yr,"class","svelte-1qul0wc"),s(xr,"class","svelte-1qul0wc"),s(br,"class","svelte-1qul0wc"),s(Sr,"class","svelte-1qul0wc"),s(Ar,"class","svelte-1qul0wc"),s(_r,"class","svelte-1qul0wc"),s(Tr,"class","svelte-1qul0wc"),s(Hr,"class","svelte-1qul0wc"),s(Mr,"class","svelte-1qul0wc"),s(Nr,"class","svelte-1qul0wc"),s(Rr,"class","svelte-1qul0wc"),s(Gr,"class","svelte-1qul0wc"),s(qr,"class","svelte-1qul0wc"),s(S,"class","stat-grid svelte-1qul0wc"),s(Y,"class","right svelte-1qul0wc"),s(Ye,"class","bottom b-top svelte-1qul0wc")},m(v,B){D(v,t,B),i(t,r),i(t,o),i(t,n),i(n,l),i(n,a),i(a,c),i(n,u),i(n,d),i(n,b),i(b,j),i(n,de),i(n,z),i(n,A),i(A,_e),i(t,I),i(t,q),i(t,se),i(t,C),i(C,yt),i(C,Dt),i(Dt,jo),i(C,wa),i(C,bt),i(C,Bt),i(Bt,en),i(C,ka),i(C,At),i(C,Lt),i(Lt,tn),i(C,Ca),i(C,Tt),i(C,Vt),i(Vt,rn),i(C,ya),i(C,Mt),i(C,Et),i(Et,on),i(C,Da),i(C,Rt),i(C,It),i(It,nn),i(C,xa),i(C,qt),i(C,Pt),i(Pt,an),i(C,ba),i(C,Ot),i(C,$t),i($t,ln),i(C,Ba),i(C,Kt),i(C,Ut),i(Ut,sn),i(C,Sa),i(C,Yt),i(C,Qt),i(Qt,fn),i(C,Aa),i(C,Jt),i(C,Zt),i(Zt,un),i(C,La),i(C,er),i(C,tr),i(tr,cn),D(v,mn,B),D(v,Y,B),i(Y,rr),i(Y,_a),i(Y,ee),i(ee,or),i(ee,nr),i(nr,pn),i(ee,Ta),i(ee,ar),i(ee,lr),i(lr,dn),i(ee,Va),i(ee,fr),i(Y,Ha),i(Y,ur),i(Y,Ma),i(Y,S),i(S,cr),i(S,mr),i(mr,hn),i(S,Ea),i(S,dr),i(S,hr),i(hr,gn),i(S,Na),i(S,vr),i(S,wr),i(wr,vn),i(S,Ra),i(S,Cr),i(S,yr),i(yr,wn),i(S,Ia),i(S,xr),i(S,br),i(br,kn),i(S,Ga),i(S,Sr),i(S,Ar),i(Ar,Cn),i(S,qa),i(S,_r),i(S,Tr),i(Tr,yn),i(S,Pa),i(S,Hr),i(S,Mr),i(Mr,Dn),i(S,Fa),i(S,Nr),i(S,Rr),i(Rr,xn),i(S,Oa),i(S,Gr),i(S,qr),i(qr,bn),D(v,Bn,B),D(v,Ye,B),Ze(Te,Ye,null),L=!0},p(v,B){(!L||B&8)&&m!==(m=v[3].noOfRelics+"")&&y(c,m),(!L||B&8)&&M!==(M=v[3].leadDefenderBonus+"")&&y(j,M),(!L||B&16)&&y(_e,v[4]),(!L||B&32)&&xt!==(xt=v[5].attackValue+"")&&y(jo,xt),(!L||B&64)&&St!==(St=v[6].attack+"")&&y(en,St),(!L||B&32)&&_t!==(_t=v[5].defenseValue+"")&&y(tn,_t),(!L||B&64)&&Ht!==(Ht=v[6].defense+"")&&y(rn,Ht),(!L||B&32)&&Nt!==(Nt=v[5].armorValue+"")&&y(on,Nt),(!L||B&64)&&Gt!==(Gt=v[6].armor+"")&&y(nn,Gt),(!L||B&32)&&Ft!==(Ft=v[5].damageValue+"")&&y(an,Ft),(!L||B&64)&&Wt!==(Wt=v[6].damage+"")&&y(ln,Wt),(!L||B&32)&&zt!==(zt=v[5].hpValue+"")&&y(sn,zt),(!L||B&64)&&Xt!==(Xt=v[6].hp+"")&&y(fn,Xt),(!L||B&32)&&jt!==(jt=v[5].cloaked+"")&&y(un,jt),(!L||B&128)&&y(cn,v[7]),(!L||B&64)&&ir!==(ir=v[6].dc225+"")&&y(pn,ir),(!L||B&64)&&sr!==(sr=v[6].dc175+"")&&y(dn,sr),(!L||B&256)&&pr!==(pr=v[8].attack+"")&&y(hn,pr),(!L||B&512)&&gr!==(gr=v[9].attack+"")&&y(gn,gr),(!L||B&256)&&kr!==(kr=v[8].defense+"")&&y(vn,kr),(!L||B&512)&&Dr!==(Dr=v[9].defense+"")&&y(wn,Dr),(!L||B&256)&&Br!==(Br=v[8].armor+"")&&y(kn,Br),(!L||B&512)&&Lr!==(Lr=v[9].armor+"")&&y(Cn,Lr),(!L||B&256)&&Vr!==(Vr=v[8].damage+"")&&y(yn,Vr),(!L||B&512)&&Er!==(Er=v[9].damage+"")&&y(Dn,Er),(!L||B&256)&&Ir!==(Ir=v[8].hp+"")&&y(xn,Ir),(!L||B&512)&&Pr!==(Pr=v[9].hp+"")&&y(bn,Pr)},i(v){L||(W(Te.$$.fragment,v),L=!0)},o(v){J(Te.$$.fragment,v),L=!1},d(v){v&&x(t),v&&x(mn),v&&x(Y),v&&x(Bn),v&&x(Ye),je(Te)}}}function Zp(e){let t,r,o,n,l,a=e[0].is_owner&&Xf(e);function m(b,M){return b[1]?Xp:Jp}let c=m(e,-1),u=c(e),d=e[1]&&Jf(e);return{c(){t=f("div"),r=f("div"),a&&a.c(),o=h(),u.c(),n=h(),d&&d.c(),s(r,"class","left svelte-1qul0wc"),s(t,"class","body svelte-1qul0wc")},m(b,M){D(b,t,M),i(t,r),a&&a.m(r,null),i(r,o),u.m(r,null),i(t,n),d&&d.m(t,null),l=!0},p(b,[M]){b[0].is_owner?a?(a.p(b,M),M&1&&W(a,1)):(a=Xf(b),a.c(),W(a,1),a.m(r,o)):a&&(Qe(),J(a,1,1,()=>{a=null}),Xe()),c===(c=m(b,M))&&u?u.p(b,M):(u.d(1),u=c(b),u&&(u.c(),u.m(r,null))),b[1]?d?(d.p(b,M),M&2&&W(d,1)):(d=Jf(b),d.c(),W(d,1),d.m(t,null)):d&&(Qe(),J(d,1,1,()=>{d=null}),Xe())},i(b){l||(W(a),W(d),l=!0)},o(b){J(a),J(d),l=!1},d(b){b&&x(t),a&&a.d(),u.d(),d&&d.d()}}}function jp(e,t,r){let o,n,l,a,m,c,u,d;me(e,Nf,A=>r(2,o=A)),me(e,qf,A=>r(3,n=A)),me(e,Pf,A=>r(4,l=A)),me(e,Ff,A=>r(5,a=A)),me(e,$f,A=>r(6,m=A)),me(e,Of,A=>r(7,c=A)),me(e,Kf,A=>r(8,u=A)),me(e,Uf,A=>r(9,d=A));let{relicData:b={}}=t,M=b.defenders.map(A=>A.player_name),j=!1;function de(A){ce("relic",A.detail)}function z(){ce("relic","fetchStats"),r(1,j=!0),We.set(b.controlled_by.guild_id),Mo.set(M),No.set(GameData.player().hasGroup),$o.set(GameData.player().buffs)}return Sl(()=>{r(1,j=!1),We.set(0),Mo.set([]),No.set(0),$o.set([])}),e.$$set=A=>{"relicData"in A&&r(0,b=A.relicData)},[b,j,o,n,l,a,m,c,u,d,M,de,z]}var Wi=class extends oe{constructor(t){super(),re(this,t,jp,Zp,te,{relicData:0})}},Zf=Wi;var Ki=0;function ed(e,t){Ki&&Ki.$destroy(),Ki=new Zf({props:{relicData:t},target:e})}function td(e,t){t?.response?.data?.defenders?.length>0&&ed(_("dialog-relic"),t.response.data)}function Ui(){$.subscribe(il,td)}function rd(e,t){t==="ACT_REPAIR"&&GameData.fetch(sl+he+Kr+Q)}function zi(){$.subscribe(tl,rd)}var Yi=0;function jf(e){$("#statbar-gold").css("background-color",e)}function eu(){$("#HelperSendTotal").html(ge(E("currentGoldSentTotal"))),Number(GameData.player().gold)>Yi?jf("red"):jf("inherit")}function od(){return`<dt class="stat-gold-sendTo">Send To:</dt><dd id="HelperSendTo">${E("goldRecipient")}</dd><dt class="stat-gold-sendAmt">Amount:</dt><dd id="HelperSendAmt">${ge(Yi)}</dd><dt class="stat-gold-sendTo">Send?</dt><dd><input id="HelperSendGold" value="Send!" class="custombutton" type="submit"><input type="hidden" id="xc" value=""</dd><dt class="stat-gold-sendTotal">Total Sent:</dt><dd id="HelperSendTotal">${ge(E("currentGoldSentTotal"))}</dd>`}function nd(){Yi=E("goldAmount"),$("#statbar-gold-tooltip-general").append(od()),$("#HelperSendGold").on("click",Il),eu(),$.subscribe(ja,eu)}function Qi(){Rl(),Nl()&&nd()}var dt=0,ht=0,Wo=0,Ue=0,Xi=0,Ko=0;function id(){return ot({a:14,d:0,id:dt.id,item_id:dt.itemId})}function ad(e){let t=e.response.response,r=e.response.msg,o=r;if(t!==0){let n=r.indexOf("<");n!==-1&&(o=r.substring(0,n))}else o=`You purchased ${e.response.data.name} for ${ge(e.response.data.cost)} gold.`;Fr(Ko,`${o}<br>`)}function ld(){GameData.doAction(14,3,{id:dt.id,item_id:dt.itemId},0),Wo.close()}function sd(){let e=ss(Xi.value);if(!e)return;let t=[];for(let r=1;r<e;r+=1)t.push(id().then(ad));ls(t,ld)}function fd(){Ue=H({className:"fshClear",textContent:"Select how many to quick-buy:"}),Xi=no({id:"buyAmount",className:"fshNumberInput",min:1,max:99,value:1,type:"number"}),k(Ue,Xi);let e=ve({textContent:"Quick-buy"});F(e,sd),k(Ue,e),Ko=H(),k(Ue,Ko),k(ht,Ue)}function ud(){return ht||_("shopDialogConfirm")}function cd(){return Wo||$(ht).data("hcsWorldDialogShopConfirm")}function md(){Ue?T("",Ko):fd()}function pd(e,t){dt=t,ht=ud(),ht&&(Wo=cd(),Wo&&md())}function Ji(){$.subscribe(el,pd)}function tu(e){let t,r;return{c(){t=f("div"),r=g(e[0]),s(t,"id","tp-overlay"),s(t,"class","svelte-dcwx64")},m(o,n){D(o,t,n),i(t,r)},p(o,n){n&1&&y(r,o[0])},d(o){o&&x(t)}}}function dd(e){let t,r=e[1]&&tu(e);return{c(){r&&r.c(),t=ro()},m(o,n){r&&r.m(o,n),D(o,t,n)},p(o,[n]){o[1]?r?r.p(o,n):(r=tu(o),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:P,o:P,d(o){r&&r.d(o),o&&x(t)}}}function ru(){return Math.floor(Date.now()/1e3)}function hd(e,t,r){let{tpButton:o}=t,n=0,l=0,a=!1;function m(){n>0||(clearInterval(a),r(1,a=!1),o.classList.remove("cooldown"))}function c(){let d=GameData.player().teleportCooldown;r(0,n=d-ru()+l),m()}function u(d,b){l=ru(),c(),!(a||b.response.response!==0)&&r(1,a=setInterval(()=>{c()},1e3))}return window.$.subscribe("stats.player",c),window.$.subscribe(ll,u),e.$$set=d=>{"tpButton"in d&&r(2,o=d.tpButton)},[n,a,o]}var Zi=class extends oe{constructor(t){super(),re(this,t,hd,dd,te,{tpButton:2})}},ou=Zi;function gd(e,t){return new ou({target:e,props:t})}function ji(){let e=He(".actionListHeaderButton.teleport");gd(e,{tpButton:e})}function nu(e){return e.numberOfCreatureHitsTillDead-e.numberOfHitsRequired<=1?", dies on miss":", survives a miss"}function iu(e,t){return t==="-"?e:e==="-"||e>t?"-":e}var vd=[[e=>e.playerHits==="-"&&e.creatureHits==="-",()=>"Unresolved"],[e=>e.playerHits==="-",()=>"Player dies"],[e=>e.playerHits===1,e=>`Player 1 hits${nu(e)}`],[e=>e.playerHits>1,e=>`Player > 1 hits${nu(e)}`]];function wd(e,t){return t[0](e)}function kd(e){let t=vd.find(w(wd,e));return t?t[1](e):"Unknown"}function ea(e){e.playerHits=iu(e.numberOfHitsRequired,e.numberOfCreatureHitsTillDead),e.creatureHits=iu(e.numberOfCreatureHitsTillDead,e.numberOfHitsRequired),e.fightStatus=kd(e)}function le(e,t,r){return e.callback.groupExists?t:r}function gt(e,t,r,o){t>0&&(e.extraNotes+=`${r} = ${Math.floor(o*t*.001)}<br>`)}var Cd=e=>le(e,e.callback.groupArmorValue,e.player.armorValue);function yd(e){let t=Cd(e);e.overallArmorValue=t+Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}function Dd(e){gt(e,e.player.sanctuaryLevel,"Sanc Bonus Armor",e.player.armorValue)}function xd(e){e.terrorizeEffect=Math.floor(e.creature.damage*e.player.terrorizeLevel*.001)}function bd(e){e.player.terrorizeLevel>0&&(e.extraNotes+=`Terrorize Creature Damage Effect = ${e.terrorizeEffect*-1}<br>`)}function Bd(e){e.creatureDamageDone=Math.ceil(e.generalVariable*e.creature.damage-e.overallArmorValue+e.overallHPValue)}function Sd(e){let t=e.generalVariable*e.creature.damage;t<e.overallArmorValue?e.numberOfCreatureHitsTillDead=e.overallHPValue:e.numberOfCreatureHitsTillDead=Math.ceil(e.overallHPValue/(t-e.overallArmorValue))}function Ad(e){e.creatureHitByHowMuch>=0?Sd(e):e.numberOfCreatureHitsTillDead="-"}function ta(e){yd(e),Dd(e),xd(e),bd(e),e.creature.damage-=e.terrorizeEffect,Bd(e),Ad(e)}var Ld=e=>le(e,e.callback.groupAttackValue,e.player.attackValue);function au(e){return Math.floor(e.creature.defense*e.player.darkCurseLevel*Ur)}function _d(e){let t=e.creature.defense-au(e);return e.combatEvaluatorBias===3?e.overallAttackValue-Math.ceil(t)-50:e.overallAttackValue-Math.ceil(e.attackVariable*t)}function ra(e){let t=Ld(e);e.player.darkCurseLevel>0&&(e.extraNotes+=`DC Bonus Attack = ${au(e)}<br>`),e.nightmareVisageAttackMovedToDefense=Math.floor((t+e.counterAttackBonusAttack)*e.player.nightmareVisageLevel*.0025),e.player.nightmareVisageLevel>0&&(e.extraNotes+=`NMV Attack moved to Defense = ${e.nightmareVisageAttackMovedToDefense}<br>`),e.overallAttackValue=t+e.counterAttackBonusAttack-e.nightmareVisageAttackMovedToDefense,e.hitByHowMuch=_d(e)}function Td(e){return e.player.counterAttackLevel>0&&e.numberOfHitsRequired===1}var lu=(e,t,r)=>Math.max(Math.ceil((e-t+1)/r/.0025),0);function fu(e){e.lowestCALevelToStillHit=lu(e.counterAttackBonusAttack,e.hitByHowMuch,e.player.attackValue),e.lowestCALevelToStillKill=lu(e.counterAttackBonusDamage,e.damageDone,e.player.damageValue)}function Vd(e){return e.player.counterAttackLevel>0?Math.ceil((1+e.player.doublerLevel/50)*.0025*e.lowestFeasibleCALevel):0}function Hd(e){e.extraAttackAtLowestFeasibleCALevel=Math.floor(e.player.attackValue*.0025*e.lowestFeasibleCALevel),e.extraDamageAtLowestFeasibleCALevel=Math.floor(e.player.damageValue*.0025*e.lowestFeasibleCALevel),e.extraNotes+=`Extra CA Att/Dam at this lowered CA level = ${e.extraAttackAtLowestFeasibleCALevel} / ${e.extraDamageAtLowestFeasibleCALevel}<br>`}function Md(e){fu(e),e.lowestFeasibleCALevel=Math.max(e.lowestCALevelToStillHit,e.lowestCALevelToStillKill),e.extraNotes+=`Lowest CA to still 1-hit this creature = ${e.lowestFeasibleCALevel}<br>`,e.lowestFeasibleCALevel!==0&&Hd(e),e.extraStaminaPerHitAtLowestFeasibleCALevel=Vd(e),e.extraStaminaPerHitAtLowestFeasibleCALevel<e.extraStaminaPerHit?e.extraNotes+=`Extra Stam Used at this lowered CA level = ${e.extraStaminaPerHitAtLowestFeasibleCALevel}<br>`:e.extraNotes+="No reduction of stam used at the lower CA level<br>"}function Ed(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired!==1}function su(e,t,r){e[t]>203?e.extraNotes+=`Even with CA203 you cannot ${r} this creature<br>`:e[t]!==0&&(e.extraNotes+=`You need a minimum of CA${e[t]} to ${r} this creature<br>`)}function Nd(e){fu(e),su(e,"lowestCALevelToStillHit","hit"),su(e,"lowestCALevelToStillKill","1-hit kill")}function oa(e){Td(e)&&Md(e),Ed(e)&&Nd(e)}var Rd=e=>le(e,e.callback.groupHPValue,e.player.hpValue),Id=e=>le(e,e.callback.groupDamageValue,e.player.damageValue);function Gd(e){let t=Rd(e),{fortitudeLevel:r}=e.player;e.fortitudeExtraHPs=Math.floor(t*r*.001),r>0&&(e.extraNotes+=`Fortitude Bonus HP = ${e.fortitudeExtraHPs}<br>`),e.overallHPValue=t+e.fortitudeExtraHPs}function qd(e){let{chiStrikeLevel:t}=e.player;e.chiStrikeExtraDamage=Math.floor(e.overallHPValue*t*.001),t>0&&(e.extraNotes+=`Chi Strike Bonus Damage = ${e.chiStrikeExtraDamage}<br>`)}function na(e){if(Gd(e),qd(e),e.overallDamageValue=Id(e)+e.deathDealerBonusDamage+e.counterAttackBonusDamage+e.holyFlameBonusDamage+e.chiStrikeExtraDamage,e.damageDone=Math.floor(e.overallDamageValue-(e.generalVariable*e.creature.armor+e.hpVariable*e.creature.hp)),e.hitByHowMuch>0){let t=1;e.overallDamageValue>=e.generalVariable*e.creature.armor&&(t=e.overallDamageValue-e.generalVariable*e.creature.armor),e.numberOfHitsRequired=Math.ceil(e.hpVariable*e.creature.hp/t)}else e.numberOfHitsRequired="-"}var cu=e=>le(e,e.callback.groupDefenseValue,e.player.defenseValue),mu=e=>Math.floor(cu(e)*e.player.constitutionLevel*.001);function Pd(e){e.player.constitutionLevel>0&&(e.extraNotes+=`Constitution Bonus Defense = ${mu(e)}<br>`)}function Fd(e){gt(e,e.player.flinchLevel,"Flinch Bonus Attack Reduction",e.creature.attack)}var uu=e=>e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue;function ia(e){e.overallDefenseValue=cu(e)+mu(e)+e.nightmareVisageAttackMovedToDefense,Pd(e),Fd(e),e.creatureHitByHowMuch=Math.floor(e.attackVariable*uu(e)),e.combatEvaluatorBias===3&&(e.creatureHitByHowMuch=Math.floor(uu(e)-50))}function Od(e){e.player.superEliteSlayerLevel>0&&(e.extraNotes+=`SES Stat Reduction Multiplier = ${e.player.superEliteSlayerMultiplier}<br>`)}function $d(e){e.holyFlameBonusDamage=0,e.creature.class==="Undead"&&(e.holyFlameBonusDamage=Math.max(Math.floor((e.player.damageValue-e.creature.armor)*e.player.holyFlameLevel*.002),0),e.player.holyFlameLevel>0&&(e.extraNotes+=`HF Bonus Damage = ${e.holyFlameBonusDamage}<br>`))}function Wd(e){e.deathDealerBonusDamage=Math.floor(e.player.damageValue*(Math.min(Math.floor(e.player.killStreakValue/5)*.01*e.player.deathDealerLevel,20)/100))}function Kd(e){e.counterAttackBonusAttack=Math.floor(e.player.attackValue*.0025*e.player.counterAttackLevel),e.counterAttackBonusDamage=Math.floor(e.player.damageValue*.0025*e.player.counterAttackLevel)}function Ud(e){e.extraStaminaPerHit=0,e.player.counterAttackLevel>0&&(e.extraStaminaPerHit=Math.ceil((1+e.player.doublerLevel/50)*.0025*e.player.counterAttackLevel))}function zd(e){e.player.deathDealerLevel>0&&(e.extraNotes+=`DD Bonus Damage = ${e.deathDealerBonusDamage}<br>`)}function Yd(e){e.player.counterAttackLevel>0&&(e.extraNotes+=`CA Bonus Attack/Damage = ${e.counterAttackBonusAttack} / ${e.counterAttackBonusDamage}<br>CA Extra Stam Used = ${e.extraStaminaPerHit}<br>`)}function aa(e){e.extraNotes="",Od(e),$d(e),Wd(e),Kd(e),Ud(e),zd(e),Yd(e)}var Qd=e=>e.creatureHitByHowMuch>=0?"Yes":"No",Xd=e=>e.hitByHowMuch>0?"Yes":"No",Jd=e=>e.callback.groupExists?"Group ":"",U=e=>`<span style="color:#333333">${e}</span>`,Uo=e=>`<tr>${e}</tr>`,la=(e,t)=>`<td${t%2?"":' class="fshRight"'}>${e}</td>`,vt=e=>Uo(e.map(la).join("")),Zd=e=>Uo(`<td bgcolor="#CD9E4B" colspan="4" align="center">${Jd(e)}Combat Evaluation</td>`),jd=e=>vt([U("Will I hit it?"),Xd(e),U("Extra Attack:"),`( ${e.hitByHowMuch} )`]),eh=e=>vt([U("# Hits to kill it?"),e.numberOfHitsRequired,U("Extra Damage:"),`( ${e.damageDone} )`]),th=e=>vt([U("Will I be hit?"),Qd(e),U("Extra Defense:"),`( ${-1*e.creatureHitByHowMuch} )`]),rh=e=>vt([U("# Hits to kill me?"),e.numberOfCreatureHitsTillDead,U("Extra Armor + HP:"),`( ${-1*e.creatureDamageDone} )`]),oh=e=>vt([U("# Player Hits?"),e.playerHits,U("# Creature Hits?"),e.creatureHits]),nh=e=>Uo(`${la(U("Fight Status:"),0)}<td colspan="3"><span>${e.fightStatus}</span></td>`),ih=e=>Uo(`${la(U("Notes:"),0)}<td colspan="3"><span style="font-size:x-small;">${e.extraNotes}</span></td>`);function sa(e){return`<table width="100%"><tbody>${Zd(e)}${jd(e)}${eh(e)}${th(e)}${rh(e)}${oh(e)}${nh(e)}${ih(e)}</tbody></table>`}var zo=0,Yo=0,wt=0;function ah(e){if(!zo){let t=Ee("body",e);t.length===1&&([zo]=t)}}function pu(){return Le(Yo)?"Remove from do not kill list":"Add to the do not kill list"}function du(){T(pu(),wt)}function lh(){let e=p.doNotKillList.indexOf(Yo);e===-1?p.doNotKillList.push(Yo):p.doNotKillList.splice(e,1),du(),X("doNotKillList",p.doNotKillList.join()),$e()}function sh(){wt=ve({className:"fshBl",textContent:pu(),type:"button"});let e=H({className:"description",innerHTML:'<span class="ui-helper-hidden-accessible"><input type="text"></span>'});k(e,wt),k(zo,e),F(wt,lh)}function fh(){wt?du():sh()}function fa(e,t){ah(t),zo&&(Yo=Me(e),fh())}var ze=0,kt=0,Qo=0,Xo=0;function uh(){ze||(ze=_("dialog-viewcreature"))}function ch(){kt||(kt=H(),k(ze,kt),k(ze,H({innerHTML:'<span class="fshFooter">*Does include CA, DD, HF, DC, Flinch, Super Elite Slayer, NMV, Sanctuary, Constitution, Fortitude, Chi Strike and Terrorize (if active) and allow for randomness (1.1053). Constitution, NMV, Fortitude and Chi Strike apply to group stats.</span>'})))}function hu(){Qo||(ch(),Qo=H(),k(kt,Qo))}function mh(){Xo||(hu(),Xo=H(),k(kt,Xo))}function gu(e){hu(),O(e,Qo)}function vu(e){mh(),O(e,Xo)}function ph(e,t,r){r===3&&(t.attack-=Math.ceil(t.attack*e),t.defense-=Math.ceil(t.defense*e),t.armor-=Math.ceil(t.armor*e),t.damage-=Math.ceil(t.damage*e),t.hp-=Math.ceil(t.hp*e))}function dh(e,t){let r={name:e.name,class:e.creature_class,attack:Number(e.attack),defense:Number(e.defense),armor:Number(e.armor),damage:Number(e.damage),hp:Number(e.hp)};return ph(t,r,e.type),r}function hh(e){e.combatEvaluatorBias=p.combatEvaluatorBias,e.attackVariable=1.1053,e.generalVariable=p.generalVariable,e.hpVariable=p.hpVariable}function gh(e){Pl([aa,ra,na,ia,ta,ea,oa],e)}function wu(e,t,r){let o={};o.callback=r,o.player=ft(t),hh(o),o.creature=dh(e.response.data,o.player.superEliteSlayerMultiplier),gh(o),o.evaluatorHTML=sa(o),r.groupExists?vu(o.evaluatorHTML):gu(o.evaluatorHTML)}function vh(e){return e.members[0].name===jr()}function wh(e){if(ue(e.r))return e.r.find(vh).id}function kh(e,t,r){if(!r.r||!r.r.attributes)return;let o=r.r.attributes;wu(e,t,{groupExists:!0,groupAttackValue:o[0].value,groupDefenseValue:o[1].value,groupArmorValue:o[2].value,groupDamageValue:o[3].value,groupHPValue:o[4].value})}function Ch(e,t,r){r&&fo(r).then(w(kh,e,t))}function yh(e,t){ao().then(wh).then(w(Ch,e,t))}function Dh(e,t){e.player.hasGroup&&yh(e,t),wu(e,t,{groupExists:!1})}function xh(e){return e.response&&e.response.data}function bh(e,t){uh(),ze&&(gu(""),vu(""),xh(t)&&(fa(t.response.data.name,ze),$l(!0).then(w(Dh,t))))}function ua(){$.subscribe(nl,bh)}var Ct=0;function Cu(){Ct=!Ct,X("hidePlayerActions",Ct),GameData.fetch(Q)}function Bh(e){let t=Ee("verbs",e);t.length===1&&Fl(t[0])}function ku(){if(!Ct)return;let e=_("actionList");Qr("player",e).forEach(Bh)}function yu(){Ct=E("hidePlayerActions"),$.subscribe(Ve,ku),ku()}var Du=0,xu="",ca=()=>Du,bu=()=>xu;function Jo(){let e=[null,[p.buffs,p.buffsName],[p.buffs2,p.buffs2Name],[p.buffs3,p.buffs3Name]][p.enabledHuntingMode];ue(e)&&([Du,xu]=e)}function ma(e){e.target.name==="enabledHuntingMode"&&(p.enabledHuntingMode=e.target.value,X("enabledHuntingMode",p.enabledHuntingMode),Jo(),GameData.fetch(he))}function ye(e){p[e]=!p[e],X(e,p[e])}function Sh(){return H({id:"fshWorldPrefs",innerHTML:`${Be("showCreatureInfo")}&nbsp;&nbsp;${Be("showMonsterLog")}&nbsp;&nbsp;${Be("showTitanInfo")}&nbsp;&nbsp;${Be("showBuffInfo")}<br>${Be("hideSubLvlCreature")}&nbsp;&nbsp;${Be("hidePlayerActions")}&nbsp;&nbsp;${fs()}`})}function Ah(){ye("showHuntingBuffs"),GameData.fetch(he)}function Lh(){ye("hideSubLvlCreature"),GameData.fetch(Q)}function _h(){ye("showTitanInfo"),st(GameData.realm().dynamic)}function Th(){ye("showBuffInfo"),Oe()}var Vh={hideSubLvlCreature:Lh,hidePlayerActions:Cu,showCreatureInfo:()=>ye("showCreatureInfo"),showHuntingBuffs:Ah,showMonsterLog:()=>ye("showMonsterLog"),showTitanInfo:_h,showBuffInfo:Th};function Hh(e){let t=Vh[e.target.name];zr(t)&&(e.target.blur(),t(e))}function pa(){let e=H({className:"fshCenter fshFten"}),t=Sh();F(t,Hh),fe(t,"change",ma),k(e,t);let r=H();k(e,r);let o=_("worldContainerBelow").children[0];return io(e,o),r}var Zo=[{generalVariable:1.1053,hpVariable:1.1},{generalVariable:1.1,hpVariable:1.053},{generalVariable:1.053,hpVariable:1},{generalVariable:1.1053,hpVariable:1}];function Mh(e){return Zo[e]?Zo[e].generalVariable:1.1053}function Eh(e){return Zo[e]?Zo[e].hpVariable:1.1}function da(){p.combatEvaluatorBias=E("combatEvaluatorBias"),p.generalVariable=Mh(p.combatEvaluatorBias),p.hpVariable=Eh(p.combatEvaluatorBias)}function Nh(e,t){return e[t.name]=!0,e}function Rh(e,t,r){return e[Me(r)]||t.push(r),t}function Ih(e,t){O(`You are missing some ${bu()} hunting buffs<br>(${t.join(", ")})`,e)}function Bu(e){O("",e)}function Gh(e,t){let r=t.b.reduce(Nh,{}),o=ca().reduce(w(Rh,r),[]);o.length>0?Ih(e,o):Bu(e)}function qh(e,t){p.showHuntingBuffs?Gh(e,t):Bu(e)}function Ph(e,t,r){ca()&&qh(e,r)}function ha(e){Jo();let t=w(Ph,e);$.subscribe($r,t),p.showHuntingBuffs&&window.initialGameData&&t(null,{b:window.initialGameData.player.buffs})}function Fh(e){return!e||!e.actions||e.actions.length===0}function Oh(e,t){return t.type===6?t.data.creature_type!==0||t.data.level>=e:!0}function $h(e){return e.realm&&e.realm.minlevel||GameData.realm().minlevel}function Wh(e){let t=dl(e);return Fh(t)?e:(t.actions=t.actions.filter(w(Oh,$h(t))),gl(t))}function Kh(e){return e.data&&e.data.d&&us(e.data.d,Q)}function Uh(e,t){p.hideSubLvlCreature&&Kh(t)&&(e.dataFilter=Wh)}function ga(){$.ajaxPrefilter("JSON",Uh),p.hideSubLvlCreature&&GameData.fetch(Q)}function zh(e){p[e[0]]=Mn(e[1])}function Yh(){[["buffs","huntingBuffs"],["buffs2","huntingBuffs2"],["buffs3","huntingBuffs3"]].forEach(zh)}function Qh(e){p[e]=Mn(e)}function Xh(){["doNotKillList"].forEach(Qh)}function Jh(){Yh(),Xh()}function Zh(e){p[e[0]]=E(e[1])}function jh(){[["buffsName","huntingBuffsName"],["buffs2Name","huntingBuffs2Name"],["buffs3Name","huntingBuffs3Name"],["showHuntingBuffs","showHuntingBuffs"]].forEach(Zh)}function eg(e){p[e]=E(e)}function tg(){["enabledHuntingMode","hideSubLvlCreature","showTitanInfo","showBuffInfo","showMonsterLog","showCreatureInfo"].forEach(eg)}function rg(){jh(),tg()}function og(){Jh(),rg()}function va(){da(),og();let e=pa();ga(),ha(e),yu()}function ng(){$("#messageCenter").worldMessageCenter({offset:"0 60"})}function ig(){Re("#mapTooltip")}var ag=[va,Qi,ua,Ci,fi,ci,Di,zi,ri,qi,Ji,Ui,ng,ig,Jn,Qn,mi,si,ei,ki,ji];function lg(){zl(ag),p.userIsDev&&yi()}export{lg as default};
//# sourceMappingURL=newMap-LSFBWTGT.js.map
