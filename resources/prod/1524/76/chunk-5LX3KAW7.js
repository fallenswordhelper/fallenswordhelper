import{b as a}from"./chunk-B2T3RSPG.js";import{a as y}from"./chunk-RPABO2SK.js";import{a as k}from"./chunk-CZDXRXUL.js";import{a as h}from"./chunk-JRMPLNFZ.js";import{a as B}from"./chunk-SPS3DBMB.js";import{a as r}from"./chunk-N4QHNM2E.js";import{a as c}from"./chunk-22SWJGQG.js";import{a as w}from"./chunk-23EARN6R.js";import{b}from"./chunk-5YL45SUV.js";import{a as u}from"./chunk-JW3IW67J.js";import{a as i}from"./chunk-T5HQ7FPX.js";import{a as x}from"./chunk-JFU4AQYR.js";import{a as T}from"./chunk-CQJA6XZZ.js";import{a as s}from"./chunk-J55DBM2B.js";import{b as g}from"./chunk-IRX7VNA6.js";import{a as d}from"./chunk-AQ577ZPT.js";var S=[[t=>t.fsp>0,t=>`${a(t.fsp,2)} FSP`],[t=>t.fsp>0&&t.k>0,()=>" and "],[t=>t.k>0,t=>`${t.k} k`],[t=>t.stam>0&&(t.fsp>0||t.k>0),()=>" and "],[t=>t.stam>0,t=>`${t.stam} Stam(${a(t.stam/25,1)}fsp)`],[t=>t.unknown>0,t=>` (${t.unknown} buff(s) with unknown cost)`]];function L(t,e){return e[0](t)?e[1](t):""}function m(t){return S.map(s(L,t)).join("")}function P(){d.subcmd==="-"&&y("profile","formatBuffsToBuy")}function v(){let t=B("h1",b);return t.length!==0?t=r(t[0]):t=k(),t}var F=[[t=>!t.includes("{buffs}"),(t,e)=>`${t} ${e}`],[t=>!t.includes("{cost}"),(t,e)=>t.replace(/{buffs}/g,`\`~${e}~\``)],[()=>!0,(t,e,n)=>t.replace(/{buffs}/g,`\`~${e}~\``).replace(/{cost}/g,n.buffCostTotalText)]];function R(t,e){return e[0](t)}function A(t,e){return F.find(s(R,t))[1](t,x(e.buffs).join(", "),e)}function j(t){P();let e=v(),n=h(g("buyBuffsGreeting"));n=n.replace(/{playername}/g,e),n=A(n,t),window.openQuickMsgDialog(e,n,"")}function p(t){t.count>0&&j(t)}var I=/[^a-zA-Z0-9.,+\- ]/g,M=/([+-]?[.\d]{1,10} {0,10}k)|([+-]?[.\d]{1,10} {0,10}fsp)|([+-]?[.\d]{1,10} {0,10}stam)/;function $(t){return t&&t.nodeName!=="BR"}function C(t){return w(t.replace(I,"")).match(M)}function z(t){let e="",n=t;for(;$(n);){let f=r(n);n=n.nextSibling,e+=f}return C(e)}function G(t){let e="",n=t;for(;$(n);){let f=r(n);n=n.previousSibling,e=f+e}return C(e)}function l(t){let e=z(t);return e||(e=G(t)),e}var o={count:0,buffs:{}};function H(t){return`<tr><td>${t[0]}</td><td>: ${t[1][0]}${t[1][1]}</td></tr>`}function U(t,e){return t[e[1][1]]+=e[1][0],t}function D(){let t=T(o.buffs),e=m(t.reduce(U,{k:0,fsp:0,stam:0,unknown:0}));u(`<span class="tip-static" data-tipped="This is an estimated cost based on how the script finds the cost associated with buffs from viewing bio. It can be incorrect, please use with discretion.<br><hr><table border=0>${t.map(H).join("")}</table><b>Total: ${e}</b>">Estimated Cost: <b>${e}</b></span>`,i("buffCost")),o.buffCostTotalText=e}function O(){o.count>0?D():(u("&nbsp;",i("buffCost")),o.buffCostTotalText="")}function Q(t){return t[0].includes("k")?"k":t[0].includes("f")?"fsp":"stam"}function V(t){let e=l(t),n,f;e?(n=Q(e),[f]=e[0].match(/([+-]?[.\d]+)/)):(n="unknown",f="1"),o.buffs[r(t)]=[parseFloat(f),n],o.count+=1}function Y(t){let e=c("fshBlue",t);t.classList.toggle("fshBlue"),t.classList.toggle("fshYellow");let n=r(t);e?V(t):(o.count-=1,delete o.buffs[n]),O()}function E(t){return!t.tagName||t.tagName==="SPAN"?t:E(t.parentNode)}function Z(t){return t.classList&&c("buffLink",t)}function q(t){if(t.target.id==="fshSendBuffMsg"){p(o);return}let e=E(t.target);Z(e)&&Y(e)}function J(t,e,n){return t.replace(e,`<span id="fshBuff${n}" class="buffLink fshBlue">${e.replace(/(`~)|(~`)|(\{b\})|(\{\/b\})/g,"")}</span>`)}function K(t){let e=t.replace(/\{b\}/g,"`~").replace(/\{\/b\}/g,"~`"),n=e.match(/`~([^~]|~(?!`))*~`/g);if(!!n)return e=n.reduce(J,e),e.indexOf("[cmd]")<0&&(e+="[cmd]"),e=e.replace("[cmd]",'<br><input id="fshSendBuffMsg" class="custombutton" type="button" value="Ask For Buffs"><br><span id="buffCost" class="fshRed">&nbsp;</span>'),e}export{q as a,K as b};
//# sourceMappingURL=chunk-5LX3KAW7.js.map
