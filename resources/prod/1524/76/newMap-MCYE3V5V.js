import{a as Xi,b as Ji}from"./chunk-LHVM4GPA.js";import{a as ji}from"./chunk-7UJC4ELZ.js";import"./chunk-OISWBNBY.js";import"./chunk-JD63L7XR.js";import"./chunk-Q2PGDOOE.js";import{a as Qi}from"./chunk-5HSPIELN.js";import{a as Wi}from"./chunk-3QBNWS5S.js";import{a as Et}from"./chunk-OBMO4TNB.js";import{a as Ui,b as zi,c as Yi}from"./chunk-WRQ54CYY.js";import{a as qi}from"./chunk-74IBDFH6.js";import{b as Ri}from"./chunk-5DCCMD45.js";import{a as Ii}from"./chunk-CEDODDGY.js";import{a as P}from"./chunk-32D4AE52.js";import{a as Be,b as St}from"./chunk-B2T3RSPG.js";import"./chunk-XOU6QBXZ.js";import{a as _i,b as Oi}from"./chunk-QTWR7XGS.js";import{a as T}from"./chunk-WHJIKCXG.js";import{a as Pi}from"./chunk-5AHS7INK.js";import{a as Ki}from"./chunk-HLVRP4IC.js";import{a as Fi}from"./chunk-TVUZWSRP.js";import{a as $i}from"./chunk-PZD6R62U.js";import{a as Mi,b as Hi}from"./chunk-MBVGPYMU.js";import{a as Ei}from"./chunk-Z5PXTZ4Q.js";import{a as Ti}from"./chunk-S2FDH6GM.js";import{a as bt}from"./chunk-ADOGSBQC.js";import{a as Lt}from"./chunk-QJC3JYYM.js";import"./chunk-HGUNGKV5.js";import"./chunk-BRZIL47S.js";import{a as Li}from"./chunk-6NCVY35K.js";import{a as Si}from"./chunk-S7A2CH4F.js";import{a as gi}from"./chunk-CG5452VJ.js";import{a as hi}from"./chunk-QOQKQJ6F.js";import{a as ci}from"./chunk-L76OQYTE.js";import"./chunk-5D667RPB.js";import{a as kt}from"./chunk-PG6LUOVW.js";import{a as g}from"./chunk-JQTB2FN7.js";import"./chunk-4ODYGTCX.js";import{A as b,C as Ct,E as ki,U as sr,V as wi,a as wt,aa as Ci,ba as Bi,d as yi,e as fr,p as k,q as ae,r as le,s as Di,t as L,u as ke,v as we,w as xi}from"./chunk-BNPFZHGS.js";import"./chunk-GH2JB6NL.js";import{a as bi}from"./chunk-CUFVYEQ2.js";import{a as Ai}from"./chunk-MGNLZHBY.js";import{a as ur}from"./chunk-GMBNUOTN.js";import"./chunk-Y4TYA5XW.js";import{a as h}from"./chunk-7OMF2HCF.js";import{a as lr}from"./chunk-ZCEBX4SJ.js";import{a as Bt}from"./chunk-NSIWOYUM.js";import{a as Vi,b as Ni,c as Gi}from"./chunk-F4VXZPIH.js";import{a as vi}from"./chunk-ZUVZVCQ4.js";import"./chunk-QVH3QICI.js";import{a as Ce}from"./chunk-X73RSHOU.js";import{a as mi}from"./chunk-UIY6M7RL.js";import"./chunk-IBHWHJYD.js";import"./chunk-BKBSOXPZ.js";import{a as Vn}from"./chunk-LGGDDV4K.js";import{a as ri}from"./chunk-KQJYLAKU.js";import"./chunk-DRXOYIKT.js";import"./chunk-A4AXMI4N.js";import{a as di}from"./chunk-I5C5UCLL.js";import{a as xe}from"./chunk-RPABO2SK.js";import{a as At}from"./chunk-FVLHAXYJ.js";import{a as re}from"./chunk-S4R6HMLT.js";import{a as De}from"./chunk-OU75PILE.js";import{a as pi}from"./chunk-63VD2FSJ.js";import"./chunk-W4Y6JSA7.js";import"./chunk-YVHPAUAO.js";import{a as f}from"./chunk-LEMC2L2I.js";import{a as m}from"./chunk-UEOABNNM.js";import{a as i}from"./chunk-F2QNPXG3.js";import"./chunk-S3MA7IJF.js";import{a as I}from"./chunk-77NM5GYL.js";import{a as ti}from"./chunk-F5LTWK46.js";import{a as ii}from"./chunk-EW7XMHN6.js";import"./chunk-CVRLIC5H.js";import{f as ie}from"./chunk-4FFWDRP6.js";import{a as xt}from"./chunk-CZDXRXUL.js";import"./chunk-RHTF4SYS.js";import{a as ye}from"./chunk-2L67EAH3.js";import{a as gt}from"./chunk-3FI2HRMQ.js";import{a as ni}from"./chunk-TTKNE24C.js";import{a as oe}from"./chunk-YV7FRZPB.js";import{a as ge}from"./chunk-JRMPLNFZ.js";import"./chunk-HHTP72U5.js";import{a as fi}from"./chunk-65EQSCPE.js";import{a as si}from"./chunk-HX4UZBSJ.js";import"./chunk-UZKJ5KCL.js";import{a as ui}from"./chunk-FFD2X52P.js";import"./chunk-QNKEYSUJ.js";import"./chunk-GXWQG5R4.js";import"./chunk-SPS3DBMB.js";import{a as z}from"./chunk-UC3GAOGO.js";import{a as ne}from"./chunk-6FENTVGJ.js";import{a as pt,b as ar}from"./chunk-RYNTZHML.js";import"./chunk-DPMIXN5L.js";import{a as ai}from"./chunk-BH2HHYW5.js";import{a as oi}from"./chunk-N4QHNM2E.js";import"./chunk-RNWAALFB.js";import{a as y}from"./chunk-ZGDP3UEU.js";import"./chunk-HQE3XUSR.js";import"./chunk-VPVOZ3TL.js";import{a as Y}from"./chunk-UYR6FV7Z.js";import{a as Ke}from"./chunk-22SWJGQG.js";import{a as w}from"./chunk-JW3IW67J.js";import{a}from"./chunk-T5HQ7FPX.js";import{a as li}from"./chunk-JFU4AQYR.js";import{a as U}from"./chunk-V4IXNRYH.js";import"./chunk-SON5T5EI.js";import"./chunk-CQJA6XZZ.js";import{a as u}from"./chunk-J55DBM2B.js";import{a as yt,b as Dt}from"./chunk-5KIRUYW3.js";import"./chunk-QGP7DAK6.js";import{a as dt}from"./chunk-LTD25OUX.js";import"./chunk-YXCGOJCF.js";import"./chunk-GQZRPO65.js";import{a as vt}from"./chunk-T2BL2V55.js";import{a as B}from"./chunk-IIWUY4RG.js";import{b as p}from"./chunk-IRX7VNA6.js";import{a as ei}from"./chunk-ZOSLBUG4.js";import{a as R}from"./chunk-INHQR3KU.js";import{a as ve}from"./chunk-6DZWFVI7.js";import{a as ht}from"./chunk-O5WVQXEQ.js";import{$ as In,Aa as Qn,Ba as Xn,Ca as Jn,Da as jn,Ea as Zn,K as nr,N as Gn,Na as mt,P as ir,X as $n,Y as he,Z as st,_ as Rn,aa as Pn,b as te,ba as _n,ca as Fn,da as On,e as ft,ea as Kn,fa as qn,ga as ut,ha as Wn,ia as Un,ja as zn,k as pe,la as Yn,ma as W,na as ct,oa as E,p as or,x as Nn}from"./chunk-KIM4IHFF.js";import{a as n}from"./chunk-AQ577ZPT.js";var fe;function kl(e){return e}function wl(e){return n.showBuffInfo&&e.some(kl)}function Cl(){if(fe)g(fe,!1);else{fe=m({className:"fshActionBox",innerHTML:"<div></div><div></div><div></div><div></div><div></div><div></div>"});let e=a("actionContainer");Si(fe,e.children[2])}return fe}function Bl(){fe&&g(fe,!0)}function cr(e){if(wl(e))return Cl();Bl()}var _,mr;function Al(e){_=e.children[3],_.className="fshBlue",f("CA ",_),mr=h(),i(_,mr),P(_," active")}function bl(e,t){_?g(_,!1):Al(e),f(t.level,mr)}function Ll(){_&&g(_,!0)}function dr(e,t){t?bl(e,t):Ll()}var F,pr;function Sl(e){F=e.children[4],F.className="fshRed",f("Doubler ",F),pr=h(),i(F,pr),P(F," active")}function El(e,t){F?g(F,!1):Sl(e),f(t.level,pr)}function Ml(){F&&g(F,!0)}function hr(e,t){t?El(e,t):Ml()}var Q,gr;function Hl(e){Q=e.children[2],f("Damage bonus: ",Q),gr=h(),i(Q,gr),P(Q,"%")}function Tl(e,t){if(e){let r=Math.min(Math.round(Math.floor(t/5)*Number(e.level))*.01,20);return Be(r,2).toString()}return"0"}function Vl(e,t,r){Q?g(Q,!1):Hl(e),f(Tl(t,Number(r)),gr)}function Nl(){Q&&g(Q,!0)}function vr(e,t,r){t?Vl(e,t,r):Nl()}function d(e,t){f(Y(e),t)}var se,yr;function Gl(e){se=e.children[1],f("Kill Streak: ",se),yr=h(),i(se,yr)}function $l(e,t){se?g(se,!1):Gl(e),d(t,yr)}function Rl(){se&&g(se,!0)}function Dr(e,t,r,o){t||r?$l(e,o):Rl()}function Il(e,t){return t.name===e}function X(e){let{buffs:t}=GameData.player();if(t)return t.find(u(Il,e))}function xr(){let e=GameData.player().teleportCooldown;return e>1&&e}var Pl=["red","orange","yellow"];function kr(){let e=$("#actionlist-shield-imp");e.length===1&&e.css("background-color",Pl[e.text()]||"#ad8043")}var V=0,wr=0;function _l(e){Ji(e)&&GameData.fetch(W)}function Fl(){X("Summon Shield Imp")||Xi([xt()],[55]).then(_l)}function Ol(e){return e?Number(e.stack):0}var Kl=["imp-0","imp-1","imp-1"];function ql(e){return Kl[e]||"fshGreen"}function Wl(e){[V]=e.children,f("Shield Imps Remaining: ",V),wr=h(),i(V,wr),re(V,"&nbsp;");let t=T({className:"xSmallLink",textContent:"Recast"});i(V,t),B(t,Fl)}function Ul(e,t){V?g(V,!1):Wl(e);let r=Ol(t);V.className=ql(r),f(r,wr)}function zl(){V&&g(V,!0)}function Cr(e,t,r){t||r?Ul(e,t):zl()}function Yl(e){return e.type===0}function Br(){let{dynamic:e}=GameData.realm();return I(e)&&e.some(Yl)}function x(e){return h({textContent:e})}var ue,Mt,Zi;function Ql(e,t){ue=e.children[5],f("Teleport Cooldown: ",ue),Mt=x(t.toString()),i(ue,Mt)}function Xl(e,t){ue?g(ue,!1):Ql(e,t)}function Jl(){ue&&g(ue,!0)}function ea(){let e=Math.max(Math.ceil((Zi-Date.now())/1e3),0);f(e,Mt),e>0&&setTimeout(ea,500)}function ta(e){Mt&&(Zi=Date.now()+e*1e3,ea())}function ra(e,t){t?Xl(e,t):Jl()}var qe,Ar,br,Lr,Sr,Er,Mr;function jl(){qe=X("Death Dealer"),Ar=X("Doubler"),br=X("Counter Attack"),Lr=X("Summon Shield Imp"),Sr=xr(),Er=Br(),Mr=GameData.player().killStreak}function Hr(){kr(),jl();let e=cr([qe,Ar,br,Lr,Sr,Er]);e&&(Cr(e,Lr,qe),Dr(e,qe,Er,Mr),vr(e,qe,Mr),dr(e,br),hr(e,Ar),ra(e,Sr))}function Zl(e,t){ta(t.player.teleportCooldown)}function oa(){Hr(),$.subscribe(`${st} ${Rn}`,Hr),$.subscribe(zn,Zl)}function na(){n.showBuffInfo=!n.showBuffInfo,y("showBuffInfo",n.showBuffInfo),Hr()}function ef(){return window.GameController&&GameController.Realm&&!GameController.Realm.footprintTileList}function Tr(){ef()&&(GameController.Realm.footprintTileList=[])}function ia(e,t,r){return hi({className:`fshCurveEle fshCurveLbl fshPoint tip-static ${e}`,dataset:{tipped:t},htmlFor:r})}function Ht(e){let t=m({className:"fshToggle"}),r=kt({checked:e.prefVal,id:e.checkId,type:"checkbox"});i(t,r);let o=ia(e.onClass,e.onTip,e.checkId);i(t,o);let l=ia(e.offClass,e.offTip,e.checkId);return i(t,l),i(e.worldName,t),r}var J=0,Vt=0,Nt=0,la=0,fa=0,sa=0,ua=0,ca=0,ma=0;function tf(e){Ce(e),GameData.doAction(12,401,{},0)}function rf(){bi(mi())}function of(){window.open(`${Gn+or}map`,"fsMap")}function nf(){let e=GameData.realm();window.open(`${$n}realms${or}view&realm_id=${e.id}`,"mapUfsg")}function af(){y("playNewMessageSound",!p("playNewMessageSound"))}function lf(){n.huntingMode=!n.huntingMode,y("huntingMode",n.huntingMode)}function ff(){return m({className:"fshCurveContainer",id:"fshWorldButtonContainer"})}function da(e){return e?e.toString():"?"}function sf(){let e=m({textContent:"Min Lvl: "});return Vt=x(da(GameData.realm().minlevel)),i(e,Vt),e}function uf(){let e=m({textContent:"Your Lvl: "});return Nt=x(da(GameData.player().level)),i(e,Nt),e}function cf(e){let t=m({className:"fshFsty"});i(t,sf()),i(t,uf()),i(e,t)}function Tt(e,t,r){let o=T({className:`fshCurveEle fshCurveBtn fshPoint tip-static ${e}`,dataset:{tipped:t}});return i(r,o),o}function mf(e){cf(e),la=Tt("fshFormGroup","Quick Create Attack Group",e),fa=Tt("fshQuickBuff","Open Quick Buff Popup",e),sa=Tt("fshRealmMap","Open Realm Map",e),ua=Tt("fshTempleOne","Search map in Ultimate FSG",e)}function df(e){if(p("showSpeakerOnWorld")){let t=p("playNewMessageSound");ca=Ht({prefVal:t,checkId:"fshSoundCheck",onClass:"soundOn",onTip:"Turn Off Sound when you have a new log message",offClass:"soundOff",offTip:"Turn On Sound when you have a new log message",worldName:e})}}function pf(e){let t=n.huntingMode;ma=Ht({prefVal:t,checkId:"fshHuntCheck",onClass:"huntOn",onTip:"Hunting mode is ON",offClass:"huntOff",offTip:"Hunting mode is OFF",worldName:e})}function hf(){mf(J),df(J),pf(J)}var gf=[[e=>e===ca,af],[e=>e===ma,lf]],vf=[[e=>e===la,tf],[e=>e===fa,rf],[e=>e===sa,of],[e=>e===ua,nf]];function yf(e,t){let{target:r}=t,o=e.find(([l])=>l(r));o&&(r.blur(),o[1](r))}function aa(e){return u(yf,e)}function Df(){B(J,aa(vf)),R(J,"change",aa(gf))}function xf(){J||(J=ff(),hf(),Df(),At(J,a("worldCoord")))}function kf(e,t){Vt&&t.b.minlevel&&(Tr(),f(t.b.minlevel,Vt))}function wf(e,t){Nt&&f(t.b,Nt)}function Vr(){xf(),$.subscribe(On,kf),$.subscribe(In,wf)}var Cf=["NORMAL","CHAMPION","ELITE","SUPER ELITE","TITAN","LEGENDARY"],Bf=`url("${te}ui/world/icon_action_attack_`,Gt=!1;function Nr(e){return ye(".verb.attack",e)}function Gr(e){let t=Cf.indexOf(e.toUpperCase());return gt(`#actionList .actionListItem.creature.creature-${t}`)}function Af(e){e.classList.remove("attack-1","attack-2","attack-3","attack-4","attack-5","attack-6","attack-7","attack-8"),e.style.backgroundImage=""}function bf(e,t){e!==null&&(e.classList.add(`attack-${t+1}`),e.style.backgroundImage=`${Bf}${t+1}.png")`)}function pa(e){let t=["LEGENDARY","NORMAL"].flatMap(Gr),r=Gr("CHAMPION"),[o,l]=e?[t,r]:[r,t];o.map(Nr).filter(s=>s!==null).forEach(Af),l.slice(0,8).map(Nr).forEach(bf)}function Lf(e){let t=Nr(e);t&&(xe("world","ChampionAttack"),vi(t))}function Sf(e){if(!e.altKey||!e.shiftKey||e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||(Gt||pa(!0),Gt=!0,!/(?:Digit|Numpad)[1-8]/.test(e.code)))return;let t=Gr("CHAMPION"),r=parseInt(e.code.slice(-1),10)-1;r<t.length&&Lf(t[r])}function Ef(e){Gt&&(!e.ctrlKey||!e.shiftKey)&&(Gt=!1,pa(!1))}function $r(){let{body:e}=document;R(e,"keydown",Sf),R(e,"keyup",Ef)}var Mf=["Breaker","Protection","Master Thief","Protect Gold","Disarm","Duelist","Thievery","Master Blacksmith","Master Crafter","Fury Caster","Master Inventor","Sustain"],Rr=[],S;function Hf(e){(e.id===54||e.id===26)&&(S.player.buffs[e.id]=parseInt(e.level,10))}function Tf(e){Mf.indexOf(e.name)===-1&&(S.player.enhancements[e.name]=e.value)}function Vf(e){e.player.buffs&&e.player.buffs.forEach(Hf)}function Nf(e){e.player.enhancements&&e.player.enhancements.forEach(Tf)}function Gf(e,t){S={},S.combat=t.response.data,S.combat.inventory_id&&(S.combat.drop=S.combat.item.id),S.player={},S.player.buffs={},S.player.enhancements={},Vf(t),Nf(t),S.time=t.time,Rr.push(S),Dt("fsh_combatLog",Rr)}function $f(e,t){t.response.response===0&&Gf(e,t)}function Rf(e){e&&(Rr=e),$.subscribe(ut,$f)}function Ir(){p("keepLogs")&&yt("fsh_combatLog").then(Rf)}function If(){i(document.body,qi(`#actionList .creature-1 {color: green;}
#actionList .creature-2 {color: yellow;}
#actionList .creature-3 {color: red;}`))}function Pr(){p("enableCreatureColoring")&&If()}function ce(e){return n.doNotKillList.includes(ge(e))}function Pf(e){e.classList.toggle("fshBlue",ce(oi(e)))}function Ae(){let e=a("actionList");vt("creature",e).forEach(Pf)}function _f(e,t){if(ce(e))return a("actionList").children[t].children[0].children[1].classList.remove("loading"),!0}function Ff(e){let t=GameData.actions()[e];if(t)return _f(t.data.name,e)}function Of(e){return function(r,o,l,s){Ff(l.passback)||e(r,o,l,s)}}var Kf={2:Of};function qf(e){return ei(e)||e===0}function Wf(e){return e&&dt(e)}function Uf(e){return function(r,o,l,s){let c=Kf[r];Wf(c)&&qf(s)?c(e)(r,o,l,s):e(r,o,l,s)}}function _r(){let e=GameData.doAction;GameData.doAction=Uf(e)}function Fr(){$.subscribe(he,Ae),Ae(),_r()}function zf(e){Ce(e.target)}function Or(){B(a("buffList"),zf)}function ha(e){e[1]=e[2].r}function ga(e,t,r){let o=e.slice();return o[3]=t[r].player,o[2]=t[r].value,o[5]=r,o}function Yf(e){let t,r=e[6].message+"",o;return{c(){t=L("p"),o=ke(r),ki(t,"color","red")},m(l,s){ae(l,t,s),k(t,o)},p(l,s){s&1&&r!==(r=l[6].message+"")&&Ct(o,r)},d(l){l&&le(t)}}}function Qf(e){ha(e);let t,r,o,l=e[1],s=[];for(let c=0;c<l.length;c+=1)s[c]=ya(ga(e,l,c));return{c(){t=L("table"),r=L("tr"),r.innerHTML=`<td class="header"></td> 
      <td class="header"></td> 
      <td class="header">Username</td> 
      <td class="header">Kills</td>`,o=we();for(let c=0;c<s.length;c+=1)s[c].c();b(r,"class","svelte-1p6satm"),b(t,"id","world-event-contrib-table"),b(t,"class","svelte-1p6satm")},m(c,G){ae(c,t,G),k(t,r),k(t,o);for(let D=0;D<s.length;D+=1)s[D].m(t,null)},p(c,G){if(ha(c),G&1){l=c[1];let D;for(D=0;D<l.length;D+=1){let q=ga(c,l,D);s[D]?s[D].p(q,G):(s[D]=ya(q),s[D].c(),s[D].m(t,null))}for(;D<s.length;D+=1)s[D].d(1);s.length=l.length}},d(c){c&&le(t),Di(s,c)}}}function va(e){let t,r,o,l;return{c(){t=L("a"),r=L("img"),fr(r.src,o=te+"guilds/"+e[3].guild_id+"_mini.png")||b(r,"src",o),b(r,"alt","guild logo"),b(r,"class","svelte-1p6satm"),b(t,"href",l=""+(nr+e[3].guild_id))},m(s,c){ae(s,t,c),k(t,r)},p(s,c){c&1&&!fr(r.src,o=te+"guilds/"+s[3].guild_id+"_mini.png")&&b(r,"src",o),c&1&&l!==(l=""+(nr+s[3].guild_id))&&b(t,"href",l)},d(s){s&&le(t)}}}function ya(e){let t,r,o=e[5]+1+"",l,s,c,G,D,q,it=e[3].name+"",er,at,Hn,tr,lt=e[2]+"",rr,Tn,C=e[3].guild_id&&va(e);return{c(){t=L("tr"),r=L("td"),l=ke(o),s=we(),c=L("td"),C&&C.c(),G=we(),D=L("td"),q=L("a"),er=ke(it),Hn=we(),tr=L("td"),rr=ke(lt),Tn=we(),b(q,"href",at=""+(ir+e[3].name)),b(t,"class","svelte-1p6satm")},m(H,de){ae(H,t,de),k(t,r),k(r,l),k(t,s),k(t,c),C&&C.m(c,null),k(t,G),k(t,D),k(D,q),k(q,er),k(t,Hn),k(t,tr),k(tr,rr),k(t,Tn)},p(H,de){H[3].guild_id?C?C.p(H,de):(C=va(H),C.c(),C.m(c,null)):C&&(C.d(1),C=null),de&1&&it!==(it=H[3].name+"")&&Ct(er,it),de&1&&at!==(at=""+(ir+H[3].name))&&b(q,"href",at),de&1&&lt!==(lt=H[2]+"")&&Ct(rr,lt)},d(H){H&&le(t),C&&C.d()}}}function Xf(e){let t;return{c(){t=ke("Loading...")},m(r,o){ae(r,t,o)},p:wt,d(r){r&&le(t)}}}function Jf(e){let t,r,o={ctx:e,current:null,token:null,hasCatch:!0,pending:Xf,then:Qf,catch:Yf,value:2,error:6};return sr(r=e[0],o),{c(){t=xi(),o.block.c()},m(l,s){ae(l,t,s),o.block.m(l,o.anchor=s),o.mount=()=>t.parentNode,o.anchor=t},p(l,[s]){e=l,o.ctx=e,s&1&&r!==(r=e[0])&&sr(r,o)||wi(o,e,s)},i:wt,o:wt,d(l){l&&le(t),o.block.d(l),o.token=null,o=null}}}function jf(e,t,r){let{promise:o}=t;return e.$$set=l=>{"promise"in l&&r(0,o=l.promise)},[o]}var Kr=class extends Bi{constructor(t){super(),Ci(this,t,jf,Jf,yi,{promise:0})}},Da=Kr;function qr(e){return pi({cmd:"globalquests",...e})}function Wr(){return qr({subcmd:"contrib"})}var Zf=({username:e,value:t})=>({player:{name:e},value:t});async function Ur(){return{r:(await di({cmd:"toprated",subcmd:"eventcontrib"})).map(Zf)}}function zr(){return De(Wr,Ur)}var Yr=0,xa=()=>({promise:zr()});function es(e){Yr?Yr.$set(xa()):Yr=new Da({props:xa(),target:e})}function ts(){let e=a("world-event-contrib");es(e),$(e).dialog({title:"Top 100 Event Contributers",minWidth:300,height:300,zIndex:9999})}function Qr(){let e=$("#world-event-badge");!e.length||(e.off(),B(e[0],ts))}function ka(e){$(`#actionList li.creature-${e.toString()} a.create-group`).hide()}function rs(e){$.subscribe(he,u(ka,e))}var os=["hideChampionsGroup","hideElitesGroup","hideSEGroup","hideTitanGroup","hideLegendaryGroup"];function ns(e,t){p(e)&&(rs(t+1),ka(t+1))}function Xr(){os.forEach(ns)}function is(e){return e.response&&e.response.msg&&e.response.msg.startsWith("Creature did not exist at that location")}function as(e){is(e)&&GameData.fetch(ct+E)}function ls(e){e.remove()}function fs(e,t){as(t),gt(".creature-4 > .quickCombat > .verbs").forEach(ls)}function Jr(){$.subscribe(ut,fs)}function O(e){return!e||!e.response||!e.response.data}var wa='<table class="relicT relicS"><thead><tr><th colspan="2">Adjusted defense values</th></tr></thead><tbody><tr><td>DC225:</td><td id="DC225">0</td></tr><tr><td>DC175:</td><td id="DC175">0</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody><thead><tr><th colspan="2">Attacking Group Stats</th></tr></thead><tbody><tr><td>Raw Group Attack:</td><td class="fshGrey" id="GroupAttack"></td></tr><tr><td>Group Attack w/ buffs:</td><td id="GroupAttackBuffed"></td></tr><tr><td>Raw Group Defense:</td><td class="fshGrey" id="GroupDefense"></td></tr><tr><td>Group Defense w/ buffs:</td><td id="GroupDefenseBuffed"></td></tr><tr><td>Raw Group Armor:</td><td class="fshGrey" id="GroupArmor"></td></tr><tr><td>Group Armor w/ buffs:</td><td id="GroupArmorBuffed"></td></tr><tr><td>Raw Group Damage:</td><td class="fshGrey" id="GroupDamage"></td></tr><tr><td>Group Damage w/ buffs:</td><td id="GroupDamageBuffed"></td></tr><tr><td>Raw Group HP:</td><td class="fshGrey" id="GroupHP"></td></tr><tr><td>Group HP w/ buffs:</td><td id="GroupHPBuffed"></td></tr></tbody></table>',Ca='<table class="relicT relicS"><thead><tr><th colspan="2">Defending Guild Stats</th></tr></thead><tbody><tr><td>Relic Count:</td><td id="relicCount">0</td></tr><tr><td>Lead Defender Bonus:</td><td id="LDPercentage">0</td></tr><tr><td>Lead Defender Cloaked:</td><td id="LDCloaked">No</td></tr></tbody><thead><tr><th colspan="2">Other Defender Stats</th></tr></thead><tbody><tr><td>Raw Attack:</td><td class="fshGrey" id="attackValue">0</td></tr><tr><td>Attack w/ buffs:</td><td id="attackValueBuffed">0</td></tr><tr><td>Raw Defense:</td><td class="fshGrey" id="defenseValue">0</td></tr><tr><td>Defense w/buffs:</td><td id="defenseValueBuffed">0</td></tr><tr><td>Raw Armor:</td><td class="fshGrey" id="armorValue">0</td></tr><tr><td>Armor w/ buffs:</td><td id="armorValueBuffed">0</td></tr><tr><td>Raw Damage:</td><td class="fshGrey" id="damageValue">0</td></tr><tr><td>Damage w/ buffs:</td><td id="damageValueBuffed">0</td></tr><tr><td>Raw HP:</td><td class="fshGrey" id="hpValue">0</td></tr><tr><td>HP w/ buffs:</td><td id="hpValueBuffed">0</td></tr><tr><td>Cloaked:</td><td id="defendersCloaked">0</td></tr><tr><td>Processed:</td><td id="defendersProcessed">0</td></tr></tbody></table>',Ba='<table class="relicT"><thead><tr><th colspan="2">Processing</th></tr></thead><tbody><tr><td class="fshGreen" colspan="2" id="ProcessingStatus">Parsing defending guild stats ...</td></tr></tbody><thead><tr><th colspan="2">Assumptions</th></tr></thead><tbody><tr><td colspan="2" class="fshGrey">Above calculations include Constitution, Fortitude, Nightmare Visage, Chi Strike, Sanctuary, Terrorize and Flinch bonus calculations (in that order) on both the defending group and attacking group.</td></tr></tbody></table>';var K,be,Le,Se;function ss(e){return e.player_name}function us(e){Se=e.defenders.map(ss)}function cs(){K?w("",K):K=m({className:"body"})}function ms(e){be=m({className:"fshFloatLeft fshRelicLeftDiv"}),i(K,be),e.is_owner&&i(be,_i(Se)),Le=T({className:"custombutton",textContent:"Fetch Stats"}),i(be,Le)}function Aa(e){us(e),cs(),ms(e);let t=a("dialog-relic");i(t,K)}var N,ba,La,jr,Zr,eo,to,$t,ro,oo,no,io,ao,lo,fo,so,uo,co,mo,po,ho,go,vo,yo,Do,xo,ko,wo,Co,Bo,j,ds=[e=>e!=="lastUpdate",e=>!Se.includes(e),e=>N[e].last_login,e=>Number(N[e].last_login)<ba,e=>Number(N[e].last_login)>La,e=>N[e].level<400||N[e].level>421,e=>N[e].level<441||N[e].level>450];function ps(e,t){return t(e)}function hs(e){return ds.every(u(ps,e))}function gs(e){return`<a href="${Nn}${N[e].id}">${e}</a>`}function vs(e){N=e,ba=ar-120,La=ar-604800;let t=li(N).filter(hs).map(gs);re(K,`<div class="fshFloatLeft fshRelicLowDiv"><table class="relicT"><thead><tr><th>${t.length.toString()} Offline guild members not at relic:</th></tr></thead><tbody><tr><td>${t.join(" ")}</td></tr></tbody></table></div>`)}function ys(){jr=a("relicCount"),Zr=a("LDPercentage"),eo=a("LDCloaked"),to=a("attackValue"),$t=a("attackValueBuffed"),ro=a("defenseValue"),oo=a("defenseValueBuffed"),no=a("armorValue"),io=a("armorValueBuffed"),ao=a("damageValue"),lo=a("damageValueBuffed"),fo=a("hpValue"),so=a("hpValueBuffed"),uo=a("defendersCloaked"),co=a("defendersProcessed")}function Ds(){mo=a("DC225"),po=a("DC175"),ho=a("GroupAttack"),go=a("GroupAttackBuffed"),vo=a("GroupDefense"),yo=a("GroupDefenseBuffed"),Do=a("GroupArmor"),xo=a("GroupArmorBuffed"),ko=a("GroupDamage"),wo=a("GroupDamageBuffed"),Co=a("GroupHP"),Bo=a("GroupHPBuffed")}function Sa(e){Bt(Le);let t=p("hideRelicOffline");e.is_owner&&!t&&$i(!0).then(vs),re(be,Ba),j=a("ProcessingStatus");let r=m({className:"fshFloatLeft fshRelicMidDiv",innerHTML:Ca});i(K,r),ys();let o=m({className:"fshFloatLeft fshRelicRightDiv",innerHTML:wa});i(K,o),Ds()}var Rt;function xs(e){return e===1?1.5:Be(1-e/10,2)}function Ea(e){let t=z(e),o=ni('#pCC img[src*="/relics/"]',t).length;f(o,jr),Rt=xs(o),f(`${String(Rt*100)}%`,Zr)}function It(e,t){return e>t*10||e<t?e:t*10}function ks(e){e.attackValue=It(e.attackBonus,e.levelValue),e.defenseValue=It(e.defenseBonus,e.levelValue),e.armorValue=It(e.armorBonus,e.levelValue),e.damageValue=It(e.damageBonus,e.levelValue),e.hpValue=e.hpBonus}var ws=[["levelValue","level"],["attackValue","attack"],["attackBonus","bonus_attack"],["defenseValue","defense"],["defenseBonus","bonus_defense"],["armorValue","armor"],["armorBonus","bonus_armor"],["damageValue","damage"],["damageBonus","bonus_damage"],["hpValue","hp"],["hpBonus","bonus_hp"],["killStreakValue","killstreak"]];function Cs(e,t,r){e[r[0]]=Number(t[r[1]])}function Bs(e,t){ws.forEach(u(Cs,e,t))}var As=[["counterAttackLevel","Counter Attack"],["doublerLevel","Doubler"],["deathDealerLevel","Death Dealer"],["darkCurseLevel","Dark Curse"],["holyFlameLevel","Holy Flame"],["constitutionLevel","Constitution"],["sanctuaryLevel","Sanctuary"],["flinchLevel","Flinch"],["nightmareVisageLevel","Nightmare Visage"],["superEliteSlayerLevel","Super Elite Slayer"],["fortitudeLevel","Fortitude"],["chiStrikeLevel","Chi Strike"],["terrorizeLevel","Terrorize"],["barricadeLevel","Barricade"],["reignOfTerrorLevel","Reign Of Terror"],["anchoredLevel","Anchored"],["severeConditionLevel","Severe Condition"],["entrenchLevel","Entrench"],["cloakLevel","Cloak"]];function bs(e,t,r){e[r[0]]=t[r[1]]||0}function Ls(e,t){As.forEach(u(bs,e,t))}function Ee(e){if(!e)return;let t=Et(e._skills),r={};return Bs(r,e),Ls(r,t),r.superEliteSlayerMultiplier=Be(.002*r.superEliteSlayerLevel,2),si(r.armorValue)&&ks(r),r}var He,Pt,Ue,Me,ze,_t,Ye,bo,Ao,A,v,me;function Ss(){v.attack-=me.attack,v.defense-=me.defense,v.armor-=me.armor,v.damage-=me.damage,v.hp-=me.hp}function We(e){return Math.round(e*Rt)}function Es(){He+=We(A.attackValue),Ue+=We(A.defenseValue),Me+=We(A.armorValue),ze+=We(A.damageValue),Ye+=We(A.hpValue)}function Ha(){d(He,to),d(Ue,ro),d(Me,no),d(ze,ao),d(Ye,fo),f(bo,uo),Ao+=1,f(Ao,co)}function Ms(){d(v.attack,ho),d(v.defense,vo),d(v.armor,Do),d(v.damage,ko),d(v.hp,Co)}function Hs(e){return Math.ceil(v.attack*(U(e["Nightmare Visage"],0)*.0025))}function Ts(){let e=Math.ceil(v.attack*A.flinchLevel*.001);d(v.attack-e,go)}function Vs(e){return Math.ceil(v.defense*(1+U(e.Constitution,0)*.001))}function Ns(e,t){d(t+e,yo)}function Gs(e){d(v.armor+Math.floor(v.armor*U(e.Sanctuary,0)*.001),xo)}function $s(e,t){return Math.ceil(t*U(e.Fortitude,0)*.001)}function Rs(e){d(v.hp+e,Bo)}function Is(e,t){let r=Math.ceil((v.hp+t)*U(e["Chi Strike"],0)*.001),o=Math.ceil(v.damage*A.terrorizeLevel*.001);d(v.damage+r-o,wo)}function Ps(e){let t=Hs(e);v.attack-=t,Ts();let r=Vs(e);Ns(t,r),Gs(e);let o=$s(e,r);Rs(o),Is(e,o)}function _s(e){let t=Math.ceil(Pt*U(e.Flinch,0)*.001);d(Pt-t,$t)}function Fs(e){let t=Math.ceil(_t*U(e.Terrorize,0)*.001);d(_t-t,lo)}function Os(){f("Processing attacking group stats ... ",j),me&&Ss(),Ms();let e=Et(GameData.player().buffs);Ps(e),_s(e),Fs(e),f("Done.",j)}function Ks(){return Math.ceil(He*(A.nightmareVisageLevel*.0025))}function qs(){return Math.ceil(Ue*(1+A.constitutionLevel*.001))}function Ws(e){Pt=He-e,d(Pt,$t)}function Ma(e){return 1-e*mt}function Us(e,t){let r=t+e;d(r,oo),d(Math.ceil(r*Ma(225)),mo),d(Math.ceil(r*Ma(175)),po)}function zs(){d(Me+Math.floor(Me*A.sanctuaryLevel*.001),io)}function Ys(e){return Math.ceil(e*A.fortitudeLevel*.001)}function Qs(e){_t=ze+Math.ceil(e*A.chiStrikeLevel*.001),d(_t)}function Xs(){A.cloakLevel!==0&&f("Yes",eo)}function Ta(){f("Processing defending guild stats ... ",j),Es(),Ha();let e=Ks();Ws(e);let t=qs();Us(e,t),zs();let r=Ye+Ys(t);d(r,so),Qs(r),Xs(),GameData.player().hasGroup&&v?Os():f("Done.",j)}function Va(e){let t=Ee(e);He+=Math.round(t.attackValue*pe),Ue+=Math.round(t.defenseValue*pe),Me+=Math.round(t.armorValue*pe),ze+=Math.round(t.damageValue*pe),Ye+=Math.round(t.hpValue*pe),t.cloakLevel!==0&&(bo+=1),Ha()}function Na(e){A=Ee(e)}function Ga(e){v=e}function $a(e){me=e}function Ra(){He=0,Ue=0,Me=0,ze=0,Ye=0,bo=0,Ao=0}var Qe;function Js(e){f(e.message,j)}function js(e){return e.parentNode.parentNode.previousElementSibling.previousElementSibling.innerHTML.indexOf('"#000099"')!==-1}function Zs(e){let t=e.previousElementSibling.href,r=[Oi(t).then(Ga)];return js(e)&&r.push(Ki().then($a)),r}function eu(e){let t=z(e),r=ye('#pCC a[href*="confirmDisband"]',t);if(!r)return;let o=Zs(r);return ui(o)}function tu(){return ne({cmd:"guild",subcmd:"groups"}).then(eu)}function ru(){return ne({cmd:"guild",subcmd:"view",guild_id:Qe.controlled_by.guild_id}).then(Ea)}function ou(e,t){return t===0?ur(e).then(Na):ur(e).then(Va).catch(Js)}function nu(){return Se.map(ou)}function iu(){let e=[ru()];return GameData.player().hasGroup&&e.push(tu()),e=e.concat(nu()),e}function au(){Sa(Qe),Ra();let e=iu();Lt(e,Ta)}function lu(e,t){O(t)||(Qe=t.response.data,Qe.defenders.length>0&&(Aa(Qe),Vn(Le,"click",au)))}function Lo(){$.subscribe(Wn,lu)}function Xe(e){return ai({cache:!1,url:"fetchdata.php",data:{...e,fshrnd:Ri()},dataType:"json"})}var Ia=[];function fu(e){return O(e)||Ia.push(e),e}function su(e,t){return e===Number(t.response.data.id)}function uu(e,t){e(t)}function cu(e){return new Promise(t=>{ri(3,uu,[t,e])})}function Je(e,t){let r=Ia.find(u(su,e));return r?cu(r):Xe({a:1,id:e,passback:t}).then(fu)}var Ft,So,Eo,Mo,Ho,To;function je(e,t){return fi(ve(t,e))}function mu(e){Eo=je(e,Xn),So=je(e,Qn),Ho=je(e,jn),Mo=je(e,Jn),To=je(e,Zn)}function Pa(){Ft=GameData.player().level,mu(a("statbar-character-tooltip-stats"))}function du(e){return`<table><tr><td><img src="${te}creatures/${e.image_id}.png" height="200" width="200"></td><td rowspan="2"><table width="400"><tr><td class="header" colspan="4" class="fshCenter">Statistics</td></tr>`}function pu(e,t){return`<tr><td>Class:&nbsp;</td><td width="40%">${e.creature_class}</td><td>Level:&nbsp;</td><td width="40%">${e.level} (your level:<span class="${t}">${Ft}</span>)</td></tr>`}function hu(e){return`<tr><td>Attack:&nbsp;</td><td width="40%">${e.attack} (your defense:<span class="fshYellow">${So}</span>)</td><td>Defense:&nbsp;</td><td width="40%">${e.defense} (your attack:<span class="fshYellow">${Eo}</span>)</td></tr>`}function gu(e){return`<tr><td>Armor:&nbsp;</td><td width="40%">${e.armor} (your damage:<span class="fshYellow">${Mo}</span>)</td><td>Damage:&nbsp;</td><td width="40%">${e.damage} (your armor:<span class="fshYellow">${Ho}</span>)</td></tr>`}function vu(e,t){return`<tr><td>HP:&nbsp;</td><td width="40%">${e.hp} (your HP:<span class="fshYellow">${To}</span>)(1H: <span class="fshRed">${t}</span>)</td><td>Gold:&nbsp;</td><td width="40%">${e.gold}</td></tr>`}var yu='<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Enhancements</td></tr>';function Du(e){return`<tr><td colspan="2">${e.name}:</td><td colspan="2">${e.value}</td></tr>`}function xu(e){return e.enhancements.length===0?'<tr><td colspan="4">[no enhancements]</td></tr>':e.enhancements.map(Du).join("")}function ku(e){return`<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Description</td></tr><tr><td colspan="4">${e.description}</td></tr><tr><td colspan="4" height="5"></td></tr></table></td></tr><tr><td class="fshCenter"><b>${e.name}</b></td></tr></table>`}function wu(e,t,r){return du(e)+pu(e,r)+hu(e)+gu(e)+vu(e,t)+yu+xu(e)+ku(e)}function Cu(e){let t=Math.ceil(e.hp*n.hpVariable+e.armor*n.generalVariable),r="fshYellow";return Pa(),Ft>e.level&&(r="fshRed"),wu(e,t,r)}function Vo(e){if(!O(e))return Cu(e.response.data)}var Bu=["verb","view","tip-static"];function Au(e,t){$(e).qtip({overwrite:!0,show:{event:"mouseover",ready:!0},style:{classes:"qtip-tipsy qtip-custom"},position:{my:"center right",at:"center left",effect:!1,viewport:$(window)},content:{text:t},hide:{effect:!1}})}function bu(e){return ht(e.parentNode.children).indexOf(e)}function Lu(e,t){let r=Vo(t);e.set("content.text",r)}function Su(e,t,r){return Je(GameData.actions()[e].data.id,e).then(u(Lu,r)),"Loading..."}function Eu(e,t){xe("NewMap","CreatureInfo");let r=bu(t);e.classList.add("fshTip"),Au(e,u(Su,r))}function Mu(e,t){return gi(Bu,e)&&!Ke("fshTip",e)&&Ke("creature",t)}function Hu(e){if(!n.showCreatureInfo)return;let{target:t}=e,r=t.parentNode.parentNode.parentNode;Mu(t,r)&&Eu(t,r)}function No(){R(a("actionList"),"mouseover",Hu)}function Tu(e,t){t.b[2]&&Li()}function Go(){p("useNewGuildLog")&&$.subscribe("notifications.player",Tu)}var M;function Vu(e,t){t.creature_class=e.creature_class,t.image_id=e.image_id,t.level=Number(e.level),t.type=e.type}function Nu(e){M[e.name]?M[e.name].seen&&(M[e.name].seen+=1):(M[e.name]={seen:1},Vu(e,M[e.name]))}function _a(e,t,r){return t?e(t,r):r}function Fa(e,t){let r=e||{};return r.min=_a(Math.min,r.min,t),r.max=_a(Math.max,r.max,t),r}var Gu=["attack","armor","damage","defense","hp"];function $u(e,t){return!e||e.min!==t.min||e.max!==t.max}function Ru(e,t,r){let o=Fa(t[r],Number(e[r]));$u(t[r],o)&&(t[r]=o)}function Iu(e,t){Gu.forEach(u(Ru,e,t))}function Pu(e){return e.enhancements&&e.enhancements.length>0}function _u(e,t){e[t.name]=Fa(e[t.name],Number(t.value))}function Fu(e,t){Pu(e)&&(t.enhancements=t.enhancements||{},e.enhancements.forEach(u(_u,t.enhancements)))}function Ou(e){M||(M={}),Nu(e),Iu(e,M[e.name]),Fu(e,M[e.name]),Dt("fsh_monsterLog",M)}function Oa(e){n.showMonsterLog&&Ou(e)}function Ku(e){M=e||{}}function Ka(){yt("fsh_monsterLog").then(Ku)}var qa=[];function qu(e){O(e)||(xe("NewMap","MonsterLog"),Oa(e.response.data))}function Wu(e,t){return e.id===t.id}function Uu(e){if(qa.find(u(Wu,e.data)))return!0;qa.push(e.data)}function zu(e,t){e.type!==6||Uu(e)||Je(e.data.id,t).then(qu)}function Wa(){n.showMonsterLog&&GameData.actions().forEach(zu)}function $o(){Ka(),$.subscribe("-1-success.action-response 4-success.action-response 5-success.action-response 25-success.action-response",Wa),Wa()}function Ro(){return Ei({subcmd:"scouttower"})}function Yu(e){let t=e.split(/[: /[]/);return new Date(Number(t[4]),ft.indexOf(t[3]),Number(t[2]),Number(t[0]),Number(t[1]))}function Qu(e){let t=oe(e[1]);return t==="No active cooldown"?0:Math.ceil((Yu(t.slice(16))-pt)/1e3)}function Xu(e){let[t]=e[0].cells[0].children;return{base_id:Number(t.src.split("/").slice(-1)[0].slice(0,-36)),name:t.title}}function Ju(e){return{cooldown:Qu(e),creature:Xu(e),kills:Number(oe(e[0].cells[3]))}}function ju(e){let t=oe(e[0].cells[1]);if(t!=="n/a"){let r=oe(e[0].cells[2]).split("/");return{realm:t,current_hp:Number(r[0]),max_hp:Number(r[1])}}}function Zu(e){let t=e[2].cells[0].children;if(t.length===1)return{contributors:Ti(t[0],3,0).map(o=>({kills:Number(oe(o.cells[1])),player:{name:oe(o.cells[0])}}))}}function ec(e){return{...Ju(e),...ju(e),...Zu(e)}}function tc(e){let t=z(e),r=ye('table[width="500"]',t);if(!r)return{s:!1};let o=ht(r.rows).filter((s,c,G)=>c!==0&&c<G.length-1&&(c-1)%6<3);return{r:Pi(3,o).map(ec),s:!0}}function Io(){return ne({cmd:"guild",subcmd:"scouttower"}).then(tc)}function Po(){return De(Ro,Io)}function rc(e,[t,r,o]){let l=e.insertCell(-1);return l.colSpan=t,o&&(l.className="header"),i(l,r),l}function oc(e,t){t.forEach(u(rc,e))}function nc(e,t,r){let o=e.insertRow(-1);return r&&(o.className="fshBlue"),oc(o,t),o}function ic(e,t){nc(e,t[0],t[1])}function Ze(e,t){t.forEach(u(ic,e))}var _o;function Ua(e){_o=e}var Fo,Oo,Ko,qo,Wo,Uo,zo,Yo;function ac(){Fo=x("Current"),Oo=x("Kills"),Ko=x("Member"),qo=x("% of Total")}function lc(){Wo=x("Status"),Uo=x("Titan HP"),zo=x("Total"),Yo=x("Your Guild")}function za(){ac(),lc()}var Te,Ve,Ne,Ge,$e,Re,Ie,Pe,_e;function fc(){Te=h({innerHTML:"&nbsp;"}),Ve=h({innerHTML:"&nbsp;"}),Ne=h(),Ge=h()}function sc(){$e=h(),Re=h(),Ie=h(),Pe=h(),_e=h()}function Ya(){fc(),sc()}function Qa(){w("&nbsp;",Te),w("&nbsp;",Ve),f("",Ne),f("",Ge),f("",$e),f("",Re),f("",Ie),w("",Pe),w("",_e)}var Z;function Ot(){for(;Z.rows.length>8;)Z.deleteRow(8)}function uc(){let e=h();return i(e,Ne),P(e,"/"),i(e,Ge),e}function Xa(e){let t=h();return i(t,e),P(t,"%"),t}function Ja(){Z=ci({className:"fshCenter"}),za(),Ze(Z,[[[[5,Te,!0],[1,Ve,!0]]],[[[2,Uo,!0],[4,Yo,!0]]],[[[2,uc()],[4,$e]]],[[[2,Fo,!0],[4,Xa(Re)]],!0],[[[2,zo,!0],[4,Xa(Ie)]],!0],[[[2,Wo,!0],[4,Pe]],!0],[[[6,_e]]],[[[2,Ko,!0],[2,Oo,!0],[2,qo,!0]]]])}var ee,Kt,Qo;function Xo(){Kt=null,ee&&!Ke("fshHide",ee)&&(g(ee,!0),Qa(),Ot())}function ja(e){return e.type===0?(Kt=e.base_creature_id,Qo=`(${e.x},${e.y})`,!0):!1}function Za(){if(ee)g(ee,!1);else{let e=a("actionContainer");ee=m({className:"fshActionBox titanInfo"}),Ya(),Ja(),i(ee,Z),i(e,ee)}}function cc(e){let t=new Date(pt+e*1e3);return`${bt(t.getHours())}:${bt(t.getMinutes())} ${bt(t.getDate())}/${ft[t.getMonth()]}/${t.getFullYear()}`}function mc(e){return e<=0?'<span class="fshGreen cooldown">No active cooldown</span>':`<span class="fshMaroon cooldown">Cooldown until: ${cc(e)}</span>`}function dc(e){return St(Ui(e.max_hp-e.current_hp,e.kills),2)}function pc(e){return St(e.kills*100/e.max_hp,2)}function hc(e){return zi(e.kills,e.max_hp,e.current_hp)}function gc(e){e.forEach(([t,r])=>{f(t,r)})}function vc(e){gc([[Yi(e.creature.name),Te],[Qo,Ve],[e.current_hp,Ne],[e.max_hp,Ge],[e.kills,$e],[dc(e),Re],[pc(e),Ie]]),w(hc(e),Pe),w(mc(e.cooldown),_e)}function yc(e,t){return[[[2,x(t.player.name)],[2,x(t.kills.toString())],[2,x(`${St(t.kills*100/e.kills,2)}%`)]]]}function Dc(e){if(Ot(),!e.contributors)return;let t=e.contributors.map(u(yc,e));Ze(Z,t)}function xc(e){return e.realm&&e.creature.base_id===Kt&&e.realm===_o}function Jo(e){let t=e.find(xc);t&&(vc(t),Dc(t))}var qt;function kc(){qt&&(window.clearTimeout(qt),qt=null)}function wc(e){return e&&e.s&&I(e.r)}function el(e){return n.showTitanInfo&&I(e)&&e.some(ja)}function Cc(e,t){!wc(t)||(Jo(t.r),el(GameData.realm().dynamic)?qt=window.setTimeout(e,3e4):Xo())}function tl(){Po().then(u(Cc,tl))}function rl(e){kc(),el(e)?(Za(),tl()):Xo()}function ol(e){e.dynamic&&(Ua(e.name),rl(e.dynamic))}function nl(){n.showTitanInfo=!n.showTitanInfo,y("showTitanInfo",n.showTitanInfo),rl(GameData.realm().dynamic)}function Bc(e){return e.realm&&e.realm.name}function il(e,t){Bc(t)&&ol(t.realm)}function jo(){window.initialGameData&&il(null,window.initialGameData),$.subscribe(`${Kn} ${Un}`,il)}function Ac(e,t){t==="ACT_REPAIR"&&GameData.fetch(Yn+W+ct+E)}function Zo(){$.subscribe(Fn,Ac)}var en;function al(e){$("#statbar-gold").css("background-color",e)}function ll(){$("#HelperSendTotal").html(Y(p("currentGoldSentTotal"))),Number(GameData.player().gold)>en?al("red"):al("inherit")}function bc(){return`<dt class="stat-gold-sendTo">Send To:</dt><dd id="HelperSendTo">${p("goldRecipient")}</dd><dt class="stat-gold-sendAmt">Amount:</dt><dd id="HelperSendAmt">${Y(en)}</dd><dt class="stat-gold-sendTo">Send?</dt><dd><input id="HelperSendGold" value="Send!" class="custombutton" type="submit"><input type="hidden" id="xc" value=""</dd><dt class="stat-gold-sendTotal">Total Sent:</dt><dd id="HelperSendTotal">${Y(p("currentGoldSentTotal"))}</dd>`}function Lc(){en=p("goldAmount"),$("#statbar-gold-tooltip-general").append(bc()),$("#HelperSendGold").on("click",Gi),ll(),$.subscribe(Pn,ll)}function tn(){Ni(),Vi&&Lc()}var et,tt,Wt,Fe,on,rn,Ut;function Sc(){return Xe({a:14,d:0,id:et.id,item_id:et.itemId})}function Ec(e){let t=e.response.response,r=e.response.msg,o;if(t!==0){let l=r.indexOf("<");l!==-1?o=r.substring(0,l):o=r}else o=`You purchased ${e.response.data.name} for ${Y(e.response.data.cost)} gold.`;re(Ut,`${o}<br>`)}function Mc(){GameData.doAction(14,3,{id:et.id,item_id:et.itemId},0),Wt.close()}function Hc(){let e=Ii(on.value);if(!e)return;let t=[];for(let r=1;r<e;r+=1)t.push(Sc().then(Ec));Lt(t,Mc)}function Tc(){Fe=m({className:"fshClear",textContent:"Select how many to quick-buy:"}),on=kt({id:"buyAmount",className:"fshNumberInput",min:1,max:99,value:1,type:"number"}),i(Fe,on),rn=T({textContent:"Quick-buy"}),B(rn,Hc),i(Fe,rn),Ut=m(),i(Fe,Ut),i(tt,Fe)}function Vc(){return tt||a("shopDialogConfirm")}function Nc(){return Wt||$(tt).data("hcsWorldDialogShopConfirm")}function Gc(){Fe?f("",Ut):Tc()}function $c(e,t){et=t,tt=Vc(),tt&&(Wt=Nc(),Wt&&Gc())}function nn(){$.subscribe(_n,$c)}function Rc(e){let t=z(e),r=Fi(t);return{r:{attributes:[{value:r.attack},{value:r.defense},{value:r.armor},{value:r.damage},{value:r.hp}]}}}function an(e){return ne({cmd:"guild",subcmd:"groups",subcmd2:"viewstats",group_id:e}).then(Rc)}function ln(e){return Mi({subcmd2:"viewstats",group_id:e})}function fn(e){return De(ln,an,e)}function fl(e){return e.numberOfCreatureHitsTillDead-e.numberOfHitsRequired<=1?", dies on miss":", survives a miss"}function Ic(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired>e.numberOfCreatureHitsTillDead}function Pc(e){return e.numberOfCreatureHitsTillDead==="-"?e.numberOfHitsRequired:Ic(e)?"-":e.numberOfHitsRequired}function _c(e){return e.numberOfCreatureHitsTillDead==="-"||e.numberOfCreatureHitsTillDead>e.numberOfHitsRequired}function Fc(e){return e.numberOfHitsRequired==="-"?e.numberOfCreatureHitsTillDead:_c(e)?"-":e.numberOfCreatureHitsTillDead}var Oc=[[e=>e.playerHits==="-"&&e.creatureHits==="-",()=>"Unresolved"],[e=>e.playerHits==="-",()=>"Player dies"],[e=>e.playerHits===1,e=>`Player 1 hits${fl(e)}`],[e=>e.playerHits>1,e=>`Player > 1 hits${fl(e)}`]];function Kc(e,t){return t[0](e)}function qc(e){let t=Oc.find(u(Kc,e));return t?t[1](e):"Unknown"}function sn(e){e.playerHits=Pc(e),e.creatureHits=Fc(e),e.fightStatus=qc(e)}function Wc(e){return e.callback.groupExists?e.callback.groupArmorValue:e.player.armorValue}function Uc(e){let t=Wc(e);e.overallArmorValue=t+Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}function zc(e){e.player.sanctuaryLevel>0&&(e.extraNotes+=`Sanc Bonus Armor = ${Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}<br>`)}function Yc(e){e.terrorizeEffect=Math.floor(e.creature.damage*e.player.terrorizeLevel*.001)}function Qc(e){e.player.terrorizeLevel>0&&(e.extraNotes+=`Terrorize Creature Damage Effect = ${e.terrorizeEffect*-1}<br>`)}function Xc(e){e.creatureDamageDone=Math.ceil(e.generalVariable*e.creature.damage-e.overallArmorValue+e.overallHPValue)}function Jc(e){let t=e.generalVariable*e.creature.damage;t<e.overallArmorValue?e.numberOfCreatureHitsTillDead=e.overallHPValue:e.numberOfCreatureHitsTillDead=Math.ceil(e.overallHPValue/(t-e.overallArmorValue))}function jc(e){e.creatureHitByHowMuch>=0?Jc(e):e.numberOfCreatureHitsTillDead="-"}function un(e){Uc(e),zc(e),Yc(e),Qc(e),e.creature.damage-=e.terrorizeEffect,Xc(e),jc(e)}function Zc(e){return e.callback.groupExists?e.callback.groupAttackValue:e.player.attackValue}function sl(e){return Math.floor(e.creature.defense*e.player.darkCurseLevel*mt)}function em(e){let t=e.creature.defense-sl(e);return e.combatEvaluatorBias===3?e.overallAttackValue-Math.ceil(t)-50:e.overallAttackValue-Math.ceil(e.attackVariable*t)}function cn(e){let t=Zc(e);e.player.darkCurseLevel>0&&(e.extraNotes+=`DC Bonus Attack = ${sl(e)}<br>`),e.nightmareVisageAttackMovedToDefense=Math.floor((t+e.counterAttackBonusAttack)*e.player.nightmareVisageLevel*.0025),e.player.nightmareVisageLevel>0&&(e.extraNotes+=`NMV Attack moved to Defense = ${e.nightmareVisageAttackMovedToDefense}<br>`),e.overallAttackValue=t+e.counterAttackBonusAttack-e.nightmareVisageAttackMovedToDefense,e.hitByHowMuch=em(e)}function tm(e){return e.player.counterAttackLevel>0&&e.numberOfHitsRequired===1}function ul(e){e.lowestCALevelToStillHit=Math.max(Math.ceil((e.counterAttackBonusAttack-e.hitByHowMuch+1)/e.player.attackValue/.0025),0),e.lowestCALevelToStillKill=Math.max(Math.ceil((e.counterAttackBonusDamage-e.damageDone+1)/e.player.damageValue/.0025),0)}function rm(e){return e.player.counterAttackLevel>0?Math.ceil((1+e.player.doublerLevel/50)*.0025*e.lowestFeasibleCALevel):0}function om(e){e.extraAttackAtLowestFeasibleCALevel=Math.floor(e.player.attackValue*.0025*e.lowestFeasibleCALevel),e.extraDamageAtLowestFeasibleCALevel=Math.floor(e.player.damageValue*.0025*e.lowestFeasibleCALevel),e.extraNotes+=`Extra CA Att/Dam at this lowered CA level = ${e.extraAttackAtLowestFeasibleCALevel} / ${e.extraDamageAtLowestFeasibleCALevel}<br>`}function nm(e){ul(e),e.lowestFeasibleCALevel=Math.max(e.lowestCALevelToStillHit,e.lowestCALevelToStillKill),e.extraNotes+=`Lowest CA to still 1-hit this creature = ${e.lowestFeasibleCALevel}<br>`,e.lowestFeasibleCALevel!==0&&om(e),e.extraStaminaPerHitAtLowestFeasibleCALevel=rm(e),e.extraStaminaPerHitAtLowestFeasibleCALevel<e.extraStaminaPerHit?e.extraNotes+=`Extra Stam Used at this lowered CA level = ${e.extraStaminaPerHitAtLowestFeasibleCALevel}<br>`:e.extraNotes+="No reduction of stam used at the lower CA level<br>"}function im(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired!==1}function am(e){e.lowestCALevelToStillHit>175?e.extraNotes+="Even with CA175 you cannot hit this creature<br>":e.lowestCALevelToStillHit!==0&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillHit} to hit this creature<br>`)}function lm(e){e.lowestCALevelToStillKill>175?e.extraNotes+="Even with CA175 you cannot 1-hit kill this creature<br>":e.lowestCALevelToStillKill!==0&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillKill} to 1-hit kill this creature<br>`)}function fm(e){ul(e),am(e),lm(e)}function mn(e){tm(e)&&nm(e),im(e)&&fm(e)}function sm(e){return e.callback.groupExists?e.callback.groupHPValue:e.player.hpValue}function um(e){return e.callback.groupExists?e.callback.groupDamageValue:e.player.damageValue}function cm(e){let t=sm(e),{fortitudeLevel:r}=e.player;e.fortitudeExtraHPs=Math.floor(t*r*.001),r>0&&(e.extraNotes+=`Fortitude Bonus HP = ${e.fortitudeExtraHPs}<br>`),e.overallHPValue=t+e.fortitudeExtraHPs}function mm(e){let{chiStrikeLevel:t}=e.player;e.chiStrikeExtraDamage=Math.floor(e.overallHPValue*t*.001),t>0&&(e.extraNotes+=`Chi Strike Bonus Damage = ${e.chiStrikeExtraDamage}<br>`)}function dn(e){cm(e),mm(e);let t=um(e);if(e.overallDamageValue=t+e.deathDealerBonusDamage+e.counterAttackBonusDamage+e.holyFlameBonusDamage+e.chiStrikeExtraDamage,e.damageDone=Math.floor(e.overallDamageValue-(e.generalVariable*e.creature.armor+e.hpVariable*e.creature.hp)),e.hitByHowMuch>0){let r=1;e.overallDamageValue>=e.generalVariable*e.creature.armor&&(r=e.overallDamageValue-e.generalVariable*e.creature.armor),e.numberOfHitsRequired=Math.ceil(e.hpVariable*e.creature.hp/r)}else e.numberOfHitsRequired="-"}function pn(e){return e.callback.groupExists?e.callback.groupDefenseValue:e.player.defenseValue}function dm(e){e.player.constitutionLevel>0&&(e.extraNotes+=`Constitution Bonus Defense = ${Math.floor(pn(e)*e.player.constitutionLevel*.001)}<br>`)}function pm(e){e.player.flinchLevel>0&&(e.extraNotes+=`Flinch Bonus Attack Reduction = ${Math.floor(e.creature.attack*e.player.flinchLevel*.001)}<br>`)}function hn(e){e.overallDefenseValue=pn(e)+Math.floor(pn(e)*e.player.constitutionLevel*.001)+e.nightmareVisageAttackMovedToDefense,dm(e),pm(e),e.creatureHitByHowMuch=Math.floor(e.attackVariable*e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue),e.combatEvaluatorBias===3&&(e.creatureHitByHowMuch=Math.floor(e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue-50))}function hm(e){e.player.superEliteSlayerLevel>0&&(e.extraNotes+=`SES Stat Reduction Multiplier = ${e.player.superEliteSlayerMultiplier}<br>`)}function gm(e){e.holyFlameBonusDamage=0,e.creature.class==="Undead"&&(e.holyFlameBonusDamage=Math.max(Math.floor((e.player.damageValue-e.creature.armor)*e.player.holyFlameLevel*.002),0),e.player.holyFlameLevel>0&&(e.extraNotes+=`HF Bonus Damage = ${e.holyFlameBonusDamage}<br>`))}function vm(e){e.deathDealerBonusDamage=Math.floor(e.player.damageValue*(Math.min(Math.floor(e.player.killStreakValue/5)*.01*e.player.deathDealerLevel,20)/100))}function ym(e){e.counterAttackBonusAttack=Math.floor(e.player.attackValue*.0025*e.player.counterAttackLevel),e.counterAttackBonusDamage=Math.floor(e.player.damageValue*.0025*e.player.counterAttackLevel)}function Dm(e){e.extraStaminaPerHit=0,e.player.counterAttackLevel>0&&(e.extraStaminaPerHit=Math.ceil((1+e.player.doublerLevel/50)*.0025*e.player.counterAttackLevel))}function xm(e){e.player.deathDealerLevel>0&&(e.extraNotes+=`DD Bonus Damage = ${e.deathDealerBonusDamage}<br>`)}function km(e){e.player.counterAttackLevel>0&&(e.extraNotes+=`CA Bonus Attack/Damage = ${e.counterAttackBonusAttack} / ${e.counterAttackBonusDamage}<br>CA Extra Stam Used = ${e.extraStaminaPerHit}<br>`)}function gn(e){e.extraNotes="",hm(e),gm(e),vm(e),ym(e),Dm(e),xm(e),km(e)}function wm(e){return e.callback.groupExists?"Group ":""}function Cm(e){return`<tr><td bgcolor="#CD9E4B" colspan="4" align="center">${wm(e)}Combat Evaluation</td></tr>`}function Bm(e){return e.hitByHowMuch>0?"Yes":"No"}function Am(e){return`<tr><td align="right"><span style="color:#333333">Will I hit it? </td><td align="left">${Bm(e)}</td><td align="right"><span style="color:#333333">Extra Attack: </td><td align="left">( ${e.hitByHowMuch} )</td></tr>`}function bm(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill it? </td><td align="left">${e.numberOfHitsRequired}</td><td align="right"><span style="color:#333333">Extra Damage: </td><td align="left">( ${e.damageDone} )</td></tr>`}function Lm(e){return e.creatureHitByHowMuch>=0?"Yes":"No"}function Sm(e){return`<tr><td align="right"><span style="color:#333333">Will I be hit? </td><td align="left">${Lm(e)}</td><td align="right"><span style="color:#333333">Extra Defense: </td><td align="left">( ${-1*e.creatureHitByHowMuch} )</td></tr>`}function Em(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill me? </td><td align="left">${e.numberOfCreatureHitsTillDead}</td><td align="right"><span style="color:#333333">Extra Armor + HP: </td><td align="left">( ${-1*e.creatureDamageDone} )</td></tr>`}function Mm(e){return`<tr><td align="right"><span style="color:#333333"># Player Hits? </td><td align="left">${e.playerHits}</td><td align="right"><span style="color:#333333"># Creature Hits? </td><td align="left">${e.creatureHits}</td></tr>`}function Hm(e){return`<tr><td align="right"><span style="color:#333333">Fight Status: </span></td><td align="left" colspan="3"><span>${e.fightStatus}</span></td></tr>`}function Tm(e){return`<tr><td align="right"><span style="color:#333333">Notes: </span></td><td align="left" colspan="3"><span style="font-size:x-small;">${e.extraNotes}</span></td></tr>`}function vn(e){return`<table width="100%"><tbody>${Cm(e)}${Am(e)}${bm(e)}${Sm(e)}${Em(e)}${Mm(e)}${Hm(e)}${Tm(e)}</tbody></table>`}var zt,Yt,rt;function Vm(e){if(!zt){let t=ve("body",e);t.length===1&&([zt]=t)}}function cl(){return ce(Yt)?"Remove from do not kill list":"Add to the do not kill list"}function ml(){f(cl(),rt)}function Nm(){let e=n.doNotKillList.indexOf(Yt);e===-1?n.doNotKillList.push(Yt):n.doNotKillList.splice(e,1),ml(),y("doNotKillList",n.doNotKillList.join()),Ae()}function Gm(){rt=T({className:"fshBl",textContent:cl(),type:"button"});let e=m({className:"description",innerHTML:'<span class="ui-helper-hidden-accessible"><input type="text"></span>'});i(e,rt),i(zt,e),B(rt,Nm)}function $m(){rt?ml():Gm()}function yn(e,t){Vm(t),zt&&(Yt=ge(e),$m())}var Oe,ot,Qt,Xt;function Rm(){Oe||(Oe=a("dialog-viewcreature"))}function Im(){ot||(ot=m(),i(Oe,ot),i(Oe,m({innerHTML:'<span class="fshFooter">*Does include CA, DD, HF, DC, Flinch, Super Elite Slayer, NMV, Sanctuary, Constitution, Fortitude, Chi Strike and Terrorize (if active) and allow for randomness (1.1053). Constitution, NMV, Fortitude and Chi Strike apply to group stats.</span>'})))}function dl(){Qt||(Im(),Qt=m(),i(ot,Qt))}function Pm(){Xt||(dl(),Xt=m(),i(ot,Xt))}function pl(e){dl(),w(e,Qt)}function hl(e){Pm(),w(e,Xt)}function _m(e,t,r){r===3&&(t.attack-=Math.ceil(t.attack*e),t.defense-=Math.ceil(t.defense*e),t.armor-=Math.ceil(t.armor*e),t.damage-=Math.ceil(t.damage*e),t.hp-=Math.ceil(t.hp*e))}function Fm(e,t){let r={name:e.name,class:e.creature_class,attack:Number(e.attack),defense:Number(e.defense),armor:Number(e.armor),damage:Number(e.damage),hp:Number(e.hp)};return _m(t,r,e.type),r}function Om(e){e.combatEvaluatorBias=n.combatEvaluatorBias,e.attackVariable=1.1053,e.generalVariable=n.generalVariable,e.hpVariable=n.hpVariable}function Km(e){gn(e),cn(e),dn(e),hn(e),un(e),sn(e),mn(e)}function gl(e,t,r){let o={};o.callback=r,o.player=Ee(t),Om(o),o.creature=Fm(e.response.data,o.player.superEliteSlayerMultiplier),Km(o),o.evaluatorHTML=vn(o),r.groupExists?hl(o.evaluatorHTML):pl(o.evaluatorHTML)}function qm(e){return e.members[0].name===xt()}function Wm(e){if(I(e.r))return e.r.find(qm).id}function Um(e,t,r){if(!r.r||!r.r.attributes)return;let o=r.r.attributes;gl(e,t,{groupExists:!0,groupAttackValue:o[0].value,groupDefenseValue:o[1].value,groupArmorValue:o[2].value,groupDamageValue:o[3].value,groupHPValue:o[4].value})}function zm(e,t,r){r&&fn(r).then(u(Um,e,t))}function Ym(e,t){Hi().then(Wm).then(u(zm,e,t))}function Qm(e,t){e.player.hasGroup&&Ym(e,t),gl(e,t,{groupExists:!1})}function Xm(e){return e.response&&e.response.data}function Jm(e,t){Rm(),Oe&&(pl(""),hl(""),Xm(t)&&(yn(t.response.data.name,Oe),Ai(!0).then(u(Qm,t))))}function Dn(){$.subscribe(qn,Jm)}var Jt,xn;function jt(){let e=[null,[n.buffs,n.buffsName],[n.buffs2,n.buffs2Name],[n.buffs3,n.buffs3Name]][n.enabledHuntingMode];I(e)&&([Jt,xn]=e)}function kn(e){e.target.name==="enabledHuntingMode"&&(n.enabledHuntingMode=e.target.value,y("enabledHuntingMode",n.enabledHuntingMode),jt(),GameData.fetch(W))}var nt;function yl(){nt=!nt,y("hidePlayerActions",nt),GameData.fetch(E)}function jm(e){let t=ve("verbs",e);t.length===1&&Bt(t[0])}function vl(){if(!nt)return;let e=a("actionList");vt("player",e).forEach(jm)}function Dl(){nt=p("hidePlayerActions"),$.subscribe(he,vl),vl()}function wn(){n.showCreatureInfo=!n.showCreatureInfo,y("showCreatureInfo",n.showCreatureInfo)}function Cn(){n.showBuffs=!n.showBuffs,y("showHuntingBuffs",n.showBuffs),GameData.fetch(W)}function Bn(){n.showMonsterLog=!n.showMonsterLog,y("showMonsterLog",n.showMonsterLog)}function An(){n.hideSubLvlCreature=!n.hideSubLvlCreature,y("hideSubLvlCreature",n.hideSubLvlCreature),GameData.fetch(E)}function Zm(){return m({id:"fshWorldPrefs",innerHTML:`${ie("showCreatureInfo")}&nbsp;&nbsp;${ie("showMonsterLog")}&nbsp;&nbsp;${ie("showTitanInfo")}&nbsp;&nbsp;${ie("showBuffInfo")}<br>${ie("hideSubLvlCreature")}&nbsp;&nbsp;${ie("hidePlayerActions")}&nbsp;&nbsp;${ji()}`})}var ed={hideSubLvlCreature:An,hidePlayerActions:yl,showCreatureInfo:wn,showHuntingBuffs:Cn,showMonsterLog:Bn,showTitanInfo:nl,showBuffInfo:na};function td(e){let t=ed[e.target.name];dt(t)&&(e.target.blur(),t(e))}function bn(){let e=m({className:"fshCenter fshFten"}),t=Zm();B(t,td),R(t,"change",kn),i(e,t);let r=m();i(e,r);let o=a("worldContainerBelow").children[0];return At(e,o),r}function rd(e,t){return e[t.name]=!0,e}function od(e,t,r){return e[ge(r)]||t.push(r),t}function nd(e,t){w(`You are missing some ${xn} hunting buffs<br>(${t.join(", ")})`,e)}function xl(e){w("",e)}function id(e,t){let r=t.b.reduce(rd,{}),o=Jt.reduce(u(od,r),[]);o.length>0?nd(e,o):xl(e)}function ad(e,t,r){n.showBuffs?id(e,r):xl(e)}function ld(e,t,r){Jt&&ad(e,t,r)}function Ln(e){jt();let t=u(ld,e);$.subscribe(st,t),n.showBuffs&&window.initialGameData&&t(null,{b:window.initialGameData.player.buffs})}var Zt=[{generalVariable:1.1053,hpVariable:1.1},{generalVariable:1.1,hpVariable:1.053},{generalVariable:1.053,hpVariable:1},{generalVariable:1.1053,hpVariable:1}];function fd(e){return Zt[e]?Zt[e].generalVariable:1.1053}function sd(e){return Zt[e]?Zt[e].hpVariable:1.1}function Sn(){n.combatEvaluatorBias=p("combatEvaluatorBias"),n.generalVariable=fd(n.combatEvaluatorBias),n.hpVariable=sd(n.combatEvaluatorBias)}function ud(e){return!e||!e.actions||e.actions.length===0}function cd(e,t){return t.type===6?t.data.creature_type!==0||t.data.level>=e:!0}function md(e){return e.realm&&e.realm.minlevel||GameData.realm().minlevel}function dd(e){let t=ti(e);return ud(t)?e:(t.actions=t.actions.filter(u(cd,md(t))),ii(t))}function pd(e){return e.data&&e.data.d&&Wi(e.data.d,E)}function hd(e,t){n.hideSubLvlCreature&&pd(t)&&(e.dataFilter=dd)}function En(){$.ajaxPrefilter("JSON",hd),n.hideSubLvlCreature&&GameData.fetch(E)}function gd(e){n[e[0]]=lr(e[1])}function vd(){[["buffs","huntingBuffs"],["buffs2","huntingBuffs2"],["buffs3","huntingBuffs3"]].forEach(gd)}function yd(e){n[e]=lr(e)}function Dd(){["doNotKillList"].forEach(yd)}function xd(){vd(),Dd()}function kd(e){n[e[0]]=p(e[1])}function wd(){[["buffsName","huntingBuffsName"],["buffs2Name","huntingBuffs2Name"],["buffs3Name","huntingBuffs3Name"],["showBuffs","showHuntingBuffs"]].forEach(kd)}function Cd(e){n[e]=p(e)}function Bd(){["enabledHuntingMode","hideSubLvlCreature","showTitanInfo","showBuffInfo","showMonsterLog","showCreatureInfo"].forEach(Cd)}function Ad(){wd(),Bd()}function bd(){xd(),Ad()}function Mn(){Sn(),bd();let e=bn();En(),Ln(e),Dl()}function Ld(){$("#messageCenter").worldMessageCenter({offset:"0 60"})}function Sd(){Ce("#mapTooltip")}var Ed=[Mn,tn,Dn,Xr,Pr,Fr,$o,Zo,Ir,jo,nn,Lo,Ld,Sd,Vr,oa,Or,No,$r,Qr,Go];function Md(){Qi(Ed),n.userIsDev&&Jr()}export{Md as default};
//# sourceMappingURL=newMap-MCYE3V5V.js.map
