import{a as u}from"./chunk-WGISVX7D.js";import{a as c}from"./chunk-VSTJBSW7.js";function f(t){return t.data?(delete t.data.fshrnd,$.param(t.data)):t.url}function h(t,e,n,r){let a=`${e.status} ${e.statusText} - `;if(e.statusText===r.toString())return a+f(t);let i=`${a+n} ${r} - ${f(t)}`;return n==="parsererror"?`${i} - ${e.responseText}`:i}var s=class extends Error{constructor([e,n,r,a],...i){super(h(e,n,r,a),...i),Error.captureStackTrace&&Error.captureStackTrace(this,s),this.jqSettings=e,this.jqXhr=n,this.jqTextStatus=r,this.jqErrorThrown=a}};function w(t){return typeof t=="string"?{url:t}:t}function x(t){c(window,"beforeunload",()=>t.abort())}var g=[0,503,504],S=["abort"],T=["We have encountered an issue with a server connection","We're performing maintenance on the game","the team have been notified and will get it fixed soon","uUDRezBqFM4"];function p(t){return g.includes(t.jqXhr.status)||S.includes(t.jqTextStatus)||T.some(e=>t.jqXhr.responseText.includes(e))}function b(t,e){let n=new s([t,e,e.textStatus,e.errorThrown]);p(n)||u(n.toString(),!1)}var y=900,l=0,d=5,o=0,v=t=>new Promise(e=>{setTimeout(e,t)});async function k(){o<d-$.active&&performance.now()-l>=y?(o=d-$.active,l=performance.now()):await v(100)}async function E(){for(;o<1;)await k();o-=1}function j(t){let e=w(t);return e.beforeSend=x,$.ajax(e).fail((n,r,a)=>{n.textStatus=r,n.errorThrown=a})}async function m(t,e=10){await E();let n=null;try{n=await j(t)}catch(r){if(e&&r.status===503)return m(t,e-1);b(t,r)}return n}export{m as a};
//# sourceMappingURL=chunk-232WRRJZ.js.map
