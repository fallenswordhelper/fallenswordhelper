import{a as ie}from"./chunk-XR7MRUEK.js";import{a as te,b as ee}from"./chunk-CBFCOU3A.js";import{a as Kt}from"./chunk-YWB6RLMI.js";import{a as z}from"./chunk-2CBVY6E4.js";import{a as oe}from"./chunk-D7HRBTOD.js";import{a as re}from"./chunk-SIQYZ4HQ.js";import{a as Jt}from"./chunk-SGALRFNE.js";import{a as Yt}from"./chunk-NZU3F3TP.js";import{a as V}from"./chunk-WKC6YNIN.js";import{a as Wt}from"./chunk-WYMEZBL7.js";import{a as Zt}from"./chunk-7N5PWMX4.js";import"./chunk-S5V45O4K.js";import"./chunk-VXFDCEQG.js";import{a as _}from"./chunk-YSCPHF6A.js";import{a as _t}from"./chunk-L3LOXK7U.js";import{a as Qt}from"./chunk-WZXMBA3W.js";import{a as zt}from"./chunk-Q2JDCSDS.js";import"./chunk-HQEGP3CG.js";import{a as Q}from"./chunk-ZZFUN4A2.js";import{a as wt}from"./chunk-WYZC5UIP.js";import{a as Bt}from"./chunk-3BCYJ2VD.js";import{a as Ot}from"./chunk-WIFBRKCJ.js";import"./chunk-IXDXLPIY.js";import{a as Nt}from"./chunk-MPTLNWVC.js";import{a as c}from"./chunk-NQS57V2C.js";import"./chunk-G4H5NRBH.js";import{a}from"./chunk-DU4LUWGY.js";import"./chunk-N4PCIVE3.js";import{a as n}from"./chunk-NBYXTQFH.js";import{a as o}from"./chunk-XVTH24AL.js";import{a as P}from"./chunk-5AWGL262.js";import"./chunk-BNH2OXS3.js";import{a as vt}from"./chunk-Y554ZVGU.js";import"./chunk-Z26SY6L7.js";import{a as M}from"./chunk-VXXHEXPM.js";import{c as I}from"./chunk-6NEU6UCN.js";import"./chunk-F5O454QA.js";import{a as $t}from"./chunk-4WXQAPIC.js";import{a as D}from"./chunk-RBTBDUJC.js";import"./chunk-KX7QOYLT.js";import{a as Gt}from"./chunk-ZQEWS22E.js";import"./chunk-2C6JLCJG.js";import"./chunk-D4AVXNRB.js";import{a as Ct}from"./chunk-W5AN4HHX.js";import"./chunk-HEK53YUZ.js";import{b as m}from"./chunk-FJXTYPNU.js";import{a as f}from"./chunk-ACOFHTYC.js";import{a as yt}from"./chunk-RVP3BZF7.js";import{a as jt,b as Ut,c as qt,d as Ft}from"./chunk-OKOCSILA.js";import{a as Xt}from"./chunk-UBGBG6D2.js";import"./chunk-43ZAPYJX.js";import"./chunk-EWI7Z55M.js";import"./chunk-3R2PTZWM.js";import"./chunk-PK7Z5EJN.js";import"./chunk-FL4AZPOF.js";import{a as O}from"./chunk-EDNOUUBF.js";import{a as Vt}from"./chunk-MOG3AHAF.js";import"./chunk-X7GADBEU.js";import"./chunk-77WQU64M.js";import{a as Mt}from"./chunk-74REC633.js";import{a as x}from"./chunk-NLWOAVHY.js";import{a as T}from"./chunk-F5Q5KOPJ.js";import"./chunk-7UPTHGH3.js";import{a as p}from"./chunk-4GU2HJD7.js";import{a as Dt}from"./chunk-BMHVDIFE.js";import{a as Pt}from"./chunk-XNL3JTED.js";import"./chunk-HNXEOKKJ.js";import"./chunk-PJX66I2Y.js";import"./chunk-WLWXTJVR.js";import"./chunk-YYW2XVVC.js";import"./chunk-LGXHSUMA.js";import{a as h}from"./chunk-N7DXDYBU.js";import"./chunk-DZSOBYW3.js";import{a as At,b as Rt}from"./chunk-2UTU3226.js";import"./chunk-OHH2RJOZ.js";import{a as St}from"./chunk-QLE5SOQY.js";import{a as Ht}from"./chunk-LGQTZIMH.js";import"./chunk-J4Q2WCPP.js";import"./chunk-PIMWUW3S.js";import{a as v}from"./chunk-HCQKHTWX.js";import{a as G}from"./chunk-VTSE7HNV.js";import{a as Et}from"./chunk-CQ2FDIIM.js";import{a as X}from"./chunk-D3IEQVYM.js";import{a as N}from"./chunk-RIAQP6AM.js";import{a as $}from"./chunk-DARUUDAY.js";import{a as It}from"./chunk-2T7366JB.js";import"./chunk-O2JBL2UU.js";import"./chunk-RGSHZW7Q.js";import"./chunk-232WRRJZ.js";import"./chunk-7VVRRHE4.js";import{a as l}from"./chunk-OQC4RYIZ.js";import"./chunk-WGISVX7D.js";import"./chunk-PC7TOLHT.js";import{a as k}from"./chunk-NVWIQHSW.js";import{b as s}from"./chunk-AVWEVNGS.js";import{a as bt}from"./chunk-6C22U5JX.js";import{a as u}from"./chunk-VSTJBSW7.js";import{G as R,K as Tt,Na as xt,k as A,l as kt,ta as C,wa as L,y as Lt}from"./chunk-3DLQUZR2.js";import"./chunk-BUBKPU26.js";import{a as w}from"./chunk-4P22QABU.js";var ne=0,me=1;function Ce(t,e){let{mins:r}=M(e.dataset.tipped);return r<44640&&(t[ne]+=1,t[me]+=Number(k(A,e.dataset.tipped))),t}function Ne(t){return t.reduce(Ce,[0,0])}function W(){let t=x("b",m()).find(D("Members"));if(t){let e=te(),r=Ne(e);t.classList.add("tip-static"),Zt(`Active: ${r[ne]}/${e.length}<br>Stamina: ${G(r[me])}`,t)}}function ae(t,e){let r=k(e,t.replace(/,/g,""));return r?parseInt(r,10):0}function Ee(t,e){let r="";return t>e&&(r="+"),r+G(t-e)}function Be(t){let e=t.dataset.tipped,r=ae(e,/XP Lock: <b>(?<lockXp>\d*)/),i=ae(e,/XP: <b>(?<realXp>\d*)/);a(t.parentNode.nextElementSibling,` (<b>${Ee(i,r)}</b>)`)}function J(){let t=p('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&Be(t)}function Y(){let t=x(L,m()).slice(-2,-1)[0];if(!t)return;let e=t.rows[0].cells[0],r=n({id:"profile-bio",innerHTML:e.innerHTML});f("",e),o(e,r),re()}var Z=0,K=0;function He(t){return Z&&t>=jt()&&t<=Ut()}function Ae(t){return K&&t>=qt()&&t<=Ft()}var Re=t=>[t,M(t.dataset.tipped).days],Pe=([,t])=>t<7,Me=([t])=>[t,Number(k(kt,t.dataset.tipped))],$e=([t,e])=>[t.parentNode.parentNode.rowIndex,He(e),Ae(e)];function Ie(){return $('#pCC a[data-tipped*="<td>VL:</td>"]').map(Re).filter(Pe).map(Me).map($e)}function De(){return Number(wt("guild_id"))!==Vt()&&(Z||K)}var Ge=t=>t.map(([e])=>`.fshHighlight tr:nth-child(${e+1})`).join(",");function se(t,e){if(t.length){let r=`${Ge(t)} {background-color: #${e};}`;o(document.body,V(r))}}function Ve(t,e){if(t.length+e.length){let r=T(L,m());r[r.length-1].classList.add("fshHighlight")}}function je(){let t=Ie(),e=t.filter(([,i])=>i),r=t.filter(([,i,S])=>!i&&S);se(e,"4671C8"),se(r,"FF9900"),Ve(e,r)}function Ue(){De()&&je()}function tt(){Z=s("highlightPlayersNearMyLvl"),K=s("highlightGvGPlayersNearMyLvl"),Ue(),s("enableHistoryCompressor")&&Y()}function qe(t){a(t.parentNode,' <span class="smallLink">[b]</span>')}function Fe(t){t.target.className==="smallLink"&&zt(Qt(t.target.previousElementSibling.href))}function et(){let t=It(`#pCC a[href^="${Lt}"]`);Kt([3,t,0,qe]),v(m(),Fe)}function j(t){return Pt({cmd:"guild",subcmd:"conflicts",page:t})}function ce(t,e){f(e,t.insertCell(-1))}function le(t,e,r){let i=t.insertRow(t.rows.length-2);ce(i,e),ce(i,r)}function Xe(t){le(t,`<a href="${R}conflicts">Active Conflicts</a>`,"Score")}function Oe(t,e){le(t,e.cells[0].innerHTML,`<b>${e.cells[6].innerHTML}</b>`)}function _e(t,e,r){e===1&&Xe(r),Wt(t,7,0).forEach(l(Oe,r))}function Qe(t,e,r){let i=p("#pCC > table > tbody > tr > td > table",t);i&&i.rows.length>3&&_e(i,e,r)}function ze(t){return Number(t.nextSibling.textContent.split("\xA0")[2])}function We(t,e,r){j(t+1).then(l(e,r))}function fe(t,e){let r=Dt(e),i=p('#pCC input[name="page"]',r);if(!i)return;let S=Number(i.value),we=ze(i);Qe(r,S,t.node),we>S&&We(S,fe,t)}function rt(t){let[e]=t.rows[6].cells[0].children;e&&j(1).then(l(fe,{node:e}))}function Je(t){t.target.id===C&&h(C,!s(C))}function ot(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,r=n({className:"fsh-tracker"}),i=n({innerHTML:`${I(C)}&nbsp;<label class="custombutton" for="tracker">Show</label>`});u(i,"change",Je),o(r,t),o(r,i),Bt(e,r)}function it(){return P("br")}function nt(t){return P("th",t)}var mt=0,st="",B=0,at=0,U=0,rr=(t,e)=>`${t}<option value="${e}">${e}</option>`,or=t=>`<select name="member">${t.reduce(rr,"")}</select>`,ir=t=>st!==t;function E(t){return bt(t)?"#DEF":t.toLocaleString()}function nr(t,e,r){return`${e}<tr><td>${Xt(new Date(r[4]*1e3))}</td><td>${t}</td><td class="fshRight">${E(r[2])}</td><td class="fshRight">${E(r[5])}</td><td class="fshRight">${E(r[1])}</td><td class="fshRight">${E(r[3])}</td><td class="fshRight">${Math.floor(r[1]/r[3]*100)}</td><td class="fshRight">${r[0]}</td><td class="fshRight">${E(r[6])}</td></tr>`}function mr(t,e){return ir(e)?t:t+U[e].reduce(l(nr,e),"")}var ar=()=>O(U).reduce(mr,"");function sr(){U&&f(ar(),mt),B.classList.remove("fshSpinner")}function de(){B.classList.add("fshSpinner"),c(3,sr)}function cr(t){st=t.target.value,de()}function q(t){if(t){U=t;let e=O(t).sort(Gt);[st]=e,f(or(e),at),de()}}function lr(){let t=nt({textContent:"Member"});return at=n(),o(t,at),t}function fr(t){let e=t.createTHead().insertRow(-1);a(e,"<th>Date</th>");let r=lr();o(e,r),a(e,"<th>Level</th><th>VL</th><th>Stam</th><th>Max<br>Stam</th><th>Stam<br>%</th><th>Last<br>Activity<br>(Days)</th><th>GXP</th>")}function pr(t){mt=ie(),o(t,mt)}function ge(){let t=Yt({id:"tg"});return fr(t),pr(t),u(t,"change",cr),B=n({className:"tgCont fshSpinner64"}),o(B,t),B}var d=0,he=0,be=0,g=0;function ur(t){d.value=t,g.classList.remove("fshSpinner")}function ke(t){t&&(g.classList.add("fshSpinner"),c(4,ur,[t]))}function dr(){d.value='{"lastUpdate": 0, "members": {}}'}function gr(t){z("Update successful"),q(t.members)}function hr(){let t=vt(d.value);Rt("fsh_guildActivity",t).then(l(gr,t)).catch(z)}function ye(t,e){let r=Jt({className:"custombutton",textContent:t});return v(r,e),r}function br(){d=oe(),d.setAttribute("autocapitalize","off"),d.setAttribute("autocomplete","off"),d.setAttribute("autocorrect","off"),d.setAttribute("spellcheck","false")}function Le(){return g=n({id:"io",className:"fshSpinner64"}),br(),he=ye("Save",hr),be=ye("Reset",dr),o(g,d),o(g,it()),o(g,he),o(g,be),g}var ct=0,b=0,H=0;function Te(){return!b.checked}function yr(){return b.checked}function kr(){b.checked=!1}function Lr(t){yr()&&t.code==="Escape"&&kr()}function Tr(t){Te()&&(t.style.transform=null)}function xr(){return Ot({className:"fshMove ui-tabs-nav ui-widget-header ui-corner-all ui-helper-reset ui-helper-clearfix",innerHTML:'<li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab1">Guild Activity Tracker</label></li><li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab2">Import/Export</label></li><label for="tracker" class="fsh-dialog-close ui-dialog-titlebar-close">&times;</label>'})}function vr(){N("guildTracker","updateRawData"),ct&&ke(ct)}function Sr(){let t=n({className:"fsh-dialog-popup ui-dialog ui-tabs ui-widget ui-widget-content ui-corner-all",innerHTML:'<input id="acttab1" class="fsh-tab-open" name="acttabs" checked type="radio">'}),e=_({className:"fsh-tab-open",id:"acttab2",name:"acttabs",type:"radio"});return X(e,"change",vr),o(t,e),t}function wr(){let t=Sr(),e=xr();return o(t,e),Et(e,t),t}function Cr(){let t=n({className:"fsh-dialog-content"});return o(t,ge()),o(t,Le()),t}function Nr(){let t=wr(),e=Cr();o(t,e),u(b,"change",l(Tr,t)),o(H,t)}function Er(){a(H,'<div class="fsh-dialog-overlay"><label class="fsh-dialog-cancel" for="tracker"></label></div>')}function Br(t){t&&(ct=St(t),q(t.members))}function Hr(){N("guildTracker","openDialog"),At("fsh_guildActivity").then(Br),w.dialogIsClosed=Te,Er(),Nr()}function Ar(){b=_({id:"tracker",className:"fsh-dialog-open",type:"checkbox"}),X(b,"change",Hr),H=n({className:"fsh-dialog"}),o(H,b),u(document.body,"keydown",Lr),o(document.body,H)}function lt(){ot(),Ar()}function ft(t){let e=t.target.dataset.linkto,r=yt(e),i=Nt("fshHide",r);r.classList.toggle("fshHide"),i?h(e,""):h(e,"ON")}function Rr(t){return Q({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function Pr(t){let e=Q({className:"fshNoWrap",innerHTML:"[&nbsp;"});return o(e,t),a(e,"&nbsp;]"),e}function pt(t,e,r){let i=Rr(r);o(t,Pr(i)),e.id=r,s(r)&&_t(e),v(i,ft)}function xe(t){pt(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function ve(t){let e=t.rows[4].cells[1].children[0];f(Ct(e.innerHTML),e),pt(e,t.rows[6].cells[0].children[0],"statisticsControl")}function Se(t){let e=t.rows[15]?.cells[1].children[0];e&&pt(e,t.rows[17].cells[0].children[0],"guildStructureControl")}var ut=0;function Mr(t){let{stam:e,max:r}=Mt(A,t.dataset.tipped);return Math.min(Math.round(Number(e)/Number(r)*100),100)}function $r(t){let e=Mr(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${e}%, transparent ${e+1}%)}`}function Ir(){let t=T(L,m()),e=t[t.length-1];e.classList.add("fshProgressBar");let i=$(xt,e).map($r).join(`
`);ut=o(document.body,V(i)).sheet}function F(t){ut?ut.disabled=!t:Ir()}var dt="enableStamBars",y=0;function Dr(){y=!y,h(dt,y),F(y),N("guildManage","StamBars")}function Gr(){if(!p("#pCC img.guild_openGuildStore"))return;let e=o(m(),n({innerHTML:I(dt),style:{marginLeft:"66%"}}));u(e,"change",Dr)}function gt(){Gr(),y=s(dt),y&&F(y)}function Vr(t){let e=x("b",t).filter(D("Relics"));if(e.length!==1)return;let r=e[0].parentNode.nextElementSibling.children[0];f(`[ <a href="${R}reliclist">Control</a> ]&nbsp;`,r)}function jr(t){let e=T("li",t);if(!e||!e.length)return;let r=e[e.length-1].parentNode;a(r,`<li><a href="${Tt}${$t()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function Ur(){return m().lastElementChild.rows?.[2].cells[0].children[0]}function qr(t,e){c(3,e,[t])}function Fr(t){[xe,ve,Se,Vr,jr].forEach(l(qr,t))}function Xr(t){Ht()||(s("detailedConflictInfo")&&c(3,rt,[t]),c(4,lt))}function ht(){if(!m())return;let t=Ur();t&&(Fr(t),s("showBuffLinks")&&c(3,et),Xr(t),gt())}function Or(){c(3,ee),c(3,J),c(3,W),["-","manage"].includes(w.subcmd)&&ht(),w.subcmd==="view"&&tt()}export{Or as default};
//# sourceMappingURL=injectGuild-6TFZORQ5.js.map
