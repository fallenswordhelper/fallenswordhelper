import{a as K}from"./chunk-6JZF3WJW.js";import{a as f,b as X}from"./chunk-PSMLMHJ2.js";import"./chunk-VTAYJN4L.js";import"./chunk-TLXK3DYW.js";import{a as J}from"./chunk-BWC3ASDO.js";import{a as L}from"./chunk-ELQ42VUR.js";import{a as W}from"./chunk-VVW6WQOK.js";import"./chunk-K72XMP4C.js";import{a as m}from"./chunk-U5XRZO3G.js";import{a as x}from"./chunk-KHQRPRKG.js";import"./chunk-TQNMSSUA.js";import{a as P}from"./chunk-K22IBI7M.js";import{a as j}from"./chunk-TGFHLCXE.js";import{a as F}from"./chunk-4S4RJIWM.js";import{a as v}from"./chunk-VIYL46Q6.js";import"./chunk-6WIP4RNC.js";import{a as z}from"./chunk-R5QVEL5X.js";import"./chunk-NRIBGBE3.js";import"./chunk-HPPEXIMR.js";import"./chunk-URWUNVTF.js";import{a as b}from"./chunk-WP265O3M.js";import"./chunk-TZIXO72F.js";import"./chunk-EHOD6CNQ.js";import"./chunk-3XG27UWS.js";import{a as p}from"./chunk-YQ625XVJ.js";import"./chunk-VMCLSOZO.js";import"./chunk-PBUQY6G2.js";import{a as h}from"./chunk-QCO5J3CK.js";import"./chunk-KTI2IMEY.js";import"./chunk-A6LP6MUS.js";import"./chunk-E62N6RI5.js";import"./chunk-7VIXIIBV.js";import{a as H}from"./chunk-Y5EGDMIB.js";import"./chunk-TVNPLL64.js";import"./chunk-Z5JYB3FL.js";import"./chunk-JFV47WCR.js";import"./chunk-MHWHHESW.js";import"./chunk-WVO4VYA4.js";import{a as _}from"./chunk-C63Q3HN7.js";import{a as q}from"./chunk-JG7KZ32H.js";import{a as s}from"./chunk-FMA2QB7F.js";import"./chunk-35MRBVSX.js";import"./chunk-NRW7AT6T.js";import"./chunk-DPECAWNM.js";import{a as D}from"./chunk-B72RCTA5.js";import"./chunk-KOM3R443.js";import"./chunk-NIOVFM2M.js";import"./chunk-6ZCA6D63.js";import"./chunk-YXAOTQ2S.js";import{a as i}from"./chunk-V45UJIF2.js";import"./chunk-64PLTPQD.js";import"./chunk-OHAOQZFW.js";import"./chunk-PJWDCLVE.js";import{b as l}from"./chunk-Q3ULPWYK.js";import{a as G}from"./chunk-JCK66TTB.js";import{a as g}from"./chunk-SY4ES3W2.js";import"./chunk-TFKKNJKY.js";import"./chunk-5ELKH2XV.js";import{a as N}from"./chunk-5ORZS6IQ.js";import"./chunk-BRQN5OZB.js";import{a}from"./chunk-BZJZQFW2.js";import{a as B}from"./chunk-QCTVAEOV.js";import"./chunk-VQDTHLUC.js";function T(t){return f({subcmd2:"takeitem",guildstore_id:t})}function U(t){return t.r===0?{s:!0}:{e:{message:t.m},s:!1}}async function k(t){let e=await X(t);return U(e)}function y(t){return p(T,k,t)}function I(t,e){return f({subcmd2:t,tagIndex:e})}async function A(t,e){let o=await _({cmd:"guild",subcmd:"inventory",subcmd2:t,tagIndex:e});return W(o)}function c(t,e){return p(I,A,t,e)}function d(){return s('[name="subcmd2"]').value}var V=t=>s("input",m(t)),O=t=>v("div",t).dataset.invId;function Y(){i('#pCC input[name="tagIndex[]"]').forEach(h)}function Z(t,e){let o=O(e),[,,n,u]=t.find(([,r])=>r===o);t.filter(([,,r,R])=>r===n&&R===u).filter(([r])=>document.body.contains(r)).map(([r])=>r).forEach(h)}function tt(t){let e=x({className:t.className.replace("-btn","")});t.replaceWith(e)}function et(t){i("button:not(.tag-bp-btn)",t).forEach(tt)}function ot(t,e){let o=x({className:`tag-${t} fshSpinner fshSpinner12`});return e.replaceWith(o),et(v("div",o)),o}async function w(t,e,o,n){let u=O(n);V(n)?.remove();let r=ot(t,n);(await e(u)).s&&(r.classList.remove("fshSpinner"),F(o,r))}function M(t){return c(d(),[t])}function nt(t){return[["tag-all-custom",Y],["tag-bp-btn",a(w,"bp",y,"Taken")],["tag-all-btn",a(Z,t)],["tag-add-btn",a(w,"add",M,"Tagged")],["tag-remove-btn",a(w,"remove",M,"Removed")]]}function S(t){G(l(),z(nt(t)))}var rt=()=>i('[name="tagIndex[]"]:checked');async function at(t,e){let o=await c(t,e.map(n=>n.value));o.s?e.forEach(K):j(o.e.message)}function it(t){t.preventDefault(),L(25,rt()).forEach(a(at,d())),H("addRemoveTags","Tag by AJAX")}function $(){N(document.forms[0],"submit",it)}var C=()=>B.subcmd2==="addtags",mt=t=>s("img",m(t)).src.split("/").at(-1).split(".")[0],st=t=>q(m(t).cells[2]),Q=(t,e)=>`<button class="${t}" type="button">${e}</button>`,ct=t=>D(t).split(" ").at(-1),dt=t=>`tag-${ct(t)}-btn`,E=t=>`[${Q(dt(t),t)}]`,lt=t=>t>1?`${E("Check All")}&nbsp;`:"",pt=()=>C()?"Add":"Remove",ft=()=>E(`Fast ${pt()}`),ut=()=>E("Fast BP"),gt=(t,e)=>`<div class="btn-div" data-inv-id="${t}">${e}</div>`,bt=(t,e)=>gt(t,`&nbsp;${lt(e)}${ft()}&nbsp;${ut()}`);function ht([t,e,,,o]){let n=m(t).cells[2];b(n,bt(e,o))}function vt(t){return[t,t.value,mt(t),st(t)]}function xt(t){return t.map(e=>[...e,t.filter(([,,o,n])=>o===e[2]&&n===e[3]).length])}function Tt(){let e=i('input[name="tagIndex[]"]',l()).map(vt);return xt(e)}function kt(t){let e=t.parentNode;C()&&(e=m(t).insertCell(-1)),b(e,Q("tag-all-custom custombutton","Check&nbsp;All"))}function yt(t){if(!C())return;let e=J(t);e.className="add-remove-tags"}function It(){let t=Tt();if(!t.length)return;let e=g("tagging_cost");yt(e),kt(e),t.forEach(ht),S(t),$()}function At(){g("tagging_cost")?It():P()}export{At as default};
//# sourceMappingURL=addRemoveTags-DTAEMUD3.js.map
