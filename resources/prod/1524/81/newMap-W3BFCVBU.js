import{a as us}from"./chunk-TY5MJILD.js";import{a as Ql,b as Xl}from"./chunk-O2TXGFTQ.js";import{a as os}from"./chunk-NG4CG6PZ.js";import"./chunk-3X5QEIR4.js";import"./chunk-DWAUI67O.js";import"./chunk-27KJ3DST.js";import{a as Yl}from"./chunk-NC6FNSLX.js";import{a as cs}from"./chunk-UDNPK52C.js";import{a as so}from"./chunk-G6VWQO6S.js";import{a as es,b as ts,c as rs}from"./chunk-WEEBMBWD.js";import{a as fo}from"./chunk-UIGYU76I.js";import{a as ns,b as as}from"./chunk-EXBSLE7P.js";import{b as is}from"./chunk-PYMSY7J3.js";import{a as te,b as V}from"./chunk-PAN5IKL2.js";import{a as tt}from"./chunk-Q3HCQCDP.js";import{b as Jl}from"./chunk-RGHJ4AYN.js";import{a as fs}from"./chunk-FVQX6WYE.js";import{a as et}from"./chunk-VA3RCC36.js";import{a as Ie,b as lo}from"./chunk-TT2QD7JP.js";import"./chunk-HTPIBFXF.js";import{a as ve}from"./chunk-T6ER74W7.js";import{a as Zl}from"./chunk-XEBXHNMM.js";import{a as jl}from"./chunk-5EJVZWQM.js";import{a as ls}from"./chunk-3R5465Y4.js";import{a as zl}from"./chunk-E5QXYW6C.js";import{a as ss}from"./chunk-VGSXS22R.js";import{a as M}from"./chunk-OS4RBOWH.js";import{a as ao}from"./chunk-WT5XQKTP.js";import"./chunk-RJI2O7CN.js";import{a as Ul}from"./chunk-BGCSAA2T.js";import"./chunk-MQSDDZVA.js";import{a as ge}from"./chunk-2XNCLDFR.js";import{a as Ml}from"./chunk-ASJ72VAA.js";import{a as no}from"./chunk-JIVCXSAO.js";import{a as Pl}from"./chunk-HQOTQBHL.js";import{a as ql}from"./chunk-UGRT537N.js";import{a as Fl}from"./chunk-53V6UTH3.js";import{a as Kl}from"./chunk-TXAPGXL4.js";import{a as Ol}from"./chunk-ZDIZRFLF.js";import{a as $l}from"./chunk-6TABQWKI.js";import{a as Wl}from"./chunk-VECRFCQP.js";import{a as R}from"./chunk-76VE6QGR.js";import{a as Mn}from"./chunk-ZX42LTAP.js";import{a as Nl,b as Rl,c as Il}from"./chunk-BW4E62B4.js";import{a as El}from"./chunk-3QZFISQ7.js";import{a as Re}from"./chunk-5AD7NT5D.js";import"./chunk-M34ZVTSL.js";import{a as Ka}from"./chunk-DWP7HLPE.js";import{a as io}from"./chunk-ATB4WLZR.js";import{a as be}from"./chunk-BDFQCMKF.js";import{a as hl}from"./chunk-4EPHHB5V.js";import"./chunk-QL55SON4.js";import{a as Gl}from"./chunk-XOQKCE25.js";import{a as Xr}from"./chunk-LVAJIHIF.js";import{a as Fr}from"./chunk-WMET5VJL.js";import"./chunk-EJAPIT2N.js";import{a as Al}from"./chunk-2BRTHILW.js";import"./chunk-AOXRIH6C.js";import"./chunk-WTU4KHE6.js";import{C as s,E as y,G as wl,M as kl,N as Cl,S as Qe,T as Xe,U as O,V as X,X as Hn,Y as yl,a as W,ba as Je,ca as Ze,d as pe,da as je,e as Vn,ea as de,fa as he,h as fe,r as i,s as x,t as b,u as Ne,v as f,w as k,x as h,y as gl,z as vl}from"./chunk-YOLLD3EX.js";import"./chunk-F2ZF3AQV.js";import"./chunk-SBKSJG7Z.js";import"./chunk-ZCOVPDKX.js";import{a as bl}from"./chunk-WKDTOFNZ.js";import{a as se}from"./chunk-X5DGSHWJ.js";import{a as Jr}from"./chunk-ARZE2BDD.js";import{a as xl}from"./chunk-MKW45GOR.js";import"./chunk-OELRUWUL.js";import{a as _}from"./chunk-PJKEYPE3.js";import{a as H}from"./chunk-IEZDQOE5.js";import{a as g}from"./chunk-KHQZO2PT.js";import"./chunk-WMUUSPIG.js";import{a as le}from"./chunk-DG3IU753.js";import{a as dl}from"./chunk-Y2XOJYUP.js";import{a as Ll}from"./chunk-JXJ4P3KT.js";import"./chunk-CPWYZPVC.js";import{d as Se}from"./chunk-JXPDKA7F.js";import{a as ro}from"./chunk-7DSY2KYD.js";import"./chunk-44VKPKW6.js";import{a as xe}from"./chunk-HOFZHHFM.js";import{a as Me}from"./chunk-DHIC45XN.js";import{a as Bl}from"./chunk-HTB6BFBM.js";import"./chunk-CWNZ6JBW.js";import{a as Zr}from"./chunk-VIE5ZNPH.js";import"./chunk-OKCEI7IO.js";import"./chunk-2JKQG6B5.js";import{a as F}from"./chunk-ZIYY5ALA.js";import{a as T}from"./chunk-CF6OUIZ5.js";import{a as oo}from"./chunk-WTTTJAB2.js";import{a as Vl}from"./chunk-UBAJUL6A.js";import{a as Hl}from"./chunk-SKV52MA5.js";import{a as Ee}from"./chunk-6MPENS2G.js";import{a as Sl}from"./chunk-WHIBDNMN.js";import"./chunk-JBZ7AXNE.js";import{a as to,e as _l,g as Tl}from"./chunk-V572RQRH.js";import{a as Tn}from"./chunk-DKRMOVVB.js";import{a as Yr}from"./chunk-LZHFM6TG.js";import{a as Wa}from"./chunk-RVROEHXL.js";import{a as Qr}from"./chunk-EPL4X55B.js";import"./chunk-C6UQ3IWD.js";import"./chunk-RY6SJUY2.js";import"./chunk-F5F7ZRBL.js";import{a as Dl}from"./chunk-4LPHXEVA.js";import"./chunk-C6CNCMW2.js";import"./chunk-RLPGZCX6.js";import"./chunk-6TE7Y3DR.js";import{a as J}from"./chunk-JNLLRLHL.js";import"./chunk-IPQXTCLP.js";import"./chunk-3FPE4KHJ.js";import{a as w}from"./chunk-SOFFOM3C.js";import{a as jr,b as eo}from"./chunk-HEE2ZG5Y.js";import"./chunk-C56KTMKY.js";import{a as zr}from"./chunk-2DIHMK5L.js";import"./chunk-PRUVPLE4.js";import"./chunk-YVFHCM2A.js";import"./chunk-3WYYB24O.js";import{a as P}from"./chunk-Q4WEZP4Z.js";import{b as N}from"./chunk-SYO7WFPA.js";import{a as Oa}from"./chunk-FNQX6KHV.js";import{a as ae}from"./chunk-SARQWG4K.js";import{$ as Ja,Ba as fl,Ca as ul,Da as cl,Ea as ml,Fa as pl,L as Ln,O as Ya,Oa as Ur,Q as _n,S as Qa,Y as Xa,Z as He,_ as Or,aa as Za,b as De,ba as ja,ca as el,d as Ua,da as tl,e as $r,ea as rl,fa as ol,ga as nl,ha as Wr,ia as il,ja as al,ka as ll,m as za,ma as sl,na as me,oa as Kr,pa as Q,r as Bn,y as An}from"./chunk-7Q74Q23I.js";import{a as p}from"./chunk-B3OIOQDS.js";import"./chunk-7X7SMYZT.js";function I(e){return R({textContent:e})}var Be=0,uo=0,ms=0;function Lu(e,t){Be=e.children[5],_("Teleport Cooldown: ",Be),uo=I(t.toString()),g(Be,uo)}function _u(e,t){Be?M(Be,!1):Lu(e,t)}function Tu(){Be&&M(Be,!0)}function ps(){let e=Math.max(Math.ceil((ms-Date.now())/1e3),0);_(e,uo),e>0&&setTimeout(ps,500)}function ds(e){uo&&(ms=Date.now()+e*1e3,ps())}function hs(e,t){t?_u(e,t):Tu()}var Ae=0;function Vu(e){return e}function Hu(e){return p.showBuffInfo&&e.some(Vu)}function Mu(){if(Ae)M(Ae,!1);else{Ae=H({className:"fshActionBox",innerHTML:"<div></div><div></div><div></div><div></div><div></div><div></div>"});let e=T("actionContainer");ql(Ae,e.children[2])}return Ae}function Eu(){Ae&&M(Ae,!0)}function En(e){if(Hu(e))return Mu();Eu()}function ue(e,t,r,o){t&&(e.className=t),_(r,e);let n=R();return g(e,n),et(e,o),n}var Ge=0,gs=0;function Nu(e){Ge=e.children[3],gs=ue(Ge,"fshBlue","CA "," active")}function Ru(e,t){Ge?M(Ge,!1):Nu(e),_(t.level,gs)}function Iu(){Ge&&M(Ge,!0)}function Nn(e,t){t?Ru(e,t):Iu()}var qe=0,vs=0;function Gu(e){qe=e.children[4],vs=ue(qe,"fshRed","Doubler "," active")}function qu(e,t){qe?M(qe,!1):Gu(e),_(t.level,vs)}function Pu(){qe&&M(qe,!0)}function Rn(e,t){t?qu(e,t):Pu()}var Pe=0,ws=0;function Fu(e){Pe=e.children[2],ws=ue(Pe,"","Damage bonus: ","%")}function $u(e,t){if(e){let r=Math.min(Math.round(Math.floor(t/5)*Number(e.level))*.01,20);return Ie(r,2).toString()}return"0"}function Ou(e,t,r){Pe?M(Pe,!1):Fu(e),_($u(t,Number(r)),ws)}function Wu(){Pe&&M(Pe,!0)}function In(e,t,r){t?Ou(e,t,r):Wu()}function Gn(e,t){_(ge(e),t)}var Fe=0,ks=0;function Ku(e){Fe=e.children[1],ks=ue(Fe,"","Kill Streak: ","")}function Uu(e,t){Fe?M(Fe,!1):Ku(e),Gn(t,ks)}function zu(){Fe&&M(Fe,!0)}function qn(e,t,r,o){t||r?Uu(e,o):zu()}function Yu(e,t){return t.name===e}function we(e){let{buffs:t}=GameData.player();if(t)return t.find(w(Yu,e))}function Pn(){let e=GameData.player().teleportCooldown;return e>1&&e}var Qu=["red","orange","yellow"];function Fn(){let e=$("#actionlist-shield-imp");e.length===1&&e.css("background-color",Qu[e.text()]||"#ad8043")}var re=0,$n=0;function Xu(e){Xl(e)&&GameData.fetch(me)}function Ju(){we("Summon Shield Imp")||Ql([ro()],[55]).then(Xu)}function Zu(e){return e?Number(e.stack):0}var ju=["imp-0","imp-1","imp-1"];function ec(e){return ju[e]||"fshGreen"}function tc(e){[re]=e.children,_("Shield Imps Remaining: ",re),$n=R(),g(re,$n),Fr(re,"&nbsp;");let t=ve({className:"xSmallLink",textContent:"Recast"});g(re,t),P(t,Ju)}function rc(e,t){re?M(re,!1):tc(e);let r=Zu(t);re.className=ec(r),_(r,$n)}function oc(){re&&M(re,!0)}function On(e,t,r){t||r?rc(e,t):oc()}function nc(e){return e.type===0}function Wn(){let{dynamic:e}=GameData.realm();return le(e)&&e.some(nc)}var rt=0,Kn=0,Un=0,zn=0,Yn=0,Qn=0,Xn=0;function ic(){rt=we("Death Dealer"),Kn=we("Doubler"),Un=we("Counter Attack"),zn=we("Summon Shield Imp"),Yn=Pn(),Qn=Wn(),Xn=GameData.player().killStreak}function $e(){Fn(),ic();let e=En([rt,Kn,Un,zn,Yn,Qn]);e&&(On(e,zn,rt),qn(e,rt,Qn,Xn),In(e,rt,Xn),Nn(e,Un),Rn(e,Kn),hs(e,Yn))}function ac(e,t){ds(t.player.teleportCooldown)}function Jn(){$e(),$.subscribe(`${Or} ${Ja}`,$e),$.subscribe(ll,ac)}function lc(){return window.GameController&&GameController.Realm&&!GameController.Realm.footprintTileList}function Zn(){lc()&&(GameController.Realm.footprintTileList=[])}function Cs(e,t,r){return Ml({className:`fshCurveEle fshCurveLbl fshPoint tip-static ${e}`,dataset:{tipped:t},htmlFor:r})}function co(e){let t=H({className:"fshToggle"}),r=no({checked:e.prefVal,id:e.checkId,type:"checkbox"});g(t,r);let o=Cs(e.onClass,e.onTip,e.checkId);g(t,o);let n=Cs(e.offClass,e.offTip,e.checkId);return g(t,n),g(e.worldName,t),r}var ke=0,po=0,ys=0,bs=0,Ss=0,Bs=0,As=0,Ls=0,_s=0;function sc(e){Re(e),GameData.doAction(12,401,{},0)}function fc(){Kl(Ka())}function uc(){window.open(`${Ya+Bn}map`,"fsMap")}function cc(){let e=GameData.realm();window.open(`${Xa}realms${Bn}view&realm_id=${e.id}`,"mapUfsg")}function mc(){J("playNewMessageSound",!N("playNewMessageSound"))}function pc(){p.huntingMode=!p.huntingMode,J("huntingMode",p.huntingMode)}function dc(){return H({className:"fshCurveContainer",id:"fshWorldButtonContainer"})}function hc(e){return e?e.toString():"?"}function Ds(e,t){let r=H({textContent:`${e} Lvl: `});return po=I(hc(GameData.realm()[t])),g(r,po),r}function gc(e){let t=H({className:"fshFsty"});g(t,Ds("Min","minlevel")),g(t,Ds("Your","level")),g(e,t)}function mo(e,t,r){let o=ve({className:`fshCurveEle fshCurveBtn fshPoint tip-static ${e}`,dataset:{tipped:t}});return g(r,o),o}function vc(e){gc(e),bs=mo("fshFormGroup","Quick Create Attack Group",e),Ss=mo("fshQuickBuff","Open Quick Buff Popup",e),Bs=mo("fshRealmMap","Open Realm Map",e),As=mo("fshTempleOne","Search map in Ultimate FSG",e)}function wc(e){if(N("showSpeakerOnWorld")){let t=N("playNewMessageSound");Ls=co({prefVal:t,checkId:"fshSoundCheck",onClass:"soundOn",onTip:"Turn Off Sound when you have a new log message",offClass:"soundOff",offTip:"Turn On Sound when you have a new log message",worldName:e})}}function kc(e){let t=p.huntingMode;_s=co({prefVal:t,checkId:"fshHuntCheck",onClass:"huntOn",onTip:"Hunting mode is ON",offClass:"huntOff",offTip:"Hunting mode is OFF",worldName:e})}function Cc(){vc(ke),wc(ke),kc(ke)}var yc=[[()=>Ls,mc],[()=>_s,pc]],Dc=[[()=>bs,sc],[()=>Ss,fc],[()=>Bs,uc],[()=>As,cc]];function xc(e,t){let{target:r}=t,[,o]=e.find(([n])=>n()===r)??[];o&&(r.blur(),o(r))}function xs(e){return w(xc,e)}function bc(){P(ke,xs(Dc)),ae(ke,"change",xs(yc))}function Sc(){ke||(ke=dc(),Cc(),bc(),io(ke,T("worldCoord")))}function Bc(e,t){po&&t.b.minlevel&&(Zn(),_(t.b.minlevel,po))}function Ac(e,t){ys&&_(t.b,ys)}function jn(){Sc(),$.subscribe(rl,Bc),$.subscribe(Za,Ac)}var Lc=["NORMAL","CHAMPION","ELITE","SUPER ELITE","TITAN","LEGENDARY"],_c=`url("${De}ui/world/icon_action_attack_`,ho=!1;function ei(e){return Yr(".verb.attack",e)}function ti(e){let t=Lc.indexOf(e.toUpperCase());return Zr(`#actionList .actionListItem.creature.creature-${t}`)}function Tc(e){e.classList.remove("attack-1","attack-2","attack-3","attack-4","attack-5","attack-6","attack-7","attack-8"),e.style.backgroundImage=""}function Vc(e,t){e!==null&&(e.classList.add(`attack-${t+1}`),e.style.backgroundImage=`${_c}${t+1}.png")`)}function Ts(e){let t=["LEGENDARY","NORMAL"].flatMap(ti),r=ti("CHAMPION"),[o,n]=e?[t,r]:[r,t];o.map(ei).filter(l=>l!==null).forEach(Tc),n.slice(0,8).map(ei).forEach(Vc)}function Hc(e){let t=ei(e);t&&(se("world","ChampionAttack"),El(t))}function Mc(e){if(!e.altKey||!e.shiftKey||e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||(ho||Ts(!0),ho=!0,!/(?:Digit|Numpad)[1-8]/.test(e.code)))return;let t=ti("CHAMPION"),r=parseInt(e.code.slice(-1),10)-1;r<t.length&&Hc(t[r])}function Ec(e){ho&&(!e.ctrlKey||!e.shiftKey)&&(ho=!1,Ts(!1))}function ri(){let{body:e}=document;ae(e,"keydown",Mc),ae(e,"keyup",Ec)}var Nc=["Breaker","Protection","Master Thief","Protect Gold","Disarm","Duelist","Thievery","Master Blacksmith","Master Crafter","Fury Caster","Master Inventor","Sustain"],oi=[],K=0;function Rc(e){(e.id===54||e.id===26)&&(K.player.buffs[e.id]=parseInt(e.level,10))}function Ic(e){Nc.indexOf(e.name)===-1&&(K.player.enhancements[e.name]=e.value)}function Gc(e){e.player.buffs&&e.player.buffs.forEach(Rc)}function qc(e){e.player.enhancements&&e.player.enhancements.forEach(Ic)}function Pc(e){K={},K.combat=e.response.data,K.combat.inventory_id&&(K.combat.drop=K.combat.item.id),K.player={},K.player.buffs={},K.player.enhancements={},Gc(e),qc(e),K.time=e.time,oi.push(K),eo("fsh_combatLog",oi)}function Fc(e,t){t.response.response===0&&Pc(t)}function $c(e){e&&(oi=e),$.subscribe(Wr,Fc)}function ni(){N("keepLogs")&&jr("fsh_combatLog").then($c)}function ii(e,t){return e.every(r=>be(r,t))}function ot(e){return Dl({cache:!1,url:"fetchdata.php",data:{...e,fshrnd:Jl()},dataType:"json"})}function Le(e){return!e||!e.response||!e.response.data}var Vs=[];function Oc(e){return Le(e)||Vs.push(e),e}function Wc(e,t){return e===Number(t.response.data.id)}function Kc(e,t){e(t)}function Uc(e){return new Promise(t=>{hl(3,Kc,[t,e])})}function nt(e,t){let r=Vs.find(w(Wc,e));return r?Uc(r):ot({a:1,id:e,passback:t}).then(Oc)}var Hs=0,Ms=0,Es=0,Ns=0,Rs=0,Is=0,ai=()=>Hs,Gs=()=>Ms,qs=()=>Es,Ps=()=>Ns,Fs=()=>Rs,$s=()=>Is;function it(e,t){return Vl(Ee(t,e))}function zc(e){Es=it(e,ul),Ms=it(e,fl),Rs=it(e,ml),Ns=it(e,cl),Is=it(e,pl)}function Os(){Hs=GameData.player().level,zc(T("statbar-character-tooltip-stats"))}function Yc(e){return`<table><tr><td><img src="${De}creatures/${e.image_id}.png" height="200" width="200"></td><td rowspan="2"><table width="400"><tr><td class="header" colspan="4" class="fshCenter">Statistics</td></tr>`}var go=e=>`<td>${e}:&nbsp;</td>`,vo=e=>`<td width="40%">${e}</td>`;function li([e,t,r,o,n]){return[go(e),vo(`${t} (your ${r}:<span class="${o}">${n()}</span>)`)]}function si(e){return["<tr>",...e,"</tr>"].join("")}function Qc(e,t){return si([go("Class"),vo(e.creature_class),...li(["Level",e.level,"level",t,ai])])}function Ws(e,t){return si([...li(e),...li(t)])}function Xc(e){return Ws(["Attack",e.attack,"defense","fshYellow",Gs],["Defense",e.defense,"attack","fshYellow",qs])}function Jc(e){return Ws(["Armor",e.armor,"damage","fshYellow",Ps],["Damage",e.damage,"armor","fshYellow",Fs])}function Zc(e,t){return si([go("HP"),vo(`${e.hp} (your HP:<span class="fshYellow">${$s()}</span>)(1H: <span class="fshRed">${t}</span>)`),go("Gold"),vo(e.gold)])}var jc='<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Enhancements</td></tr>';function em(e){return`<tr><td colspan="2">${e.name}:</td><td colspan="2">${e.value}</td></tr>`}function tm(e){return e.enhancements.length===0?'<tr><td colspan="4">[no enhancements]</td></tr>':e.enhancements.map(em).join("")}function rm(e){return`<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Description</td></tr><tr><td colspan="4">${e.description}</td></tr><tr><td colspan="4" height="5"></td></tr></table></td></tr><tr><td class="fshCenter"><b>${e.name}</b></td></tr></table>`}function om(e,t,r){return Yc(e)+Qc(e,r)+Xc(e)+Jc(e)+Zc(e,t)+jc+tm(e)+rm(e)}function nm(e){let t=Math.ceil(e.hp*p.hpVariable+e.armor*p.generalVariable),r="fshYellow";return Os(),ai()>e.level&&(r="fshRed"),om(e,t,r)}function fi(e){if(!Le(e))return nm(e.response.data)}var im=["verb","view","tip-static"];function am(e,t){$(e).qtip({overwrite:!0,show:{event:"mouseover",ready:!0},style:{classes:"qtip-tipsy qtip-custom"},position:{my:"center right",at:"center left",effect:!1,viewport:$(window)},content:{text:t},hide:{effect:!1}})}function lm(e){return Qr(e.parentNode.children).indexOf(e)}function sm(e,t){let r=fi(t);e.set("content.text",r)}function fm(e,t,r){return nt(GameData.actions()[e].data.id,e).then(w(sm,r)),"Loading..."}function um(e,t){se("NewMap","CreatureInfo");let r=lm(t);e.classList.add("fshTip"),am(e,w(fm,r))}function cm(e,t){return ii(im,e)&&!be("fshTip",e)&&be("creature",t)}function mm(e){if(!p.showCreatureInfo)return;let{target:t}=e,r=t.parentNode.parentNode.parentNode;cm(t,r)&&um(t,r)}function ui(){ae(T("actionList"),"mouseover",mm)}function pm(){g(document.body,Zl(`#actionList .creature-1 {color: green;}
#actionList .creature-2 {color: yellow;}
#actionList .creature-3 {color: red;}`))}function ci(){N("enableCreatureColoring")&&pm()}function _e(e){return p.doNotKillList.includes(Me(e))}function dm(e){e.classList.toggle("fshBlue",_e(Wa(e)))}function Oe(){let e=T("actionList");Xr("creature",e).forEach(dm)}function hm(e,t){if(_e(e))return T("actionList").children[t].children[0].children[1].classList.remove("loading"),!0}function gm(e){let t=GameData.actions()[e];if(t)return hm(t.data.name,e)}function vm(e){return function(r,o,n,l){gm(n.passback)||e(r,o,n,l)}}var wm={2:vm};function km(e){return Oa(e)||e===0}function Cm(e){return e&&zr(e)}function ym(e){return function(r,o,n,l){let a=wm[r];Cm(a)&&km(l)?a(e)(r,o,n,l):e(r,o,n,l)}}function mi(){let e=GameData.doAction;GameData.doAction=ym(e)}function pi(){$.subscribe(He,Oe),Oe(),mi()}function Dm(e){Re(e.target)}function di(){P(T("buffList"),Dm)}function hi(e){return xl({cmd:"globalquests",...e})}function gi(){return hi({subcmd:"contrib"})}var xm=({username:e,value:t})=>({player:{name:e},value:t});async function vi(){return{r:(await bl({cmd:"toprated",subcmd:"eventcontrib"})).map(xm)}}function wi(){return Jr(gi,vi)}function Ks(e){e[1]=e[2].r}function Us(e,t,r){let o=e.slice();return o[3]=t[r].player,o[2]=t[r].value,o[5]=r,o}function bm(e){let t,r=e[6].message+"",o;return{c(){t=f("p"),o=k(r),wl(t,"color","red")},m(n,l){x(n,t,l),i(t,o)},p(n,l){l&1&&r!==(r=n[6].message+"")&&y(o,r)},d(n){n&&b(t)}}}function Sm(e){Ks(e);let t,r,o,n=e[1],l=[];for(let a=0;a<n.length;a+=1)l[a]=Ys(Us(e,n,a));return{c(){t=f("table"),r=f("tr"),r.innerHTML=`<td class="header"></td> 
      <td class="header"></td> 
      <td class="header">Username</td> 
      <td class="header">Kills</td>`,o=h();for(let a=0;a<l.length;a+=1)l[a].c();s(r,"class","svelte-1p6satm"),s(t,"id","world-event-contrib-table"),s(t,"class","svelte-1p6satm")},m(a,m){x(a,t,m),i(t,r),i(t,o);for(let c=0;c<l.length;c+=1)l[c].m(t,null)},p(a,m){if(Ks(a),m&1){n=a[1];let c;for(c=0;c<n.length;c+=1){let u=Us(a,n,c);l[c]?l[c].p(u,m):(l[c]=Ys(u),l[c].c(),l[c].m(t,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(a){a&&b(t),Ne(l,a)}}}function zs(e){let t,r,o,n;return{c(){t=f("a"),r=f("img"),Vn(r.src,o=De+"guilds/"+e[3].guild_id+"_mini.png")||s(r,"src",o),s(r,"alt","guild logo"),s(r,"class","svelte-1p6satm"),s(t,"href",n=""+(Ln+e[3].guild_id))},m(l,a){x(l,t,a),i(t,r)},p(l,a){a&1&&!Vn(r.src,o=De+"guilds/"+l[3].guild_id+"_mini.png")&&s(r,"src",o),a&1&&n!==(n=""+(Ln+l[3].guild_id))&&s(t,"href",n)},d(l){l&&b(t)}}}function Ys(e){let t,r,o=e[5]+1+"",n,l,a,m,c,u,d=e[3].name+"",B,E,j,ce,z=e[2]+"",A,Te,G=e[3].guild_id&&zs(e);return{c(){t=f("tr"),r=f("td"),n=k(o),l=h(),a=f("td"),G&&G.c(),m=h(),c=f("td"),u=f("a"),B=k(d),j=h(),ce=f("td"),A=k(z),Te=h(),s(u,"href",E=""+(_n+e[3].name)),s(t,"class","svelte-1p6satm")},m(q,ie){x(q,t,ie),i(t,r),i(r,n),i(t,l),i(t,a),G&&G.m(a,null),i(t,m),i(t,c),i(c,u),i(u,B),i(t,j),i(t,ce),i(ce,A),i(t,Te)},p(q,ie){q[3].guild_id?G?G.p(q,ie):(G=zs(q),G.c(),G.m(a,null)):G&&(G.d(1),G=null),ie&1&&d!==(d=q[3].name+"")&&y(B,d),ie&1&&E!==(E=""+(_n+q[3].name))&&s(u,"href",E),ie&1&&z!==(z=q[2]+"")&&y(A,z)},d(q){q&&b(t),G&&G.d()}}}function Bm(e){let t;return{c(){t=k("Loading...")},m(r,o){x(r,t,o)},p:W,d(r){r&&b(t)}}}function Am(e){let t,r,o={ctx:e,current:null,token:null,hasCatch:!0,pending:Bm,then:Sm,catch:bm,value:2,error:6};return Hn(r=e[0],o),{c(){t=gl(),o.block.c()},m(n,l){x(n,t,l),o.block.m(n,o.anchor=l),o.mount=()=>t.parentNode,o.anchor=t},p(n,[l]){e=n,o.ctx=e,l&1&&r!==(r=e[0])&&Hn(r,o)||yl(o,e,l)},i:W,o:W,d(n){n&&b(t),o.block.d(n),o.token=null,o=null}}}function Lm(e,t,r){let{promise:o}=t;return e.$$set=n=>{"promise"in n&&r(0,o=n.promise)},[o]}var ki=class extends he{constructor(t){super(),de(this,t,Lm,Am,pe,{promise:0})}},Qs=ki;var Ci=0,Xs=()=>({promise:wi()});function _m(e){Ci?Ci.$set(Xs()):Ci=new Qs({props:Xs(),target:e})}function Tm(){let e=T("world-event-contrib");_m(e),$(e).dialog({title:"Top 100 Event Contributers",minWidth:300,height:300,zIndex:9999})}function yi(){let e=$("#world-event-badge");!e.length||(e.off(),P(e[0],Tm))}function Js(e){$(`#actionList li.creature-${e.toString()} a.create-group`).hide()}function Vm(e){$.subscribe(He,w(Js,e))}var Hm=["hideChampionsGroup","hideElitesGroup","hideSEGroup","hideTitanGroup","hideLegendaryGroup"];function Mm(e,t){N(e)&&(Vm(t+1),Js(t+1))}function Di(){Hm.forEach(Mm)}function Em(e){return e.response&&e.response.msg&&e.response.msg.startsWith("Creature did not exist at that location")}function Nm(e){Em(e)&&GameData.fetch(Kr+Q)}function Rm(e){e.remove()}function Im(e,t){Nm(t),Zr(".creature-4 > .quickCombat > .verbs").forEach(Rm)}function xi(){$.subscribe(Wr,Im)}var Z=0;function Gm(e,t){t.creature_class=e.creature_class,t.image_id=e.image_id,t.level=Number(e.level),t.type=e.type}function qm(e){Z[e.name]?Z[e.name].seen&&(Z[e.name].seen+=1):(Z[e.name]={seen:1},Gm(e,Z[e.name]))}function Zs(e,t,r){return t?e(t,r):r}function js(e,t){let r=e||{};return r.min=Zs(Math.min,r.min,t),r.max=Zs(Math.max,r.max,t),r}var Pm=["attack","armor","damage","defense","hp"];function Fm(e,t){return!e||e.min!==t.min||e.max!==t.max}function $m(e,t,r){let o=js(t[r],Number(e[r]));Fm(t[r],o)&&(t[r]=o)}function Om(e,t){Pm.forEach(w($m,e,t))}function Wm(e){return e.enhancements&&e.enhancements.length>0}function Km(e,t){e[t.name]=js(e[t.name],Number(t.value))}function Um(e,t){Wm(e)&&(t.enhancements=t.enhancements||{},e.enhancements.forEach(w(Km,t.enhancements)))}function zm(e){Z||(Z={}),qm(e),Om(e,Z[e.name]),Um(e,Z[e.name]),eo("fsh_monsterLog",Z)}function ef(e){p.showMonsterLog&&zm(e)}function Ym(e){Z=e||{}}function tf(){jr("fsh_monsterLog").then(Ym)}var rf=[];function Qm(e){Le(e)||(se("NewMap","MonsterLog"),ef(e.response.data))}function Xm(e,t){return e.id===t.id}function Jm(e){if(rf.find(w(Xm,e.data)))return!0;rf.push(e.data)}function Zm(e,t){e.type!==6||Jm(e)||nt(e.data.id,t).then(Qm)}function of(){p.showMonsterLog&&GameData.actions().forEach(Zm)}function bi(){tf(),$.subscribe("-1-success.action-response 4-success.action-response 5-success.action-response 25-success.action-response",of),of()}var nf="",af=()=>nf;function lf(e){nf=e}function Si(){return Ul({subcmd:"scouttower"})}function jm(e){let t=e.split(/[: /[]/);return new Date(Number(t[4]),$r.indexOf(t[3]),Number(t[2]),Number(t[0]),Number(t[1]))}function ep(e){let t=xe(e[1]);return t==="No active cooldown"?0:Math.ceil((jm(t.slice(16))-to())/1e3)}function tp(e){let[t]=e[0].cells[0].children;return{base_id:Number(t.src.split("/").slice(-1)[0].slice(0,-36)),name:t.title}}function rp(e){return{cooldown:ep(e),creature:tp(e),kills:Number(xe(e[0].cells[3]))}}function op(e){let t=xe(e[0].cells[1]);if(t!=="n/a"){let r=xe(e[0].cells[2]).split("/");return{realm:t,current_hp:Number(r[0]),max_hp:Number(r[1])}}}function np(e){let t=e[2].cells[0].children;if(t.length===1)return{contributors:zl(t[0],3,0).map(o=>({kills:Number(xe(o.cells[1])),player:{name:xe(o.cells[0])}}))}}function ip(e){return{...rp(e),...op(e),...np(e)}}var ap=(e,t,r)=>t!==0&&t<r.length-1&&(t-1)%6<3;function lp(e){let t=Yr('table[width="500"]',e);if(!t)return{s:!1};let r=Qr(t.rows).filter(ap);return{r:tt(3,r).map(ip),s:!0}}async function Bi(){return lp(await Gl({cmd:"guild",subcmd:"scouttower"}))}function Ai(){return Jr(Si,Bi)}function sp(e,[t,r,o]){let n=e.insertCell(-1);return n.colSpan=t,o&&(n.className="header"),g(n,r()),n}function fp(e,t){t.forEach(w(sp,e))}function up(e,t,r){let o=e.insertRow(-1);return r&&(o.className="fshBlue"),fp(o,t),o}function cp(e,t){up(e,t[0],t[1])}function at(e,t){t.forEach(w(cp,e))}var sf=0,ff=0,uf=0,cf=0,mf=0,pf=0,df=0,hf=0,gf=()=>sf,vf=()=>ff,wf=()=>uf,kf=()=>cf,Cf=()=>mf,yf=()=>pf,Df=()=>df,xf=()=>hf;function mp(){sf=I("Current"),ff=I("Kills"),uf=I("Member"),cf=I("% of Total")}function pp(){mf=I("Status"),pf=I("Titan HP"),df=I("Total"),hf=I("Your Guild")}function bf(){mp(),pp()}var Li=0,_i=0,Ti=0,Vi=0,Hi=0,Mi=0,Ei=0,Ni=0,Ri=0,wo=()=>Li,ko=()=>_i,Co=()=>Ti,yo=()=>Vi,Do=()=>Hi,xo=()=>Mi,bo=()=>Ei,So=()=>Ni,Bo=()=>Ri;function dp(){Li=R({innerHTML:"&nbsp;"}),_i=R({innerHTML:"&nbsp;"}),Ti=R(),Vi=R()}function hp(){Hi=R(),Mi=R(),Ei=R(),Ni=R(),Ri=R()}function Sf(){dp(),hp()}function Bf(){F("&nbsp;",Li),F("&nbsp;",_i),_("",Ti),_("",Vi),_("",Hi),_("",Mi),_("",Ei),F("",Ni),F("",Ri)}var lt=0,Ao=()=>lt;function Lo(){for(;lt.rows.length>8;)lt.deleteRow(8)}function gp(){let e=R();return g(e,Co()),et(e,"/"),g(e,yo()),e}function Af(e){let t=R();return g(t,e),et(t,"%"),t}function Lf(){lt=jl({className:"fshCenter"}),bf(),at(lt,[[[[5,wo,!0],[1,ko,!0]]],[[[2,yf,!0],[4,xf,!0]]],[[[2,gp],[4,Do]]],[[[2,gf,!0],[4,w(Af,xo())]],!0],[[[2,Df,!0],[4,w(Af,bo())]],!0],[[[2,Cf,!0],[4,So]],!0],[[[6,Bo]]],[[[2,wf,!0],[2,vf,!0],[2,kf,!0]]]])}var Ce=0,Ii=0,_f="";var Tf=()=>Ii,Vf=()=>_f;function Gi(){Ii=null,Ce&&!be("fshHide",Ce)&&(M(Ce,!0),Bf(),Lo())}function Hf(e){return e.type===0?(Ii=e.base_creature_id,_f=`(${e.x},${e.y})`,!0):!1}function Mf(){if(Ce)M(Ce,!1);else{let e=T("actionContainer");Ce=H({className:"fshActionBox titanInfo"}),Sf(),Lf(),g(Ce,Ao()),g(e,Ce)}}function vp(e){let t=new Date(to()+e*1e3);return`${oo(t.getHours())}:${oo(t.getMinutes())} ${oo(t.getDate())}/${$r[t.getMonth()]}/${t.getFullYear()}`}function wp(e){return e<=0?'<span class="fshGreen cooldown">No active cooldown</span>':`<span class="fshMaroon cooldown">Cooldown until: ${vp(e)}</span>`}function kp(e){return lo(ts(e.max_hp-e.current_hp,e.kills),2)}function Cp(e){return lo(e.kills*100/e.max_hp,2)}function yp(e){return rs(e.kills,e.max_hp,e.current_hp)}function Dp(e){[[es(e.creature.name),wo],[Vf(),ko],[e.current_hp,Co],[e.max_hp,yo],[e.kills,Do],[kp(e),xo],[Cp(e),bo]].forEach(([t,r])=>_(t,r()))}function xp(e){Dp(e),F(yp(e),So()),F(wp(e.cooldown),Bo())}function bp(e,t){return[[[2,I(t.player.name)],[2,I(t.kills.toString())],[2,I(`${lo(t.kills*100/e.kills,2)}%`)]]]}function Sp(e){if(Lo(),!e.contributors)return;let t=e.contributors.map(w(bp,e));at(Ao(),t)}function Bp(e){return e.realm&&e.creature.base_id===Tf()&&e.realm===af()}function qi(e){let t=e.find(Bp);t&&(xp(t),Sp(t))}var _o=null;function Ap(){_o&&(window.clearTimeout(_o),_o=null)}var Lp=e=>e&&e.s&&le(e.r),Ef=e=>p.showTitanInfo&&le(e)&&e.some(Hf);function _p(e,t){!Lp(t)||(qi(t.r),Ef(GameData.realm().dynamic)?_o=window.setTimeout(e,3e4):Gi())}function Nf(){Ai().then(w(_p,Nf))}function st(e){Ap(),Ef(e)?(Mf(),Nf()):Gi()}function Pi(e){e.dynamic&&(lf(e.name),st(e.dynamic))}function Tp(e){return e.realm&&e.realm.name}function Rf(e,t){Tp(t)&&Pi(t.realm)}function Fi(){window.initialGameData&&Rf(null,window.initialGameData),$.subscribe(`${ol} ${al}`,Rf)}function If(e,t,r){let o=e.slice();return o[5]=t[r],o[7]=r,o}function Vp(e){let t=e[1](e[7])+"",r;return{c(){r=k(t)},m(o,n){x(o,r,n)},p:W,d(o){o&&b(r)}}}function Gf(e){let t,r,o,n;function l(...a){return e[3](e[5],e[7],...a)}return r=new Al({props:{$$slots:{default:[Vp]},$$scope:{ctx:e}}}),r.$on("click",l),{c(){t=f("li"),Je(r.$$.fragment),o=h()},m(a,m){x(a,t,m),Ze(r,t,null),i(t,o),n=!0},p(a,m){e=a;let c={};m&256&&(c.$$scope={dirty:m,ctx:e}),r.$set(c)},i(a){n||(O(r.$$.fragment,a),n=!0)},o(a){X(r.$$.fragment,a),n=!1},d(a){a&&b(t),je(r)}}}function Hp(e){let t,r,o=tt(16,e[0]),n=[];for(let a=0;a<o.length;a+=1)n[a]=Gf(If(e,o,a));let l=a=>X(n[a],1,1,()=>{n[a]=null});return{c(){t=f("ul");for(let a=0;a<n.length;a+=1)n[a].c();s(t,"class","svelte-1k3xw12")},m(a,m){x(a,t,m);for(let c=0;c<n.length;c+=1)n[c].m(t,null);r=!0},p(a,[m]){if(m&7){o=tt(16,a[0]);let c;for(c=0;c<o.length;c+=1){let u=If(a,o,c);n[c]?(n[c].p(u,m),O(n[c],1)):(n[c]=Gf(u),n[c].c(),O(n[c],1),n[c].m(t,null))}for(Qe(),c=o.length;c<n.length;c+=1)l(c);Xe()}},i(a){if(!r){for(let m=0;m<o.length;m+=1)O(n[m]);r=!0}},o(a){n=n.filter(Boolean);for(let m=0;m<n.length;m+=1)X(n[m]);r=!1},d(a){a&&b(t),Ne(n,a)}}}function Mp(e,t,r){let o=Cl(),{members:n=[]}=t,l=c=>`Buff ${Ua[c]} 16`;function a(c,u,d){d.target.blur(),Wl(`${Qa}&players=${c.join(",")}`,"fsQuickBuff",618,1e3,",scrollbars"),o("buffBatch",l(u))}let m=(c,u,d)=>a(c,u,d);return e.$$set=c=>{"members"in c&&r(0,n=c.members)},[n,l,a,m]}var $i=class extends he{constructor(t){super(),de(this,t,Mp,Hp,pe,{members:0})}},qf=$i;function To(e,t){return e>t*10||e<t?e:t*10}function Ep(e){e.attackValue=To(e.attackBonus,e.levelValue),e.defenseValue=To(e.defenseBonus,e.levelValue),e.armorValue=To(e.armorBonus,e.levelValue),e.damageValue=To(e.damageBonus,e.levelValue),e.hpValue=e.hpBonus}var Np=[["levelValue","level"],["attackValue","attack"],["attackBonus","bonus_attack"],["defenseValue","defense"],["defenseBonus","bonus_defense"],["armorValue","armor"],["armorBonus","bonus_armor"],["damageValue","damage"],["damageBonus","bonus_damage"],["hpValue","hp"],["hpBonus","bonus_hp"],["killStreakValue","killstreak"]];function Rp(e,t,r){e[r[0]]=Number(t[r[1]])}function Ip(e,t){Np.forEach(w(Rp,e,t))}var Gp=[["counterAttackLevel","Counter Attack"],["doublerLevel","Doubler"],["deathDealerLevel","Death Dealer"],["darkCurseLevel","Dark Curse"],["holyFlameLevel","Holy Flame"],["constitutionLevel","Constitution"],["sanctuaryLevel","Sanctuary"],["flinchLevel","Flinch"],["nightmareVisageLevel","Nightmare Visage"],["superEliteSlayerLevel","Super Elite Slayer"],["fortitudeLevel","Fortitude"],["chiStrikeLevel","Chi Strike"],["terrorizeLevel","Terrorize"],["barricadeLevel","Barricade"],["reignOfTerrorLevel","Reign Of Terror"],["anchoredLevel","Anchored"],["severeConditionLevel","Severe Condition"],["entrenchLevel","Entrench"],["cloakLevel","Cloak"]];function qp(e,t,r){e[r[0]]=t[r[1]]||0}function Pp(e,t){Gp.forEach(w(qp,e,t))}function ft(e){if(!e)return;let t=so(e._skills),r={};return Ip(r,e),Pp(r,t),r.superEliteSlayerMultiplier=Ie(.002*r.superEliteSlayerLevel,2),Hl(r.armorValue)&&Ep(r),r}var oe=te(["statusStore","Done."]),Vo=[],Pf=V(oe,(e,t)=>{let r=Vo.find(([n])=>n===e[0]);r?[,r[1]]=e:Vo=[...Vo,e];let o=Vo.find(([,n])=>n!=="Done.");t(o?.[1]??"Done.")});var We=te(0);async function Fp(e,t){if(!e)return;oe.set(["relicStore","Processing defending guild relics ... "]);let o=(await os(e)).r.relics.length,n=o===1?1.5:Ie(1-o/10,2),l=`${String(n*100)}%`;t({noOfRelics:o,relicMultiplier:n,leadDefenderBonus:l}),oe.set(["relicStore","Done."])}var Ho=V(We,(e,t)=>{Fp(e,t)});var Mo=te([]);async function $p(e,t){if(!e.length)return;oe.set(["defendersStore","Processing defending group stats ... "]);let r=[];await Sl(e.map(async(o,n)=>{let l=await $l(o);r.push([n,ft(l)]),t(r)})),oe.set(["defendersStore","Done."])}var Eo=V(Mo,(e,t)=>{$p(e,t)}),Ke=V(Eo,(e,t)=>{let r=e?.find(([o])=>o===0);r&&t(r[1])}),ut=(e,t,r)=>Math.ceil(r*(t===0?e:za));function Op(e,t,[r,o]){return{armorValue:t.armorValue+ut(e,r,o.armorValue),attackValue:t.attackValue+ut(e,r,o.attackValue),damageValue:t.damageValue+ut(e,r,o.damageValue),cloaked:t.cloaked+(o.cloakLevel?1:0),defenseValue:t.defenseValue+ut(e,r,o.defenseValue),hpValue:t.hpValue+ut(e,r,o.hpValue)}}var Wp=([e,t],r)=>{if(!e?.relicMultiplier||!t?.length)return;let o=t?.reduce(w(Op,e.relicMultiplier),{armorValue:0,attackValue:0,damageValue:0,cloaked:0,defenseValue:0,hpValue:0});r(o)},ct=V([Ho,Eo],Wp);var No=te(0),Kp=e=>e.members[0].name===GameData.player().username;async function Up(){return(await ao())?.r?.find(Kp)?.id}async function zp(e){let t=await fo(e);return is(t?.r?.attributes)}async function Yp(e){let t=await ns(),r=as(t);return e?.map((o,n)=>o-r[n])}async function Qp(e,t){if(!e)return;oe.set(["groupStore","Processing attacking group stats ... "]);let r=await Up(),o=r&&await zp(r),n=o&&await Yp(o);n&&t({attack:n[0],defense:n[1],armor:n[2],hp:n[3],damage:n[4]}),oe.set(["groupStore","Done."])}var mt=V(No,(e,t)=>{Qp(e,t)});var Ff=(e,t,r)=>Math.ceil(e*Tn(t,0)*r),Ro=(e,t)=>Ff(e,t,.0025),pt=(e,t)=>Ff(e,t,.001),Io=pt,Go=pt,qo=pt,Po=pt,Fo=pt,$o=(e,t)=>Math.ceil(e*(1+Tn(t,0)*.001)),Xp=e=>1-e*Ur,Oi=(e,t)=>Math.ceil(e*Xp(t));var Oo=te([]),Wi=V(Oo,(e,t)=>{!e||t(so(e))}),Jp=V([Wi,mt],([e,t],r)=>{if(!e||!t)return;let o=$o(t.defense,e.Constitution),n=Io(o,e.Fortitude),l=t.hp+n,a=Go(l,e["Chi Strike"]);r({dmgWithChiStrike:t.damage+a,defWithConst:o,hpWithFortitude:l,nmv:Ro(t.attack,e["Nightmare Visage"]),sanctuary:qo(t.armor,e.Sanctuary)})});function Zp([e,t,r],o){if(!e||!t||!r)return;let n=r.attack-e.nmv,l=Po(n,t.flinchLevel),a=Fo(e.dmgWithChiStrike,t.terrorizeLevel);o({attack:n-l,defense:e.defWithConst+e.nmv,armor:r.armor+e.sanctuary,hp:e.hpWithFortitude,damage:e.dmgWithChiStrike-a})}var $f=V([Jp,Ke,mt],Zp);var jp=V([Ke,ct],([e,t],r)=>{if(!e||!t)return;let o=Ro(t.attackValue,e.nightmareVisageLevel),n=$o(t.defenseValue,e.constitutionLevel),l=Io(n,e.fortitudeLevel),a=t.hpValue+l,m=Go(a,e.chiStrikeLevel),c=t.damageValue+m;r({attackWithNmv:t.attackValue-o,chiStrike:e.chiStrikeLevel,cloak:e.cloakLevel?"Yes":"No",dmgWithChiStrike:c,defWithConst:n,hpWithFortitude:a,nmv:o,sanctuary:qo(t.armorValue,e.sanctuaryLevel)})});function ed([e,t,r],o){if(!e||!t||!r)return;let n=Po(t.attackWithNmv,e.Flinch),l=t.defWithConst+t.nmv,a=Fo(t.dmgWithChiStrike,e.Terrorize);o({attack:t.attackWithNmv-n,dc225:Oi(l,225),dc175:Oi(l,175),defense:l,armor:r.armorValue+t.sanctuary,hp:t.hpWithFortitude,damage:t.dmgWithChiStrike-a})}var Of=V([Wi,jp,ct],ed);var Wf=V(Ho,(e,t)=>{t({noOfRelics:e?.noOfRelics??"",leadDefenderBonus:e?.leadDefenderBonus??""})}),Kf=V(Ke,(e,t)=>{if(!e)return t("");e.cloakLevel?t("Yes"):t("No")}),Uf=V(ct,(e,t)=>{t({armorValue:e?.armorValue??"",attackValue:e?.attackValue??"",damageValue:e?.damageValue??"",cloaked:e?.cloaked??"",defenseValue:e?.defenseValue??"",hpValue:e?.hpValue??""})}),zf=V(Eo,(e,t)=>{t(e?.length??"")}),Yf=V(Of,(e,t)=>{t({attack:e?.attack??"",dc225:e?.dc225??"",dc175:e?.dc175??"",defense:e?.defense??"",armor:e?.armor??"",hp:e?.hp??"",damage:e?.damage??""})}),Qf=e=>({attack:e?.attack??"",defense:e?.defense??"",armor:e?.armor??"",hp:e?.hp??"",damage:e?.damage??""}),Xf=V(mt,(e,t)=>{t(Qf(e))}),Jf=V($f,(e,t)=>{t(Qf(e))});function Zf(e,t,r){let o=e.slice();return o[6]=t[r].id,o[7]=t[r].username,o}function jf(e){let t,r=e[7]+"",o,n,l=" ",a;return{c(){t=f("a"),o=k(r),a=k(l),s(t,"href",n=""+(An+e[6])),s(t,"class","svelte-3priew")},m(m,c){x(m,t,c),i(t,o),x(m,a,c)},p(m,c){c&1&&r!==(r=m[7]+"")&&y(o,r),c&1&&n!==(n=""+(An+m[6]))&&s(t,"href",n)},d(m){m&&b(t),m&&b(a)}}}function td(e){let t=(e[0].length||"")+"",r,o,n,l=e[0],a=[];for(let m=0;m<l.length;m+=1)a[m]=jf(Zf(e,l,m));return{c(){r=k(t),o=k(` Offline guild members not at relic:
`),n=f("div");for(let m=0;m<a.length;m+=1)a[m].c();s(n,"class","missing svelte-3priew")},m(m,c){x(m,r,c),x(m,o,c),x(m,n,c);for(let u=0;u<a.length;u+=1)a[u].m(n,null)},p(m,[c]){if(c&1&&t!==(t=(m[0].length||"")+"")&&y(r,t),c&1){l=m[0];let u;for(u=0;u<l.length;u+=1){let d=Zf(m,l,u);a[u]?a[u].p(d,c):(a[u]=jf(d),a[u].c(),a[u].m(n,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=l.length}},i:W,o:W,d(m){m&&b(r),m&&b(o),m&&b(n),Ne(a,m)}}}function rd(e,t,r){let{members:o=[]}=t,n=[],l=[({username:u})=>!o.includes(u),({last_login:u})=>u,({last_login:u})=>u<_l(),({last_login:u})=>u>Tl(),({level:u})=>u<400||u>421,({level:u})=>u<441||u>450],a=u=>l.every(d=>d(u)),m=({username:u},{username:d})=>Bl(u,d);async function c(u){let d=await ls(u);r(0,n=d.filter(a).sort(m))}return We.subscribe(u=>{c(u)}),e.$$set=u=>{"members"in u&&r(1,o=u.members)},[n,o]}var Ki=class extends he{constructor(t){super(),de(this,t,rd,td,pe,{members:1})}},eu=Ki;function tu(e){let t,r,o;return r=new qf({props:{members:e[10]}}),r.$on("buffBatch",e[11]),{c(){t=f("div"),Je(r.$$.fragment),s(t,"class","buff-links svelte-1qul0wc")},m(n,l){x(n,t,l),Ze(r,t,null),o=!0},p:W,i(n){o||(O(r.$$.fragment,n),o=!0)},o(n){X(r.$$.fragment,n),o=!1},d(n){n&&b(t),je(r)}}}function od(e){let t,r,o,n,l,a,m,c;return{c(){t=f("div"),t.textContent="Processing",r=h(),o=f("div"),n=k(e[2]),l=h(),a=f("div"),a.textContent="Assumptions",m=h(),c=f("div"),c.textContent="Above calculations include Constitution, Fortitude, Nightmare Visage, Chi Strike, Sanctuary, Terrorize and Flinch bonus calculations (in that order) on both the defending group and attacking group.",s(t,"class","b-top svelte-1qul0wc"),s(o,"class","proc-stat svelte-1qul0wc"),s(a,"class","b-top svelte-1qul0wc"),s(c,"class","assume svelte-1qul0wc")},m(u,d){x(u,t,d),x(u,r,d),x(u,o,d),i(o,n),x(u,l,d),x(u,a,d),x(u,m,d),x(u,c,d)},p(u,d){d&4&&y(n,u[2])},d(u){u&&b(t),u&&b(r),u&&b(o),u&&b(l),u&&b(a),u&&b(m),u&&b(c)}}}function nd(e){let t,r,o;return{c(){t=f("button"),t.textContent="Fetch Stats",s(t,"class","custombutton"),s(t,"type","button")},m(n,l){x(n,t,l),r||(o=vl(t,"click",e[12]),r=!0)},p:W,d(n){n&&b(t),r=!1,o()}}}function ru(e){let t,r,o,n,l,a,m=e[3].noOfRelics+"",c,u,d,B,E=e[3].leadDefenderBonus+"",j,ce,z,A,Te,G,q,ie,C,yt,Dt,xt=e[5].attackValue+"",jo,wa,bt,St,Bt=e[6].attack+"",en,ka,At,Lt,_t=e[5].defenseValue+"",tn,Ca,Tt,Vt,Ht=e[6].defense+"",rn,ya,Mt,Et,Nt=e[5].armorValue+"",on,Da,Rt,It,Gt=e[6].armor+"",nn,xa,qt,Pt,Ft=e[5].damageValue+"",an,ba,$t,Ot,Wt=e[6].damage+"",ln,Sa,Kt,Ut,zt=e[5].hpValue+"",sn,Ba,Yt,Qt,Xt=e[6].hp+"",fn,Aa,Jt,Zt,jt=e[5].cloaked+"",un,La,er,tr,cn,mn,Y,rr,_a,ee,or,nr,ir=e[6].dc225+"",pn,Ta,ar,lr,sr=e[6].dc175+"",dn,Va,fr,Ha,ur,Ma,S,cr,mr,pr=e[8].attack+"",hn,Ea,dr,hr,gr=e[9].attack+"",gn,Na,vr,wr,kr=e[8].defense+"",vn,Ra,Cr,yr,Dr=e[9].defense+"",wn,Ia,xr,br,Sr=e[8].armor+"",kn,Ga,Br,Ar,Lr=e[9].armor+"",Cn,qa,_r,Tr,Vr=e[8].damage+"",yn,Pa,Hr,Mr,Er=e[9].damage+"",Dn,Fa,Nr,Rr,Ir=e[8].hp+"",xn,$a,Gr,qr,Pr=e[9].hp+"",bn,Sn,Ye,Ve,L;return Ve=new eu({props:{members:e[10]}}),{c(){t=f("div"),r=f("div"),r.textContent="Defending Guild Stats",o=h(),n=f("div"),l=f("div"),l.textContent="Relic Count:",a=f("div"),c=k(m),u=h(),d=f("div"),d.textContent="Lead Defender Bonus:",B=f("div"),j=k(E),ce=h(),z=f("div"),z.textContent="Lead Defender Cloaked:",A=f("div"),Te=k(e[4]),G=h(),q=f("div"),q.textContent="Other Defender Stats",ie=h(),C=f("div"),yt=f("div"),yt.textContent="Raw Attack:",Dt=f("div"),jo=k(xt),wa=h(),bt=f("div"),bt.textContent="Attack w/ buffs:",St=f("div"),en=k(Bt),ka=h(),At=f("div"),At.textContent="Raw Defense:",Lt=f("div"),tn=k(_t),Ca=h(),Tt=f("div"),Tt.textContent="Defense w/buffs:",Vt=f("div"),rn=k(Ht),ya=h(),Mt=f("div"),Mt.textContent="Raw Armor:",Et=f("div"),on=k(Nt),Da=h(),Rt=f("div"),Rt.textContent="Armor w/ buffs:",It=f("div"),nn=k(Gt),xa=h(),qt=f("div"),qt.textContent="Raw Damage:",Pt=f("div"),an=k(Ft),ba=h(),$t=f("div"),$t.textContent="Damage w/ buffs:",Ot=f("div"),ln=k(Wt),Sa=h(),Kt=f("div"),Kt.textContent="Raw HP:",Ut=f("div"),sn=k(zt),Ba=h(),Yt=f("div"),Yt.textContent="HP w/ buffs:",Qt=f("div"),fn=k(Xt),Aa=h(),Jt=f("div"),Jt.textContent="Cloaked:",Zt=f("div"),un=k(jt),La=h(),er=f("div"),er.textContent="Processed:",tr=f("div"),cn=k(e[7]),mn=h(),Y=f("div"),rr=f("div"),rr.textContent="Adjusted Defense Values",_a=h(),ee=f("div"),or=f("div"),or.textContent="DC225:",nr=f("div"),pn=k(ir),Ta=h(),ar=f("div"),ar.textContent="DC175:",lr=f("div"),dn=k(sr),Va=h(),fr=f("div"),fr.textContent="\xA0",Ha=h(),ur=f("div"),ur.textContent="Attacking Group Stats",Ma=h(),S=f("div"),cr=f("div"),cr.textContent="Raw Group Attack:",mr=f("div"),hn=k(pr),Ea=h(),dr=f("div"),dr.textContent="Group Attack w/ buffs:",hr=f("div"),gn=k(gr),Na=h(),vr=f("div"),vr.textContent="Raw Group Defense:",wr=f("div"),vn=k(kr),Ra=h(),Cr=f("div"),Cr.textContent="Group Defense w/ buffs:",yr=f("div"),wn=k(Dr),Ia=h(),xr=f("div"),xr.textContent="Raw Group Armor:",br=f("div"),kn=k(Sr),Ga=h(),Br=f("div"),Br.textContent="Group Armor w/ buffs:",Ar=f("div"),Cn=k(Lr),qa=h(),_r=f("div"),_r.textContent="Raw Group Damage:",Tr=f("div"),yn=k(Vr),Pa=h(),Hr=f("div"),Hr.textContent="Group Damage w/ buffs:",Mr=f("div"),Dn=k(Er),Fa=h(),Nr=f("div"),Nr.textContent="Raw Group HP:",Rr=f("div"),xn=k(Ir),$a=h(),Gr=f("div"),Gr.textContent="Group HP w/ buffs:",qr=f("div"),bn=k(Pr),Sn=h(),Ye=f("div"),Je(Ve.$$.fragment),s(r,"class","b-top svelte-1qul0wc"),s(l,"class","svelte-1qul0wc"),s(a,"class","svelte-1qul0wc"),s(d,"class","svelte-1qul0wc"),s(B,"class","svelte-1qul0wc"),s(z,"class","svelte-1qul0wc"),s(A,"class","svelte-1qul0wc"),s(n,"class","stat-grid svelte-1qul0wc"),s(q,"class","b-top svelte-1qul0wc"),s(yt,"class","svelte-1qul0wc"),s(Dt,"class","svelte-1qul0wc"),s(bt,"class","svelte-1qul0wc"),s(St,"class","svelte-1qul0wc"),s(At,"class","svelte-1qul0wc"),s(Lt,"class","svelte-1qul0wc"),s(Tt,"class","svelte-1qul0wc"),s(Vt,"class","svelte-1qul0wc"),s(Mt,"class","svelte-1qul0wc"),s(Et,"class","svelte-1qul0wc"),s(Rt,"class","svelte-1qul0wc"),s(It,"class","svelte-1qul0wc"),s(qt,"class","svelte-1qul0wc"),s(Pt,"class","svelte-1qul0wc"),s($t,"class","svelte-1qul0wc"),s(Ot,"class","svelte-1qul0wc"),s(Kt,"class","svelte-1qul0wc"),s(Ut,"class","svelte-1qul0wc"),s(Yt,"class","svelte-1qul0wc"),s(Qt,"class","svelte-1qul0wc"),s(Jt,"class","svelte-1qul0wc"),s(Zt,"class","svelte-1qul0wc"),s(er,"class","svelte-1qul0wc"),s(tr,"class","svelte-1qul0wc"),s(C,"class","stat-grid svelte-1qul0wc"),s(t,"class","middle svelte-1qul0wc"),s(rr,"class","b-top svelte-1qul0wc"),s(or,"class","svelte-1qul0wc"),s(nr,"class","svelte-1qul0wc"),s(ar,"class","svelte-1qul0wc"),s(lr,"class","svelte-1qul0wc"),s(fr,"class","svelte-1qul0wc"),s(ee,"class","stat-grid svelte-1qul0wc"),s(ur,"class","b-top svelte-1qul0wc"),s(cr,"class","svelte-1qul0wc"),s(mr,"class","svelte-1qul0wc"),s(dr,"class","svelte-1qul0wc"),s(hr,"class","svelte-1qul0wc"),s(vr,"class","svelte-1qul0wc"),s(wr,"class","svelte-1qul0wc"),s(Cr,"class","svelte-1qul0wc"),s(yr,"class","svelte-1qul0wc"),s(xr,"class","svelte-1qul0wc"),s(br,"class","svelte-1qul0wc"),s(Br,"class","svelte-1qul0wc"),s(Ar,"class","svelte-1qul0wc"),s(_r,"class","svelte-1qul0wc"),s(Tr,"class","svelte-1qul0wc"),s(Hr,"class","svelte-1qul0wc"),s(Mr,"class","svelte-1qul0wc"),s(Nr,"class","svelte-1qul0wc"),s(Rr,"class","svelte-1qul0wc"),s(Gr,"class","svelte-1qul0wc"),s(qr,"class","svelte-1qul0wc"),s(S,"class","stat-grid svelte-1qul0wc"),s(Y,"class","right svelte-1qul0wc"),s(Ye,"class","bottom b-top svelte-1qul0wc")},m(v,D){x(v,t,D),i(t,r),i(t,o),i(t,n),i(n,l),i(n,a),i(a,c),i(n,u),i(n,d),i(n,B),i(B,j),i(n,ce),i(n,z),i(n,A),i(A,Te),i(t,G),i(t,q),i(t,ie),i(t,C),i(C,yt),i(C,Dt),i(Dt,jo),i(C,wa),i(C,bt),i(C,St),i(St,en),i(C,ka),i(C,At),i(C,Lt),i(Lt,tn),i(C,Ca),i(C,Tt),i(C,Vt),i(Vt,rn),i(C,ya),i(C,Mt),i(C,Et),i(Et,on),i(C,Da),i(C,Rt),i(C,It),i(It,nn),i(C,xa),i(C,qt),i(C,Pt),i(Pt,an),i(C,ba),i(C,$t),i(C,Ot),i(Ot,ln),i(C,Sa),i(C,Kt),i(C,Ut),i(Ut,sn),i(C,Ba),i(C,Yt),i(C,Qt),i(Qt,fn),i(C,Aa),i(C,Jt),i(C,Zt),i(Zt,un),i(C,La),i(C,er),i(C,tr),i(tr,cn),x(v,mn,D),x(v,Y,D),i(Y,rr),i(Y,_a),i(Y,ee),i(ee,or),i(ee,nr),i(nr,pn),i(ee,Ta),i(ee,ar),i(ee,lr),i(lr,dn),i(ee,Va),i(ee,fr),i(Y,Ha),i(Y,ur),i(Y,Ma),i(Y,S),i(S,cr),i(S,mr),i(mr,hn),i(S,Ea),i(S,dr),i(S,hr),i(hr,gn),i(S,Na),i(S,vr),i(S,wr),i(wr,vn),i(S,Ra),i(S,Cr),i(S,yr),i(yr,wn),i(S,Ia),i(S,xr),i(S,br),i(br,kn),i(S,Ga),i(S,Br),i(S,Ar),i(Ar,Cn),i(S,qa),i(S,_r),i(S,Tr),i(Tr,yn),i(S,Pa),i(S,Hr),i(S,Mr),i(Mr,Dn),i(S,Fa),i(S,Nr),i(S,Rr),i(Rr,xn),i(S,$a),i(S,Gr),i(S,qr),i(qr,bn),x(v,Sn,D),x(v,Ye,D),Ze(Ve,Ye,null),L=!0},p(v,D){(!L||D&8)&&m!==(m=v[3].noOfRelics+"")&&y(c,m),(!L||D&8)&&E!==(E=v[3].leadDefenderBonus+"")&&y(j,E),(!L||D&16)&&y(Te,v[4]),(!L||D&32)&&xt!==(xt=v[5].attackValue+"")&&y(jo,xt),(!L||D&64)&&Bt!==(Bt=v[6].attack+"")&&y(en,Bt),(!L||D&32)&&_t!==(_t=v[5].defenseValue+"")&&y(tn,_t),(!L||D&64)&&Ht!==(Ht=v[6].defense+"")&&y(rn,Ht),(!L||D&32)&&Nt!==(Nt=v[5].armorValue+"")&&y(on,Nt),(!L||D&64)&&Gt!==(Gt=v[6].armor+"")&&y(nn,Gt),(!L||D&32)&&Ft!==(Ft=v[5].damageValue+"")&&y(an,Ft),(!L||D&64)&&Wt!==(Wt=v[6].damage+"")&&y(ln,Wt),(!L||D&32)&&zt!==(zt=v[5].hpValue+"")&&y(sn,zt),(!L||D&64)&&Xt!==(Xt=v[6].hp+"")&&y(fn,Xt),(!L||D&32)&&jt!==(jt=v[5].cloaked+"")&&y(un,jt),(!L||D&128)&&y(cn,v[7]),(!L||D&64)&&ir!==(ir=v[6].dc225+"")&&y(pn,ir),(!L||D&64)&&sr!==(sr=v[6].dc175+"")&&y(dn,sr),(!L||D&256)&&pr!==(pr=v[8].attack+"")&&y(hn,pr),(!L||D&512)&&gr!==(gr=v[9].attack+"")&&y(gn,gr),(!L||D&256)&&kr!==(kr=v[8].defense+"")&&y(vn,kr),(!L||D&512)&&Dr!==(Dr=v[9].defense+"")&&y(wn,Dr),(!L||D&256)&&Sr!==(Sr=v[8].armor+"")&&y(kn,Sr),(!L||D&512)&&Lr!==(Lr=v[9].armor+"")&&y(Cn,Lr),(!L||D&256)&&Vr!==(Vr=v[8].damage+"")&&y(yn,Vr),(!L||D&512)&&Er!==(Er=v[9].damage+"")&&y(Dn,Er),(!L||D&256)&&Ir!==(Ir=v[8].hp+"")&&y(xn,Ir),(!L||D&512)&&Pr!==(Pr=v[9].hp+"")&&y(bn,Pr)},i(v){L||(O(Ve.$$.fragment,v),L=!0)},o(v){X(Ve.$$.fragment,v),L=!1},d(v){v&&b(t),v&&b(mn),v&&b(Y),v&&b(Sn),v&&b(Ye),je(Ve)}}}function id(e){let t,r,o,n,l,a=e[0].is_owner&&tu(e);function m(B,E){return B[1]?od:nd}let c=m(e,-1),u=c(e),d=e[1]&&ru(e);return{c(){t=f("div"),r=f("div"),a&&a.c(),o=h(),u.c(),n=h(),d&&d.c(),s(r,"class","left svelte-1qul0wc"),s(t,"class","body svelte-1qul0wc")},m(B,E){x(B,t,E),i(t,r),a&&a.m(r,null),i(r,o),u.m(r,null),i(t,n),d&&d.m(t,null),l=!0},p(B,[E]){B[0].is_owner?a?(a.p(B,E),E&1&&O(a,1)):(a=tu(B),a.c(),O(a,1),a.m(r,o)):a&&(Qe(),X(a,1,1,()=>{a=null}),Xe()),c===(c=m(B,E))&&u?u.p(B,E):(u.d(1),u=c(B),u&&(u.c(),u.m(r,null))),B[1]?d?(d.p(B,E),E&2&&O(d,1)):(d=ru(B),d.c(),O(d,1),d.m(t,null)):d&&(Qe(),X(d,1,1,()=>{d=null}),Xe())},i(B){l||(O(a),O(d),l=!0)},o(B){X(a),X(d),l=!1},d(B){B&&b(t),a&&a.d(),u.d(),d&&d.d()}}}function ad(e,t,r){let o,n,l,a,m,c,u,d;fe(e,Pf,A=>r(2,o=A)),fe(e,Wf,A=>r(3,n=A)),fe(e,Kf,A=>r(4,l=A)),fe(e,Uf,A=>r(5,a=A)),fe(e,Yf,A=>r(6,m=A)),fe(e,zf,A=>r(7,c=A)),fe(e,Xf,A=>r(8,u=A)),fe(e,Jf,A=>r(9,d=A));let{relicData:B={}}=t,E=B.defenders.map(A=>A.player_name),j=!1;function ce(A){se("relic",A.detail)}function z(){se("relic","fetchStats"),r(1,j=!0),We.set(B.controlled_by.guild_id),Mo.set(E),No.set(GameData.player().hasGroup),Oo.set(GameData.player().buffs)}return kl(()=>{r(1,j=!1),We.set(0),Mo.set([]),No.set(0),Oo.set([])}),e.$$set=A=>{"relicData"in A&&r(0,B=A.relicData)},[B,j,o,n,l,a,m,c,u,d,E,ce,z]}var Ui=class extends he{constructor(t){super(),de(this,t,ad,id,pe,{relicData:0})}},ou=Ui;var zi=0;function ld(e,t){zi&&zi.$destroy(),zi=new ou({props:{relicData:t},target:e})}function sd(e,t){t?.response?.data?.defenders?.length>0&&ld(T("dialog-relic"),t.response.data)}function Yi(){$.subscribe(il,sd)}function fd(e,t){t==="ACT_REPAIR"&&GameData.fetch(sl+me+Kr+Q)}function Qi(){$.subscribe(tl,fd)}var Xi=0;function nu(e){$("#statbar-gold").css("background-color",e)}function iu(){$("#HelperSendTotal").html(ge(N("currentGoldSentTotal"))),Number(GameData.player().gold)>Xi?nu("red"):nu("inherit")}function ud(){return`<dt class="stat-gold-sendTo">Send To:</dt><dd id="HelperSendTo">${N("goldRecipient")}</dd><dt class="stat-gold-sendAmt">Amount:</dt><dd id="HelperSendAmt">${ge(Xi)}</dd><dt class="stat-gold-sendTo">Send?</dt><dd><input id="HelperSendGold" value="Send!" class="custombutton" type="submit"><input type="hidden" id="xc" value=""</dd><dt class="stat-gold-sendTotal">Total Sent:</dt><dd id="HelperSendTotal">${ge(N("currentGoldSentTotal"))}</dd>`}function cd(){Xi=N("goldAmount"),$("#statbar-gold-tooltip-general").append(ud()),$("#HelperSendGold").on("click",Il),iu(),$.subscribe(ja,iu)}function Ji(){Rl(),Nl()&&cd()}var dt=0,ht=0,Wo=0,Ue=0,Zi=0,Ko=0;function md(){return ot({a:14,d:0,id:dt.id,item_id:dt.itemId})}function pd(e){let t=e.response.response,r=e.response.msg,o=r;if(t!==0){let n=r.indexOf("<");n!==-1&&(o=r.substring(0,n))}else o=`You purchased ${e.response.data.name} for ${ge(e.response.data.cost)} gold.`;Fr(Ko,`${o}<br>`)}function dd(){GameData.doAction(14,3,{id:dt.id,item_id:dt.itemId},0),Wo.close()}function hd(){let e=fs(Zi.value);if(!e)return;let t=[];for(let r=1;r<e;r+=1)t.push(md().then(pd));ss(t,dd)}function gd(){Ue=H({className:"fshClear",textContent:"Select how many to quick-buy:"}),Zi=no({id:"buyAmount",className:"fshNumberInput",min:1,max:99,value:1,type:"number"}),g(Ue,Zi);let e=ve({textContent:"Quick-buy"});P(e,hd),g(Ue,e),Ko=H(),g(Ue,Ko),g(ht,Ue)}function vd(){return ht||T("shopDialogConfirm")}function wd(){return Wo||$(ht).data("hcsWorldDialogShopConfirm")}function kd(){Ue?_("",Ko):gd()}function Cd(e,t){dt=t,ht=vd(),ht&&(Wo=wd(),Wo&&kd())}function ji(){$.subscribe(el,Cd)}function au(e){return e.numberOfCreatureHitsTillDead-e.numberOfHitsRequired<=1?", dies on miss":", survives a miss"}function lu(e,t){return t==="-"?e:e==="-"||e>t?"-":e}var yd=[[e=>e.playerHits==="-"&&e.creatureHits==="-",()=>"Unresolved"],[e=>e.playerHits==="-",()=>"Player dies"],[e=>e.playerHits===1,e=>`Player 1 hits${au(e)}`],[e=>e.playerHits>1,e=>`Player > 1 hits${au(e)}`]];function Dd(e,t){return t[0](e)}function xd(e){let t=yd.find(w(Dd,e));return t?t[1](e):"Unknown"}function ea(e){e.playerHits=lu(e.numberOfHitsRequired,e.numberOfCreatureHitsTillDead),e.creatureHits=lu(e.numberOfCreatureHitsTillDead,e.numberOfHitsRequired),e.fightStatus=xd(e)}function ne(e,t,r){return e.callback.groupExists?t:r}function gt(e,t,r,o){t>0&&(e.extraNotes+=`${r} = ${Math.floor(o*t*.001)}<br>`)}var bd=e=>ne(e,e.callback.groupArmorValue,e.player.armorValue);function Sd(e){let t=bd(e);e.overallArmorValue=t+Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}function Bd(e){gt(e,e.player.sanctuaryLevel,"Sanc Bonus Armor",e.player.armorValue)}function Ad(e){e.terrorizeEffect=Math.floor(e.creature.damage*e.player.terrorizeLevel*.001)}function Ld(e){e.player.terrorizeLevel>0&&(e.extraNotes+=`Terrorize Creature Damage Effect = ${e.terrorizeEffect*-1}<br>`)}function _d(e){e.creatureDamageDone=Math.ceil(e.generalVariable*e.creature.damage-e.overallArmorValue+e.overallHPValue)}function Td(e){let t=e.generalVariable*e.creature.damage;t<e.overallArmorValue?e.numberOfCreatureHitsTillDead=e.overallHPValue:e.numberOfCreatureHitsTillDead=Math.ceil(e.overallHPValue/(t-e.overallArmorValue))}function Vd(e){e.creatureHitByHowMuch>=0?Td(e):e.numberOfCreatureHitsTillDead="-"}function ta(e){Sd(e),Bd(e),Ad(e),Ld(e),e.creature.damage-=e.terrorizeEffect,_d(e),Vd(e)}var Hd=e=>ne(e,e.callback.groupAttackValue,e.player.attackValue);function su(e){return Math.floor(e.creature.defense*e.player.darkCurseLevel*Ur)}function Md(e){let t=e.creature.defense-su(e);return e.combatEvaluatorBias===3?e.overallAttackValue-Math.ceil(t)-50:e.overallAttackValue-Math.ceil(e.attackVariable*t)}function ra(e){let t=Hd(e);e.player.darkCurseLevel>0&&(e.extraNotes+=`DC Bonus Attack = ${su(e)}<br>`),e.nightmareVisageAttackMovedToDefense=Math.floor((t+e.counterAttackBonusAttack)*e.player.nightmareVisageLevel*.0025),e.player.nightmareVisageLevel>0&&(e.extraNotes+=`NMV Attack moved to Defense = ${e.nightmareVisageAttackMovedToDefense}<br>`),e.overallAttackValue=t+e.counterAttackBonusAttack-e.nightmareVisageAttackMovedToDefense,e.hitByHowMuch=Md(e)}function Ed(e){return e.player.counterAttackLevel>0&&e.numberOfHitsRequired===1}var fu=(e,t,r)=>Math.max(Math.ceil((e-t+1)/r/.0025),0);function cu(e){e.lowestCALevelToStillHit=fu(e.counterAttackBonusAttack,e.hitByHowMuch,e.player.attackValue),e.lowestCALevelToStillKill=fu(e.counterAttackBonusDamage,e.damageDone,e.player.damageValue)}function Nd(e){return e.player.counterAttackLevel>0?Math.ceil((1+e.player.doublerLevel/50)*.0025*e.lowestFeasibleCALevel):0}function Rd(e){e.extraAttackAtLowestFeasibleCALevel=Math.floor(e.player.attackValue*.0025*e.lowestFeasibleCALevel),e.extraDamageAtLowestFeasibleCALevel=Math.floor(e.player.damageValue*.0025*e.lowestFeasibleCALevel),e.extraNotes+=`Extra CA Att/Dam at this lowered CA level = ${e.extraAttackAtLowestFeasibleCALevel} / ${e.extraDamageAtLowestFeasibleCALevel}<br>`}function Id(e){cu(e),e.lowestFeasibleCALevel=Math.max(e.lowestCALevelToStillHit,e.lowestCALevelToStillKill),e.extraNotes+=`Lowest CA to still 1-hit this creature = ${e.lowestFeasibleCALevel}<br>`,e.lowestFeasibleCALevel!==0&&Rd(e),e.extraStaminaPerHitAtLowestFeasibleCALevel=Nd(e),e.extraStaminaPerHitAtLowestFeasibleCALevel<e.extraStaminaPerHit?e.extraNotes+=`Extra Stam Used at this lowered CA level = ${e.extraStaminaPerHitAtLowestFeasibleCALevel}<br>`:e.extraNotes+="No reduction of stam used at the lower CA level<br>"}function Gd(e){return e.numberOfHitsRequired==="-"||e.numberOfHitsRequired!==1}function uu(e,t,r){e[t]>203?e.extraNotes+=`Even with CA203 you cannot ${r} this creature<br>`:e[t]!==0&&(e.extraNotes+=`You need a minimum of CA${e[t]} to ${r} this creature<br>`)}function qd(e){cu(e),uu(e,"lowestCALevelToStillHit","hit"),uu(e,"lowestCALevelToStillKill","1-hit kill")}function oa(e){Ed(e)&&Id(e),Gd(e)&&qd(e)}var Pd=e=>ne(e,e.callback.groupHPValue,e.player.hpValue),Fd=e=>ne(e,e.callback.groupDamageValue,e.player.damageValue);function $d(e){let t=Pd(e),{fortitudeLevel:r}=e.player;e.fortitudeExtraHPs=Math.floor(t*r*.001),r>0&&(e.extraNotes+=`Fortitude Bonus HP = ${e.fortitudeExtraHPs}<br>`),e.overallHPValue=t+e.fortitudeExtraHPs}function Od(e){let{chiStrikeLevel:t}=e.player;e.chiStrikeExtraDamage=Math.floor(e.overallHPValue*t*.001),t>0&&(e.extraNotes+=`Chi Strike Bonus Damage = ${e.chiStrikeExtraDamage}<br>`)}function na(e){if($d(e),Od(e),e.overallDamageValue=Fd(e)+e.deathDealerBonusDamage+e.counterAttackBonusDamage+e.holyFlameBonusDamage+e.chiStrikeExtraDamage,e.damageDone=Math.floor(e.overallDamageValue-(e.generalVariable*e.creature.armor+e.hpVariable*e.creature.hp)),e.hitByHowMuch>0){let t=1;e.overallDamageValue>=e.generalVariable*e.creature.armor&&(t=e.overallDamageValue-e.generalVariable*e.creature.armor),e.numberOfHitsRequired=Math.ceil(e.hpVariable*e.creature.hp/t)}else e.numberOfHitsRequired="-"}var pu=e=>ne(e,e.callback.groupDefenseValue,e.player.defenseValue),du=e=>Math.floor(pu(e)*e.player.constitutionLevel*.001);function Wd(e){e.player.constitutionLevel>0&&(e.extraNotes+=`Constitution Bonus Defense = ${du(e)}<br>`)}function Kd(e){gt(e,e.player.flinchLevel,"Flinch Bonus Attack Reduction",e.creature.attack)}var mu=e=>e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue;function ia(e){e.overallDefenseValue=pu(e)+du(e)+e.nightmareVisageAttackMovedToDefense,Wd(e),Kd(e),e.creatureHitByHowMuch=Math.floor(e.attackVariable*mu(e)),e.combatEvaluatorBias===3&&(e.creatureHitByHowMuch=Math.floor(mu(e)-50))}function Ud(e){e.player.superEliteSlayerLevel>0&&(e.extraNotes+=`SES Stat Reduction Multiplier = ${e.player.superEliteSlayerMultiplier}<br>`)}function zd(e){e.holyFlameBonusDamage=0,e.creature.class==="Undead"&&(e.holyFlameBonusDamage=Math.max(Math.floor((e.player.damageValue-e.creature.armor)*e.player.holyFlameLevel*.002),0),e.player.holyFlameLevel>0&&(e.extraNotes+=`HF Bonus Damage = ${e.holyFlameBonusDamage}<br>`))}function Yd(e){e.deathDealerBonusDamage=Math.floor(e.player.damageValue*(Math.min(Math.floor(e.player.killStreakValue/5)*.01*e.player.deathDealerLevel,20)/100))}function Qd(e){e.counterAttackBonusAttack=Math.floor(e.player.attackValue*.0025*e.player.counterAttackLevel),e.counterAttackBonusDamage=Math.floor(e.player.damageValue*.0025*e.player.counterAttackLevel)}function Xd(e){e.extraStaminaPerHit=0,e.player.counterAttackLevel>0&&(e.extraStaminaPerHit=Math.ceil((1+e.player.doublerLevel/50)*.0025*e.player.counterAttackLevel))}function Jd(e){e.player.deathDealerLevel>0&&(e.extraNotes+=`DD Bonus Damage = ${e.deathDealerBonusDamage}<br>`)}function Zd(e){e.player.counterAttackLevel>0&&(e.extraNotes+=`CA Bonus Attack/Damage = ${e.counterAttackBonusAttack} / ${e.counterAttackBonusDamage}<br>CA Extra Stam Used = ${e.extraStaminaPerHit}<br>`)}function aa(e){e.extraNotes="",Ud(e),zd(e),Yd(e),Qd(e),Xd(e),Jd(e),Zd(e)}var jd=e=>e.creatureHitByHowMuch>=0?"Yes":"No",eh=e=>e.hitByHowMuch>0?"Yes":"No",th=e=>e.callback.groupExists?"Group ":"",U=e=>`<span style="color:#333333">${e}</span>`,Uo=e=>`<tr>${e}</tr>`,la=(e,t)=>`<td${t%2?"":' class="fshRight"'}>${e}</td>`,vt=e=>Uo(e.map(la).join("")),rh=e=>Uo(`<td bgcolor="#CD9E4B" colspan="4" align="center">${th(e)}Combat Evaluation</td>`),oh=e=>vt([U("Will I hit it?"),eh(e),U("Extra Attack:"),`( ${e.hitByHowMuch} )`]),nh=e=>vt([U("# Hits to kill it?"),e.numberOfHitsRequired,U("Extra Damage:"),`( ${e.damageDone} )`]),ih=e=>vt([U("Will I be hit?"),jd(e),U("Extra Defense:"),`( ${-1*e.creatureHitByHowMuch} )`]),ah=e=>vt([U("# Hits to kill me?"),e.numberOfCreatureHitsTillDead,U("Extra Armor + HP:"),`( ${-1*e.creatureDamageDone} )`]),lh=e=>vt([U("# Player Hits?"),e.playerHits,U("# Creature Hits?"),e.creatureHits]),sh=e=>Uo(`${la(U("Fight Status:"),0)}<td colspan="3"><span>${e.fightStatus}</span></td>`),fh=e=>Uo(`${la(U("Notes:"),0)}<td colspan="3"><span style="font-size:x-small;">${e.extraNotes}</span></td>`);function sa(e){return`<table width="100%"><tbody>${rh(e)}${oh(e)}${nh(e)}${ih(e)}${ah(e)}${lh(e)}${sh(e)}${fh(e)}</tbody></table>`}var zo=0,Yo=0,wt=0;function uh(e){if(!zo){let t=Ee("body",e);t.length===1&&([zo]=t)}}function hu(){return _e(Yo)?"Remove from do not kill list":"Add to the do not kill list"}function gu(){_(hu(),wt)}function ch(){let e=p.doNotKillList.indexOf(Yo);e===-1?p.doNotKillList.push(Yo):p.doNotKillList.splice(e,1),gu(),J("doNotKillList",p.doNotKillList.join()),Oe()}function mh(){wt=ve({className:"fshBl",textContent:hu(),type:"button"});let e=H({className:"description",innerHTML:'<span class="ui-helper-hidden-accessible"><input type="text"></span>'});g(e,wt),g(zo,e),P(wt,ch)}function ph(){wt?gu():mh()}function fa(e,t){uh(t),zo&&(Yo=Me(e),ph())}var ze=0,kt=0,Qo=0,Xo=0;function dh(){ze||(ze=T("dialog-viewcreature"))}function hh(){kt||(kt=H(),g(ze,kt),g(ze,H({innerHTML:'<span class="fshFooter">*Does include CA, DD, HF, DC, Flinch, Super Elite Slayer, NMV, Sanctuary, Constitution, Fortitude, Chi Strike and Terrorize (if active) and allow for randomness (1.1053). Constitution, NMV, Fortitude and Chi Strike apply to group stats.</span>'})))}function vu(){Qo||(hh(),Qo=H(),g(kt,Qo))}function gh(){Xo||(vu(),Xo=H(),g(kt,Xo))}function wu(e){vu(),F(e,Qo)}function ku(e){gh(),F(e,Xo)}function vh(e,t,r){r===3&&(t.attack-=Math.ceil(t.attack*e),t.defense-=Math.ceil(t.defense*e),t.armor-=Math.ceil(t.armor*e),t.damage-=Math.ceil(t.damage*e),t.hp-=Math.ceil(t.hp*e))}function wh(e,t){let r={name:e.name,class:e.creature_class,attack:Number(e.attack),defense:Number(e.defense),armor:Number(e.armor),damage:Number(e.damage),hp:Number(e.hp)};return vh(t,r,e.type),r}function kh(e){e.combatEvaluatorBias=p.combatEvaluatorBias,e.attackVariable=1.1053,e.generalVariable=p.generalVariable,e.hpVariable=p.hpVariable}function Ch(e){Pl([aa,ra,na,ia,ta,ea,oa],e)}function Cu(e,t,r){let o={};o.callback=r,o.player=ft(t),kh(o),o.creature=wh(e.response.data,o.player.superEliteSlayerMultiplier),Ch(o),o.evaluatorHTML=sa(o),r.groupExists?ku(o.evaluatorHTML):wu(o.evaluatorHTML)}function yh(e){return e.members[0].name===ro()}function Dh(e){if(le(e.r))return e.r.find(yh).id}function xh(e,t,r){if(!r.r||!r.r.attributes)return;let o=r.r.attributes;Cu(e,t,{groupExists:!0,groupAttackValue:o[0].value,groupDefenseValue:o[1].value,groupArmorValue:o[2].value,groupDamageValue:o[3].value,groupHPValue:o[4].value})}function bh(e,t,r){r&&fo(r).then(w(xh,e,t))}function Sh(e,t){ao().then(Dh).then(w(bh,e,t))}function Bh(e,t){e.player.hasGroup&&Sh(e,t),Cu(e,t,{groupExists:!1})}function Ah(e){return e.response&&e.response.data}function Lh(e,t){dh(),ze&&(wu(""),ku(""),Ah(t)&&(fa(t.response.data.name,ze),Ol(!0).then(w(Bh,t))))}function ua(){$.subscribe(nl,Lh)}var Ct=0;function Du(){Ct=!Ct,J("hidePlayerActions",Ct),GameData.fetch(Q)}function _h(e){let t=Ee("verbs",e);t.length===1&&Fl(t[0])}function yu(){if(!Ct)return;let e=T("actionList");Xr("player",e).forEach(_h)}function xu(){Ct=N("hidePlayerActions"),$.subscribe(He,yu),yu()}var bu=0,Su="",ca=()=>bu,Bu=()=>Su;function Jo(){let e=[null,[p.buffs,p.buffsName],[p.buffs2,p.buffs2Name],[p.buffs3,p.buffs3Name]][p.enabledHuntingMode];le(e)&&([bu,Su]=e)}function ma(e){e.target.name==="enabledHuntingMode"&&(p.enabledHuntingMode=e.target.value,J("enabledHuntingMode",p.enabledHuntingMode),Jo(),GameData.fetch(me))}function ye(e){p[e]=!p[e],J(e,p[e])}function Th(){return H({id:"fshWorldPrefs",innerHTML:`${Se("showCreatureInfo")}&nbsp;&nbsp;${Se("showMonsterLog")}&nbsp;&nbsp;${Se("showTitanInfo")}&nbsp;&nbsp;${Se("showBuffInfo")}<br>${Se("hideSubLvlCreature")}&nbsp;&nbsp;${Se("hidePlayerActions")}&nbsp;&nbsp;${us()}`})}function Vh(){ye("showHuntingBuffs"),GameData.fetch(me)}function Hh(){ye("hideSubLvlCreature"),GameData.fetch(Q)}function Mh(){ye("showTitanInfo"),st(GameData.realm().dynamic)}function Eh(){ye("showBuffInfo"),$e()}var Nh={hideSubLvlCreature:Hh,hidePlayerActions:Du,showCreatureInfo:()=>ye("showCreatureInfo"),showHuntingBuffs:Vh,showMonsterLog:()=>ye("showMonsterLog"),showTitanInfo:Mh,showBuffInfo:Eh};function Rh(e){let t=Nh[e.target.name];zr(t)&&(e.target.blur(),t(e))}function pa(){let e=H({className:"fshCenter fshFten"}),t=Th();P(t,Rh),ae(t,"change",ma),g(e,t);let r=H();g(e,r);let o=T("worldContainerBelow").children[0];return io(e,o),r}var Zo=[{generalVariable:1.1053,hpVariable:1.1},{generalVariable:1.1,hpVariable:1.053},{generalVariable:1.053,hpVariable:1},{generalVariable:1.1053,hpVariable:1}];function Ih(e){return Zo[e]?Zo[e].generalVariable:1.1053}function Gh(e){return Zo[e]?Zo[e].hpVariable:1.1}function da(){p.combatEvaluatorBias=N("combatEvaluatorBias"),p.generalVariable=Ih(p.combatEvaluatorBias),p.hpVariable=Gh(p.combatEvaluatorBias)}function qh(e,t){return e[t.name]=!0,e}function Ph(e,t,r){return e[Me(r)]||t.push(r),t}function Fh(e,t){F(`You are missing some ${Bu()} hunting buffs<br>(${t.join(", ")})`,e)}function Au(e){F("",e)}function $h(e,t){let r=t.b.reduce(qh,{}),o=ca().reduce(w(Ph,r),[]);o.length>0?Fh(e,o):Au(e)}function Oh(e,t){p.showHuntingBuffs?$h(e,t):Au(e)}function Wh(e,t,r){ca()&&Oh(e,r)}function ha(e){Jo();let t=w(Wh,e);$.subscribe(Or,t),p.showHuntingBuffs&&window.initialGameData&&t(null,{b:window.initialGameData.player.buffs})}function Kh(e){return!e||!e.actions||e.actions.length===0}function Uh(e,t){return t.type===6?t.data.creature_type!==0||t.data.level>=e:!0}function zh(e){return e.realm&&e.realm.minlevel||GameData.realm().minlevel}function Yh(e){let t=dl(e);return Kh(t)?e:(t.actions=t.actions.filter(w(Uh,zh(t))),Ll(t))}function Qh(e){return e.data&&e.data.d&&cs(e.data.d,Q)}function Xh(e,t){p.hideSubLvlCreature&&Qh(t)&&(e.dataFilter=Yh)}function ga(){$.ajaxPrefilter("JSON",Xh),p.hideSubLvlCreature&&GameData.fetch(Q)}function Jh(e){p[e[0]]=Mn(e[1])}function Zh(){[["buffs","huntingBuffs"],["buffs2","huntingBuffs2"],["buffs3","huntingBuffs3"]].forEach(Jh)}function jh(e){p[e]=Mn(e)}function eg(){["doNotKillList"].forEach(jh)}function tg(){Zh(),eg()}function rg(e){p[e[0]]=N(e[1])}function og(){[["buffsName","huntingBuffsName"],["buffs2Name","huntingBuffs2Name"],["buffs3Name","huntingBuffs3Name"],["showHuntingBuffs","showHuntingBuffs"]].forEach(rg)}function ng(e){p[e]=N(e)}function ig(){["enabledHuntingMode","hideSubLvlCreature","showTitanInfo","showBuffInfo","showMonsterLog","showCreatureInfo"].forEach(ng)}function ag(){og(),ig()}function lg(){tg(),ag()}function va(){da(),lg();let e=pa();ga(),ha(e),xu()}function sg(){$("#messageCenter").worldMessageCenter({offset:"0 60"})}function fg(){Re("#mapTooltip")}var ug=[va,Ji,ua,Di,ci,pi,bi,Qi,ni,Fi,ji,Yi,sg,fg,jn,Jn,di,ui,ri,yi];function cg(){Yl(ug),p.userIsDev&&xi()}export{cg as default};
//# sourceMappingURL=newMap-W3BFCVBU.js.map
