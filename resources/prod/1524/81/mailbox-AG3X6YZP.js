import{a as R,b as D}from"./chunk-SC445G6U.js";import{a as A}from"./chunk-Q3HCQCDP.js";import{a as N}from"./chunk-VGSXS22R.js";import{a as L}from"./chunk-CGPO67OY.js";import{a as M}from"./chunk-ASJ72VAA.js";import{a as q}from"./chunk-JIVCXSAO.js";import{a as l}from"./chunk-ATB4WLZR.js";import{a as v}from"./chunk-BDFQCMKF.js";import"./chunk-WMET5VJL.js";import"./chunk-EJAPIT2N.js";import{a as g}from"./chunk-AU54RFBS.js";import{a as E}from"./chunk-WKDTOFNZ.js";import{a as C}from"./chunk-ARZE2BDD.js";import{a as Q}from"./chunk-MKW45GOR.js";import"./chunk-OELRUWUL.js";import{a as m}from"./chunk-IEZDQOE5.js";import{a as n}from"./chunk-KHQZO2PT.js";import"./chunk-WMUUSPIG.js";import{a as b}from"./chunk-DG3IU753.js";import{b as c}from"./chunk-U2LW7DMT.js";import{a as f}from"./chunk-ZIYY5ALA.js";import{a as k}from"./chunk-CF6OUIZ5.js";import"./chunk-WHIBDNMN.js";import{a as B}from"./chunk-INJK6J4Y.js";import{a as T}from"./chunk-MVADRWN3.js";import"./chunk-B42TQDRT.js";import"./chunk-EPL4X55B.js";import"./chunk-F5F7ZRBL.js";import"./chunk-4LPHXEVA.js";import"./chunk-C6CNCMW2.js";import"./chunk-RLPGZCX6.js";import{a as x}from"./chunk-6TE7Y3DR.js";import"./chunk-IPQXTCLP.js";import{a}from"./chunk-SOFFOM3C.js";import{a as y}from"./chunk-J47S26DS.js";import"./chunk-2YJNQKIS.js";import"./chunk-2DIHMK5L.js";import"./chunk-PRUVPLE4.js";import"./chunk-YVFHCM2A.js";import"./chunk-3WYYB24O.js";import{a as I}from"./chunk-Q4WEZP4Z.js";import"./chunk-SYO7WFPA.js";import"./chunk-FNQX6KHV.js";import"./chunk-SARQWG4K.js";import{g as h}from"./chunk-7Q74Q23I.js";import"./chunk-B3OIOQDS.js";import"./chunk-7X7SMYZT.js";function p(t){return Q({cmd:"tempinv",subcmd:"takeitems",item:t})}function S(t){return E({cmd:"tempinv",subcmd:"takeitem",temp_id:t,ajax:1})}function F(t){let e=t.filter(o=>o.r===0),i=t.filter(o=>o.r!==0);return e.length>0?{r:e.map(o=>({id:o.temp_id})),s:!0}:i.length>0?{e:{message:i[0].m},s:!1}:{e:{message:t[0].m},s:!1}}function u(t){return N(t.map(S),F)}function d(t){return C(p,u,t)}function H(t,e,i){let o=M({id:t,className:"sendLink",htmlFor:"fshQuickTake",textContent:`Toggle ${e}`});return l(o,i),o}function G(t,e){let i=e.children[0],{tipped:o}=i.dataset,{itemId:r,invId:s}=B(h,o);return!r||!s||(t[r]?t[r].invIds.push(s):t[r]={invIds:[s],tipped:o.replace(/&extra=\d/,""),src:i.src}),t}function O(){return m({id:"quickTake",innerHTML:'<div class="fshCenter"><br><font size="3"><b>Quick Take</b></font><br><br>Select which item to take all similar items from your Mailbox.</div><div></div>'})}function _(){let t=m(),e=L();return n(t,e),{takeContainer:t,takeResult:e}}function j(t,e){let i=e[1],o=m(),r=m({innerHTML:`<img src="${i.src}" class="tip-dynamic" data-tipped="${i.tipped}">`});n(o,r);let s=m({innerHTML:`<button class="fshBl fshBls" data-id="${e[0]}">Take All ${i.invIds.length}</button>`});n(o,s),n(t,o)}function w(t,e){x(e).forEach(a(j,t))}function z(t){let e=$(`#temp-inv-img-${t}`).qtip("api");e&&e.destroy(!0)}function J(t){z(t.id);let e=k(`temp-inv-${t.id}`);e&&f("",e)}function P(t,e){e.r.forEach(J),R(`${e.r.length.toString()} item(s) taken.`,t)}function U(t,e){D(e,t)||b(e.r)&&P(t,e)}function K(t,e){d(e).then(a(U,t))}function V(t,e,i){let o=i.dataset.id,{invIds:r}=t[o];f(`taking all ${r.length} items`,i.parentNode),A(40,r).forEach(a(K,e))}function W(t,e,i){v("fshBls",i.target)&&V(t,e,i.target)}function X(t,e,i){let o=m({className:"fshTakeGrid"});w(o,t),n(e,o),I(o,a(W,t,i))}function Y(t){let e=O(),{takeContainer:i,takeResult:o}=_();X(t,e,o),n(e,m()),n(e,i),n(c(),e)}function Z(t,e){H("qtOn","Mailbox",e);let i=t.reduce(G,{});Y(i)}function tt(t,e){let i=q({id:"fshQuickTake",type:"checkbox"});l(i,e),g(i,"change",a(Z,t,e))}function et(){if(y()||!c())return;let t=T("a",c());if(t.length===0)return;let e=c().lastElementChild;tt(t,e),H("qtOff","Quick Take",e)}export{et as default};
//# sourceMappingURL=mailbox-AG3X6YZP.js.map
