import{a as Bt,b as Ht,c as Rt}from"./chunk-YEFCFXJZ.js";import{a as Nt}from"./chunk-UVW6POCW.js";import{a as At}from"./chunk-UEHXQRVU.js";import{a as yt}from"./chunk-JKFSV75B.js";import{a as Qt}from"./chunk-M2AR7ZCK.js";import{a as v}from"./chunk-E2UOILVH.js";import{a as $}from"./chunk-RX5J4B35.js";import{a as q}from"./chunk-RUX24FMF.js";import{a as Tt}from"./chunk-MWVD7HRM.js";import{a as G}from"./chunk-RUCJRVGU.js";import{a as j}from"./chunk-XYV3WFPP.js";import{a as B}from"./chunk-ZD42GYOR.js";import{a as _t}from"./chunk-C356XHRD.js";import{a as bt}from"./chunk-AP6R76CB.js";import{b as wt}from"./chunk-DA5WSKUB.js";import{a as ft}from"./chunk-5BP4JVZE.js";import{a as Lt}from"./chunk-VGN4AH67.js";import{a as z}from"./chunk-UEV7L5JP.js";import{a as $t}from"./chunk-F4XKSAVO.js";import{a as xt}from"./chunk-36R4KBE3.js";import{C as I,E,G as x,H as X,I as It,N as U,Q as Et,U as T,V as Q,a as J,b as St,ba as O,ca as F,d as H,da as M,ea as P,fa as V,r as g,s as p,t as d,u as Dt,v as h,w as b,x as R,y as Ct,z as K}from"./chunk-N4CD3AMK.js";import{a as L}from"./chunk-IBDVBQUM.js";import{a as vt}from"./chunk-V4PGHHTG.js";import{a as gt}from"./chunk-E2T4BRJB.js";import{b as ht}from"./chunk-HBYLRJZK.js";import{Y as kt,c as ut,r as pt,u as dt}from"./chunk-XMFVZQFS.js";import{a as C}from"./chunk-7R4PXCUB.js";var Ut,Ot;function y(){if(!Ot){let t=C.subcmd==="dropitems"?"removeIndex[]":"storeIndex[]";Ut=document.forms[0].elements[t],Ot=!0}return Ut}function A(){let t=y();return t?Nt(t):[]}function N(){return A().filter(t=>!B("fshHide",$(t)))}function Z(t){return G({subcmd:"dodropitems",removeIndex:t})}async function tt(t){let e=await Rt(t),o={s:e.r===0};return o.s?o.r={items:[],deleted_items:t}:o.e={message:e.m},o}function et(t){return j(Z,tt,t)}function Mt(t){return $(t.target).cells[0].children[0].value}async function Jt(t){let{items:e}=await v();L("storeitems","Check All of Type"),N().filter(o=>e[o.value]&&e[o.value].item_id===e[Mt(t)].item_id).forEach(o=>{o.checked=!o.disabled&&!o.checked})}function Kt(t){let e=$(t);e.cells[0].children[0].disabled=!0,vt(".actionButton",e).forEach(o=>{o.disabled=!0,o.textContent="",o.removeAttribute("data-tooltip"),o.classList.add("inProgress")}),t.blur(),t.classList.add("fshSpinner","fshSpinner12")}function Xt(t,e){t.target.classList.remove("fshSpinner","fshSpinner12"),t.target.classList.add("fshGreen"),t.target.textContent=e}async function Ft(t,e,o){Kt(t.target);let i=await e([Mt(t)]);i&&i.s?Xt(t,o):At(i)}var Zt=[["Check All",Jt],["Quick Send",t=>{L("storeitems","Quick Send"),Ft(t,Ht,"Sent")}],["Quick Drop",t=>{L("storeitems","Quick Drop"),Ft(t,et,"Dropped")}]];function ot(t){if(t.target.tagName==="A"&&["AH","UFSG"].includes(t.target.textContent)&&L("storeitems",t.target.textContent),t.target.tagName!=="BUTTON"||B("custombutton",t.target))return;let e=Zt.find(([o])=>o===ft(t.target));e&&e[1](t)}var Pt=["showExtraLinks","enableItemColoring","checkAllOfType","showQuickSendLinks","showQuickDropLinks"];function te(t){let e=t[2](t[0])+"",o,i;return{c(){o=b(e),i=b(" AH and UFSG Links")},m(n,r){p(n,o,r),p(n,i,r)},p(n,r){r&1&&e!==(e=n[2](n[0])+"")&&E(o,e)},d(n){n&&d(o),n&&d(i)}}}function ee(t){let e=t[2](t[1])+"",o,i;return{c(){o=b(e),i=b(" Quick Drop links")},m(n,r){p(n,o,r),p(n,i,r)},p(n,r){r&2&&e!==(e=n[2](n[1])+"")&&E(o,e)},d(n){n&&d(o),n&&d(i)}}}function oe(t){let e,o,i;return e=new q({props:{$$slots:{default:[ne]},$$scope:{ctx:t}}}),e.$on("click",t[5]),{c(){o=h("div"),O(e.$$.fragment),x(o,"display","contents"),x(o,"--button-width","10.8em")},m(n,r){p(n,o,r),F(e,o,null),i=!0},p(n,r){let l={};r&128&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){i||(T(e.$$.fragment,n),i=!0)},o(n){Q(e.$$.fragment,n),i=!1},d(n){n&&d(o),M(e,n)}}}function ne(t){let e;return{c(){e=b("Select All Guild Locked")},m(o,i){p(o,e,i)},d(o){o&&d(e)}}}function re(t){let e,o,i,n,r,l,_,k;e=new q({props:{$$slots:{default:[te]},$$scope:{ctx:t}}}),e.$on("click",t[3]),n=new q({props:{$$slots:{default:[ee]},$$scope:{ctx:t}}}),n.$on("click",t[4]);let c=C.subcmd2==="storeitems"&&oe(t);return{c(){o=h("div"),O(e.$$.fragment),i=b(`\xA0
`),r=h("div"),O(n.$$.fragment),l=b(`\xA0
`),c&&c.c(),_=Ct(),x(o,"display","contents"),x(o,"--button-width","11.8em"),x(r,"display","contents"),x(r,"--button-width","10.6em")},m(s,u){p(s,o,u),F(e,o,null),p(s,i,u),p(s,r,u),F(n,r,null),p(s,l,u),c&&c.m(s,u),p(s,_,u),k=!0},p(s,[u]){let w={};u&129&&(w.$$scope={dirty:u,ctx:s}),e.$set(w);let a={};u&130&&(a.$$scope={dirty:u,ctx:s}),n.$set(a),C.subcmd2==="storeitems"&&c.p(s,u)},i(s){k||(T(e.$$.fragment,s),T(n.$$.fragment,s),T(c),k=!0)},o(s){Q(e.$$.fragment,s),Q(n.$$.fragment,s),Q(c),k=!1},d(s){s&&d(o),M(e,s),s&&d(i),s&&d(r),M(n,s),s&&d(l),c&&c.d(s),s&&d(_)}}}function ie(t,e,o){let i=U(),n=s=>s?"Hide":"Show",{showExtraLinks:r=!1}=e,{showQuickDropLinks:l=!1}=e;function _(){L("storeitems","toggleShowExtraLinks"),o(0,r=!r),z("showExtraLinks",r),i("showExtraLinks",r)}function k(){L("storeitems","toggleShowQuickDropLinks"),o(1,l=!l),z("showQuickDropLinks",l),i("showQuickDropLinks",l)}function c(){L("storeitems","selectLocked"),i("selectLocked")}return t.$$set=s=>{"showExtraLinks"in s&&o(0,r=s.showExtraLinks),"showQuickDropLinks"in s&&o(1,l=s.showQuickDropLinks)},[r,l,n,_,k,c]}var nt=class extends V{constructor(e){super(),P(this,e,ie,re,H,{showExtraLinks:0,showQuickDropLinks:1})}},Vt=nt;var rt=0;function se(t,e){if(e.item_id!==13699)return e.item_name;let o=t.find(i=>i.value===String(e.inv_id));return o?bt(o.parentNode.parentNode.children[2]):e.item_name}async function le(t){let e=await v();return e.items?Tt(Lt(e.items).map(([o,i])=>[o,{...i,item_name:se(t,i)}])):{}}function ce(t){return rt||(rt=le(t)),rt}async function it(){let t=A();if(!t.length)return[];let e=await ce(t);return t.map(o=>[$(o).cells[2],e[o.value]]).filter(([,o])=>o)}function fe(t,e){return t[e]=(t[e]||0)+1,t}function ue(t){return{...t.map(([,e])=>e.item_id).reduce(fe,{}),13699:1}}var pe=t=>` data-tooltip="INSTANTLY ${t} THE ITEM. NO REFUNDS OR DO-OVERS! Use at own risk."`,qt=(t,e,o)=>` [<button class="fshStoreItemsButton ${t}"${e}>${o}</button>]`,Gt=(t,e,o)=>qt(`${t} actionButton tooltip-multiline fshNoWrap`,pe(e),`Quick ${o}`),Wt=(t,e,o)=>`[<a href="${t}"${e}>${o}</a>]`;function de(t){return t.bound?'<span class="aHSpacer"></span>':Wt(`${dt}${encodeURIComponent(t.item_name)}`,"","AH")}var ke=t=>Wt(`${kt}items${pt}view&item_id=${t.item_id}`,' target="_blank"',"UFSG"),he=(t,e,o)=>t[2]&&e[o.item_id]>1,_e=(t,e)=>t[3]&&(!e.bound||e.guild_tag!==-1),ge=(t,e)=>t[4]&&e.guild_tag===-1;function be(t,e){return e[0]()?t+e[1]():t}function we(t,e,o){return[[()=>t[0],()=>`${de(o)} ${ke(o)}`],[()=>!0,()=>`&nbsp;${o.item_name}`],[()=>he(t,e,o),()=>qt("fshBlack","","Check All")],[()=>_e(t,o),()=>Gt("fshBlue","SENDS","Send")],[()=>ge(t,o),()=>Gt("fshRed","DROP","Drop")]]}function Le(t,e,[o,i]){let n=o;t[1]&&(n.className=ut[i.rarity].clas);let r=we(t,e,i).reduce(be,"");n.innerHTML!==r&&(n.innerHTML=r)}async function S(t){let e=await it(),o=t[2]?ue(e):[];_t(3,yt,[[3,e,0,gt(Le,t,o)]])}function xe(t){let[e]=document.forms;return new Vt({props:{showExtraLinks:t[0],showQuickDropLinks:t[4]},target:e.parentNode.children[5].children[0]})}async function $e(){let t=N();if(!t.length)return;let e=await v();!e.items||t.map(o=>[o,e.items[o.value]]).filter(([,o])=>o).forEach(([o,i])=>{o.checked=!o.disabled&&i.guild_tag!==-1})}function st(t){let e=xe(t);e.$on("showExtraLinks",o=>{t[0]=o.detail,S(t)}),e.$on("showQuickDropLinks",o=>{t[4]=o.detail,S(t)}),e.$on("selectLocked",()=>{$e()})}function ve(){if($t()||!y())return;let e=Pt.map(o=>ht(o));Qt(),st(e),e.some(o=>o)&&S(e),xt(wt(),ot)}function lt(t,e){return G({subcmd:"sendtofolder",folder_id:t,folderItem:e})}function ct(t,e){return Bt(e,t).then(()=>({r:e}))}function Se(t,e){return j(lt,ct,t,e)}function Yt(t,e,o){let i=t.slice();return i[5]=e[o],i}function zt(t){let e,o=t[5].name+"",i,n;return{c(){e=h("option"),i=b(o),e.__value=n=t[5].id,e.value=e.__value},m(r,l){p(r,e,l),g(e,i)},p(r,l){l&1&&o!==(o=r[5].name+"")&&E(i,o),l&1&&n!==(n=r[5].id)&&(e.__value=n,e.value=e.__value)},d(r){r&&d(e)}}}function De(t){let e,o,i,n,r,l,_,k,c,s,u,w=t[0],a=[];for(let m=0;m<w.length;m+=1)a[m]=zt(Yt(t,w,m));return{c(){e=h("tr"),o=h("td"),i=h("span"),i.textContent="Move selected items to:",n=R(),r=h("select");for(let m=0;m<a.length;m+=1)a[m].c();l=R(),_=h("span"),_.textContent="\xA0",k=R(),c=h("button"),c.textContent="Move",I(r,"class","customselect"),t[1]===void 0&&Et(()=>t[3].call(r)),I(c,"class","custombutton"),I(c,"type","button"),I(o,"class","fshCenter")},m(m,D){p(m,e,D),g(e,o),g(o,i),g(o,n),g(o,r);for(let f=0;f<a.length;f+=1)a[f].m(r,null);X(r,t[1]),g(o,l),g(o,_),g(o,k),g(o,c),s||(u=[K(r,"change",t[3]),K(c,"click",t[2])],s=!0)},p(m,[D]){if(D&1){w=m[0];let f;for(f=0;f<w.length;f+=1){let mt=Yt(m,w,f);a[f]?a[f].p(mt,D):(a[f]=zt(mt),a[f].c(),a[f].m(r,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=w.length}D&3&&X(r,m[1])},i:J,o:J,d(m){m&&d(e),Dt(a,m),s=!1,St(u)}}}function Ce(t,e,o){let i=U(),{folders:n}=e,r;function l(){i("move",r)}function _(){r=It(this),o(1,r),o(0,n)}return t.$$set=k=>{"folders"in k&&o(0,n=k.folders)},[n,r,l,_]}var at=class extends V{constructor(e){super(),P(this,e,Ce,De,H,{folders:0})}},en=at;export{y as a,A as b,Se as c,en as d,N as e,et as f,ve as g};
//# sourceMappingURL=chunk-44T5TKVD.js.map
